(function(a,b){function cA(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cx(a){if(!cm[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){cn||(cn=c.createElement("iframe"),cn.frameBorder=cn.width=cn.height=0),b.appendChild(cn);if(!co||!cn.createElement)co=(cn.contentWindow||cn.contentDocument).document,co.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),co.close();d=co.createElement(a),co.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cn)}cm[a]=e}return cm[a]}function cw(a,b){var c={};f.each(cs.concat.apply([],cs.slice(0,b)),function(){c[this]=a});return c}function cv(){ct=b}function cu(){setTimeout(cv,0);return ct=f.now()}function cl(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ck(){try{return new a.XMLHttpRequest}catch(b){}}function ce(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function cd(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function cc(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bG.test(a)?d(a,e):cc(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)cc(a+"["+e+"]",b[e],c,d);else d(a,b)}function cb(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function ca(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bV,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=ca(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=ca(a,c,d,e,"*",g));return l}function b_(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bR),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bE(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bz:bA;if(d>0){c!=="border"&&f.each(e,function(){c||(d-=parseFloat(f.css(a,"padding"+this))||0),c==="margin"?d+=parseFloat(f.css(a,c+this))||0:d-=parseFloat(f.css(a,"border"+this+"Width"))||0});return d+"px"}d=bB(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0,c&&f.each(e,function(){d+=parseFloat(f.css(a,"padding"+this))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+this+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+this))||0)});return d+"px"}function br(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bi,"")),b.parentNode&&b.parentNode.removeChild(b)}function bq(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bp(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bp)}function bp(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bo(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bn(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}}function bm(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)}h.data&&(h.data=f.extend({},h.data))}}function bl(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function X(a){var b=Y.split(" "),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function W(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(R.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function V(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function N(){return!0}function M(){return!1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function K(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(K,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/\d/,n=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,o=/^[\],:{}\s]*$/,p=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,q=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,s=/(webkit)[ \/]([\w.]+)/,t=/(opera)(?:.*version)?[ \/]([\w.]+)/,u=/(msie) ([\w.]+)/,v=/(mozilla)(?:.*? rv:([\w.]+))?/,w=/-([a-z]|[0-9])/ig,x=/^-ms-/,y=function(a,b){return(b+"").toUpperCase()},z=d.userAgent,A,B,C,D=Object.prototype.toString,E=Object.prototype.hasOwnProperty,F=Array.prototype.push,G=Array.prototype.slice,H=String.prototype.trim,I=Array.prototype.indexOf,J={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=n.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7",length:0,size:function(){return this.length},toArray:function(){return G.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?F.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),B.add(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(G.apply(this,arguments),"slice",G.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:F,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;B.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").unbind("ready")}},bindReady:function(){if(!B){B=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",C,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",C),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&K()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNumeric:function(a){return a!=null&&m.test(a)&&!isNaN(a)},type:function(a){return a==null?String(a):J[D.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!E.call(a,"constructor")&&!E.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||E.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(o.test(b.replace(p,"@").replace(q,"]").replace(r,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(x,"ms-").replace(w,y)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:H?function(a){return a==null?"":H.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?F.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(I)return I.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=G.call(arguments,2),g=function(){return a.apply(c,f.concat(G.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=s.exec(a)||t.exec(a)||u.exec(a)||a.indexOf("compatible")<0&&v.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){J["[object "+b+"]"]=b.toLowerCase()}),A=e.uaMatch(z),A.browser&&(e.browser[A.browser]=!0,e.browser.version=A.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?C=function(){c.removeEventListener("DOMContentLoaded",C,!1),e.ready()}:c.attachEvent&&(C=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",C),e.ready())}),typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return e});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g)},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;for(;c&&l<k;l++)if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b,(!e||e===!0)&&o.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c));return this},fire:function(){o.fireWith(this,arguments);return this},fired:function(){return!!e}};return o};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){return i.done.apply(i,arguments).fail.apply(i,arguments)},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var a=c.createElement("div"),b=c.documentElement,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;a.setAttribute("className","t"),a.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/><nav></nav>",d=a.getElementsByTagName("*"),e=a.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=a.getElementsByTagName("input")[0],k={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,unknownElems:!!a.getElementsByTagName("nav").length,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:a.className!=="t",enctype:!!c.createElement("form").enctype,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,k.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,k.optDisabled=!h.disabled;try{delete a.test}catch(v){k.deleteExpando=!1}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function(){k.noCloneEvent=!1}),a.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),k.radioValue=i.value==="t",i.setAttribute("checked","checked"),a.appendChild(i),l=c.createDocumentFragment(),l.appendChild(a.lastChild),k.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,a.innerHTML="",a.style.width=a.style.paddingLeft="1px",m=c.getElementsByTagName("body")[0],o=c.createElement(m?"div":"body"),p={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},m&&f.extend(p,{position:"absolute",left:"-999px",top:"-999px"});for(t in p)o.style[t]=p[t];o.appendChild(a),n=m||b,n.insertBefore(o,n.firstChild),k.appendChecked=i.checked,k.boxModel=a.offsetWidth===2,"zoom"in a.style&&(a.style.display="inline",a.style.zoom=1,k.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",k.shrinkWrapBlocks=a.offsetWidth!==2),a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",q=a.getElementsByTagName("td"),u=q[0].offsetHeight===0,q[0].style.display="",q[1].style.display="none",k.reliableHiddenOffsets=u&&q[0].offsetHeight===0,a.innerHTML="",c.defaultView&&c.defaultView.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",a.appendChild(j),k.reliableMarginRight=(parseInt((c.defaultView.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);if(a.attachEvent)for(t in{submit:1,change:1,focusin:1})s="on"+t,u=s in a,u||(a.setAttribute(s,"return;"),u=typeof a[s]=="function"),k[t+"Bubbles"]=u;f(function(){var a,b,d,e,g,h,i=1,j="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",l="visibility:hidden;border:0;",n="style='"+j+"border:5px solid #000;padding:0;'",p="<div "+n+"><div></div></div>"+"<table "+n+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>";m=c.getElementsByTagName("body")[0];!m||(a=c.createElement("div"),a.style.cssText=l+"width:0;height:0;position:static;top:0;margin-top:"+i+"px",m.insertBefore(a,m.firstChild),o=c.createElement("div"),o.style.cssText=j+l,o.innerHTML=p,a.appendChild(o),b=o.firstChild,d=b.firstChild,g=b.nextSibling.firstChild.firstChild,h={doesNotAddBorder:d.offsetTop!==5,doesAddBorderForTableAndCells:g.offsetTop===5},d.style.position="fixed",d.style.top="20px",h.fixedPosition=d.offsetTop===20||d.offsetTop===15,d.style.position=d.style.top="",b.style.overflow="hidden",b.style.position="relative",h.subtractsBorderForOverflowNotVisible=d.offsetTop===-5,h.doesNotIncludeMarginInBodyOffset=m.offsetTop!==i,m.removeChild(a),o=a=null,f.extend(k,h))}),o.innerHTML="",n.removeChild(o),o=l=g=h=m=j=a=i=null;return k}(),f.boxModel=f.support.boxModel;var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[f.expando]:a[f.expando]&&f.expando,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[f.expando]=n=++f.uuid:n=f.expando),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c])return g.events;k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[f.expando]:f.expando;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)?b=b:b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" "));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[f.expando]:a.removeAttribute?a.removeAttribute(f.expando):a[f.expando]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;if(typeof a=="undefined"){if(this.length){h=f.data(this[0]);if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var i=0,j=e.length;i<j;i++)g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]));f._data(this[0],"parsedAttrs",!0)}}return h}if(typeof a=="object")return this.each(function(){f.data(this,a)});d=a.split("."),d[1]=d[1]?"."+d[1]:"";if(c===b){h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h));return h===b&&d[1]?this.data(d[0]):h}return this.each(function(){var b=f(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b)return f.queue(this[0],a);return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);m();return d.promise()}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];if(!arguments.length){if(g){c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type];if(c&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}return b}e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}if(j&&!h.length&&i.length)return f(i[g]).val();return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!a||j===3||j===8||j===2)return b;if(e&&c in f.attrFn)return f(a)[c](d);if(!("getAttribute"in a))return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return b}if(h&&"set"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,""+d);return d}if(h&&"get"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g},removeAttr:function(a,b){var c,d,e,g,h=0;if(a.nodeType===1){d=(b||"").split(p),g=d.length;for(;h<g;h++)e=d[h].toLowerCase(),c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1)}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button"))return w.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2)return b;h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/\.(.*)$/,A=/^(?:textarea|input|select)$/i,B=/\./g,C=/ /g,D=/[^\w\s.|`]/g,E=/^([^\.]*)?(?:\.(.+))?$/,F=/\bhover(\.\S+)?/,G=/^key/,H=/^(?:mouse|contextmenu)|click/,I=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,J=function(a){var b=I.exec(a);b&&
(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},K=function(a,b){return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||a.id===b[2])&&(!b[3]||b[3].test(a.className))},L=function(a){return f.event.special.hover?a:a.replace(F,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=L(c).split(" ");for(k=0;k<c.length;k++){l=E.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,namespace:n.join(".")},p),g&&(o.quick=J(g),!o.quick&&f.expr.match.POS.test(g)&&(o.isPositional=!0)),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d){var e=f.hasData(a)&&f._data(a),g,h,i,j,k,l,m,n,o,p,q;if(!!e&&!!(m=e.events)){b=L(b||"").split(" ");for(g=0;g<b.length;g++){h=E.exec(b[g])||[],i=h[1],j=h[2];if(!i){j=j?"."+j:"";for(l in m)f.event.remove(a,l+j,c,d);return}n=f.event.special[i]||{},i=(d?n.delegateType:n.bindType)||i,p=m[i]||[],k=p.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;if(c||j||d||n.remove)for(l=0;l<p.length;l++){q=p[l];if(!c||c.guid===q.guid)if(!j||j.test(q.namespace))if(!d||d===q.selector||d==="**"&&q.selector)p.splice(l--,1),q.selector&&p.delegateCount--,n.remove&&n.remove.call(a,q)}else p.length=0;p.length===0&&k!==p.length&&((!n.teardown||n.teardown.call(a,j)===!1)&&f.removeEvent(a,i,e.handle),delete m[i])}f.isEmptyObject(m)&&(o=e.handle,o&&(o.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"",(g||!e)&&c.preventDefault();if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,n=null;for(m=e.parentNode;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length;l++){m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d);if(c.isPropagationStopped())break}c.type=h,c.isDefaultPrevented()||(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=(f.event.special[c.type]||{}).handle,j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click"))for(m=c.target;m!=this;m=m.parentNode||this){o={},q=[];for(k=0;k<e;k++)r=d[k],s=r.selector,t=o[s],r.isPositional?t=(t||(o[s]=f(s))).index(m)>=0:t===b&&(t=o[s]=r.quick?K(m,r.quick):f(m).is(s)),t&&q.push(r);q.length&&j.push({elem:m,matches:q})}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){p=j[k],c.currentTarget=p.elem;for(l=0;l<p.matches.length&&!c.isImmediatePropagationStopped();l++){r=p.matches[l];if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace))c.data=r.data,c.handleObj=r,n=(i||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))}}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement wheelDelta".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},focus:{delegateType:"focusin",noBubble:!0},blur:{delegateType:"focusout",noBubble:!0},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?N:M):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=N;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=N;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=N,this.stopPropagation()},isDefaultPrevented:M,isPropagationStopped:M,isImmediatePropagationStopped:M},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]=f.event.special[b]={delegateType:b,bindType:b,handle:function(a){var b=this,c=a.relatedTarget,d=a.handleObj,e=d.selector,g,h;if(!c||d.origType===a.type||c!==b&&!f.contains(b,c))g=a.type,a.type=d.origType,h=d.handler.apply(this,arguments),a.type=g;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&f.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(A.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;A.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return A.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=M;else if(!e)return this;g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;d===!1&&(d=M);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.bind(b,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),G.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),H.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw"Syntax error, unrecognized expression: "+a};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var O=/Until$/,P=/^(?:parents|prevUntil|prevAll)/,Q=/,/,R=/^.[^:#\[\.,]*$/,S=Array.prototype.slice,T=f.expr.match.POS,U={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(W(this,a,!1),"not",a)},filter:function(a){return this.pushStack(W(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?T.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=T.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(V(c[0])||V(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c),g=S.call(arguments);O.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!U[a]?f.unique(e):e,(this.length>1||Q.test(d))&&P.test(a)&&(e=e.reverse());return this.pushStack(e,a,g.join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var Y="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",Z=/ jQuery\d+="(?:\d+|null)"/g,$=/^\s+/,_=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,ba=/<([\w:]+)/,bb=/<tbody/i,bc=/<|&#?\w+;/,bd=/<(?:script|style)/i,be=/<(?:script|object|embed|option|style)/i,bf=new RegExp("<(?:"+Y.replace(" ","|")+")","i"),bg=/checked\s*(?:[^=]|=\s*.checked.)/i,bh=/\/(java|ecma)script/i,bi=/^\s*<!(?:\[CDATA\[|\-\-)/,bj={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bk=X(c);bj.optgroup=bj.option,bj.tbody=bj.tfoot=bj.colgroup=bj.caption=bj.thead,bj.th=bj.td,f.support.htmlSerialize||(bj._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))});if(typeof a!="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));return f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){f(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after"
,arguments);a.push.apply(a,f(arguments[0]).toArray());return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Z,""):null;if(typeof a=="string"&&!bd.test(a)&&(f.support.leadingWhitespace||!$.test(a))&&!bj[(ba.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(_,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bg.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bl(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,br)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!be.test(j)&&(f.support.checkClone||!bg.test(j))&&!f.support.unknownElems&&bf.test(j)&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d=a.cloneNode(!0),e,g,h;if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bn(a,d),e=bo(a),g=bo(d);for(h=0;e[h];++h)g[h]&&bn(e[h],g[h])}if(b){bm(a,d);if(c){e=bo(a),g=bo(d);for(h=0;e[h];++h)bm(e[h],g[h])}}e=g=null;return d},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!bc.test(k))k=b.createTextNode(k);else{k=k.replace(_,"<$1></$2>");var l=(ba.exec(k)||["",""])[1].toLowerCase(),m=bj[l]||bj._default,n=m[0],o=b.createElement("div");b===c?bk.appendChild(o):X(b).appendChild(o),o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=bb.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&$.test(k)&&o.insertBefore(b.createTextNode($.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof (r=k.length)=="number")for(i=0;i<r;i++)bq(k[i]);else bq(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||bh.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bs=/alpha\([^)]*\)/i,bt=/opacity=([^)]*)/,bu=/([A-Z]|^ms)/g,bv=/^-?\d+(?:px)?$/i,bw=/^-?\d/,bx=/^([\-+])=([\-+.\de]+)/,by={position:"absolute",visibility:"hidden",display:"block"},bz=["Left","Right"],bA=["Top","Bottom"],bB,bC,bD;f.fn.css=function(a,c){if(arguments.length===2&&c===b)return this;return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bB(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=bx.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bB)return bB(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0)return bE(a,b,d);f.swap(a,by,function(){e=bE(a,b,d)});return e}},set:function(a,b){if(!bv.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bt.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bs,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bs.test(g)?g.replace(bs,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bB(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bC=function(a,c){var d,e,g;c=c.replace(bu,"-$1").toLowerCase();if(!(e=a.ownerDocument.defaultView))return b;if(g=e.getComputedStyle(a,null))d=g.getPropertyValue(c),d===""&&!f.contains(a.ownerDocument.documentElement,a)&&(d=f.style(a,c));return d}),c.documentElement.currentStyle&&(bD=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f===null&&g&&(e=g[b])&&(f=e),!bv.test(f)&&bw.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),bB=bC||bD,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bF=/%20/g,bG=/\[\]$/,bH=/\r?\n/g,bI=/#.*$/,bJ=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bK=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bL=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bM=/^(?:GET|HEAD)$/,bN=/^\/\//,bO=/\?/,bP=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bQ=/^(?:select|textarea)/i,bR=/\s+/,bS=/([?&])_=[^&]*/,bT=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bU=f.fn.load,bV={},bW={},bX,bY,bZ=["*/"]+["*"];try{bX=e.href}catch(b$){bX=c.createElement("a"),bX.href="",bX=bX.href}bY=bT.exec(bX.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bU)return bU.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bP,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bQ.test(this.nodeName)||bK.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bH,"\r\n")}}):{name:b.name,value:c.replace(bH,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.bind(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?cb(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),cb(a,b);return a},ajaxSettings:{url:bX,isLocal:bL.test(bY[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bZ},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:b_(bV),ajaxTransport:b_(bW),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?cd(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=ce(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bJ.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bI,"").replace(bN,bY[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bR),d.crossDomain==null&&(r=bT.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bY[1]&&r[2]==bY[2]&&(r[3]||(r[1]==="http:"?80:443))==(bY[3]||(bY[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),ca(bV,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bM.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bO.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bS,"$1_="+x);d.url=y+(y===d.url?(bO.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bZ+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=ca(bW,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){s<2?w(-1,z):f.error(z)}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)cc(g,a[g],c,e);return d.join("&").replace(bF,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cf=f.now(),cg=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cf++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cg.test(b.url)||e&&cg.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(cg,l),b.url===j&&(e&&(k=k.replace(cg,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ch=a.ActiveXObject?function(){for(var a in cj)cj[a](0,1)}:!1,ci=0,cj;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ck()||cl()}:ck,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ch&&delete cj[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++ci,ch&&(cj||(cj={},f(a).unload(ch)),cj[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cm={},cn,co,cp=/^(?:toggle|show|hide)$/,cq=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cr,cs=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],ct;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cw("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cx(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cw("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cw("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cx(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cp.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=cq.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""));return!0}var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:cw("show",1),slideUp:cw("hide",1),slideToggle:cw("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=ct||cu(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)},h()&&f.timers.push(h)&&!cr&&(cr=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=ct||cu(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cr),cr=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now))}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cy=/^t(?:able|d|h)$/i,cz=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cA(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cy.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cz.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cz.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e)return null;g=cA(e);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cA(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null},f.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f})(window);

!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b="length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function qa(){}qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function ra(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function ta(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++)ga(a,b[d],c);return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=va(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,ya(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&ra(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){
return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var aa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ba=/<([\w:]+)/,ca=/<|&#?\w+;/,da=/<(?:script|style|link)/i,ea=/checked\s*(?:[^=]|=\s*.checked.)/i,fa=/^$|\/(?:java|ecma)script/i,ga=/^true\/(.*)/,ha=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ia={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option,ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead,ia.th=ia.td;function ja(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function ka(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function la(a){var b=ga.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function ma(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function na(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function oa(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pa(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=oa(h),f=oa(a),d=0,e=f.length;e>d;d++)pa(f[d],g[d]);if(b)if(c)for(f=f||oa(a),g=g||oa(h),d=0,e=f.length;e>d;d++)na(f[d],g[d]);else na(a,h);return g=oa(h,"script"),g.length>0&&ma(g,!i&&oa(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(ca.test(e)){f=f||k.appendChild(b.createElement("div")),g=(ba.exec(e)||["",""])[1].toLowerCase(),h=ia[g]||ia._default,f.innerHTML=h[1]+e.replace(aa,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=oa(k.appendChild(e),"script"),i&&ma(f),c)){j=0;while(e=f[j++])fa.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(oa(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&ma(oa(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(oa(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!da.test(a)&&!ia[(ba.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(aa,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(oa(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(oa(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&ea.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(oa(c,"script"),ka),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,oa(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,la),j=0;g>j;j++)h=f[j],fa.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(ha,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qa,ra={};function sa(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function ta(a){var b=l,c=ra[a];return c||(c=sa(a,b),"none"!==c&&c||(qa=(qa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qa[0].contentDocument,b.write(),b.close(),c=sa(a,b),qa.detach()),ra[a]=c),c}var ua=/^margin/,va=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wa=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};function xa(a,b,c){var d,e,f,g,h=a.style;return c=c||wa(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),va.test(g)&&ua.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function ya(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),f.removeChild(c),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var za=/^(none|table(?!-c[ea]).+)/,Aa=new RegExp("^("+Q+")(.*)$","i"),Ba=new RegExp("^([+-])=("+Q+")","i"),Ca={position:"absolute",visibility:"hidden",display:"block"},Da={letterSpacing:"0",fontWeight:"400"},Ea=["Webkit","O","Moz","ms"];function Fa(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Ea.length;while(e--)if(b=Ea[e]+c,b in a)return b;return d}function Ga(a,b,c){var d=Aa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Ha(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ia(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wa(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xa(a,b,f),(0>e||null==e)&&(e=a.style[b]),va.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Ha(a,b,c||(g?"border":"content"),d,f)+"px"}function Ja(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",ta(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xa(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fa(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ba.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fa(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xa(a,b,d)),"normal"===e&&b in Da&&(e=Da[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?za.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Ca,function(){return Ia(a,b,d)}):Ia(a,b,d):void 0},set:function(a,c,d){var e=d&&wa(a);return Ga(a,c,d?Ha(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=ya(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ua.test(a)||(n.cssHooks[a+b].set=Ga)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wa(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Ja(this,!0)},hide:function(){return Ja(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Ka(a,b,c,d,e){return new Ka.prototype.init(a,b,c,d,e)}n.Tween=Ka,Ka.prototype={constructor:Ka,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ka.propHooks[this.prop];return a&&a.get?a.get(this):Ka.propHooks._default.get(this)},run:function(a){var b,c=Ka.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ka.propHooks._default.set(this),this}},Ka.prototype.init.prototype=Ka.prototype,Ka.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Ka.propHooks.scrollTop=Ka.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Ka.prototype.init,n.fx.step={};var La,Ma,Na=/^(?:toggle|show|hide)$/,Oa=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pa=/queueHooks$/,Qa=[Va],Ra={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Oa.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Oa.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sa(){return setTimeout(function(){La=void 0}),La=n.now()}function Ta(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ua(a,b,c){for(var d,e=(Ra[b]||[]).concat(Ra["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Va(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||ta(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Na.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?ta(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ua(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wa(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xa(a,b,c){var d,e,f=0,g=Qa.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=La||Sa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:La||Sa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wa(k,j.opts.specialEasing);g>f;f++)if(d=Qa[f].call(j,a,k,j.opts))return d;return n.map(k,Ua,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xa,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Ra[c]=Ra[c]||[],Ra[c].unshift(b)},prefilter:function(a,b){b?Qa.unshift(a):Qa.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xa(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pa.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Ta(b,!0),a,d,e)}}),n.each({slideDown:Ta("show"),slideUp:Ta("hide"),slideToggle:Ta("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(La=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),La=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ma||(Ma=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Ma),Ma=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Ya,Za,$a=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Za:Ya)),
void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Za={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$a[b]||n.find.attr;$a[b]=function(a,b,d){var e,f;return d||(f=$a[b],$a[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$a[b]=f),e}});var _a=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_a.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ab=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ab," ").indexOf(b)>=0)return!0;return!1}});var bb=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cb=n.now(),db=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var eb=/#.*$/,fb=/([?&])_=[^&]*/,gb=/^(.*?):[ \t]*([^\r\n]*)$/gm,hb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ib=/^(?:GET|HEAD)$/,jb=/^\/\//,kb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lb={},mb={},nb="*/".concat("*"),ob=a.location.href,pb=kb.exec(ob.toLowerCase())||[];function qb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function rb(a,b,c,d){var e={},f=a===mb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function sb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function tb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function ub(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ob,type:"GET",isLocal:hb.test(pb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?sb(sb(a,n.ajaxSettings),b):sb(n.ajaxSettings,a)},ajaxPrefilter:qb(lb),ajaxTransport:qb(mb),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=gb.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||ob)+"").replace(eb,"").replace(jb,pb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=kb.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===pb[1]&&h[2]===pb[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(pb[3]||("http:"===pb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),rb(lb,k,b,v),2===t)return v;i=n.event&&k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!ib.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(db.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=fb.test(d)?d.replace(fb,"$1_="+cb++):d+(db.test(d)?"&":"?")+"_="+cb++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+nb+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=rb(mb,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=tb(k,v,f)),u=ub(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var vb=/%20/g,wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;function Ab(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||wb.test(a)?d(a,e):Ab(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Ab(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Ab(c,a[c],b,e);return d.join("&").replace(vb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(xb,"\r\n")}}):{name:b.name,value:c.replace(xb,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Bb=0,Cb={},Db={0:200,1223:204},Eb=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Cb)Cb[a]()}),k.cors=!!Eb&&"withCredentials"in Eb,k.ajax=Eb=!!Eb,n.ajaxTransport(function(a){var b;return k.cors||Eb&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Bb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Cb[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Db[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Cb[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Fb=[],Gb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Fb.pop()||n.expando+"_"+cb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Gb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Gb,"$1"+e):b.jsonp!==!1&&(b.url+=(db.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Fb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Hb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Hb)return Hb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Ib=a.document.documentElement;function Jb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Jb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Ib;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ib})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Jb(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=ya(k.pixelPosition,function(a,c){return c?(c=xa(a,b),va.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kb=a.jQuery,Lb=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Lb),b&&a.jQuery===n&&(a.jQuery=Kb),n},typeof b===U&&(a.jQuery=a.$=n),n});


"undefined"==typeof jQuery.migrateMute&&(jQuery.migrateMute=!0),function(a,b,c){function d(c){var d=b.console;f[c]||(f[c]=!0,a.migrateWarnings.push(c),d&&d.warn&&!a.migrateMute&&(d.warn("JQMIGRATE: "+c),a.migrateTrace&&d.trace&&d.trace()))}function e(b,c,e,f){if(Object.defineProperty)try{return void Object.defineProperty(b,c,{configurable:!0,enumerable:!0,get:function(){return d(f),e},set:function(a){d(f),e=a}})}catch(g){}a._definePropertyBroken=!0,b[c]=e}a.migrateVersion="1.4.1";var f={};a.migrateWarnings=[],b.console&&b.console.log&&a.migrateTrace===c&&(a.migrateTrace=!0),a.migrateReset=function(){f={},a.migrateWarnings.length=0},"BackCompat"===document.compatMode&&d("jQuery is not compatible with Quirks Mode");var g=a("<input/>",{size:1}).attr("size")&&a.attrFn,h=a.attr,i=a.attrHooks.value&&a.attrHooks.value.get||function(){return null},j=a.attrHooks.value&&a.attrHooks.value.set||function(){return c},k=/^(?:input|button)$/i,l=/^[238]$/,m=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,n=/^(?:checked|selected)$/i;e(a,"attrFn",g||{},"jQuery.attrFn is deprecated"),a.attr=function(b,e,f,i){var j=e.toLowerCase(),o=b&&b.nodeType;return i&&(h.length<4&&d("jQuery.fn.attr( props, pass ) is deprecated"),b&&!l.test(o)&&(g?e in g:a.isFunction(a.fn[e])))?a(b)[e](f):("type"===e&&f!==c&&k.test(b.nodeName)&&b.parentNode&&d("Can't change the 'type' of an input or button in IE 6/7/8"),!a.attrHooks[j]&&m.test(j)&&(a.attrHooks[j]={get:function(b,d){var e,f=a.prop(b,d);return f===!0||"boolean"!=typeof f&&(e=b.getAttributeNode(d))&&e.nodeValue!==!1?d.toLowerCase():c},set:function(b,c,d){var e;return c===!1?a.removeAttr(b,d):(e=a.propFix[d]||d,e in b&&(b[e]=!0),b.setAttribute(d,d.toLowerCase())),d}},n.test(j)&&d("jQuery.fn.attr('"+j+"') might use property instead of attribute")),h.call(a,b,e,f))},a.attrHooks.value={get:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?i.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value') no longer gets properties"),b in a?a.value:null)},set:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?j.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value', val) no longer sets properties"),void(a.value=b))}};var o,p,q=a.fn.init,r=a.find,s=a.parseJSON,t=/^\s*</,u=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,v=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,w=/^([^<]*)(<[\w\W]+>)([^>]*)$/;a.fn.init=function(b,e,f){var g,h;return b&&"string"==typeof b&&!a.isPlainObject(e)&&(g=w.exec(a.trim(b)))&&g[0]&&(t.test(b)||d("$(html) HTML strings must start with '<' character"),g[3]&&d("$(html) HTML text after last tag is ignored"),"#"===g[0].charAt(0)&&(d("HTML string cannot start with a '#' character"),a.error("JQMIGRATE: Invalid selector string (XSS)")),e&&e.context&&e.context.nodeType&&(e=e.context),a.parseHTML)?q.call(this,a.parseHTML(g[2],e&&e.ownerDocument||e||document,!0),e,f):(h=q.apply(this,arguments),b&&b.selector!==c?(h.selector=b.selector,h.context=b.context):(h.selector="string"==typeof b?b:"",b&&(h.context=b.nodeType?b:e||document)),h)},a.fn.init.prototype=a.fn,a.find=function(a){var b=Array.prototype.slice.call(arguments);if("string"==typeof a&&u.test(a))try{document.querySelector(a)}catch(c){a=a.replace(v,function(a,b,c,d){return"["+b+c+'"'+d+'"]'});try{document.querySelector(a),d("Attribute selector with '#' must be quoted: "+b[0]),b[0]=a}catch(e){d("Attribute selector with '#' was not fixed: "+b[0])}}return r.apply(this,b)};var x;for(x in r)Object.prototype.hasOwnProperty.call(r,x)&&(a.find[x]=r[x]);a.parseJSON=function(a){return a?s.apply(this,arguments):(d("jQuery.parseJSON requires a valid JSON string"),null)},a.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a.browser||(o=a.uaMatch(navigator.userAgent),p={},o.browser&&(p[o.browser]=!0,p.version=o.version),p.chrome?p.webkit=!0:p.webkit&&(p.safari=!0),a.browser=p),e(a,"browser",a.browser,"jQuery.browser is deprecated"),a.boxModel=a.support.boxModel="CSS1Compat"===document.compatMode,e(a,"boxModel",a.boxModel,"jQuery.boxModel is deprecated"),e(a.support,"boxModel",a.support.boxModel,"jQuery.support.boxModel is deprecated"),a.sub=function(){function b(a,c){return new b.fn.init(a,c)}a.extend(!0,b,this),b.superclass=this,b.fn=b.prototype=this(),b.fn.constructor=b,b.sub=this.sub,b.fn.init=function(d,e){var f=a.fn.init.call(this,d,e,c);return f instanceof b?f:b(f)},b.fn.init.prototype=b.fn;var c=b(document);return d("jQuery.sub() is deprecated"),b},a.fn.size=function(){return d("jQuery.fn.size() is deprecated; use the .length property"),this.length};var y=!1;a.swap&&a.each(["height","width","reliableMarginRight"],function(b,c){var d=a.cssHooks[c]&&a.cssHooks[c].get;d&&(a.cssHooks[c].get=function(){var a;return y=!0,a=d.apply(this,arguments),y=!1,a})}),a.swap=function(a,b,c,e){var f,g,h={};y||d("jQuery.swap() is undocumented and deprecated");for(g in b)h[g]=a.style[g],a.style[g]=b[g];f=c.apply(a,e||[]);for(g in b)a.style[g]=h[g];return f},a.ajaxSetup({converters:{"text json":a.parseJSON}});var z=a.fn.data;a.fn.data=function(b){var e,f,g=this[0];return!g||"events"!==b||1!==arguments.length||(e=a.data(g,b),f=a._data(g,b),e!==c&&e!==f||f===c)?z.apply(this,arguments):(d("Use of jQuery.fn.data('events') is deprecated"),f)};var A=/\/(java|ecma)script/i;a.clean||(a.clean=function(b,c,e,f){c=c||document,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,d("jQuery.clean() is deprecated");var g,h,i,j,k=[];if(a.merge(k,a.buildFragment(b,c).childNodes),e)for(i=function(a){return!a.type||A.test(a.type)?f?f.push(a.parentNode?a.parentNode.removeChild(a):a):e.appendChild(a):void 0},g=0;null!=(h=k[g]);g++)a.nodeName(h,"script")&&i(h)||(e.appendChild(h),"undefined"!=typeof h.getElementsByTagName&&(j=a.grep(a.merge([],h.getElementsByTagName("script")),i),k.splice.apply(k,[g+1,0].concat(j)),g+=j.length));return k});var B=a.event.add,C=a.event.remove,D=a.event.trigger,E=a.fn.toggle,F=a.fn.live,G=a.fn.die,H=a.fn.load,I="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",J=new RegExp("\\b(?:"+I+")\\b"),K=/(?:^|\s)hover(\.\S+|)\b/,L=function(b){return"string"!=typeof b||a.event.special.hover?b:(K.test(b)&&d("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),b&&b.replace(K,"mouseenter$1 mouseleave$1"))};a.event.props&&"attrChange"!==a.event.props[0]&&a.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),a.event.dispatch&&e(a.event,"handle",a.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),a.event.add=function(a,b,c,e,f){a!==document&&J.test(b)&&d("AJAX events should be attached to document: "+b),B.call(this,a,L(b||""),c,e,f)},a.event.remove=function(a,b,c,d,e){C.call(this,a,L(b)||"",c,d,e)},a.each(["load","unload","error"],function(b,c){a.fn[c]=function(){var a=Array.prototype.slice.call(arguments,0);return"load"===c&&"string"==typeof a[0]?H.apply(this,a):(d("jQuery.fn."+c+"() is deprecated"),a.splice(0,0,c),arguments.length?this.bind.apply(this,a):(this.triggerHandler.apply(this,a),this))}}),a.fn.toggle=function(b,c){if(!a.isFunction(b)||!a.isFunction(c))return E.apply(this,arguments);d("jQuery.fn.toggle(handler, handler...) is deprecated");var e=arguments,f=b.guid||a.guid++,g=0,h=function(c){var d=(a._data(this,"lastToggle"+b.guid)||0)%g;return a._data(this,"lastToggle"+b.guid,d+1),c.preventDefault(),e[d].apply(this,arguments)||!1};for(h.guid=f;g<e.length;)e[g++].guid=f;return this.click(h)},a.fn.live=function(b,c,e){return d("jQuery.fn.live() is deprecated"),F?F.apply(this,arguments):(a(this.context).on(b,this.selector,c,e),this)},a.fn.die=function(b,c){return d("jQuery.fn.die() is deprecated"),G?G.apply(this,arguments):(a(this.context).off(b,this.selector||"**",c),this)},a.event.trigger=function(a,b,c,e){return c||J.test(a)||d("Global events are undocumented and deprecated"),D.call(this,a,b,c||document,e)},a.each(I.split("|"),function(b,c){a.event.special[c]={setup:function(){var b=this;return b!==document&&(a.event.add(document,c+"."+a.guid,function(){a.event.trigger(c,Array.prototype.slice.call(arguments,1),b,!0)}),a._data(this,c,a.guid++)),!1},teardown:function(){return this!==document&&a.event.remove(document,c+"."+a._data(this,c)),!1}}}),a.event.special.ready={setup:function(){this===document&&d("'ready' event is deprecated")}};var M=a.fn.andSelf||a.fn.addBack,N=a.fn.find;if(a.fn.andSelf=function(){return d("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),M.apply(this,arguments)},a.fn.find=function(a){var b=N.apply(this,arguments);return b.context=this.context,b.selector=this.selector?this.selector+" "+a:a,b},a.Callbacks){var O=a.Deferred,P=[["resolve","done",a.Callbacks("once memory"),a.Callbacks("once memory"),"resolved"],["reject","fail",a.Callbacks("once memory"),a.Callbacks("once memory"),"rejected"],["notify","progress",a.Callbacks("memory"),a.Callbacks("memory")]];a.Deferred=function(b){var c=O(),e=c.promise();return c.pipe=e.pipe=function(){var b=arguments;return d("deferred.pipe() is deprecated"),a.Deferred(function(d){a.each(P,function(f,g){var h=a.isFunction(b[f])&&b[f];c[g[1]](function(){var b=h&&h.apply(this,arguments);b&&a.isFunction(b.promise)?b.promise().done(d.resolve).fail(d.reject).progress(d.notify):d[g[0]+"With"](this===e?d.promise():this,h?[b]:arguments)})}),b=null}).promise()},c.isResolved=function(){return d("deferred.isResolved is deprecated"),"resolved"===c.state()},c.isRejected=function(){return d("deferred.isRejected is deprecated"),"rejected"===c.state()},b&&b.call(c,c),c}}}(jQuery,window);

(function(t,e){function i(e,i){var n,o,a,r=e.nodeName.toLowerCase();return"area"===r?(n=e.parentNode,o=n.name,e.href&&o&&"map"===n.nodeName.toLowerCase()?(a=t("img[usemap=#"+o+"]")[0],!!a&&s(a)):!1):(/input|select|textarea|button|object/.test(r)?!e.disabled:"a"===r?e.href||i:i)&&s(e)}function s(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var n=0,o=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:false,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:false,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:false,SPACE:32,TAB:9,UP:false}}),t.fn.extend({focus:function(e){return function(i,s){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),s&&s.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var s,n,o=t(this[0]);o.length&&o[0]!==document;){if(s=o.css("position"),("absolute"===s||"relative"===s||"fixed"===s)&&(n=parseInt(o.css("zIndex"),10),!isNaN(n)&&0!==n))return n;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var s=t.attr(e,"tabindex"),n=isNaN(s);return(n||s>=0)&&i(e,!n)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,s){function n(e,i,s,n){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),n&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===s?["Left","Right"]:["Top","Bottom"],a=s.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+s]=function(i){return i===e?r["inner"+s].call(this):this.each(function(){t(this).css(a,n(this,i)+"px")})},t.fn["outer"+s]=function(e,i){return"number"!=typeof e?r["outer"+s].call(this,e):this.each(function(){t(this).css(a,n(this,e,!0,i)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i){var s,n=t.plugins[e];if(n&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(s=0;n.length>s;s++)t.options[n[s][0]]&&n[s][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return e[s]>0?!0:(e[s]=1,n=e[s]>0,e[s]=0,n)}})})(jQuery),function(t,e){var i=0,s=Array.prototype.slice,n=t.cleanData;t.cleanData=function(e){for(var i,s=0;null!=(i=e[s]);s++)try{t(i).triggerHandler("remove")}catch(o){}n(e)},t.widget=function(i,s,n){var o,a,r,h,l={},c=i.split(".")[0];i=i.split(".")[1],o=c+"-"+i,n||(n=s,s=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},a=t[c][i],r=t[c][i]=function(t,i){return this._createWidget?(arguments.length&&this._createWidget(t,i),e):new r(t,i)},t.extend(r,a,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),h=new s,h.options=t.widget.extend({},h.options),t.each(n,function(i,n){return t.isFunction(n)?(l[i]=function(){var t=function(){return s.prototype[i].apply(this,arguments)},e=function(t){return s.prototype[i].apply(this,t)};return function(){var i,s=this._super,o=this._superApply;return this._super=t,this._superApply=e,i=n.apply(this,arguments),this._super=s,this._superApply=o,i}}(),e):(l[i]=n,e)}),r.prototype=t.widget.extend(h,{widgetEventPrefix:a?h.widgetEventPrefix:i},l,{constructor:r,namespace:c,widgetName:i,widgetFullName:o}),a?(t.each(a._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,r,i._proto)}),delete a._childConstructors):s._childConstructors.push(r),t.widget.bridge(i,r)},t.widget.extend=function(i){for(var n,o,a=s.call(arguments,1),r=0,h=a.length;h>r;r++)for(n in a[r])o=a[r][n],a[r].hasOwnProperty(n)&&o!==e&&(i[n]=t.isPlainObject(o)?t.isPlainObject(i[n])?t.widget.extend({},i[n],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,n){var o=n.prototype.widgetFullName||i;t.fn[i]=function(a){var r="string"==typeof a,h=s.call(arguments,1),l=this;return a=!r&&h.length?t.widget.extend.apply(null,[a].concat(h)):a,r?this.each(function(){var s,n=t.data(this,o);return n?t.isFunction(n[a])&&"_"!==a.charAt(0)?(s=n[a].apply(n,h),s!==n&&s!==e?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):e):t.error("no such method '"+a+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+a+"'")}):this.each(function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new n(a,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,s){var n,o,a,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},n=i.split("."),i=n.shift(),n.length){for(o=r[i]=t.widget.extend({},this.options[i]),a=0;n.length-1>a;a++)o[n[a]]=o[n[a]]||{},o=o[n[a]];if(i=n.pop(),s===e)return o[i]===e?null:o[i];o[i]=s}else{if(s===e)return this.options[i]===e?null:this.options[i];r[i]=s}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var o,a=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=o=t(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,o=this.widget()),t.each(n,function(n,r){function h(){return i||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?a[r]:r).apply(a,arguments):e}"string"!=typeof r&&(h.guid=r.guid=r.guid||h.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];u?o.delegate(u,c,h):s.bind(c,h)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,o="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return n&&!o&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;return n.containment?"window"===n.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):"document"===n.containment?(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):n.containment.constructor===Array?(this.containment=n.containment,undefined):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],s&&(e="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i),undefined):(this.containment=null,undefined)},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:n.scrollTop(),left:n.scrollLeft()}),{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*s}},_generatePosition:function(e){var i,s,n,o,a=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=e.pageX,l=e.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),a.grid&&(n=a.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-a.grid[1]:n+a.grid[1]:n,o=a.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,h=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var s=t(this).data("ui-draggable"),n=s.options,o=t.extend({},i,{item:s.element});s.sortables=[],t(n.connectToSortable).each(function(){var i=t.data(this,"ui-sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i){var s=t(this).data("ui-draggable"),n=t.extend({},i,{item:s.element});t.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,n))})},drag:function(e,i){var s=t(this).data("ui-draggable"),n=this;t.each(s.sortables,function(){var o=!1,a=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(a.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",e),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",e),s.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("ui-draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var s=t(i.helper),n=t(this).data("ui-draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("ui-draggable"),s=i.options,n=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-t(document).scrollTop()<s.scrollSensitivity?n=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(n=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-t(document).scrollLeft()<s.scrollSensitivity?n=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(n=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed)))),n!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=t(this),s=i.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(e,i){var s,n,o,a,r,h,l,c,u,d,p=t(this).data("ui-draggable"),f=p.options,g=f.snapTolerance,m=i.offset.left,v=m+p.helperProportions.width,_=i.offset.top,b=_+p.helperProportions.height;for(u=p.snapElements.length-1;u>=0;u--)r=p.snapElements[u].left,h=r+p.snapElements[u].width,l=p.snapElements[u].top,c=l+p.snapElements[u].height,r-g>v||m>h+g||l-g>b||_>c+g||!t.contains(p.snapElements[u].item.ownerDocument,p.snapElements[u].item)?(p.snapElements[u].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=!1):("inner"!==f.snapMode&&(s=g>=Math.abs(l-b),n=g>=Math.abs(c-_),o=g>=Math.abs(r-v),a=g>=Math.abs(h-m),s&&(i.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h}).left-p.margins.left)),d=s||n||o||a,"outer"!==f.snapMode&&(s=g>=Math.abs(l-_),n=g>=Math.abs(c-b),o=g>=Math.abs(r-m),a=g>=Math.abs(h-v),s&&(i.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[u].snapping&&(s||n||o||a||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=s||n||o||a||d)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,i=this.data("ui-draggable").options,s=t.makeArray(t(i.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});s.length&&(e=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each(function(i){t(this).css("zIndex",e+i)}),this.css("zIndex",e+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var s=t(i.helper),n=t(this).data("ui-draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}})}(jQuery),function(t){function e(t,e,i){return t>e&&e+i>t}t.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e=this.options,i=e.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(i)?i:function(t){return t.is(i)
},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=0,i=t.ui.ddmanager.droppables[this.options.scope];i.length>e;e++)i[e]===this&&i.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){"accept"===e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"ui-droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope===s.options.scope&&e.accept.call(e.element[0],s.currentItem||s.element)&&t.ui.intersect(s,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(n=!0,!1):undefined}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(s)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(t,i,s){if(!i.offset)return!1;var n,o,a=(t.positionAbs||t.position.absolute).left,r=a+t.helperProportions.width,h=(t.positionAbs||t.position.absolute).top,l=h+t.helperProportions.height,c=i.offset.left,u=c+i.proportions.width,d=i.offset.top,p=d+i.proportions.height;switch(s){case"fit":return a>=c&&u>=r&&h>=d&&p>=l;case"intersect":return a+t.helperProportions.width/2>c&&u>r-t.helperProportions.width/2&&h+t.helperProportions.height/2>d&&p>l-t.helperProportions.height/2;case"pointer":return n=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,o=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,e(o,d,i.proportions.height)&&e(n,c,i.proportions.width);case"touch":return(h>=d&&p>=h||l>=d&&p>=l||d>h&&l>p)&&(a>=c&&u>=a||r>=c&&u>=r||c>a&&r>u);default:return!1}},t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var s,n,o=t.ui.ddmanager.droppables[e.options.scope]||[],a=i?i.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(s=0;o.length>s;s++)if(!(o[s].options.disabled||e&&!o[s].accept.call(o[s].element[0],e.currentItem||e.element))){for(n=0;r.length>n;n++)if(r[n]===o[s].element[0]){o[s].proportions.height=0;continue t}o[s].visible="none"!==o[s].element.css("display"),o[s].visible&&("mousedown"===a&&o[s]._activate.call(o[s],i),o[s].offset=o[s].element.offset(),o[s].proportions={width:o[s].element[0].offsetWidth,height:o[s].element[0].offsetHeight})}},drop:function(e,i){var s=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,o,a=t.ui.intersect(e,this,this.options.tolerance),r=!a&&this.isover?"isout":a&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return t.data(this,"ui-droppable").options.scope===n}),o.length&&(s=t.data(o[0],"ui-droppable"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}}}(jQuery),function(t){function e(t){return parseInt(t,10)||0}function i(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,i,s,n,o,a=this,r=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;e.length>i;i++)s=t.trim(e[i]),o="ui-resizable-"+s,n=t("<div class='ui-resizable-handle "+o+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(e){var i,s,n,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(n,o),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(t(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){r.disabled||a.resizing||(t(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,s,n=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(i){var s,n,o,a=this.options,r=this.element.position(),h=this.element;return this.resizing=!0,/absolute/.test(h.css("position"))?h.css({position:"absolute",top:h.css("top"),left:h.css("left")}):h.is(".ui-draggable")&&h.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),s=e(this.helper.css("left")),n=e(this.helper.css("top")),a.containment&&(s+=t(a.containment).scrollLeft()||0,n+=t(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:n},this.size=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalPosition={left:s,top:n},this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),h.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(e){var i,s=this.helper,n={},o=this.originalMousePosition,a=this.axis,r=this.position.top,h=this.position.left,l=this.size.width,c=this.size.height,u=e.pageX-o.left||0,d=e.pageY-o.top||0,p=this._change[a];return p?(i=p.apply(this,[e,u,d]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==r&&(n.top=this.position.top+"px"),this.position.left!==h&&(n.left=this.position.left+"px"),this.size.width!==l&&(n.width=this.size.width+"px"),this.size.height!==c&&(n.height=this.size.height+"px"),s.css(n),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||this._trigger("resize",e,this.ui()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,s,n,o,a,r,h,l=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&t.ui.hasScroll(i[0],"left")?0:c.sizeDiff.height,o=s?0:c.sizeDiff.width,a={width:c.helper.width()-o,height:c.helper.height()-n},r=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,h=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,l.animate||this.element.css(t.extend(a,{top:h,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!l.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,s,n,o,a,r=this.options;a={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:1/0,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||t)&&(e=a.minHeight*this.aspectRatio,n=a.minWidth/this.aspectRatio,s=a.maxHeight*this.aspectRatio,o=a.maxWidth/this.aspectRatio,e>a.minWidth&&(a.minWidth=e),n>a.minHeight&&(a.minHeight=n),a.maxWidth>s&&(a.maxWidth=s),a.maxHeight>o&&(a.maxHeight=o)),this._vBoundaries=a},_updateCache:function(t){this.offset=this.helper.offset(),i(t.left)&&(this.position.left=t.left),i(t.top)&&(this.position.top=t.top),i(t.height)&&(this.size.height=t.height),i(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,s=this.size,n=this.axis;return i(t.height)?t.width=t.height*this.aspectRatio:i(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(s.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(s.height-t.height),t.left=e.left+(s.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,s=this.axis,n=i(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=i(t.height)&&e.maxHeight&&e.maxHeight<t.height,a=i(t.width)&&e.minWidth&&e.minWidth>t.width,r=i(t.height)&&e.minHeight&&e.minHeight>t.height,h=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,c=/sw|nw|w/.test(s),u=/nw|ne|n/.test(s);return a&&(t.width=e.minWidth),r&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),a&&c&&(t.left=h-e.minWidth),n&&c&&(t.left=h-e.maxWidth),r&&u&&(t.top=l-e.minHeight),o&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,s,n,o=this.helper||this.element;for(t=0;this._proportionallyResizeElements.length>t;t++){if(n=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],e=0;i.length>e;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(s[e],10)||0);n.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("ui-resizable"),s=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),a=o&&t.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-a},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(h,c&&l?{top:c,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var i,s,n,o,a,r,h,l=t(this).data("ui-resizable"),c=l.options,u=l.element,d=c.containment,p=d instanceof t?d.get(0):/parent/.test(d)?u.parent().get(0):d;p&&(l.containerElement=t(p),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(i=t(p),s=[],t(["Top","Right","Left","Bottom"]).each(function(t,n){s[t]=e(i.css("padding"+n))}),l.containerOffset=i.offset(),l.containerPosition=i.position(),l.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},n=l.containerOffset,o=l.containerSize.height,a=l.containerSize.width,r=t.ui.hasScroll(p,"left")?p.scrollWidth:a,h=t.ui.hasScroll(p)?p.scrollHeight:o,l.parentData={element:p,left:n.left,top:n.top,width:r,height:h}))},resize:function(e){var i,s,n,o,a=t(this).data("ui-resizable"),r=a.options,h=a.containerOffset,l=a.position,c=a._aspectRatio||e.shiftKey,u={top:0,left:0},d=a.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(u=h),l.left<(a._helper?h.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-h.left:a.position.left-u.left),c&&(a.size.height=a.size.width/a.aspectRatio),a.position.left=r.helper?h.left:0),l.top<(a._helper?h.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-h.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio),a.position.top=a._helper?h.top:0),a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top,i=Math.abs((a._helper?a.offset.left-u.left:a.offset.left-u.left)+a.sizeDiff.width),s=Math.abs((a._helper?a.offset.top-u.top:a.offset.top-h.top)+a.sizeDiff.height),n=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),n&&o&&(i-=a.parentData.left),i+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-i,c&&(a.size.height=a.size.width/a.aspectRatio)),s+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-s,c&&(a.size.width=a.size.height*a.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.containerOffset,n=e.containerPosition,o=e.containerElement,a=t(e.helper),r=a.offset(),h=a.outerWidth()-e.sizeDiff.width,l=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,s=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):t.each(i.alsoResize,function(t){s(t)})},resize:function(e,i){var s=t(this).data("ui-resizable"),n=s.options,o=s.originalSize,a=s.originalPosition,r={height:s.size.height-o.height||0,width:s.size.width-o.width||0,top:s.position.top-a.top||0,left:s.position.left-a.left||0},h=function(e,s){t(e).each(function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),o={},a=s&&s.length?s:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(a,function(t,e){var i=(n[e]||0)+(r[e]||0);i&&i>=0&&(o[e]=i||null)}),e.css(o)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?h(n.alsoResize):t.each(n.alsoResize,function(t,e){h(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.size,n=e.originalSize,o=e.originalPosition,a=e.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,h=r[0]||1,l=r[1]||1,c=Math.round((s.width-n.width)/h)*h,u=Math.round((s.height-n.height)/l)*l,d=n.width+c,p=n.height+u,f=i.maxWidth&&d>i.maxWidth,g=i.maxHeight&&p>i.maxHeight,m=i.minWidth&&i.minWidth>d,v=i.minHeight&&i.minHeight>p;i.grid=r,m&&(d+=h),v&&(p+=l),f&&(d-=h),g&&(p-=l),/^(se|s|e)$/.test(a)?(e.size.width=d,e.size.height=p):/^(ne)$/.test(a)?(e.size.width=d,e.size.height=p,e.position.top=o.top-u):/^(sw)$/.test(a)?(e.size.width=d,e.size.height=p,e.position.left=o.left-c):(e.size.width=d,e.size.height=p,e.position.top=o.top-u,e.position.left=o.left-c)}})}(jQuery),function(t){t.widget("ui.selectable",t.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e=t(i.options.filter,i.element[0]),e.addClass("ui-selectee"),e.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this,s=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(s.filter,this.element[0]),this._trigger("start",e),t(s.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=t.data(this,"selectable-item");s.startselected=!0,e.metaKey||e.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",e,{unselecting:s.element}))}),t(e.target).parents().addBack().each(function(){var s,n=t.data(this,"selectable-item");return n?(s=!e.metaKey&&!e.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",e,{selecting:n.element}):i._trigger("unselecting",e,{unselecting:n.element}),!1):undefined}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,o=this.opos[0],a=this.opos[1],r=e.pageX,h=e.pageY;return o>r&&(i=r,r=o,o=i),a>h&&(i=h,h=a,a=i),this.helper.css({left:o,top:a,width:r-o,height:h-a}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?l=!(i.left>r||o>i.right||i.top>h||a>i.bottom):"fit"===n.tolerance&&(l=i.left>o&&r>i.right&&i.top>a&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",e,{unselected:s.element})}),t(".ui-selecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",e,{selected:s.element})}),this._trigger("stop",e),this.helper.remove(),!1}})}(jQuery),function(t){function e(t,e,i){return t>e&&e+i>t}function i(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(s=t(this),!1):undefined}),t.data(e.target,o.widgetName+"-item")===o&&(s=t(e.target)),s?!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,s){var n,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,a=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-t(document).scrollTop()<a.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-a.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<a.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+a.scrollSpeed)),e.pageX-t(document).scrollLeft()<a.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-a.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<a.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+a.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],o=this._intersectsWithPointer(s),o&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;
this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||s+l>r&&h>s+l,d="y"===this.options.axis||e+c>o&&a>e+c,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),s="y"===this.options.axis||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=i&&s,o=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return n?this.floating?a&&"right"===a||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(t){var i=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),s=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&s||"left"===o&&!s:n&&("down"===n&&i||"up"===n&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,s,n,o,a=[],r=[],h=this._connectWith();if(h&&e)for(i=h.length-1;i>=0;i--)for(n=t(h[i]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&r.push([t.isFunction(o.options.items)?o.options.items.call(o.element):t(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(r.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=r.length-1;i>=0;i--)r[i][0].each(function(){a.push(this)});return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,a,r,h,l,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(a=u[i][1],r=u[i][0],s=0,l=r.length;l>s;s++)h=t(r[s]),h.data(this.widgetName+"-item",a),c.push({item:h,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,o;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)}):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_contactContainers:function(s){var n,o,a,r,h,l,c,u,d,p,f=null,g=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(f&&t.contains(this.containers[n].element[0],f.element[0]))continue;f=this.containers[n],g=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",s,this._uiHash(this)),this.containers[n].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",s,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(a=1e4,r=null,p=f.floating||i(this.currentItem),h=p?"left":"top",l=p?"width":"height",c=this.positionAbs[h]+this.offset.click[h],o=this.items.length-1;o>=0;o--)t.contains(this.containers[g].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!p||e(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(u=this.items[o].item.offset()[h],d=!1,Math.abs(u-c)>Math.abs(u+this.items[o][l]-c)&&(d=!0,u+=this.items[o][l]),a>Math.abs(u-c)&&(a=Math.abs(u-c),r=this.items[o],this.direction=d?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return;r?this._rearrange(s,r,null,!0):this._rearrange(s,null,this.containers[g].element,!0),this._trigger("change",s,this._uiHash()),this.containers[g]._trigger("change",s,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",s,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,a=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){this.reverting=!1;var i,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||s.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(s.push(function(t){this._trigger("remove",t,this._uiHash())}),s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||s.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(s.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),i=0;s.length>i;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(i=0;s.length>i;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}(jQuery),function(t,e){var i="ui-effects-";t.effects={effect:{}},function(t,e){function i(t,e,i){var s=u[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:0>t?0:t>s.max?s.max:t)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(t,o){var a,r=o.re.exec(i),h=r&&o.parse(r),l=o.space||"rgba";return h?(a=s[l](h),s[c[l].cache]=a[c[l].cache],n=s._rgba=a._rgba,!1):e}),n.length?("0,0,0,0"===n.join()&&t.extend(n,o.transparent),s):o[i]}function n(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,i,s,n){return new t.Color.fn.parse(e,i,s,n)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=l.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),l.fn=t.extend(l.prototype,{parse:function(n,a,r,h){if(n===e)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=t(n).css(a),a=e);var u=this,d=t.type(n),p=this._rgba=[];return a!==e&&(n=[n,a,r,h],d="array"),"string"===d?this.parse(s(n)||o._default):"array"===d?(f(c.rgba.props,function(t,e){p[e.idx]=i(n[e.idx],e)}),this):"object"===d?(n instanceof l?f(c,function(t,e){n[e.cache]&&(u[e.cache]=n[e.cache].slice())}):f(c,function(e,s){var o=s.cache;f(s.props,function(t,e){if(!u[o]&&s.to){if("alpha"===t||null==n[t])return;u[o]=s.to(u._rgba)}u[o][e.idx]=i(n[t],e,!0)}),u[o]&&0>t.inArray(null,u[o].slice(0,3))&&(u[o][3]=1,s.from&&(u._rgba=s.from(u[o])))}),this):e},is:function(t){var i=l(t),s=!0,n=this;return f(c,function(t,o){var a,r=i[o.cache];return r&&(a=n[o.cache]||o.to&&o.to(n._rgba)||[],f(o.props,function(t,i){return null!=r[i.idx]?s=r[i.idx]===a[i.idx]:e})),s}),s},_space:function(){var t=[],e=this;return f(c,function(i,s){e[s.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var s=l(t),n=s._space(),o=c[n],a=0===this.alpha()?l("transparent"):this,r=a[o.cache]||o.to(a._rgba),h=r.slice();return s=s[o.cache],f(o.props,function(t,n){var o=n.idx,a=r[o],l=s[o],c=u[n.type]||{};null!==l&&(null===a?h[o]=l:(c.mod&&(l-a>c.mod/2?a+=c.mod:a-l>c.mod/2&&(a-=c.mod)),h[o]=i((l-a)*e+a,n)))}),this[n](h)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(e)._rgba;return l(t.map(i,function(t,e){return(1-s)*n[e]+s*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),s=i.pop();return e&&i.push(~~(255*s)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,n=t[1]/255,o=t[2]/255,a=t[3],r=Math.max(s,n,o),h=Math.min(s,n,o),l=r-h,c=r+h,u=.5*c;return e=h===r?0:s===r?60*(n-o)/l+360:n===r?60*(o-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=u?l/c:l/(2-c),[Math.round(e)%360,i,u,null==a?1:a]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],o=t[3],a=.5>=s?s*(1+i):s+i-s*i,r=2*s-a;return[Math.round(255*n(r,a,e+1/3)),Math.round(255*n(r,a,e)),Math.round(255*n(r,a,e-1/3)),o]},f(c,function(s,n){var o=n.props,a=n.cache,h=n.to,c=n.from;l.fn[s]=function(s){if(h&&!this[a]&&(this[a]=h(this._rgba)),s===e)return this[a].slice();var n,r=t.type(s),u="array"===r||"object"===r?s:arguments,d=this[a].slice();return f(o,function(t,e){var s=u["object"===r?t:e.idx];null==s&&(s=d[e.idx]),d[e.idx]=i(s,e)}),c?(n=l(c(d)),n[a]=d,n):l(d)},f(o,function(e,i){l.fn[e]||(l.fn[e]=function(n){var o,a=t.type(n),h="alpha"===e?this._hsla?"hsla":"rgba":s,l=this[h](),c=l[i.idx];return"undefined"===a?c:("function"===a&&(n=n.call(this,c),a=t.type(n)),null==n&&i.empty?this:("string"===a&&(o=r.exec(n),o&&(n=c+parseFloat(o[2])*("+"===o[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,n){var o,a,r="";if("transparent"!==n&&("string"!==t.type(n)||(o=s(n)))){if(n=l(o||n),!d.rgba&&1!==n._rgba[3]){for(a="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&a&&a.style;)try{r=t.css(a,"backgroundColor"),a=a.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(h){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=l(e.elem,i),e.end=l(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook(a),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,s){e["border"+s+"Color"]=t}),e}},o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(e){var i,s,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(o[t.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(o[i]=n[i]);return o}function s(e,i){var s,n,a={};for(s in i)n=i[s],e[s]!==n&&(o[s]||(t.fx.step[s]||!isNaN(parseFloat(n)))&&(a[s]=n));return a}var n=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,o,a,r){var h=t.speed(o,a,r);return this.queue(function(){var o,a=t(this),r=a.attr("class")||"",l=h.children?a.find("*").addBack():a;l=l.map(function(){var e=t(this);return{el:e,start:i(this)}}),o=function(){t.each(n,function(t,i){e[i]&&a[i+"Class"](e[i])})},o(),l=l.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),a.attr("class",r),l=l.map(function(){var e=this,i=t.Deferred(),s=t.extend({},h,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()}),t.when.apply(t,l.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),h.complete.call(a[0])})})},t.fn.extend({addClass:function(e){return function(i,s,n,o){return s?t.effects.animateClass.call(this,{add:i},s,n,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,s,n,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},s,n,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(i){return function(s,n,o,a,r){return"boolean"==typeof n||n===e?o?t.effects.animateClass.call(this,n?{add:s}:{remove:s},o,a,r):i.apply(this,arguments):t.effects.animateClass.call(this,{toggle:s},n,o,a)}}(t.fn.toggleClass),switchClass:function(e,i,s,n,o){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,o)}})}(),function(){function s(e,i,s,n){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function n(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}t.extend(t.effects,{version:"1.10.3",save:function(t,e){for(var s=0;e.length>s;s++)null!==e[s]&&t.data(i+e[s],t[0].style[e[s]])},restore:function(t,s){var n,o;for(o=0;s.length>o;o++)null!==s[o]&&(n=t.data(i+s[o]),n===e&&(n=""),t.css(s[o],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return e.wrap(s),(e[0]===o||t.contains(e[0],o))&&t(o).focus(),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){var o=e.cssUnit(i);o[0]>0&&(n[i]=o[0]*s+o[1])}),n}}),t.fn.extend({effect:function(){function e(e){function s(){t.isFunction(o)&&o.call(n[0]),t.isFunction(e)&&e()}var n=t(this),o=i.complete,r=i.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),s()):a.call(n[0],i,s)}var i=s.apply(this,arguments),n=i.mode,o=i.queue,a=t.effects.effect[i.effect];return t.fx.off||!a?n?this[n](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):o===!1?this.each(e):this.queue(o||"fx",e)},show:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(t.fn.show),hide:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(t.fn.hide),toggle:function(t){return function(e){if(n(e)||"boolean"==typeof e)return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])}),s}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}()}(jQuery),function(t){var e=0,i={},s={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",s.height=s.paddingTop=s.paddingBottom=s.borderTopWidth=s.borderBottomWidth="show",t.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),this._processPanels(),0>e.active&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t(),content:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))
},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?(this._activate(e),undefined):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||this.options.active!==!1||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),"disabled"===t&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e),undefined)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,s=this.headers.length,n=this.headers.index(e.target),o=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:o=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[s-1]}o&&(t(e.target).attr("tabIndex",-1),t(o).attr("tabIndex",0),o.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels(),e.active===!1&&e.collapsible===!0||!this.headers.length?(e.active=!1,this.active=t()):e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,s=this.options,n=s.heightStyle,o=this.element.parent(),a=this.accordionId="ui-accordion-"+(this.element.attr("id")||++e);this.active=this._findActive(s.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(e){var i=t(this),s=i.attr("id"),n=i.next(),o=n.attr("id");s||(s=a+"-header-"+e,i.attr("id",s)),o||(o=a+"-panel-"+e,n.attr("id",o)),i.attr("aria-controls",o),n.attr("aria-labelledby",s)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(s.event),"fill"===n?(i=o.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.headers.each(function(){i-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===n&&(i=0,this.headers.next().each(function(){i=Math.max(i,t(this).css("height","").height())}).height(i))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),o=n[0]===s[0],a=o&&i.collapsible,r=a?t():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:a?t():n,newPanel:r};e.preventDefault(),o&&!i.collapsible||this._trigger("beforeActivate",e,l)===!1||(i.active=a?!1:this.headers.index(n),this.active=o?t():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),o||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,s=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,e):(s.hide(),i.show(),this._toggleComplete(e)),s.attr({"aria-expanded":"false","aria-hidden":"true"}),s.prev().attr("aria-selected","false"),i.length&&s.length?s.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(t,e,n){var o,a,r,h=this,l=0,c=t.length&&(!e.length||t.index()<e.index()),u=this.options.animate||{},d=c&&u.down||u,p=function(){h._toggleComplete(n)};return"number"==typeof d&&(r=d),"string"==typeof d&&(a=d),a=a||d.easing||u.easing,r=r||d.duration||u.duration,e.length?t.length?(o=t.show().outerHeight(),e.animate(i,{duration:r,easing:a,step:function(t,e){e.now=Math.round(t)}}),t.hide().animate(s,{duration:r,easing:a,complete:p,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?l+=i.now:"content"!==h.options.heightStyle&&(i.now=Math.round(o-e.outerHeight()-l),l=0)}}),undefined):e.animate(i,r,a,p):t.animate(s,r,a,p)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}})}(jQuery),function(t){var e=0;t.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var e,i,s,n=this.element[0].nodeName.toLowerCase(),o="textarea"===n,a="input"===n;this.isMultiLine=o?!0:a?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return e=!0,s=!0,i=!0,undefined;e=!1,s=!1,i=!1;var o=t.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",n);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",n);break;case o.UP:e=!0,this._keyEvent("previous",n);break;case o.DOWN:e=!0,this._keyEvent("next",n);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(e=!0,n.preventDefault(),this.menu.select(n));break;case o.TAB:this.menu.active&&this.menu.select(n);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(e)return e=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),undefined;if(!i){var n=t.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(t){return s?(s=!1,t.preventDefault(),undefined):(this._searchTimeout(t),undefined)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(t),this._change(t),undefined)}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(s){s.target===e.element[0]||s.target===i||t.contains(i,s.target)||e.close()})})},menufocus:function(e,i){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)}),undefined;var s=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",e,{item:s})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(s.value):this.liveRegion.text(s.value)},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,s=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,s){s(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,n){s.xhr&&s.xhr.abort(),s.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){n(t)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):undefined},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=this,i=++e;return function(s){i===e&&t.__response(s),t.pending--,t.pending||t.element.removeClass("ui-autocomplete-loading")}},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var s=this;t.each(i,function(t,i){s._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<a>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[t](e),undefined):(this.search(null,e),undefined)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var s=RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return s.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})}(jQuery),function(t){var e,i,s,n,o="ui-button ui-widget ui-state-default ui-corner-all",a="ui-state-hover ui-state-active ",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},l=function(e){var i=e.name,s=e.form,n=t([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?t(s).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),n};t.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var a=this,r=this.options,c="checkbox"===this.type||"radio"===this.type,u=c?"":"ui-state-active",d="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||t(this).removeClass(u)}).bind("click"+this.eventNamespace,function(t){r.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){a.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){a.buttonElement.removeClass(d)}),c&&(this.element.bind("change"+this.eventNamespace,function(){n||a.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){r.disabled||(n=!1,i=t.pageX,s=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){r.disabled||(i!==t.pageX||s!==t.pageY)&&(n=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return r.disabled||n?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||n)return!1;t(this).addClass("ui-state-active"),a.buttonElement.attr("aria-pressed","true");var e=a.element[0];l(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return r.disabled?!1:(t(this).addClass("ui-state-active"),e=this,a.document.one("mouseup",function(){e=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return r.disabled?!1:(t(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(e){return r.disabled?!1:((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+a+" "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1),undefined):(this._resetButton(),undefined)},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?l(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),undefined;var e=this.buttonElement.removeClass(r),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,o=[];s.primary||s.secondary?(this.options.text&&o.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(o.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):o.push("ui-button-text-only"),e.addClass(o.join(" "))}}),t.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(t,e){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=s(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){t.datepicker._isDisabledDatepicker(o.inline?e.parent()[0]:o.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function n(e,i){t.extend(e,i);for(var s in i)null==i[s]&&(e[s]=i[s]);return e}t.extend(t.ui,{datepicker:{version:"1.10.3"}});var o,a="datepicker";t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return n(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,n,o;s=e.nodeName.toLowerCase(),n="div"===s||"span"===s,e.id||(this.uuid+=1,e.id="dp"+this.uuid),o=this._newInst(t(e),n),o.settings=t.extend({},i||{}),"input"===s?this._connectDatepicker(e,o):n&&this._inlineDatepicker(e,o)},_newInst:function(e,i){var n=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?s(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,a,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,n,o,a=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),a&&(i.append=t("<span class='"+this._appendClass+"'>"+a+"</span>"),e[r?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&e.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:n,title:n}):n)),e[r?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,s,n,o=new Date(2009,11,20),a=this._get(t,"dateFormat");a.match(/[DM]/)&&(e=function(t){for(i=0,s=0,n=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,s=n);return s},o.setMonth(e(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,a,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,o,r){var h,l,c,u,d,p=this._dialogInst;return p||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},t.data(this._dialogInput[0],a,p)),n(p.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+u,c/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],a,p),this},_destroyDatepicker:function(e){var i,s=t(e),n=t.data(e,a);s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,a),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,a);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,a);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,a)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,s,o){var a,r,h,l,c=this._getInst(i);return 2===arguments.length&&"string"==typeof s?"defaults"===s?t.extend({},t.datepicker._defaults):c?"all"===s?t.extend({},c.settings):this._get(c,s):null:(a=s||{},"string"==typeof s&&(a={},a[s]=o),c&&(this._curInst===c&&this._hideDatepicker(),r=this._getDateDatepicker(i,!0),h=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),n(c.settings,a),null!==h&&a.dateFormat!==e&&a.minDate===e&&(c.settings.minDate=this._formatDate(c,h)),null!==l&&a.dateFormat!==e&&a.maxDate===e&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in a&&(a.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(t(i),c),this._autoSize(c),this._setDate(c,r),this._updateAlternate(c),this._updateDatepicker(c)),e)},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,s,n,o=t.datepicker._getInst(e.target),a=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),a=!1;break;case 13:return n=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv),n[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,n[0]),i=t.datepicker._get(o,"onSelect"),i?(s=t.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[s,o])):t.datepicker._hideDatepicker(),!1;
case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),a=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),a=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),a=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),a=e.ctrlKey||e.metaKey;break;default:a=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):a=!1;a&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(i){var s,n,o=t.datepicker._getInst(i.target);return t.datepicker._get(o,"constrainInput")?(s=t.datepicker._possibleChars(t.datepicker._get(o,"dateFormat")),n=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">n||!s||s.indexOf(n)>-1):e},_doKeyUp:function(e){var i,s=t.datepicker._getInst(e.target);if(s.input.val()!==s.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,t.datepicker._getFormatConfig(s)),i&&(t.datepicker._setDateFromField(s),t.datepicker._updateAlternate(s),t.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,s,o,a,r,h,l;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),s=t.datepicker._get(i,"beforeShow"),o=s?s.apply(e,[e,i]):{},o!==!1&&(n(i.settings,o),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),a=!1,t(e).parents().each(function(){return a|="fixed"===t(this).css("position"),!a}),r={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),r=t.datepicker._checkOffset(i,r,a),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":a?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(h=t.datepicker._get(i,"showAnim"),l=t.datepicker._get(i,"duration"),i.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[h]?i.dpDiv.show(h,t.datepicker._get(i,"showOptions"),l):i.dpDiv[h||"show"](h?l:null),t.datepicker._shouldFocusInput(i)&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,o=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,s=this._getNumberOfMonths(e),n=s[1],a=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-a:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+o>l&&l>o?Math.abs(o+r):0),i},_findPos:function(e){for(var i,s=this._getInst(e),n=this._get(s,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,s,n,o,r=this._curInst;!r||e&&r!==t.data(e,a)||this._datepickerShowing&&(i=this._get(r,"showAnim"),s=this._get(r,"duration"),n=function(){t.datepicker._tidyDialog(r)},t.effects&&(t.effects.effect[i]||t.effects[i])?r.dpDiv.hide(i,t.datepicker._get(r,"showOptions"),s,n):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,o=this._get(r,"onClose"),o&&o.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),s=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==s)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,s){var n=t(e),o=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(o,i+("M"===s?this._get(o,"showCurrentAtPos"):0),s),this._updateDatepicker(o))},_gotoToday:function(e){var i,s=t(e),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(e,i,s){var n=t(e),o=this._getInst(n[0]);o["selected"+("M"===s?"Month":"Year")]=o["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(n)},_selectDay:function(e,i,s,n){var o,a=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(o=this._getInst(a[0]),o.selectedDay=o.currentDay=t("a",n).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=s,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var s,n=t(e),o=this._getInst(n[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),s=this._get(o,"onSelect"),s?s.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,s,n,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),n=this.formatDate(i,s,this._getFormatConfig(e)),t(o).each(function(){t(this).val(n)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(i,s,n){if(null==i||null==s)throw"Invalid arguments";if(s="object"==typeof s?""+s:s+"",""===s)return null;var o,a,r,h,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,p=(n?n.dayNames:null)||this._defaults.dayNames,f=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,g=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,v=-1,_=-1,b=-1,y=!1,w=function(t){var e=i.length>o+1&&i.charAt(o+1)===t;return e&&o++,e},k=function(t){var e=w(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n=RegExp("^\\d{1,"+i+"}"),o=s.substring(l).match(n);if(!o)throw"Missing number at position "+l;return l+=o[0].length,parseInt(o[0],10)},x=function(i,n,o){var a=-1,r=t.map(w(i)?o:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(r,function(t,i){var n=i[1];return s.substr(l,n.length).toLowerCase()===n.toLowerCase()?(a=i[0],l+=n.length,!1):e}),-1!==a)return a+1;throw"Unknown name at position "+l},D=function(){if(s.charAt(l)!==i.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;i.length>o;o++)if(y)"'"!==i.charAt(o)||w("'")?D():y=!1;else switch(i.charAt(o)){case"d":_=k("d");break;case"D":x("D",d,p);break;case"o":b=k("o");break;case"m":v=k("m");break;case"M":v=x("M",f,g);break;case"y":m=k("y");break;case"@":h=new Date(k("@")),m=h.getFullYear(),v=h.getMonth()+1,_=h.getDate();break;case"!":h=new Date((k("!")-this._ticksTo1970)/1e4),m=h.getFullYear(),v=h.getMonth()+1,_=h.getDate();break;case"'":w("'")?D():y=!0;break;default:D()}if(s.length>l&&(r=s.substr(l),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),b>-1)for(v=1,_=b;;){if(a=this._getDaysInMonth(m,v-1),a>=_)break;v++,_-=a}if(h=this._daylightSavingAdjust(new Date(m,v-1,_)),h.getFullYear()!==m||h.getMonth()+1!==v||h.getDate()!==_)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(e){var i=t.length>s+1&&t.charAt(s+1)===e;return i&&s++,i},l=function(t,e,i){var s=""+e;if(h(t))for(;i>s.length;)s="0"+s;return s},c=function(t,e,i,s){return h(t)?s[e]:i[e]},u="",d=!1;if(e)for(s=0;t.length>s;s++)if(d)"'"!==t.charAt(s)||h("'")?u+=t.charAt(s):d=!1;else switch(t.charAt(s)){case"d":u+=l("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),n,o);break;case"o":u+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),a,r);break;case"y":u+=h("y")?e.getFullYear():(10>e.getYear()%100?"0":"")+e.getYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":h("'")?u+="'":d=!0;break;default:u+=t.charAt(s)}return u},_possibleChars:function(t){var e,i="",s=!1,n=function(i){var s=t.length>e+1&&t.charAt(e+1)===i;return s&&e++,s};for(e=0;t.length>e;e++)if(s)"'"!==t.charAt(e)||n("'")?i+=t.charAt(e):s=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,i){return t.settings[i]!==e?t.settings[i]:this._defaults[i]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),o=n,a=this._getFormatConfig(t);try{o=this.parseDate(i,s,a)||n}catch(r){s=e?"":s}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=s?o.getDate():0,t.currentMonth=s?o.getMonth():0,t.currentYear=s?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},o=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,o=n.getFullYear(),a=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a))}l=h.exec(i)}return new Date(o,a,r)},a=null==i||""===i?s:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return a=a&&"Invalid Date"==""+a?s:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,o=t.selectedYear,a=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=a.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=a.getMonth(),t.drawYear=t.selectedYear=t.currentYear=a.getFullYear(),n===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(s,-i,"M")},next:function(){t.datepicker._adjustDate(s,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(s)},selectDay:function(){return t.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,s,n,o,a,r,h,l,c,u,d,p,f,g,m,v,_,b,y,w,k,x,D,C,I,P,T,M,S,z,A,H,E,N,W,O,F,R,L=new Date,j=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),Y=this._get(t,"isRTL"),B=this._get(t,"showButtonPanel"),V=this._get(t,"hideIfNoPrevNext"),K=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),q=this._get(t,"showCurrentAtPos"),Q=this._get(t,"stepMonths"),X=1!==U[0]||1!==U[1],$=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Z=t.drawMonth-q,te=t.drawYear;if(0>Z&&(Z+=12,te--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-U[0]*U[1]+1,J.getDate())),e=G&&G>e?G:e;this._daylightSavingAdjust(new Date(te,Z,1))>e;)Z--,0>Z&&(Z=11,te--);for(t.drawMonth=Z,t.drawYear=te,i=this._get(t,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(te,Z-Q,1)),this._getFormatConfig(t)):i,s=this._canAdjustMonth(t,-1,te,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":V?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(t,"nextText"),n=K?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Z+Q,1)),this._getFormatConfig(t)):n,o=this._canAdjustMonth(t,1,te,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":V?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",a=this._get(t,"currentText"),r=this._get(t,"gotoCurrent")&&t.currentDay?$:j,a=K?this.formatDate(a,r,this._getFormatConfig(t)):a,h=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(t,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(Y?"":h)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),_=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",k=0;U[0]>k;k++){for(x="",this.maxRows=4,D=0;U[1]>D;D++){if(C=this._daylightSavingAdjust(new Date(te,Z,t.selectedDay)),I=" ui-corner-all",P="",X){if(P+="<div class='ui-datepicker-group",U[1]>1)switch(D){case 0:P+=" ui-datepicker-group-first",I=" ui-corner-"+(Y?"right":"left");break;case U[1]-1:P+=" ui-datepicker-group-last",I=" ui-corner-"+(Y?"left":"right");break;default:P+=" ui-datepicker-group-middle",I=""}P+="'>"}for(P+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+I+"'>"+(/all|left/.test(I)&&0===k?Y?o:s:"")+(/all|right/.test(I)&&0===k?Y?s:o:"")+this._generateMonthYearHeader(t,Z,te,G,J,k>0||D>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",T=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)M=(w+c)%7,T+="<th"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[M]+"'>"+p[M]+"</span></th>";for(P+=T+"</tr></thead><tbody>",S=this._getDaysInMonth(te,Z),te===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,S)),z=(this._getFirstDayOfMonth(te,Z)-c+7)%7,A=Math.ceil((z+S)/7),H=X?this.maxRows>A?this.maxRows:A:A,this.maxRows=H,E=this._daylightSavingAdjust(new Date(te,Z,1-z)),N=0;H>N;N++){for(P+="<tr>",W=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(E)+"</td>":"",w=0;7>w;w++)O=m?m.apply(t.input?t.input[0]:null,[E]):[!0,""],F=E.getMonth()!==Z,R=F&&!_||!O[0]||G&&G>E||J&&E>J,W+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(E.getTime()===C.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===E.getTime()&&b.getTime()===C.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!v?"":" "+O[1]+(E.getTime()===$.getTime()?" "+this._currentClass:"")+(E.getTime()===j.getTime()?" ui-datepicker-today":""))+"'"+(F&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+E.getMonth()+"' data-year='"+E.getFullYear()+"'")+">"+(F&&!v?"&#xa0;":R?"<span class='ui-state-default'>"+E.getDate()+"</span>":"<a class='ui-state-default"+(E.getTime()===j.getTime()?" ui-state-highlight":"")+(E.getTime()===$.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+E.getDate()+"</a>")+"</td>",E.setDate(E.getDate()+1),E=this._daylightSavingAdjust(E);P+=W+"</tr>"}Z++,Z>11&&(Z=0,te++),P+="</tbody></table>"+(X?"</div>"+(U[0]>0&&D===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=P}y+=x}return y+=l,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,s,n,o,a,r){var h,l,c,u,d,p,f,g,m=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),_=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(o||!m)y+="<span class='ui-datepicker-month'>"+a[e]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!h||c>=s.getMonth())&&(!l||n.getMonth()>=c)&&(y+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+r[c]+"</option>");y+="</select>"}if(_||(b+=y+(!o&&m&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(u[0]),g=Math.max(f,p(u[1]||"")),f=s?Math.max(f,s.getFullYear()):f,g=n?Math.min(g,n.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),_&&(b+=(!o&&m&&v?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var s=t.drawYear+("Y"===i?e:0),n=t.drawMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),a=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,o)));t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,s,n=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),a=null,r=null,h=this._get(t,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),a=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(a+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||e.getTime()>=n.getTime())&&(!o||e.getTime()<=o.getTime())&&(!a||e.getFullYear()>=a)&&(!r||r>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.3"}(jQuery),function(t){var e={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!e&&this._trigger("focus",t),i},open:function(){var e=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement,i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),this.close(e),undefined;if(e.keyCode===t.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");e.target!==n[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==s[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(n.focus(1),e.preventDefault()):(s.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(t.each(i,function(i,s){var n,o;s=t.isFunction(s)?{click:s,text:i}:s,s=t.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(e.element[0],arguments)},o={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,t("<button></button>",s).button(o).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){t(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,e(n))},drag:function(t,s){i._trigger("drag",t,e(s))},stop:function(n,o){s.position=[o.position.left-i.document.scrollLeft(),o.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,e(o))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}
}var i=this,s=this.options,n=s.resizable,o=this.uiDialog.css("position"),a="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:a,start:function(s,n){t(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,e(n))},resize:function(t,s){i._trigger("resize",t,e(s))},stop:function(n,o){s.height=t(this).height(),s.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,e(o))}}).css("position",o)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(s){var n=this,o=!1,a={};t.each(s,function(t,s){n._setOption(t,s),t in e&&(o=!0),t in i&&(a[t]=s)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(t,e){var i,s,n=this.uiDialog;"dialogClass"===t&&n.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&(i=n.is(":data(ui-draggable)"),i&&!e&&n.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(s=n.is(":data(ui-resizable)"),s&&!e&&n.resizable("destroy"),s&&"string"==typeof e&&n.resizable("option","handles",e),s||e===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(".ui-dialog").length?!0:!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,i=this.widgetFullName;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(s){e._allowInteraction(s)||(s.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),t.ui.dialog.overlayInstances=0,t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,i=this.options.position,s=[],n=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(s=i.split?i.split(" "):[i[0],i[1]],1===s.length&&(s[1]=s[0]),t.each(["left","top"],function(t,e){+s[t]===s[t]&&(n[t]=s[t],s[t]=e)}),i={my:s[0]+(0>n[0]?n[0]:"+"+n[0])+" "+s[1]+(0>n[1]?n[1]:"+"+n[1]),at:s.join(" ")}),i=t.extend({},t.ui.dialog.prototype.options.position,i)):i=t.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(i),e||this.uiDialog.hide()}})}(jQuery),function(t){var e=/up|down|vertical/,i=/up|left|vertical|horizontal/;t.effects.effect.blind=function(s,n){var o,a,r,h=t(this),l=["position","top","bottom","left","right","height","width"],c=t.effects.setMode(h,s.mode||"hide"),u=s.direction||"up",d=e.test(u),p=d?"height":"width",f=d?"top":"left",g=i.test(u),m={},v="show"===c;h.parent().is(".ui-effects-wrapper")?t.effects.save(h.parent(),l):t.effects.save(h,l),h.show(),o=t.effects.createWrapper(h).css({overflow:"hidden"}),a=o[p](),r=parseFloat(o.css(f))||0,m[p]=v?a:0,g||(h.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),m[f]=v?r:a+r),v&&(o.css(p,0),g||o.css(f,r+a)),o.animate(m,{duration:s.duration,easing:s.easing,queue:!1,complete:function(){"hide"===c&&h.hide(),t.effects.restore(h,l),t.effects.removeWrapper(h),n()}})}}(jQuery),function(t){t.effects.effect.bounce=function(e,i){var s,n,o,a=t(this),r=["position","top","bottom","left","right","height","width"],h=t.effects.setMode(a,e.mode||"effect"),l="hide"===h,c="show"===h,u=e.direction||"up",d=e.distance,p=e.times||5,f=2*p+(c||l?1:0),g=e.duration/f,m=e.easing,v="up"===u||"down"===u?"top":"left",_="up"===u||"left"===u,b=a.queue(),y=b.length;for((c||l)&&r.push("opacity"),t.effects.save(a,r),a.show(),t.effects.createWrapper(a),d||(d=a["top"===v?"outerHeight":"outerWidth"]()/3),c&&(o={opacity:1},o[v]=0,a.css("opacity",0).css(v,_?2*-d:2*d).animate(o,g,m)),l&&(d/=Math.pow(2,p-1)),o={},o[v]=0,s=0;p>s;s++)n={},n[v]=(_?"-=":"+=")+d,a.animate(n,g,m).animate(o,g,m),d=l?2*d:d/2;l&&(n={opacity:0},n[v]=(_?"-=":"+=")+d,a.animate(n,g,m)),a.queue(function(){l&&a.hide(),t.effects.restore(a,r),t.effects.removeWrapper(a),i()}),y>1&&b.splice.apply(b,[1,0].concat(b.splice(y,f+1))),a.dequeue()}}(jQuery),function(t){t.effects.effect.clip=function(e,i){var s,n,o,a=t(this),r=["position","top","bottom","left","right","height","width"],h=t.effects.setMode(a,e.mode||"hide"),l="show"===h,c=e.direction||"vertical",u="vertical"===c,d=u?"height":"width",p=u?"top":"left",f={};t.effects.save(a,r),a.show(),s=t.effects.createWrapper(a).css({overflow:"hidden"}),n="IMG"===a[0].tagName?s:a,o=n[d](),l&&(n.css(d,0),n.css(p,o/2)),f[d]=l?o:0,f[p]=l?0:o/2,n.animate(f,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){l||a.hide(),t.effects.restore(a,r),t.effects.removeWrapper(a),i()}})}}(jQuery),function(t){t.effects.effect.drop=function(e,i){var s,n=t(this),o=["position","top","bottom","left","right","opacity","height","width"],a=t.effects.setMode(n,e.mode||"hide"),r="show"===a,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h?"pos":"neg",u={opacity:r?1:0};t.effects.save(n,o),n.show(),t.effects.createWrapper(n),s=e.distance||n["top"===l?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(l,"pos"===c?-s:s),u[l]=(r?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&n.hide(),t.effects.restore(n,o),t.effects.removeWrapper(n),i()}})}}(jQuery),function(t){t.effects.effect.explode=function(e,i){function s(){b.push(this),b.length===u*d&&n()}function n(){p.css({visibility:"visible"}),t(b).remove(),g||p.hide(),i()}var o,a,r,h,l,c,u=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=u,p=t(this),f=t.effects.setMode(p,e.mode||"hide"),g="show"===f,m=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/d),_=Math.ceil(p.outerHeight()/u),b=[];for(o=0;u>o;o++)for(h=m.top+o*_,c=o-(u-1)/2,a=0;d>a;a++)r=m.left+a*v,l=a-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*v,top:-o*_}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:_,left:r+(g?l*v:0),top:h+(g?c*_:0),opacity:g?0:1}).animate({left:r+(g?0:l*v),top:h+(g?0:c*_),opacity:g?1:0},e.duration||500,e.easing,s)}}(jQuery),function(t){t.effects.effect.fade=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}}(jQuery),function(t){t.effects.effect.fold=function(e,i){var s,n,o=t(this),a=["position","top","bottom","left","right","height","width"],r=t.effects.setMode(o,e.mode||"hide"),h="show"===r,l="hide"===r,c=e.size||15,u=/([0-9]+)%/.exec(c),d=!!e.horizFirst,p=h!==d,f=p?["width","height"]:["height","width"],g=e.duration/2,m={},v={};t.effects.save(o,a),o.show(),s=t.effects.createWrapper(o).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],u&&(c=parseInt(u[1],10)/100*n[l?0:1]),h&&s.css(d?{height:0,width:c}:{height:c,width:0}),m[f[0]]=h?n[0]:c,v[f[1]]=h?n[1]:0,s.animate(m,g,e.easing).animate(v,g,e.easing,function(){l&&o.hide(),t.effects.restore(o,a),t.effects.removeWrapper(o),i()})}}(jQuery),function(t){t.effects.effect.highlight=function(e,i){var s=t(this),n=["backgroundImage","backgroundColor","opacity"],o=t.effects.setMode(s,e.mode||"show"),a={backgroundColor:s.css("backgroundColor")};"hide"===o&&(a.opacity=0),t.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(a,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&s.hide(),t.effects.restore(s,n),i()}})}}(jQuery),function(t){t.effects.effect.pulsate=function(e,i){var s,n=t(this),o=t.effects.setMode(n,e.mode||"show"),a="show"===o,r="hide"===o,h=a||"hide"===o,l=2*(e.times||5)+(h?1:0),c=e.duration/l,u=0,d=n.queue(),p=d.length;for((a||!n.is(":visible"))&&(n.css("opacity",0).show(),u=1),s=1;l>s;s++)n.animate({opacity:u},c,e.easing),u=1-u;n.animate({opacity:u},c,e.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&d.splice.apply(d,[1,0].concat(d.splice(p,l+1))),n.dequeue()}}(jQuery),function(t){t.effects.effect.puff=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"hide"),o="hide"===n,a=parseInt(e.percent,10)||150,r=a/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:o?a:100,from:o?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(e)},t.effects.effect.scale=function(e,i){var s=t(this),n=t.extend(!0,{},e),o=t.effects.setMode(s,e.mode||"effect"),a=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===o?0:100),r=e.direction||"both",h=e.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},c={y:"horizontal"!==r?a/100:1,x:"vertical"!==r?a/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==o&&(n.origin=h||["middle","center"],n.restore=!0),n.from=e.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*c.y,width:l.width*c.x,outerHeight:l.outerHeight*c.y,outerWidth:l.outerWidth*c.x},n.fade&&("show"===o&&(n.from.opacity=0,n.to.opacity=1),"hide"===o&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},t.effects.effect.size=function(e,i){var s,n,o,a=t(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],h=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],c=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=t.effects.setMode(a,e.mode||"effect"),f=e.restore||"effect"!==p,g=e.scale||"both",m=e.origin||["middle","center"],v=a.css("position"),_=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&a.show(),s={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},"toggle"===e.mode&&"show"===p?(a.from=e.to||b,a.to=e.from||s):(a.from=e.from||("show"===p?b:s),a.to=e.to||("hide"===p?b:s)),o={from:{y:a.from.height/s.height,x:a.from.width/s.width},to:{y:a.to.height/s.height,x:a.to.width/s.width}},("box"===g||"both"===g)&&(o.from.y!==o.to.y&&(_=_.concat(u),a.from=t.effects.setTransition(a,u,o.from.y,a.from),a.to=t.effects.setTransition(a,u,o.to.y,a.to)),o.from.x!==o.to.x&&(_=_.concat(d),a.from=t.effects.setTransition(a,d,o.from.x,a.from),a.to=t.effects.setTransition(a,d,o.to.x,a.to))),("content"===g||"both"===g)&&o.from.y!==o.to.y&&(_=_.concat(c).concat(l),a.from=t.effects.setTransition(a,c,o.from.y,a.from),a.to=t.effects.setTransition(a,c,o.to.y,a.to)),t.effects.save(a,_),a.show(),t.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),m&&(n=t.effects.getBaseline(m,s),a.from.top=(s.outerHeight-a.outerHeight())*n.y,a.from.left=(s.outerWidth-a.outerWidth())*n.x,a.to.top=(s.outerHeight-a.to.outerHeight)*n.y,a.to.left=(s.outerWidth-a.to.outerWidth)*n.x),a.css(a.from),("content"===g||"both"===g)&&(u=u.concat(["marginTop","marginBottom"]).concat(c),d=d.concat(["marginLeft","marginRight"]),l=r.concat(u).concat(d),a.find("*[width]").each(function(){var i=t(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&t.effects.save(i,l),i.from={height:s.height*o.from.y,width:s.width*o.from.x,outerHeight:s.outerHeight*o.from.y,outerWidth:s.outerWidth*o.from.x},i.to={height:s.height*o.to.y,width:s.width*o.to.x,outerHeight:s.height*o.to.y,outerWidth:s.width*o.to.x},o.from.y!==o.to.y&&(i.from=t.effects.setTransition(i,u,o.from.y,i.from),i.to=t.effects.setTransition(i,u,o.to.y,i.to)),o.from.x!==o.to.x&&(i.from=t.effects.setTransition(i,d,o.from.x,i.from),i.to=t.effects.setTransition(i,d,o.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){f&&t.effects.restore(i,l)})})),a.animate(a.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===p&&a.hide(),t.effects.restore(a,_),f||("static"===v?a.css({position:"relative",top:a.to.top,left:a.to.left}):t.each(["top","left"],function(t,e){a.css(e,function(e,i){var s=parseInt(i,10),n=t?a.to.left:a.to.top;return"auto"===i?n+"px":s+n+"px"})})),t.effects.removeWrapper(a),i()}})}}(jQuery),function(t){t.effects.effect.shake=function(e,i){var s,n=t(this),o=["position","top","bottom","left","right","height","width"],a=t.effects.setMode(n,e.mode||"effect"),r=e.direction||"left",h=e.distance||20,l=e.times||3,c=2*l+1,u=Math.round(e.duration/c),d="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},g={},m={},v=n.queue(),_=v.length;for(t.effects.save(n,o),n.show(),t.effects.createWrapper(n),f[d]=(p?"-=":"+=")+h,g[d]=(p?"+=":"-=")+2*h,m[d]=(p?"-=":"+=")+2*h,n.animate(f,u,e.easing),s=1;l>s;s++)n.animate(g,u,e.easing).animate(m,u,e.easing);n.animate(g,u,e.easing).animate(f,u/2,e.easing).queue(function(){"hide"===a&&n.hide(),t.effects.restore(n,o),t.effects.removeWrapper(n),i()}),_>1&&v.splice.apply(v,[1,0].concat(v.splice(_,c+1))),n.dequeue()}}(jQuery),function(t){t.effects.effect.slide=function(e,i){var s,n=t(this),o=["position","top","bottom","left","right","width","height"],a=t.effects.setMode(n,e.mode||"show"),r="show"===a,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h,u={};t.effects.save(n,o),n.show(),s=e.distance||n["top"===l?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,c?isNaN(s)?"-"+s:-s:s),u[l]=(r?c?"+=":"-=":c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&n.hide(),t.effects.restore(n,o),t.effects.removeWrapper(n),i()}})}}(jQuery),function(t){t.effects.effect.transfer=function(e,i){var s=t(this),n=t(e.to),o="fixed"===n.css("position"),a=t("body"),r=o?a.scrollTop():0,h=o?a.scrollLeft():0,l=n.offset(),c={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},u=s.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:u.top-r,left:u.left-h,height:s.innerHeight(),width:s.innerWidth(),position:o?"fixed":"absolute"}).animate(c,e.duration,e.easing,function(){d.remove(),i()})}}(jQuery),function(t){t.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var i=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(e),i.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s,n,o,a,r,h=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:h=!1,n=this.previousFilter||"",o=String.fromCharCode(e.keyCode),a=!1,clearTimeout(this.filterTimer),o===n?a=!0:o=n+o,r=RegExp("^"+i(o),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())}),s=a&&-1!==s.index(this.active.next())?this.active.nextAll(".ui-menu-item"):s,s.length||(o=String.fromCharCode(e.keyCode),r=RegExp("^"+i(o),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())})),s.length?(this.focus(e,s),s.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}h&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,s=this.element.find(this.options.menus);s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),s=e.prev("a"),n=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);s.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",s.attr("id"))}),e=s.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var i,s;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,n,o,a,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=e.height(),0>n?this.activeMenu.scrollTop(o+n):n+r>a&&this.activeMenu.scrollTop(o+n-a+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),0>i.offset().top-s-n}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),undefined):(this.next(e),undefined)},previousPage:function(e){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-s+n>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())),undefined):(this.next(e),undefined)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})}(jQuery),function(t,e){function i(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function s(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var o,a=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(o!==e)return o;var i,s,n=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=n.children()[0];return t("body").append(n),i=a.offsetWidth,n.css("overflow","scroll"),s=a.offsetWidth,i===s&&(s=n[0].clientWidth),n.remove(),o=i-s},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),s=e.isWindow?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]);return{element:i,isWindow:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var o,p,g,m,v,_,b=t(e.of),y=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(y),k=(e.collision||"flip").split(" "),x={};return _=n(b),b[0].preventDefault&&(e.at="left top"),p=_.width,g=_.height,m=_.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,i,s=(e[this]||"").split(" ");1===s.length&&(s=l.test(s[0])?s.concat(["center"]):c.test(s[0])?["center"].concat(s):["center","center"]),s[0]=l.test(s[0])?s[0]:"center",s[1]=c.test(s[1])?s[1]:"center",t=u.exec(s[0]),i=u.exec(s[1]),x[this]=[t?t[0]:0,i?i[0]:0],e[this]=[d.exec(s[0])[0],d.exec(s[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=g:"center"===e.at[1]&&(v.top+=g/2),o=i(x.at,p,g),v.left+=o[0],v.top+=o[1],this.each(function(){var n,l,c=t(this),u=c.outerWidth(),d=c.outerHeight(),f=s(this,"marginLeft"),_=s(this,"marginTop"),D=u+f+s(this,"marginRight")+w.width,C=d+_+s(this,"marginBottom")+w.height,I=t.extend({},v),P=i(x.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?I.left-=u:"center"===e.my[0]&&(I.left-=u/2),"bottom"===e.my[1]?I.top-=d:"center"===e.my[1]&&(I.top-=d/2),I.left+=P[0],I.top+=P[1],t.support.offsetFractions||(I.left=h(I.left),I.top=h(I.top)),n={marginLeft:f,marginTop:_},t.each(["left","top"],function(i,s){t.ui.position[k[i]]&&t.ui.position[k[i]][s](I,{targetWidth:p,targetHeight:g,elemWidth:u,elemHeight:d,collisionPosition:n,collisionWidth:D,collisionHeight:C,offset:[o[0]+P[0],o[1]+P[1]],my:e.my,at:e.at,within:y,elem:c})}),e.using&&(l=function(t){var i=m.left-I.left,s=i+p-u,n=m.top-I.top,o=n+g-d,h={target:{element:b,left:m.left,top:m.top,width:p,height:g},element:{element:c,left:I.left,top:I.top,width:u,height:d},horizontal:0>s?"left":i>0?"right":"center",vertical:0>o?"top":n>0?"bottom":"middle"};u>p&&p>r(i+s)&&(h.horizontal="center"),d>g&&g>r(n+o)&&(h.vertical="middle"),h.important=a(r(i),r(s))>a(r(n),r(o))?"horizontal":"vertical",e.using.call(this,t,h)}),c.offset(t.extend(I,{using:l}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,o=s.width,r=t.left-e.collisionPosition.marginLeft,h=n-r,l=r+e.collisionWidth-o-n;e.collisionWidth>o?h>0&&0>=l?(i=t.left+h+e.collisionWidth-o-n,t.left+=h-i):t.left=l>0&&0>=h?n:h>l?n+o-e.collisionWidth:n:h>0?t.left+=h:l>0?t.left-=l:t.left=a(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,o=e.within.height,r=t.top-e.collisionPosition.marginTop,h=n-r,l=r+e.collisionHeight-o-n;e.collisionHeight>o?h>0&&0>=l?(i=t.top+h+e.collisionHeight-o-n,t.top+=h-i):t.top=l>0&&0>=h?n:h>l?n+o-e.collisionHeight:n:h>0?t.top+=h:l>0?t.top-=l:t.top=a(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,o=n.offset.left+n.scrollLeft,a=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-h,u=l+e.collisionWidth-a-h,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-a-o,(0>i||r(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-h,(s>0||u>r(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,o=n.offset.top+n.scrollTop,a=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-h,u=l+e.collisionHeight-a-h,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>c?(s=t.top+p+f+g+e.collisionHeight-a-o,t.top+p+f+g>c&&(0>s||r(c)>s)&&(t.top+=p+f+g)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+g-h,t.top+p+f+g>u&&(i>0||u>r(i))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,n,o,a=document.getElementsByTagName("body")[0],r=document.createElement("div");e=document.createElement(a?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&t.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)e.style[o]=s[o];e.appendChild(r),i=a||document.documentElement,i.insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=t(r).offset().left,t.support.offsetFractions=n>10&&11>n,e.innerHTML="",i.removeChild(e)}()}(jQuery),function(t,e){t.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()
},value:function(t){return t===e?this.options.value:(this.options.value=this._constrainedValue(t),this._refreshValue(),e)},_constrainedValue:function(t){return t===e&&(t=this.options.value),this.indeterminate=t===!1,"number"!=typeof t&&(t=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}})}(jQuery),function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),e=n.length;i>e;e++)a.push(o);this.handles=n.add(t(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):this.range=t([])},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,o,a,r,h,l,c=this,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-c.values(e));(n>i||n===i&&(e===c._lastChangedValue||c.values(e)===u.min))&&(n=i,o=t(this),a=e)}),r=this._start(e,a),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,o.addClass("ui-state-active").focus(),h=o.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-h.left-o.width()/2,top:e.pageY-h.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,n,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),o=this._valueMin()+s*n,this._trimAlignValue(o)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var s,n,o;this.options.values&&this.options.values.length?(s=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>s||1===e&&s>i)&&(i=s),i!==this.values(e)&&(n=this.values(),n[e]=i,o=this._trigger("slide",t,{handle:this.handles[e],value:i,values:n}),s=this.values(e?0:1),o!==!1&&this.values(e,i,!0))):i!==this.value()&&(o=this._trigger("slide",t,{handle:this.handles[e],value:i}),o!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),undefined):this._value()},values:function(e,i){var s,n,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),undefined;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(s=this.options.values,n=arguments[0],o=0;s.length>o;o+=1)s[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,s,n,o,a=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),c["horizontal"===h.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[l?"animate":"css"](c,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),o=this._valueMax(),i=o!==n?100*((s-n)/(o-n)):0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](c,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(i){var s,n,o,a,r=t(i.target).data("ui-slider-handle-index");switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(i.target).addClass("ui-state-active"),s=this._start(i,r),s===!1))return}switch(a=this.options.step,n=o=this.options.values&&this.options.values.length?this.values(r):this.value(),i.keyCode){case t.ui.keyCode.HOME:o=this._valueMin();break;case t.ui.keyCode.END:o=this._valueMax();break;case t.ui.keyCode.PAGE_UP:o=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;o=this._trimAlignValue(n+a);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;o=this._trimAlignValue(n-a)}this._slide(i,r,o)},click:function(t){t.preventDefault()},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})}(jQuery),function(t){function e(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e={},i=this.element;return t.each(["min","max","step"],function(t,s){var n=i.attr(s);void 0!==n&&n.length&&(e[s]=n)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t),void 0)},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function i(){var t=this.element[0]===this.document[0].activeElement;t||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){return t(e.currentTarget).hasClass("ui-state-active")?this._start(e)===!1?!1:(this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&t.height()>0&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(e){var i=this.options,s=t.ui.keyCode;switch(e.keyCode){case s.UP:return this._repeat(null,1,e),!0;case s.DOWN:return this._repeat(null,-1,e),!0;case s.PAGE_UP:return this._repeat(null,i.page,e),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(t){return this.spinning||this._trigger("start",t)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&this._trigger("spin",e,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,s=this.options;return e=null!==s.min?s.min:0,i=t-e,i=Math.round(i/s.step)*s.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==s.max&&t>s.max?s.max:null!==s.min&&s.min>t?s.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var i=this._parse(this.element.val());return this.options[t]=e,this.element.val(this._format(i)),void 0}("max"===t||"min"===t||"step"===t)&&"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(t,e),"disabled"===t&&(e?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:e(function(t){this._super(t),this._value(this.element.val())}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(t,e){var i;""!==t&&(i=this._parse(t),null!==i&&(e||(i=this._adjustValue(i)),t=this._format(i))),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?(e(this._value).call(this,t),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(t,e){function i(){return++n}function s(t){return t.hash.length>1&&decodeURIComponent(t.href.replace(o,""))===decodeURIComponent(location.href.replace(o,""))}var n=0,o=/#.*$/;t.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var i=this.options.active,s=this.options.collapsible,n=location.hash.substring(1);return null===i&&(n&&this.tabs.each(function(s,o){return t(o).attr("aria-controls")===n?(i=s,!1):e}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=this.tabs.length?0:!1)),i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),-1===i&&(i=s?!1:0)),!s&&i===!1&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(i){var s=t(this.document[0].activeElement).closest("li"),n=this.tabs.index(s),o=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:o=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(n),e;case t.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(n===this.options.active?!1:n),e;default:return}i.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,o),i.ctrlKey||(s.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):e},_findNextTab:function(e,i){function s(){return e>n&&(e=0),0>e&&(e=n),e}for(var n=this.tabs.length-1;-1!==t.inArray(s(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,i){return"active"===t?(this._activate(i),e):"disabled"===t?(this._setupDisabled(i),e):(this._super(t,i),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",i),i||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(i),"heightStyle"===t&&this._setupHeightStyle(i),e)},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,n){var o,a,r,h=t(n).uniqueId().attr("id"),l=t(n).closest("li"),c=l.attr("aria-controls");s(n)?(o=n.hash,a=e.element.find(e._sanitizeSelector(o))):(r=e._tabId(l),o="#"+r,a=e.element.find(o),a.length||(a=e._createPanel(r),a.insertAfter(e.panels[i-1]||e.tablist)),a.attr("aria-live","polite")),a.length&&(e.panels=e.panels.add(a)),c&&l.data("ui-tabs-aria-controls",c),l.attr({"aria-controls":o.substring(1),"aria-labelledby":h}),a.attr("aria-labelledby",h)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,s=0;i=this.tabs[s];s++)e===!0||-1!==t.inArray(s,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,s=this.element.parent();"fill"===e?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),o=n.closest("li"),a=o[0]===s[0],r=a&&i.collapsible,h=r?t():this._getPanelForTab(o),l=s.length?this._getPanelForTab(s):t(),c={oldTab:s,oldPanel:l,newTab:r?t():o,newPanel:h};e.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||this._trigger("beforeActivate",e,c)===!1||(i.active=r?!1:this.tabs.index(o),this.active=a?t():o,this.xhr&&this.xhr.abort(),l.length||h.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(o),e),this._toggle(e,c))},_toggle:function(e,i){function s(){o.running=!1,o._trigger("activate",e,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&o.options.show?o._show(a,o.options.show,s):(a.show(),s())}var o=this,a=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),a.length&&r.length?i.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,s=this._findActive(e);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var s=this.options.disabled;s!==!1&&(i===e?s=!1:(i=this._getIndex(i),s=t.isArray(s)?t.map(s,function(t){return t!==i?t:null}):t.map(this.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(s))},disable:function(i){var s=this.options.disabled;if(s!==!0){if(i===e)s=!0;else{if(i=this._getIndex(i),-1!==t.inArray(i,s))return;s=t.isArray(s)?t.merge([i],s).sort():[i]}this._setupDisabled(s)}},load:function(e,i){e=this._getIndex(e);var n=this,o=this.tabs.eq(e),a=o.find(".ui-tabs-anchor"),r=this._getPanelForTab(o),h={tab:o,panel:r};s(a[0])||(this.xhr=t.ajax(this._ajaxSettings(a,i,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){r.html(t),n._trigger("load",i,h)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&n.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr("href"),beforeSend:function(e,o){return n._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:o},s))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(t){function e(e,i){var s=(e.attr("aria-describedby")||"").split(/\s+/);s.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(s.join(" ")))}function i(e){var i=e.data("ui-tooltip-id"),s=(e.attr("aria-describedby")||"").split(/\s+/),n=t.inArray(i,s);-1!==n&&s.splice(n,1),e.removeData("ui-tooltip-id"),s=t.trim(s.join(" ")),s?e.attr("aria-describedby",s):e.removeAttr("aria-describedby")}var s=0;t.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,i){var s=this;return"disabled"===e?(this[i?"_disable":"_enable"](),this.options[e]=i,void 0):(this._super(e,i),"content"===e&&t.each(this.tooltips,function(t,e){s._updateContent(e)}),void 0)},_disable:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var i=this,s=t(e?e.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&s.parents().each(function(){var e,s=t(this);s.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._updateContent(s,e))},_updateContent:function(t,e){var i,s=this.options.content,n=this,o=e?e.type:null;return"string"==typeof s?this._open(e,t,s):(i=s.call(t[0],function(i){t.data("ui-tooltip-open")&&n._delay(function(){e&&(e.type=o),this._open(e,t,i)})}),i&&this._open(e,t,i),void 0)},_open:function(i,s,n){function o(t){l.of=t,a.is(":hidden")||a.position(l)}var a,r,h,l=t.extend({},this.options.position);
if(n){if(a=this._find(s),a.length)return a.find(".ui-tooltip-content").html(n),void 0;s.is("[title]")&&(i&&"mouseover"===i.type?s.attr("title",""):s.removeAttr("title")),a=this._tooltip(s),e(s,a.attr("id")),a.find(".ui-tooltip-content").html(n),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:o}),o(i)):a.position(t.extend({of:s},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){a.is(":visible")&&(o(l.of),clearInterval(h))},t.fx.interval)),this._trigger("open",i,{tooltip:a}),r={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=s[0],this.close(i,!0)}},remove:function(){this._removeTooltip(a)}},i&&"mouseover"!==i.type||(r.mouseleave="close"),i&&"focusin"!==i.type||(r.focusout="close"),this._on(!0,s,r)}},close:function(e){var s=this,n=t(e?e.currentTarget:this.element),o=this._find(n);this.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&n.attr("title",n.data("ui-tooltip-title")),i(n),o.stop(!0),this._hide(o,this.options.hide,function(){s._removeTooltip(t(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete s.parents[e]}),this.closing=!0,this._trigger("close",e,{tooltip:o}),this.closing=!1)},_tooltip:function(e){var i="ui-tooltip-"+s++,n=t("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return t("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[i]=e,n},_find:function(e){var i=e.data("ui-tooltip-id");return i?t("#"+i):t()},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0),t("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))})}})}(jQuery);



window.log = function(){
  log.history = log.history || [];   
  log.history.push(arguments);
  if(this.console) {
    arguments.callee = arguments.callee.caller;
    var newarr = [].slice.call(arguments);
    (typeof console.log === 'object' ? log.apply.call(console.log, console, newarr) : console.log.apply(console, newarr));
  }
};


(function(b){function c(){}for(var d="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,timeStamp,profile,profileEnd,time,timeEnd,trace,warn".split(","),a;a=d.pop();){b[a]=b[a]||c}})((function(){try
{return window.console;}catch(err){return window.console={};}})());



$.ui.autocomplete.prototype._renderItem = function (ul, item) {
    var newlabel = item.label;
    newlabel = newlabel.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + $.ui.autocomplete.escapeRegex(this.term) + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong>$1</strong>");
    return $("<li></li>")
            .data("item.autocomplete", item)
            .append("<a>" + newlabel + "</a>")
            .appendTo(ul);
};



var store = {
	//: options store
	optionsStore : {},
	
	//: stock store
	stockStore : {},

	//: price store
	priceStore : {},
        //: price store
	showroomAddress : {},
	PlpData : {},
	PdpData : {},
	ga : {},
}


var Rocket = Rocket || {};

Rocket.zoomSettings = {loaded: false, imgBig_width: 0, imgBig_height: 0, Area: null};

(function() {
    $(document).ready(function() {
    if ($('#magnifier').length) {
        
        
                   
        
        var $prdImage = $("#prdImage");
        
        
        var imgMid_width = $prdImage.width() || 277;
        var imgMid_height = $prdImage.height() || 400;
        
        
        var $productZoom = $("#productZoom");
        
        
        var productZoomImageUrl = $productZoom.data("zoom-image");
        if(productZoomImageUrl==undefined){
            return;
        }
        
        
        var productZoomImage = new Image;
        
        
        productZoomImage.onload = function() {
            if (productZoomImage.width) {
                Rocket.zoomSettings.imgBig_width  = productZoomImage.width;
                Rocket.zoomSettings.imgBig_height = productZoomImage.height;
                
                Rocket.zoomSettings.loaded = true;
            }
        };
        
        productZoomImage.src = productZoomImageUrl;
        
        
        var magnifier_width_half = $('#magnifier').outerWidth() / 2;
        var magnifier_height_half = $('#magnifier').outerHeight() / 2;
        
        
        var area = $prdImage.position();
        Rocket.zoomSettings.Area = {
            area_X_min : area.left,
            area_X_max : area.left + imgMid_width - magnifier_width_half * 2,
            area_Y_min : area.top,
            area_Y_max : area.top + imgMid_height - magnifier_height_half * 2,
            offset:  $prdImage.offset()

        }
        $(window).resize(function(){
            var $prdImage = $("#prdImage");
            var area = $prdImage.position();
           Rocket.zoomSettings.Area = {
                area_X_min : area.left,
                area_X_max : area.left + imgMid_width - magnifier_width_half * 2,
                area_Y_min : area.top,
                area_Y_max : area.top + imgMid_height - magnifier_height_half * 2,
                offset:  $prdImage.offset()
            }
        });
        

        var zoomImgFrame_width = $productZoom.width();
        var zoomImgFrame_height = $productZoom.height();

        $(window).resize(function(){
            var $prdImage = $("#prdImage");
            var area = $prdImage.position();
            Rocket.zoomSettings.Area = {
                area_X_min : area.left,
                area_X_max : area.left + imgMid_width - magnifier_width_half * 2,
                area_Y_min : area.top,
                area_Y_max : area.top + imgMid_height - magnifier_height_half * 2,
                offset : $prdImage.offset()
            };
        });

        $('#prdZoomBox').mouseenter(function() {
            
            if(Rocket.zoomSettings.loaded && $('#prdImage').attr('src').indexOf('placeholder')==-1){
                show_zoom();
            }
        }).mouseleave(function() {        
            hide_zoom();
        }).mousemove(function(e) {
            
            var magX = e.pageX - magnifier_width_half - Rocket.zoomSettings.Area.offset.left;
            var magY = e.pageY - magnifier_height_half - Rocket.zoomSettings.Area.offset.top;
    
            
            if (magX < Rocket.zoomSettings.Area.area_X_min) {
                magX = Rocket.zoomSettings.Area.area_X_min;
            } else if (magX > Rocket.zoomSettings.Area.area_X_max) {
                magX = Rocket.zoomSettings.Area.area_X_max;
            }
            if (magY < Rocket.zoomSettings.Area.area_Y_min) {
                magY = Rocket.zoomSettings.Area.area_Y_min;
            }
            else if (magY > Rocket.zoomSettings.Area.area_Y_max) {
                magY = Rocket.zoomSettings.Area.area_Y_max;
            }
            
            
            $('#magnifier').css('top', magY).css('left', magX);
            
            
            var imgBig_maxOffX = Rocket.zoomSettings.imgBig_width - zoomImgFrame_width;
            var imgBig_maxOffY = Rocket.zoomSettings.imgBig_height - zoomImgFrame_height;
            
            
            var offX_factor = imgBig_maxOffX * 100 / Rocket.zoomSettings.Area.area_X_max / 100;
            var offY_factor = imgBig_maxOffY * 100 / Rocket.zoomSettings.Area.area_Y_max / 100;
            
            
            
            var offX = 0 - magX * offX_factor;
            var offY = 0 - magY * offY_factor;
            
            
            $productZoom.css('backgroundPosition', offX+'px '+offY+'px');
            
        }).click(function(e) {  
            if($prdImage.attr('src').indexOf('placeholder')==-1){
                e.stopPropagation();
                var urlBig = $productZoom.css('background-image');
                urlBig = urlBig.replace(/[\"\'\(\)]|url/g, '');
                
                $('#prdZoomExpanded').css('height', $(document).height());
                $('#prdZoomExpanded').insertAfter($('#page'));
                $('#prdZoomExpandedImage').attr('src', encodeURI(urlBig));
                $('#prdZoomExpanded').fadeIn();
            }
        });    
    
        
        $('#prdZoomExpanded').click(function() {
            hide_overlay();
        });
        
        
        
        $(document).keyup(function(e) {
            if (27 == e.keyCode) {
                hide_overlay();
            }
        });
        
    }
});

function show_zoom () {
    $('#productZoom').stop(true).fadeTo('normal', 1);
    $('#magnifier').show();    
}
function hide_zoom () {
    $('#productZoom').stop(true).fadeOut('fast');
    $('#magnifier').hide();   
}
function hide_overlay() {
    $('#prdZoomExpanded').fadeOut();
}
})();




var Rocket = Rocket || {};
Rocket.image = function() {
    
    
    
    var productZoomId     = "productZoom",
        prdImageId        = "prdImage",
        prdMediaId        = "prdMedia";
    
    return {
        
        
        
        initSetImage: function() {
            
            this.$productZoom = $('#' + productZoomId);
            this.$prdImage = $('#' + prdImageId);
            this.$prdMedia = $('#' + prdMediaId);
            
            
            this.$prdMedia.on('mouseenter', '[data-js-function="setImage"]', {that: this}, Rocket.image.setImageCallback);
            
            
            this.$prdMedia.on('error', '[data-js-function="setPlaceholderOnError"]', {that: this}, Rocket.image.setPlaceholderOnErrorCallback);
            
        },
        
        
        setImageCallback: function(e) {
            var that = e.data.that;
            $this = $(this);
            $productZoom = that.$productZoom;
            $prdImage = that.$prdImage;
            imageProduct = $this.data('image-product');
            imageBig = $this.data('image-big');
            
            $prdImage.stop().attr('src', encodeURI(imageProduct));
            if ($productZoom.length) {
                $productZoom.css('background-image', 'url(' + encodeURI(imageBig) + ')');
            }
        },
        
        
        setPlaceholderOnErrorCallback: function(e) {
            var that = e.data.that;
            $this = $(this);
            $this.parent().addClass('placeholder');
            $this.attr('src', $this.data('placeholder'));
        }
    };
}();
$(document).ready(function() {Rocket.image.initSetImage()});
var searchDefaultLabel = 'Search';

var callWebTrek = function() {
    try {
        webTrek();
    }
    catch(e){
        // do nothing
    }
}



$(document).ready(function(){ 
    var noresult = "<div class='no-search-found width100 wrapper'>"
                + "<img src='/images/clarks/icons/no-product-search.png' alt='No search found' title='No search found' class='img js-image-responsive no-search-icon'>"
                + "<p class='no-search-found-msg'>Sorry,<br>we can't find any styles that match your search.<br>Please check your spelling and try again.</p> "
                + "<div>"
                + "</div>"
                + "</div>";
    
    var autoCompletionCurrent = null;
    var autoCompleteRequest = null;
    var autoCompleteCategoryId = null;
    var autoCompleteCategoryUrlKey = null;
    var searchInputValue = null;
    var terms = null;
    $('#searchInput').bind('click focus', function() {

        var searchTerm = $('#searchInput').val();
        trimmedSearchInput = $.trim(searchTerm);
        if (trimmedSearchInput == searchDefaultLabel){
          searchInputValue= $('#searchInput').val();
        //  $('#searchBoxHidden').val(searchInputValue);
          $('#searchInput').removeClass('def_serch_colr');
          $('#searchInput').attr({"placeholder":searchDefaultLabel,"value":""}); 
        }else if(trimmedSearchInput==''){
            var searchOption = $('#fk-search-select').attr({"placeholder":searchDefaultLabel,"value":""});
            //searchInputValue = 'Search...';
        }
        else{
            //$('#searchBoxHidden').val($('#searchInput').val());
        }
      });
    $('#searchInput').bind('blur', function(){
        var searchTerm = $('#searchInput').val();
        trimmedSearchInput = $.trim(searchTerm);
        if (trimmedSearchInput=='') {
           $('#searchInput').attr({"placeholder":searchDefaultLabel,"value":""});
           $('#searchInput').addClass('def_serch_colr');
           
        }
    });
    $('#searchInput').bind('keyup', function(evt){
        if(autoCompletionCurrent){
            $('#ac-'+autoCompletionCurrent).removeClass('s-selected');
        }
        if (evt.keyCode == 40 && $("#searchSuggestResult").is(':visible')) {
            if($('#ac-'+(autoCompletionCurrent+1)).length){
                autoCompletionCurrent++;
                $('#ac-'+autoCompletionCurrent).addClass('s-selected');
                $('#searchInput').val($('#ac-'+autoCompletionCurrent).attr('title'));
            }else{
                $('#ac-'+autoCompletionCurrent).addClass('s-selected');
            }
        } else if(evt.keyCode == 38 && $("#searchSuggestResult").is(':visible')) {
            if(autoCompletionCurrent>0){
                autoCompletionCurrent--;
                $('#ac-'+autoCompletionCurrent).addClass('s-selected');
                $('#searchInput').val($('#ac-'+autoCompletionCurrent).attr('title'));
            }
        } else if(evt.keyCode == 13) {
            $("#searchInputButtonNew").click();
        } else {
            //get rid of searches without characters (causes solr expections)
            var searchTerm = $('#searchInput').val();
            searchTerm = searchTerm.replace(/[(?=+*'?]/g,'');

            trimmedSearchInput = $.trim(searchTerm);
            if (!trimmedSearchInput){
                 $("#searchSuggestResult").html('').fadeOut(200);
                return;
            }
            
            var url = '/search/suggestion/?q='+encodeURIComponent(trimmedSearchInput);
            
            if(trimmedSearchInput.length>=2) { 
                 $('.search-loc-close').show();
                window.timer =  setTimeout(function(){ $.get(url, function(data) {
                    if (data) {
                        var data = $.parseJSON(data);
                        //get collection product details.
                        searchResult = data[1];
                        if(searchResult != '') {
                            autoCompletionCurrent=0;
                            $("#searchSuggestResult").html('');
                            var num = 0;
                            var resultWrapper = $("<ul/>").addClass("fsm");
                            var stickers = null;
                            for(var i in searchResult){
                                num++;
                                var item = searchResult[i];
                                var add = $('<li/>').addClass("ssg-item");
                                var itemRatingtotalResult = item.item_rating_total ? '<div class="avg-stars-plp"><span style="width:'+item.star_percent+'px;"></span></div>' : '<div></div>'; 
                                var oldPricestyle         = ((item.final_cross_price) && item.final_price != item.final_cross_price) ? 'block' : 'none';
                                var specialPricestyle     = ((item.final_discount) && item.final_price != item.final_cross_price) ? 'special-price' : '';
                                var discountStyle         = ((item.final_discount) && item.final_price != item.final_cross_price) ? 'inline-block' : 'none';
                                    stickers              = item.new_promotion_stickers ? '<div class="buy-get-offer off_sticker_horizontal" href="'+item.stickers_url+'" data-productSku="'+item.sku+'"><img src="'+item.imagepath+'/cms/Badges/'+item.stickers+'"/></div>':'<span class="discounts prod-discount" style=display:'+discountStyle+'>'+item.final_discount+'off</span>';
                                var htmlContent =  '<a href="' +item.link + '"><div class="search-product product-thumbnail-container"><div class="search-product-thumbnail-image">';
                                    htmlContent += '<img src="'+item.image+'" title="'+item.name+'"></div>';
                                    htmlContent += '<div class="search-product-description col-sm-12 col-xs-12 nopadding">';
                                    htmlContent += '<div class="search-product-description-title col-sm-6 col-xs-7 nopadding">';
                                    htmlContent += '<div class="search-product-name" title="'+item.name+'">' +item.name+ '</div>';
                                    htmlContent += '<div class="search-product-title">'+item.gender+' '+item.type+'</div>';
                                    htmlContent += '<div class="product-short-title">'+item.color_name_brand+'</div>';
                                    htmlContent += '<div class="product-rating">'+itemRatingtotalResult+'</div>';
                                    htmlContent += '</div>';
                                    htmlContent += '<div class="product-description-price col-sm-6 col-xs-5 nopadding">';
                                    htmlContent += '<div class="product-price "><span class='+specialPricestyle+'>'+item.final_price +'</span><span class="old-price" style=display:'+oldPricestyle+'>'+item.final_cross_price+'</span></div>';
                                    htmlContent += '</div>';
                                    htmlContent += '</div>';
                                    htmlContent += '</div>';
                                    htmlContent += stickers+'</a>';
                                    
                                $(add).html(htmlContent);
                                $(add).attr('id', 'ac-' + num);
                                $(add).attr('title', item.name);
                                 
                                $(resultWrapper).append(add);
                                var item = htmlContent = itemRatingtotalResult = oldPricestyle = specialPricestyle = discountStyle = '';
                                
                            }
                            
                            $("#searchSuggestResult").addClass('wrapper').removeClass('no-result');
                            $("#searchSuggestResult").html(resultWrapper);
                            $("#searchSuggestResult").css({
                                zIndex:8
                            }).show();
                        } else {
                            $("#searchSuggestResult").addClass('no-result').removeClass('wrapper');
                            $("#searchSuggestResult").html(noresult).css('display','block');
                        }
                    } else {
                        $("#searchSuggestResult").addClass('no-result').removeClass('wrapper');
                        $("#searchSuggestResult").html(noresult).css('display','block');
                    }                    
                });},500);
            } else {
                $('.search-loc-close').hide();
                $("#searchSuggestResult").html('').fadeOut(200);
            }
        }
    }).keydown(function(){clearTimeout(window.timer);});
    $('#searchInput').trigger('blur');
    $("#searchInputButtonNew").click(function(e) {
        e.preventDefault();
        var catalog = $("#fk-search-select").val();
        catalog_root =  catalog + '/';
        var searchTerm = $('#searchInput').val();       
       for (var i in terms) {
           var item = terms[i];
           itemLabel = item.plural;
           itemAlt = item.alt;
               if((searchTerm.toLowerCase()== itemLabel.toLowerCase()) || searchTerm.toLowerCase()== itemAlt.toLowerCase()){
                   var suggest_url = item.url_key;
                   break;
               }
       }
       
        if (typeof(suggest_url) === "undefined") {
            catalog_url = catalog_root;
        } else {
            catalog_url = (suggest_url != "") ? suggest_url : catalog_root;
        }
        if (searchTerm == 'Find bedsheets, sofas, beds, wall-shelves etc.') {
            searchTerm = '';
        }
        searchTerm = searchTerm.replace(/[(?=+*'?]/g, '');
        trimmedSearchInput = $.trim(searchTerm);
        if (trimmedSearchInput == searchDefaultLabel || trimmedSearchInput == '') {
            return false;
        }
        if (!trimmedSearchInput) {
            if ($('#live_env_check').val() == 'live') {
                callWebTrek();
            }
             window.location.href = window.location.origin+catalog_url;
        }
        if (typeof(suggest_url) === "undefined") {
            catalog_url = catalog_root + '?q=' + encodeURIComponent(trimmedSearchInput);
        } else {
            catalog_url = (suggest_url != "") ? suggest_url : catalog_root + '?q=' + encodeURIComponent(trimmedSearchInput);
        }
        if ($('#live_env_check').val() == 'live') {
            callWebTrek();
        }
        window.location.href = window.location.origin+catalog_url;
        return false;
    });
    $('#searchInput').bind('keydown', function(evt) {
        evt = evt || window.event;

        if (evt.keyCode == 13) {
            var catalog = $("#fk-search-select").val();
            catalog_root = '/' + ((typeof catalog !== 'undefined' && catalog.length > 0) ? catalog : 'catalog') + '/';
            searchTerm = $('#searchInput').val();
            var $selectTitle = $('li[title]').filter(function() {
                return (searchTerm.toLowerCase()==$(this).text().toLowerCase());
            });
            suggest_url = $selectTitle.find('a:first').attr('href');
            if (typeof(suggest_url) === "undefined") {

            } else {
                catalog_url = (suggest_url != "") ? suggest_url : catalog_root;
            }
            if (searchTerm == 'Find bedsheets, sofas, beds, wall-shelves etc.') {
                searchTerm = '';
            }
            searchTerm = searchTerm.replace(/[(?=+*?]/g, '');
            trimmedSearchInput = $.trim(searchTerm);
            if (trimmedSearchInput == searchDefaultLabel || trimmedSearchInput == '') {
                return false;
            }
            if (!trimmedSearchInput) {
                if ($('#live_env_check').val() == 'live') {
                    callWebTrek();
                }
                window.location.href = window.location.origin+catalog_url;
            }
            if (typeof(suggest_url) === "undefined") {
                catalog_url = catalog_root + '?q=' + encodeURIComponent(trimmedSearchInput);
            } else {
                catalog_url = (suggest_url != "") ? suggest_url : catalog_root + '?q=' + encodeURIComponent(trimmedSearchInput);
            }
            if ($('#live_env_check').val() == 'live') {
                callWebTrek();
            }
            window.location.href = window.location.origin+catalog_url;
            return false;
        }
    });
    $('#searchSuggestResult').click(function() {
        if ($('#live_env_check').val() == 'live') {
            callWebTrek();
        }
    });
});




$(document).ready(function() {

  if (jQuery.support.leadingWhitespace == false && (!Modernizr.hasOwnProperty('input') || (Modernizr.hasOwnProperty('input') && !Modernizr.input.hasOwnProperty('placeholder') ))) {      
  $('[placeholder]').focus(function() {
            var input = $(this);
            if (input.val() == input.attr('placeholder')) {
                input.val('');
                input.removeClass('placeholder');
            }        }).blur(function() {
            var input = $(this);
            if (input.val() == '' || input.val() == input.attr('placeholder')) {
                input.addClass('placeholder');
                input.val(input.attr('placeholder'));
            }
        }).blur();
        $('[placeholder]').parents('form').submit(function() {
            $(this).find('[placeholder]').each(function() {
                var input = $(this);
                if (input.val() == input.attr('placeholder')) {
                    input.val('');
                }
            });
        });
    }
});
var PAGE_NAME = "HomePage";
function closeMenuItems(id, icon, classname) {
    var o = document.getElementById(id);
    if (o) {
        o.style.display = "none";
    }
    if (icon.length > 0) {
        var obj = document.getElementById(icon);
        if (obj) {
            var reg = new RegExp(classname);
            obj.className = obj.className.replace(reg, ' ');
        }
    }
}

function selectMItem(dd) {
    var displaytext = dd.options[dd.selectedIndex].text;
    displaylabel = searchDefaultLabel;
    var action = dd.options[dd.selectedIndex].value;
    $('#searchInput').addClass('def_serch_colr');
    document.getElementById('search-category-name').innerHTML = '' + displaytext;
    document.getElementById('searchInput').value = '' + displaylabel;
    var o = document.getElementById("fk-selmitem");
    if (o) {
        o.value = displaytext;
    }
    var fobj = document.getElementById("fk-header-search-form");
    if (fobj) {
        fobj.action = "/search/a/" + action;
    }
    var vobj = document.getElementById("fk-vertical-auto-suggestions");
    if (vobj) {
        vobj.value = action;
    }
    var srchBarWidth = document.getElementById('fk-search-bar').clientWidth;
    var ctgryWidth = document.getElementById('search-category').clientWidth;

    document.getElementById('search-box-container').style.paddingLeft = ctgryWidth + 'px';

}

document.onclick = checkClickEvent;
function checkClickEvent(e) {
    var target = (e && e.target) || (event && event.srcElement);
    
    var obj = document.getElementById('fk-mI');
    var obj2 = document.getElementById('fk-menuSelItem');
    var obj3 = document.getElementById('fk-menuSelIcon');
    var obj4 = document.getElementById('fk-menu-type-selector');
    var obj5 = document.getElementById('fk-mS');

    var obj6 = document.getElementById("fk-userinfo-dropdown-id");
    var obj7 = document.getElementById("fk-userinfo-id");
    var obj8 = document.getElementById("fk-dropdown-icon-id");
    var obj9 = document.getElementById("fk-auth-display-text");
    if (checkParent(target)) {
        if (obj) {
            closeMenuItems("fk-mI", "fk-menuSelIcon", "rotate180");
        }
        if (obj6) {
            closeMenuItems("fk-userinfo-dropdown-id", "fk-userinfo-id", "selected");
        }
    }
    if ((target == obj2) || (target == obj3) || (target == obj4) || (target == obj5)) {
        if (obj) {
            if (obj.style.display != 'none') {
                closeMenuItems("fk-mI", "fk-menuSelIcon", "rotate180");
            } else {
                obj.style.display = 'block';
                if (obj3)
                    obj3.className = obj3.className + " rotate180";
            }
        }
    } else if (target == obj7 || target == obj8 || target == obj9) {
        if (obj6) {
            if (obj6.style.display != 'none') {
                closeMenuItems("fk-userinfo-dropdown-id", "fk-userinfo-id", "selected");
            } else {
                obj6.style.display = 'block';
                obj7.className = obj7.className + ' selected';
            }
        }
    }
}

function checkParent(t) {
    while (t.parentNode) {
        if (t == document.getElementById('fk-menu-type-selector') || t == document.getElementById('fk-authsection-id')) {
            return false;
        }
        t = t.parentNode;
    }
    return true;
}
function submitSearchForm() {
    var sb = document.getElementById("fk-top-search-box");
    var val = sb.value;
    if (!val)
        val = "";
    val = val.replace(/^[ ]+/g, "").replace(/[ ]+$/g, "");
    if (val == "" || val.toLowerCase() == "search for items") {
        sb.focus();
        return false;
    }
    return true;
}

function get_detail_banner_popup(need_refresh, whichTab) {
    if (typeof get_detail_banner_pop == 'function')
        get_detail_banner_pop(need_refresh, whichTab);
    else
        window.location = '/viewcart';
}
function get_cart_banner_popup(eid, need_refresh) {
    if (typeof get_cart_banner_pop == 'function') {
        get_cart_banner_pop(eid, need_refresh);
    }
    else {
        
        var form = document.createElement('form');
        //It has to be 'GET' for slower network connections
        form.setAttribute('method', 'GET');
        form.setAttribute('action', '/viewcart');

        var hiddenField = document.createElement('input');
        hiddenField.setAttribute('type', 'hidden');
        hiddenField.setAttribute('name', 'eid');
        hiddenField.setAttribute('value', eid);

        form.appendChild(hiddenField);
        document.body.appendChild(form);
        form.submit();
    }
}
var img_onload = function(ele) {
    ele = ele || this;
};

var img_onerror = function(ele) {
    ele = ele || this;
    if (ele.getAttribute('data-retry') == null && ele.getAttribute('data-error-url')) {
        ele.setAttribute('data-retry', "true");
        var old_src = ele.src;
        ele.src = ele.getAttribute('data-error-url');
        ele.alt = 'error';
        //log to server
        var enable_logging = ele.getAttribute("data-logit");
        if (enable_logging) {
            var params = {};
            params.pid = ele.getAttribute("data-pid") || "";
            params.size = ele.getAttribute("data-imagesize") || "";
            params.page = window.PAGE_NAME || "";
            params.url = old_src;


            var url = "/ajaxlog/errorImageLog";
            var qs = [];
            for (var k in params) {
                qs.push(k + "=" + encodeURIComponent(params[k]));
            }
            url = url + "?" + qs.join("&");
            (new Image()).src = url;

        }
    }
};

function getFocus() {
    var searchInput = $("#searchInput");
    var category = $('#fk-search-select').val();
    $('#topsearch > div').hide();
    $('#topsearch_' + category).show();
    searchInput.val(searchInput.val());
    searchInput.focus();
}


var catalog = {
    image_width: 310,
    image_height: 310,
    image_count_sprite: 4,
    scrollToTopButton_visible: false,
    scrollToTopButtonObj: null,
    itemListRootEl: null,
    currentItemEl: null, 
    webtrekk_prod_ids: '',
    webtrekk_prod_nos: '',
    webtrekk_arr: new Array(),
    trackLoad : 2,
    loading : false,
    totalProductLeft : jQuery('#productCount').val(),
    pageSize : jQuery('#pageSize').val(),
    totalGroup : jQuery('#LazyLoadCount').val(),
    showingTotalProduct: jQuery('#pageSize').val(),
    seeAll :24,
            
    init:function() {
        $('.header a,.product-categories a,.breadcrumbWideDesign a,#searchInput,.filterby_left a').click(function() {
            catalog.setCookie('historyPlpPage',0,1);
           
        });
    
      // managage back button click (and backspace)
        if($('.header_cart').length === 0) {
            window.onload = function () { 
                if (window.history && window.history.pushState) {
                    $(window).on('popstate', function() {
                        if($('.catalogdetailpage').length > 0 || $(".catalogpage").length>0) { //this css class should be used in PDP page only
                            catalog.setCookie('backPLPPDP',1,1);
                            catalog.setCookie('isShowLoad',1,1);
                                                                                    
                        }else{
                            catalog.setCookie('backPLPPDP',0,1);
                            catalog.setCookie('seeall',0,1);
                        }
                        if($('#size-guide-popup').is(':visible')){
                            return false;
                        }                   
                            history.back(1);
                    });
                        window.history.pushState('back', null, null);
                }
            }
        }    
        
           
        //call plp banner fuction
     if ($("body").hasClass("catalogpage")) {
           if(localStorage['plp_banner_id']){
            try{
            this.plpBannerRender(localStorage['plp_banner_id']);  
            }
    catch(err){
                console.log(err);
            }
        }
    }
     //append product name on breadcrumb
    if ($("body").hasClass("catalogdetailpage")) {
         try{
        
        $("#beadcrumbproduct").addClass('breadshow');
        $("#beadcrumbproduct a").text($(".prod-name h1").text());
    }
    catch(err){
                console.log(err);
            }

    }
      //append breadcrumb levels
        if(localStorage['breadcrumbs_title1']){
         try{
            $("#beadcrumbhome").addClass('breadshow');
            $("#beadcrumblevel1").addClass('breadshow');
            $("#beadcrumbhome a").text("Home");
            $("#beadcrumbhome a").attr('title', 'Home');
            $("#beadcrumblevel1 a").text(localStorage['breadcrumbs_title1']);
            $('#beadcrumblevel1 a').attr('href',localStorage['breadcrumbs_url1']);   
            $('#beadcrumblevel1 a').attr('title',localStorage['breadcrumbs_title1']); 
            $('breadcrumbWideDesign li').css('display','inline-block');
            }catch(err){
                console.log(err);
            }
        }
        if(localStorage['breadcrumbs_title2']){
            try{
            $("#beadcrumblevel2").addClass('breadshow');
            $("#beadcrumblevel2 a").text(localStorage['breadcrumbs_title2']);
            $('#beadcrumblevel2 a').attr('href',localStorage['breadcrumbs_url2']);
            $('#beadcrumblevel2 a').attr('title',localStorage['breadcrumbs_title2']);
            $('breadcrumbWideDesign li').css('display','inline-block');
            }catch(err){
                    console.log(err);
            }
        }
        if(localStorage['breadcrumbs_title3']){
            try{
            $("#beadcrumblevel3").addClass('breadshow');
            $("#beadcrumblevel3 a").text(localStorage['breadcrumbs_title3']);
            $('#beadcrumblevel3 a').attr('href',localStorage['breadcrumbs_url3']);
            $('#beadcrumblevel3 a').attr('title',localStorage['breadcrumbs_title3']);
            }catch(err){
                    console.log(err);
            }
        }
        else if(localStorage['breadcrumbs_title3']==''){
            $("#beadcrumblevel3").remove();
        }
        if($('body').hasClass('catalogpage') || $('body').hasClass('catalogdetailpage') || $('.cms-staticpage > div').hasClass('category-landing-page')){
            var activeMenu = $.trim(localStorage['breadcrumbs_title1']);
            activeMenu = activeMenu.replace(/ +/g, "");
            if (activeMenu != null) {
                $('.navigation li a.js-level1').removeClass("active");
                $('#' + activeMenu).addClass("active");
            }
        }
        catalog.getImageSize();
        catalog.triggerLoad(0);
        catalog.initQuickView();
        this.addSelectedFilterCount();
        
        catalog.initPreviewImageScroll();
        catalog.initAutoLoading();
        catalog.adjustProduct();
        
        if ($('#fct-brand-search').length) {
            catalog.enableBrandSearch('facet_brand',"fct-brand-search input");
        }
	$(".fct").each(function() {
                  
            $('.refineByTitle').unbind('click').on("click",function(){
       		// hide all
                //if($(window).width()<768){jQuery(".refineListBox").hide();}   
               
                var isClosed = jQuery(this).hasClass("closed");
                var refineByName = jQuery(this).data("refinebyname"); 		   
               
                $('.refineListBox').css('border-bottom','1px solid rgb(51,51,51)'); 
                
                if (isClosed) {
                    $("."+refineByName).show('slow'); 
                    $(this).removeClass("closed").addClass('opened');
                    $(this).css('border-bottom','1px solid rgb(51,51,51)');
                    
                    
                }                
                else { 
                   jQuery("."+refineByName).hide('slow');                    
		    jQuery(this).removeClass("opened").addClass('closed');
                    $(this).css('border-bottom','1px dashed #eee');
                }
           });
           //close arrow script
           var closeArrow = $(this).find('.refineListBox .plp-up-arrow');
           var closeFilter = $(this).find('.refineListBox');
           var rotateArrow = $(this).find('.refineByTitle');
           var border = $(this).find('.refineByTitle');
           closeArrow.on('click', function(){
               if(closeFilter.css('display') === 'block'){
                    closeFilter.hide('slow');
                    rotateArrow.removeClass("opened").addClass('closed');
                    border.css('border-bottom','1px dotted rgb(204,204,204)');
                }
           });
           
            
	}); 
         
    },
    getCookie: function (name) {
        var value = "; " + document.cookie;
        var parts = value.split("; " + name + "=");
        if (parts.length === 2)  {
            return parts.pop().split(";").shift();
        }
        else {
            return null;
        }
    },
    setCookie: function (name,value,days) {
        var expires = "";
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days*24*60*60*1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + value + expires + "; path=/";
    },
    initAutoLoading: function () {        
        if (!jQuery("#productsCatalog").hasClass("autoLoadingList")) {
            catalog.loading = true; //No Loading here
        }
        catalog.totalProductLeft -= catalog.pageSize;
        catalog.totalProductLeft = (catalog.totalProductLeft < 0) ? 0 : catalog.totalProductLeft;
        catalog.showingTotalProduct = catalog.pageSize;
        //jQuery("#productLeft").text('( '+catalog.totalProductLeft+' more)');
        if(jQuery('#productsCatalog .product').length>0){ var productCount=jQuery('#productsCatalog .product').length; }
						else {var productCount=0;}
                jQuery('.remainCountDeskProduct span').text(parseInt(productCount+catalog.totalProductLeft));
		if($(window).width()>767){
						jQuery("#productLeft").text('('+catalog.totalProductLeft+' more)');
                                                //jQuery('.remainCountDesk span').text(productCount+catalog.totalProductLeft);
                                                jQuery('.remainCountDesk p').html('<span>'+parseInt(productCount+catalog.totalProductLeft)+'</span> Styles Found');
						
                                                jQuery('.remainCountDeskProduct span').text(parseInt(productCount+catalog.totalProductLeft));
                                                jQuery('.remainCountDesk').show();
                                                if (catalog.totalProductLeft <= 0) {
                                                    catalog.showingTotalProduct = productCount;
                                                    if ($('#disaplyProdCount').length > 0) {
                                                        var messageProd = ' ' + catalog.showingTotalProduct + ' ';
                                                        $('#disaplyProdCount').html(messageProd);
                                                    }
                                                }
		}else {		
						jQuery('.remainCountDeskProduct span').text(productCount+catalog.totalProductLeft);
                                                jQuery('.remainCountDesk p').html('<span>'+parseInt(productCount+catalog.totalProductLeft)+'</span> Styles Found');
						jQuery('.remainCount').show();
                                                
                                                if (catalog.totalProductLeft <= 0) {
                                                    catalog.showingTotalProduct = productCount;
                                                    if ($('#disaplyProdCount').length > 0) {
                                                        var messageProd = ' ' + catalog.showingTotalProduct + ' ';
                                                        $('#disaplyProdCount').html(messageProd);
                                                    }
                                                }
                                                
						setTimeout(function() {
								jQuery('.remainCount').fadeOut(1000);
						},3000);											
		} 

                if (parseInt(parseInt(productCount)+parseInt(catalog.totalProductLeft)) <= parseInt(catalog.pageSize)){
                    $('.more-button').hide();
                }
               
    $('body').one('click', '#seeAll', function () {
            $('#loadId').show();
            $('.more-button').hide();
            catalog.setCookie('seeall',2,1);
            catalog.catalogPageLoading(true);
    });
    
//         $("#productsCatalog li").hide();
//    $("#productsCatalog li").slice(0, 12).show();
//    
//    $("#loadMore").on('click', function (e) {
//        e.preventDefault();
//        $("#productsCatalog li:hidden").slice(0, 12).slideDown();
//        if ($("#productsCatalog li:hidden").length == 0) {
//            $("#load").fadeOut('slow');
//        }
//        $('html,body').animate({
//            scrollTop: $(this).offset().top
//        }, 1500);
//        
//        // product pagination count start
//        var allLi = $('#productsCatalog').children('li');
//        var visibleLi = allLi.filter('.product:visible').length;
//                
//        //var productShwoing = visibleLi.length;
//        if ($('#disaplyProdCount').length){
//            var messageProd = ' '+visibleLi+' '
//            $('#disaplyProdCount').html(messageProd);
//        }
//        // product pagination count ends
//        
//    });
    },
    
    plpLazyLoad: function() {
        if (jQuery('#manualLoading').length > 0 && jQuery(window).scrollTop() + jQuery(window).height() > (jQuery('#manualLoading').offset().top - 1000) ) {
            if (catalog.totalGroup === '0' || catalog.trackLoad <= catalog.totalGroup) {
                catalog.catalogPageLoading();
            }
        }
    },
    
            plpBannerRender: function(id) {
                           if (id) {
                                   $.ajax({
                                            url: "/catalog/plpbanner/"+ '?bannerid=' + id,
                                           success: function (result) {
                                                  $('.plp-banner').html(result);
                                           }

                                   });
                           }
  
          },
          
          
    adjustProduct: function() {
        jQuery(".autoLoadingList > li").each(function (e) {
            e++;
            var ob = jQuery(this);
            if (!ob.hasClass("last") && e % 3 === 0) {
                ob.addClass("last");
            }
        });
    },
    plpCacheHtml: function(){
        var historyPageSize = localStorage.getItem( 'historyPageSize' );
        var scrollTopPosition = localStorage.getItem( 'scrollTopPosition' );
        var historyHtml = localStorage.getItem("historyHtml");
        //$("html, body").animate({ scrollTop: scrollTopPosition+"px" }, '50');
        if(scrollTopPosition > 0){
            $("html, body").fadeTo( "fast", 0.33);
            jQuery("#productsCatalog").html(historyHtml);
            if(historyPageSize > 0){
                catalog.totalProductLeft -= (catalog.pageSize * (historyPageSize-1));
                catalog.totalProductLeft = (catalog.totalProductLeft < 0) ? 0 : catalog.totalProductLeft;
                catalog.trackLoad = parseInt(historyPageSize,10)+1;
                catalog.loading = false;
            }
            if(catalog.totalProductLeft <= 0){
                catalog.loading = true; //prevent further ajax loading
                jQuery('.animationImage').text('No More Products Found.');
                if(jQuery('.disCover-PlpBlock').length!=0)
                {
                        jQuery('.animationImage').hide();
                        jQuery('.disCover-PlpBlock').show();						
                } else 
                {
                        jQuery('.animationImage').show();
                }                    
                jQuery('.pageLoaderContainer').hide();
                jQuery('.clickToLoad').hide();
                jQuery("#productLeft").hide();
                jQuery('.pageLoaderContainer').css('cursor','default');
            }
            $(window).load(function(){
                $("html, body").animate({ scrollTop: scrollTopPosition }, '50');$("html, body").fadeTo( "slow", 1);;
            });  
        }
    },
    catalogPageLoading: function (all) {
        if (catalog.loading == false) {
            catalog.loading = true;
            jQuery('#loadId').show();
            jQuery('.animationImage').show();
            jQuery('.clickToLoad').hide();
            try{
                localStorage.setItem( 'historyPageSize', catalog.trackLoad);
            }
            catch(err){
                console.log(err);
            }
            
            if ("undefined" != typeof (all) && true === all) {
                //set backPLPpage page count 
                if(catalog.getCookie('backPLPPage')!=null && catalog.getCookie('backPLPPage')!=0){
                    catalog.trackLoad = parseInt(catalog.getCookie('backPLPPage')) + 1;
                    catalog.setCookie('backPLPPage',0,1);
                }
                var param = {'page': catalog.trackLoad, 'all': parseInt(catalog.totalProductLeft)};
                                
                if(catalog.seeAll<=catalog.totalProductLeft) { 
                   param.all = parseInt(catalog.seeAll); 
                }
                catalog.trackLoad +=1;
            } else {
                //set backPLPpage page count
                if(catalog.getCookie('backPLPPage')!=null && catalog.getCookie('backPLPPage')!=0){
                    catalog.trackLoad = parseInt(catalog.getCookie('backPLPPage')) + 1;
                    catalog.setCookie('backPLPPage',0,1);
                }
                catalog.pageSize = '12';
                var param = {'page': catalog.trackLoad};
            }
            
            jQuery.get(window.location.href, param, function (data) {
                
                if (data.indexOf('No products found.') > -1 
                            || catalog.totalProductLeft <= 0) {
                    catalog.trackLoad++;
                    catalog.loading = true; //prevent further ajax loading
                    jQuery('.animationImage').text('No More Products Found.');
					if(jQuery('.disCover-PlpBlock').length!=0)
					{
						jQuery('.animationImage').hide();
						jQuery('.disCover-PlpBlock').show();						
					} else 
					{
						jQuery('.animationImage').show();
					}                    
					jQuery('.pageLoaderContainer').hide();
                    jQuery('.clickToLoad').hide();
                    jQuery('#loadId').hide();
                    jQuery("#productLeft").hide();
                    jQuery('.pageLoaderContainer').css('cursor','default');
		    
                }
                else {
                    
                    var lastLi = jQuery('.autoLoadingList .last');
                    
                    jQuery(".autoLoadingList").append(data);
                    if ("undefined" != typeof (all) && true === all) {
                        if (parseInt(catalog.seeAll) > parseInt(catalog.totalProductLeft)) {                        
                           catalog.showingTotalProduct = parseInt(catalog.showingTotalProduct) + parseInt(catalog.totalProductLeft);
                        } else {
                           catalog.showingTotalProduct = parseInt(catalog.showingTotalProduct) + parseInt(catalog.seeAll);
                        }
                           catalog.totalProductLeft -= catalog.seeAll;
                           
                        if ($('#disaplyProdCount').length > 0) {
                                var messageProd = ' ' + catalog.showingTotalProduct + ' ';
                            $('#disaplyProdCount').html(messageProd);
                        }

                        //catalog.totalProductLeft = 0;
                        //catalog.catalogPageLoading();
                    } else {
                        if (parseInt(catalog.pageSize) > parseInt(catalog.totalProductLeft)) {                        
                            catalog.showingTotalProduct = parseInt(catalog.showingTotalProduct) + parseInt(catalog.totalProductLeft);
                        } else {
                            catalog.showingTotalProduct = parseInt(catalog.showingTotalProduct) + parseInt(catalog.pageSize);
                        }
                            catalog.totalProductLeft -= catalog.pageSize;
                    }
                    catalog.totalProductLeft = (catalog.totalProductLeft < 0) ? 0 : catalog.totalProductLeft;
                    catalog.trackLoad++;
                    catalog.loading = false;
                    catalog.adjustProduct();
                    
                    if ($('#disaplyProdCount').length > 0) {
                        var messageProd = ' ' + catalog.showingTotalProduct + ' ';
                        $('#disaplyProdCount').html(messageProd);
                    }
                    
                    if(catalog.totalProductLeft <= 0) {
                        $('.more-button').hide();
                        //catalog.catalogPageLoading();
                    }
                    
                    jQuery('.animationImage').hide();
		    jQuery('.disCover-PlpBlock').hide();
                    jQuery('.clickToLoad').show();
					if($(window).width()>767){
						jQuery("#productLeft").text('('+catalog.totalProductLeft+' more)');
					}else {	
						jQuery('.remainCountFixed span').text(catalog.totalProductLeft+' more');
						jQuery('.remainCountFixed').addClass('remainCountFixed').show();
						setTimeout(function() {
								jQuery('.remainCountFixed').fadeOut(1000);
						},3000);				
					}
                }
                $('#loadId').hide();
                 
                try{
                    localStorage.setItem("historyHtml", jQuery("#productsCatalog").html());
                }
                catch(err){
                    console.log(err);
                }

            }).fail(function (xhr, ajaxOptions, thrownError) {
                console.log(thrownError);
                jQuery("#productLeft").hide();
                jQuery('.animationImage').text(' Unable to load more products. Check your network connection');
                jQuery('#loadId').hide();
                jQuery('.animationImage').show();
                jQuery('.clickToLoad').hide();
                catalog.loading = true;
            });
        }
	
    },
    onError: function(img) {
        img.attr('src',$('#placeholder').val());
        img.onerror=null;
        img.attr('width',catalog.image_width);
        img.addClass('error-img');
        img.parents('.lazyImage').addClass('loaded');
        return true;
    },
    getImageSize: function() {
        if($(".itm-imageWrapper").attr("itm-img-width")){
            catalog.image_width = $(".itm-imageWrapper").attr("itm-img-width");
            catalog.image_height = $(".itm-imageWrapper").attr("itm-img-height");
            catalog.image_count_sprite = $(".itm-imageWrapper").attr("itm-img-sprites");
        }
        return true;
    },  
    lazyload: function(element,delay, catalog) {
        if(!element.hasClass('loaded') && !element.children('.itm-img').length) {
            
            var distY=element.offset().top;
            
            var distReal=distY-$(window).scrollTop();
            
            //var height=element.css('height');
            //var width =element.css('width');
            
            if(distReal<$(window).height()){

		var anchor = element.children('.addedForWebtrekk');
                var anchorId = anchor.attr('id');
		var idWebtrekArr = anchorId.split('_');
		if($.inArray(idWebtrekArr['1'], catalog.webtrekk_arr) == -1) {
		catalog.webtrekk_prod_nos += idWebtrekArr['0']+';';
		catalog.webtrekk_prod_ids += idWebtrekArr['1']+';';
		}
		catalog.webtrekk_arr[idWebtrekArr['0']] = idWebtrekArr['1'];
		
                
                var imgDiv = element.children('.itm-imageWrapper');
                var imgSrc = imgDiv.attr('id');
                
                var productName = imgDiv.attr('title');
                
                if(imgSrc.indexOf('lazyloadShow')==-1){
                    imgDiv.html('<img alt="' + productName + '" class="itm-img" style="display:none" src="' + imgSrc + '" onload="catalog.lazyloadShow($(this));" onerror="catalog.onError($(this));" width="'+catalog.image_width+'" height="'+catalog.image_height+'">');
                }
            };
        };
    },
    lazyloadShow: function(el) {
        el.parents('.lazyImage').addClass('loaded');
        el.parent().show();
        el.fadeIn();
    },
    initPreviewImageScroll: function() {
        $("#productsCatalog").on('mouseover', '[data-js-function="initMouseMove"]', catalog.initMouseMove);
    },
    initMouseMove: function(e) {
        var $element = $(this);
        
        if(!$element.hasClass('sprite-loaded') && $element.hasClass('loaded') && !$element.hasClass('sprite-loading')) {
            $element.addClass('sprite-loading');

            
            var img = $element.children('.itm-imageWrapper').children('img');

            if(!img.hasClass('error-img')) {
                
                var sprite = $element.children('.sprite').html();
                $element.children('.sprite').remove();
                
                img.load(function() {
                    $(this).parents('.lazyImage').removeClass('sprite-loading');
                    $(this).parents('.lazyImage').addClass('loaded');
                    $(this).parents('.lazyImage').addClass('sprite-loaded');
                    $(this).attr('width',catalog.image_width*catalog.image_count_sprite);
                    $(this).show();
                });
                img.attr('height',catalog.image_height);
                img.css('height',$(this).attr('height'));
                img.css('width',$(this).attr('width'));
                img.attr('src',sprite);
                img.hide();
                
                $element.parent().mousemove(function(e) {
                    catalog.mouseMove($(this),e);
                });
		 $element.parent().mouseout(function(e) {
                    catalog.mouseOut($(this),e);
                });
            }else{
                img.attr('width',catalog.image_width);
            }
        }
    },
    mouseMove: function(element,e) {
        
        var child = element.children('.sprite-loaded').first();
        if (child && child.hasClass('sprite-loaded')) {
            var img = child.children('.itm-imageWrapper').children('img');

            if (!img.hasClass('error-img')) {
                
                var x = e.pageX - element.offset().left;
                var parts = img.width()/4;
                var area = element.width()/4;

                if(x<area) {
                    img.css({'margin-left':'-'+parts+'px'});
                }else if(x>=area && x<=(area*2)){
                    img.css({'margin-left':'0px'});
                }else if(x>(area*2) && x<(area*3)){
                    img.css({'margin-left':'-'+(parts*2)+'px'});
                }else{
                    img.css({'margin-left':'-'+(parts*3)+'px'});
                }
            } else {
                img.attr('width',catalog.image_width);
                img.css({'margin-left':'0px'});
            }
        }
    },
    mouseOut: function(element,e) {
        
        var child = element.children('.sprite-loaded').first();
        if (child && child.hasClass('sprite-loaded')) {
            var img = child.children('.itm-imageWrapper').children('img');
            if (!img.hasClass('error-img')) {
		img.css({'margin-left':'0px'});
            } else {
                img.attr('width',catalog.image_width);
                img.css({'margin-left':'0px'});
            }
        }
    },

    triggerLoad: function(delay) {
	this.webtrekk_prod_nos = '';
	this.webtrekk_prod_ids = '';
        $('.lazyImage').each(function(){
            catalog.lazyload($(this),delay, catalog);
        });     
	if (catalog.webtrekk_prod_nos){
	 catalog.callWebtrekk();
	}
    },
    callWebtrekk: function() {
      //linkId : "Productimpressions", INDFUR-1478
      if(typeof wt !== 'object'){
	  return false;
      }
      
      wt.sendinfo({
	  customEcommerceParameter : { 20 : '"'+catalog.webtrekk_prod_ids+'"', 21 : '"'+catalog.webtrekk_prod_nos+'"' }
      });
    },
    initQuickView: function() {
        
        $("body").append('<div id="quickviewWindow" class="ui-dialog ui-dialogQuickview" style="display: none"><div id="uiDialogClicker"></div><div id="uiDialogBody" class="container rf-uiDialogBody"></div></div>');
        $(document.body).on('click', '.product-link .quickview, .product_quickview', function(event) {
            
            var sku = $(this).data("sku");
            if (sku) {
                catalog.itemListRootEl = $(this).closest('ul');
                catalog.openQuickView(sku);
            }

			//getDeliveryEstimate();       
	    event.stopImmediatePropagation();
	    return false;
        });
        
        $('#uiDialogBody').click(function(e) {
            //INDFUR-2230
            if (!$(e.target).parents().addBack().is('.colorFamilyItmMoreDiv') && !$(e.target).parents().addBack().is('.colorBoxPopUp')) {
               $('.colorBoxPopUp').hide();
               
            }            
            //End INDFUR-2230
            e.stopPropagation();
            return false;
        });
        
        $('#quickviewWindow, #uiDialogClicker').click(function(e) {
            catalog.closeQuickView(e);
        });

	
	
    },

    openQuickView: function(sku) {
        $('#quickviewWindow').show();
        catalog.loadQuickViewContent(sku);
    },
    loadQuickViewContent: function(sku) {
	$("#selectedSkuSelector .selectedSku").remove();
        $.get('/catalog/quickview/?sku=' + sku, function(data) {
            $uiDialogBody = $('#uiDialogBody');
            $uiDialogBody.html(data);
			$('.quickviewcarousel').owlCarousel({
						loop:true,
						nav:true,
						autoplay:false,
						items:1,
						smartSpeed: 1500,
						dots: true,
						singleItem: true,
						nav: true,
						navText: ["<i class='fa fa-angle-left'></i>", "<i class='fa fa-angle-right'></i>"],
						navRewind : false
                });
            
            catalog.currentItemEl = catalog.itemListRootEl.find('#' + sku);

            $('#dialogClose').click(function(e) {
                catalog.closeQuickView(e);
            });

            
                       
            
            detail.initMultiOptions();
            
            
            if ($('.prd-option-collection li').length == 1) {
                $('.prd-option-collection li').trigger('click');
                
                if (jQuery.trim($('.prd-option-collection li').text()) == '...' || jQuery.trim($('.prd-option-collection li').text()) == 'not defined') {
                    $('#productOptionsWrapper').hide();
                }
                
                
                if ($("#productOptionsWrapper select.opt-select").length == 1 &&
                    $("#productOptionsWrapper select.opt-select option").length == 2  // please choose and the option
                    ) {
                        $option = $("#productOptionsWrapper select.opt-select option").eq(1);        
                        options.selectOption($option.data("attribute"), $option.val());
                        $option.attr('selected',true);

                        $('#productOptionsWrapper').hide();
                }
            }

            
            
            var $detailSelektSku = $("#detailSelectSku");
            if ($detailSelektSku.length == 1) {
                var simpleSku = $detailSelektSku.data("sku");
                if (simpleSku) {
                    detail.selectSku(simpleSku);
                }
            }

            
            if($uiDialogBody.position().top && ($uiDialogBody.position().top - $(window).scrollTop()) < 0) {
                 $uiDialogBody.css({top:"10px", height: ($(window).height() - 90)+"px", overflow:"auto", "overflow-y":"scroll"});
            }

            $('#AddToCart,#FastLane').hover(function(){
                detail.hoveraddtocart(this.id);
            }, function(){
                detail.leavecart();
            });

            $('#AddToCart').click(function(event){
                 $('#configSku').val(sku);
                detail.addtocart();
                event.preventDefault();
            });
            
            $('#FastLaneInactive').hover(function(){
            	detail.hoverInactiveFastLane(this.id);
            });
            
            $('#FastLaneInactive').click(function(event) {
                event.preventDefault();
                detail.configureFastLane();
            });
            
            $('#FastLane').click(function(event) {
                detail.checkoutFastlane();
                event.preventDefault();
            });

            $('#quickview-left').click(function(event) {
                catalog.quickViewLastItem(sku);
                event.preventDefault();
            });

            $('#quickview-right').click(function(event) {
                catalog.quickViewNextItem(sku);
                event.preventDefault();
            });
            
            if(catalog.currentItemEl.prev('li').length){
                $('#quickview-left').show();
            } else {
                $('#quickview-left').hide();
            }
            
            if(catalog.currentItemEl.next('li').length){
                $('#quickview-right').show();
            } else {
                $('#quickview-right').hide();
            }
            
            //: init thumbnails (in case there are too many)
            if (detail.initThumbnailSlider) detail.initThumbnailSlider();
        });
	$('.scrollbox').enscroll('destroy');
	//$('.scrollbox').enscroll();	
    },
    closeQuickView: function(e) {
        if("undefined" != typeof(e)) {
            e.stopPropagation();
            e.preventDefault();
        }
        $('#quickviewWindow').fadeOut(500, function(){$("#uiDialogBody").html('');});
    },
    closeViewAllBox: function(e) {
        if("undefined" != typeof(e)) {
            e.stopPropagation();
            e.preventDefault();
        }
        $('#view-all-dialog-box').fadeOut(500);
        jQuery("#facet_brand").show();
    },
    quickViewLastItem: function(sku) {
        if(catalog.currentItemEl.length) {
            var prevEl = catalog.currentItemEl.prev('li');
            if(prevEl.length){
                catalog.loadQuickViewContent(prevEl.attr('id'));
            }else{
                catalog.closeQuickView();
            }
        } else {
            catalog.closeQuickView();
        }
    },
    quickViewNextItem: function(sku) {
        if(catalog.currentItemEl.length) {
            var nextEl = catalog.currentItemEl.next('li');
            if(nextEl.length){
                catalog.loadQuickViewContent(nextEl.attr('id'));
            }else{
                catalog.closeQuickView();
            }
        } else {
            catalog.closeQuickView();
        }
    },
    swapImage: function(sku, image) {
        $('.itm-imageWrapper-' + sku + '>img').hide();
        if(!$('.itm-imageWrapper-' + sku + ' .tmpImg').length){
            $('.itm-imageWrapper-' + sku).remove('.tmpImg');
            $('.itm-imageWrapper-' + sku).append('<img class="tmpImg" src="' + image + '" width="'+catalog.image_width+'" height="'+catalog.image_height+'">');
        }
        $('.itm-imageWrapper-' + sku + '>.tmpImg').attr('src', image);
    },
    resetImage:function(sku) {
        $('.itm-imageWrapper-' + sku + '>img').show();
        $('.itm-imageWrapper-' + sku + ' .tmpImg').remove();
        $('.itm-imageWrapper-' + sku + ' .tmpImg').hide();
    },
  
    handleScrollToTopButton:function(ypos) {
        if(catalog.scrollToTopButtonObj){
            if (ypos > 200 && !catalog.scrollToTopButton_visible) {
                catalog.scrollToTopButton_visible = true;
                catalog.scrollToTopButtonObj.fadeIn();
            } else if (ypos <= 200 && catalog.scrollToTopButton_visible) {
                catalog.scrollToTopButton_visible = false;
                catalog.scrollToTopButtonObj.fadeOut();
            }
        }
    },
    highlightMenu: function(segment, root) {
        if (segment && segment.length) {
            $('.nav-sub li').removeClass('active');
            $('.nav-sub li a').each(function(){
                if (root && root.length) {
                    rurl = '/'+segment+root+'/';
                    if ($(this).attr('href') == rurl) {
                        $(this).parent().addClass('active');
                    }
                };
            });
        }    
    },
    
    brandIndex:[],
    brandSearchReplaceFunction: function(match) {
        return '<strong>' + match + '</strong>';
    },
    enableBrandSearch: function(id, searchBoxId){
        //: fixate the height
        //$("#facet_brand").height($("#facet_brand").height());
        
        //: keep the node name intact (might not always be "span")
        var elementId = (id != undefined && id !="")? id: "facet_brand";
        var searchBoxSelector = (searchBoxId != undefined && searchBoxId !="")? searchBoxId: "facet_brand";
        var cnvItemsNode = $('#'+elementId+' .cnv-items')[0].nodeName;
        //: span is default thoughs
        if (!cnvItemsNode) cnvItemsNode = 'span';
        
        //: initialize
        $('#'+elementId+' li').each(function() {
            var a = $(this).find('a');
            var amount = $.trim($(this).find('.cnv-items').text());
            
            catalog.brandIndex.push({
                'html'  : a.html(),
                'amount': '<' + cnvItemsNode + ' class="cnv-items">' + amount + '</' + cnvItemsNode + '>',
                'value' : $.trim(a.text().substr(0, a.text().lastIndexOf(amount)))
            });
        });
        
        //: event listeners
        
        //: view all event listeners
        //var viewAllInput = $('#view-all-fct-brand-search input');
        //viewAllInput.keyup(function(){
        jQuery(document).on("keyup","#"+searchBoxSelector,function(){
            
            var val = $(this).val();
            //: reset field
            if (val == '') {
                for (var i in catalog.brandIndex) {
                    var el = $('#'+elementId+' li').eq(i);
                    el.find('a').html(catalog.brandIndex[i]["html"]);
                    el.show();
                }
            } else {
                var rx = new RegExp(val, "ig");
                //: check entire brandindex and show only viable elements
                for (var i in catalog.brandIndex) {
                    var el = $('#'+elementId+' li').eq(i);
                    if (catalog.brandIndex[i]["value"].match(rx)) {
                        //: make the types string bold
                        var boldStr = catalog.brandIndex[i]["value"].replace(rx, catalog.brandSearchReplaceFunction) + " " + catalog.brandIndex[i]["amount"];
                        el.find('a').html(boldStr);
                        el.show();
                    } else {
                        el.hide();
                    }
                }
            }
        });
    },
    addSelectedFilterCount: function() {
        
       $('.selected_count').each(function () {
        var filterCountLable= $(this).data('selectedfilterid'); 
        var filterCount=$('#'+filterCountLable+'_count').val();
        if(filterCount !='0'){
            $(this).html(filterCount); 
        }
        
      });
      
    },
    Is_Mobile: function() {
	var is_mobile = false;
            var rid;
            var w = window,
                    d = document,
                    e = d.documentElement,
                    g = d.getElementsByTagName('body')[0],
                    x = w.innerWidth || e.clientWidth || g.clientWidth,
                    y = w.innerHeight|| e.clientHeight|| g.clientHeight;

            if( x < 768) {
                    is_mobile = true;
                    return is_mobile;
            }
    }
};

$(window).scroll(function() {
    var scroll = $(window).scrollTop();
    try{
        //localStorage.setItem( 'scrollTopPosition', scroll);
        //localStorage.setItem("historyHtml", jQuery("#productsCatalog").html());
        
        if($(".catalogpage").length>0) {
            catalog.setCookie('historyPlpPage',jQuery('.plp-product-thumb').length,1);
            catalog.triggerLoad(1000);
            catalog.setCookie('scrollTopPosition', scroll,1);
            catalog.handleScrollToTopButton($(window).scrollTop());
        }
    }
    catch(err){
        console.log(err);
    }
});

$(function() {
    catalog.init();

    $('.pager-select').change(function() {
        location.assign(this.value);
    });

    $('.sortOrder').change(function() {
        location.href = $(this).val();
    });

    $('#cart-items-list-form .amount select').change(function() {
        $('#cart-items-list-form').submit();
    });

    $('#cart-coupon').click(function(event) {
        
        if ($('#couponCode').val().match(/^\s*$/)) {
            event.preventDefault();
        }
    });
     

    if ($('.breadcrumbs').length) {
        var active_segment = $('#active-segments-roots').data('active-segment');
        var active_root = $('#active-segments-roots').data('active-root');
        catalog.highlightMenu(active_segment, active_root);
    }

    var fct_segment = $('#fct-category-data').data('segment');
    $('.cnv-level.selected').each(function(){
        if (fct_segment) {
            $(this).closest('.cnv-childs').show();
        }
    });
    $('.cnv-levelChilds.selected').each(function(){
        if (fct_segment) {
            $(this).find('.cnv-childs').show();
        }
    });

    $('a.print-order').click(function(event){
        var printUrl = $(this).attr('href');
        var printTitle = $(this).text();
        window.open(printUrl, printTitle, 'top=100,left=100,width=770,height=500,scrollbars=yes');
        event.preventDefault();
    });

    if ($('#ga-track-newsletter').length) {
        if(typeof('_gaq') != 'undefined') {
            $('#subscribe-male').click(function() {
                _gaq.push(['_trackEvent', 'Newsletter', 'Page', 'Men']);
            });

            $('#subscribe-female').click(function() {
                _gaq.push(['_trackEvent', 'Newsletter', 'Page', 'Women']);
            });
        }
    }

    if ($('#errorPage').length) {
        if(typeof(_gaq) != 'undefined') {
            _gaq.push(['_trackEvent', 'error', '404', location.href]);
        }
    }
    
    
    document.onkeyup = function(key) {
        if ("undefined" == typeof(key)) {
            key = event;
        }
        if (27 == key.keyCode) {
            catalog.closeQuickView();
            catalog.closeViewAllBox();
            returnItem.closeReturnView();
        }
    }
    
    
    
    
     
     //$('ul.navigationNewab li .h3LeftFilNew').click(
        //function(e) {
            //e.preventDefault(); // prevent the default action
            //e.stopPropagation; // stop the click from bubbling
            //$(this).closest('ul').find('.selectednew').removeClass('selectednew');
           // $(this).parent().addClass('selectednew');
        //});
           $(document).ready(function() {
			   $('#categoryListContainer .catListcon24').css('display','block')
            $('#CatbestSeller').parent().parent().removeClass('bx-wrapper').addClass('cat-bx-wrapper');
            // INDFUR - 1295
            
            $('.reviewLhs').click(function(){
                $('.tabViewNavLi-spacing li').removeClass('selected');
                $('.reviewLi').addClass('selected');  
                $('.detailTab').hide();
                $('.reviewDiv Div').show();
                $('.reviewDiv').show();
            });
            
	});
    
    $(".ctcclickcon").click(function () {
        $(".ctctextcon").toggle();
    });

    $(".ctcclickcon").click(function () {
        $(".ctcclickcondwn").toggle();
        $(".ctcclosebgdwn").css('margin-top','41px');
        $(".ctcclickcon").toggle();
    });


    $(".ctcclickcondwn").click(function () {
        $(".ctctextcon").toggle();
        $(".ctcclickcondwn").toggle();
        $(".ctcclickcon").toggle();
        $(".ctcclosebgdwn").css('margin-top','0px');
    });

    $(".ctcclosebgdwn").click(function(){
        $(".ctcmaincon").addClass("ctcclose");
    });
    
    $('#secondary_facet_brand').change(function() {
        if($('#secondary_facet_brand').val()!='') {
            document.location.href = $('#secondary_facet_brand').val();
        }
    });
    
    $('.fct-colorPicker .inactive').fadeTo(0,.3);
    
    $('#secondary_facet_discount').change(function() {
        if($('#secondary_facet_discount').val()!='') {
            document.location.href = $('#secondary_facet_discount').val();
        }
    });
    
    $('#secondary_facet_range').change(function() {
        if($('#secondary_facet_range').val()!='') {
            document.location.href = $('#secondary_facet_range').val();
        }
    });
     
     //$(".navigationNewab").sticky({ topSpacing: 10,bottomSpacing: 700  });
     
     $("#nefttextid").css("display","none");
     
    $("#offlinetips-icn").mouseover(function(){
        $("#offlinetips").show();
    });
 
    $("#offlinetips-icn").mouseout(function(){
        $("#offlinetips").hide();
    });
    
     $("label[for='innoviti']").addClass("coddisabledlevel");
     
     $(".js_emi_bank_name_opt").live('click', function(){        
        var bankName = $(this).attr('data-bankname');;
        
        $(".js_emi_month_opt").attr("checked",false);
        $("#PaymentMethodForm_parameter_emi_months_"+bankName+"_1").attr("checked",true);
    } );
    
    $("#partpaytips-icn").mouseover(function(){
	$("#partpaytips").show();
    });

    $("#partpaytips-icn").mouseout(function(){
           $("#partpaytips").hide();
    });

    $("label[for='payu']").addClass("coddisabledlevel");
         $("#payutextid").css("display","none");
         
         
  
   $('#Redirection-Post-Form').submit();
   
   
    $('#CouponRegistrationForm_first_name').val('Name');
    $('#CouponRegistrationForm_email').val('Email address');
    $('#CouponRegistrationForm_first_name').bind('click focus', function(){
        if ($('#CouponRegistrationForm_first_name').val() == 'Name') {
            $('#CouponRegistrationForm_first_name').val('');
        }
    });
    $('#CouponRegistrationForm_first_name').bind('blur', function(){
        if ($('#CouponRegistrationForm_first_name').val()=='') {
            $('#CouponRegistrationForm_first_name').val('Name');
        }
    });
    $('#CouponRegistrationForm_email').bind('click focus', function(){
        if ($('#CouponRegistrationForm_email').val() == 'Email address') {
            $('#CouponRegistrationForm_email').val('');
        }
    });
    $('#CouponRegistrationForm_email').bind('blur', function(){
        if ($('#CouponRegistrationForm_email').val()=='') {
            $('#CouponRegistrationForm_email').val('Email address');
        }
    });
    
    
    jQuery("#sendasmen").click(function(){
            if(validateInputs()) 
            {
                
                jQuery("#CouponRegistrationForm_gender").val('male');
                return true;
            }
            return false;
              
        });
	jQuery("#sendaswomen").click(function(){
            if(validateInputs()) 
            {
                
                jQuery("#CouponRegistrationForm_gender").val('female');
                return true;
            }
            return false;
              
        });
        
         var nslAjaxCallAllowed = true;
   
//         $('#FooterNewsletter form button').click(onFooterNewsletterSubmit);
        
        $(".seedetailab").click(function(){
	  $(".seeDetailsAB").toggle();
      });
	  $(".seeDetailcloseab").click(function () {
	  $(".seeDetailsAB").hide();
	  });
          
          $(".couponcodeNew").live('click',function () {
                $(".couponcodeNewBox").show("slow");
            });
           $(document).on('click', ".creditVoucherNew", function () {
               var voucherStr = '<div id="closeVoucherDialog" onClick="closeVoucherDialog();" class="closeCreditpointPopup">X</div><div  class="creditVoucherNewBox"><p class="mbm fsmxl">PLEASE ENTER COUPON CODE</p>'+
                '<input name="credit_voucher" id="credit_voucher" class="ui-inputText creditPointInput" type="text">'+
                '<input name="apply" class="ui-buttonCta coup_apply creditPointBtn" value="Apply" type="button" onclick="javascript:oneStepCheckout.addCreditVoucher();" />'+
                '<div id="js_osc_credit_voucher_error" class="errorMessage fsm"></div>'+
				'<div class="creditDivd"><span>Or</span></div>'+
                '<div class="msgCreditPoint mts"><a href="" class="creditPointLink">Login</a> to redeem your point</div>'+
            '</div>';
            var maskHeight = $(document).height();
            var maskWidth = $(window).width();
            $('#creditmask').css({'width':maskWidth,'height':maskHeight});            
            $('#creditmask').fadeIn(1000);
            $('#creditmask').fadeTo("slow",0.8);
            jQuery('#creditReviewPopup').html(voucherStr).show();
            });
            
    $('.leftTabsCont').css({
    position:'fixed',
   // left: ($(window).width() - $('.leftTabsCont').outerWidth())/2,
    top: ($(window).height() - $('.leftTabsCont').outerHeight())/2
  });
	$('.chatTab').css({
    position:'fixed',
    left:0,
    top: (($(window).height() - $('.leftTabsCont').outerHeight())/2)+95
  });
});

function closeVoucherDialog(){    
    $('#creditmask').fadeOut(500, function(){$("#creditReviewPopup").html('');});
    $('#creditReviewPopup').hide();
}
// homepage brand scroll
function mycarousel_initCallback(carousel)
{
    // Disable autoscrolling if the user clicks the prev or next button.
    carousel.buttonNext.bind('click', function() {
        carousel.startAuto(0);
    });

    carousel.buttonPrev.bind('click', function() {
        carousel.startAuto(0);
    });

    // Pause autoscrolling if the user moves with the cursor over the clip.
    carousel.clip.hover(function() {
        carousel.stopAuto();
    }, function() {
        carousel.startAuto();
    });
};

jQuery(document).ready(function() {
     if($('.selectFilterConsub a').length>0)
	   {
		$('.category-banner').hide();
	   }
    jQuery( "#manualLoading" ).click(function( event ) {
        event.preventDefault();
        catalog.catalogPageLoading();
    });  
	//if($(window).width() < 767){
	jQuery(".refineListBox").hide();
	jQuery(".refineByTitle").removeClass('opened').addClass('closed'); 
        try{
                localStorage.setItem("filter", 'closed');
            }
        catch(err){
                console.log(err);
        }
	
 
   // Reveiw By at Catalog

});

function reset(url) {
  window.location.href = url;
}

function validationReminder(){
    var ck_email = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i
    var customerEmail = document.getElementById("customerEmail").value;
    if(!ck_email.test(customerEmail)){
        $('#customerEmail').css('background-color', '#FADBDB','border','1px solid #cccccc');
        $('#reminderMsg').removeClass("footer_sign_success");
        $('#reminderMsg').addClass("remindermsg");
        $('#reminderMsg').css('display','block');
        $('#reminderMsg').html('');
        $('#reminderMsg').html('Invalid email');
        return false;
    };
    $('#customerEmail').css('background-color', '#FFFFFF');
    getReminderEstimate();
   return true;
}
function validationPincode(){
    
     var pincode = document.getElementById("InputBoxpincode").value;
     if(pincode== ""){
         $('#InputBoxpincode').css('background-color', '#FADBDB');
        return false;
     }
     return true;
}
function pincodeDiv(){
   
    $('#pincode').show();
    $('#pincodeResponseMessage').hide();
	
}

 function hideDiv(){
        var noOfBank=$('#no_of_bank').val();
            
            var hideDiv='';
            for(var i=1;i<= parseInt(noOfBank);i++){
                hideDiv='#bank-'+i;
                 $(hideDiv).hide();
            }
    }
    
 
     
      function checkSubcategorie(categorieId) 
    {
        if ($('#categorie_id_' + categorieId).attr('checked')) {
        	$('.subCategorie-' + categorieId).attr('checked', true);
        } else {
            $('.subCategorie-' + categorieId).attr('checked', false);
        }
    }

    function checkCategorie(subCategorieId, categorieId, subCategories)
    {
        if ($('#subCategorie_' + subCategorieId).attr('checked')) {
        	subCategories = JSON.parse(subCategories);
            for (x in subCategories) {
                if (!$('#subCategorie_' + subCategories[x]).attr('checked')) {
                    return;
                } 
            }
            
            $('#categorie_id_' + categorieId).attr('checked', true);
            
        } else {
            $('#categorie_id_' + categorieId).attr('checked', false);
        }
    }
    
    
    function isValidEmailAddress(emailAddress) {
        var pattern = new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);
        return pattern.test(emailAddress);
    }
    
   
    function validateInputs()
    {
        var email = jQuery("#CouponRegistrationForm_email").val();
        // validating 
         if(email == ''){
             alert("Please enter Email!");
             return false;
         }else
        if(email != '' && isValidEmailAddress(email))
        {
            return true;
        }
        else
        {
            alert("Invalid Email!");
            return false;
        }
    }
     String.prototype.valid = function(__type) {
        var _regexp;
        switch(__type) {
            case 'email'  : 
                _regexp = new RegExp(/^(("[\w-+\s]+")|([\w-+]+(?:\.[\w-+]+)*)|("[\w-+\s]+")([\w-+]+(?:\.[\w-+]+)*))(@((?:[\w-+]+\.)*\w[\w-+]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);
                break;
            case 'zipcode': 
                _regexp = new RegExp(/^[0-9]{5}$/);
                break;
            default       :
                _regexp = new RegExp(/^.+$/);
        }
        return _regexp.test(this);
    }
   
    function onFooterNewsletterSubmit() { 
        var _form  = $('#FooterNewsletter form');
        _form.find('.s-success, .s-error').hide();
        var _email = _form.find('#newsletter-email').val();
            if(_email.valid('email')) {            
                var _gender = '';
                var _base   = '/newsletter/validate/';
                var _token  = _form.find('#token').val();
                var _url    = _base + '?YII_CSRF_TOKEN=' + _token + '&email=' + _email + '&gender=' + _gender;

                $.get(_url, function(__data) {
                    __data = $.parseJSON(__data);
                    if(typeof wt == 'object'){
                        wtmessage= 'Footer~Banner_'+ _email+'_' + __data['error'];
                        wtmessage = wtmessage.trim();
                        wtmessage = wtmessage.replace(/ /g, "~");
                        wt.linkId= wtmessage;
                        wt.customEcommerceParameter = {13:"lead"};
                        wt.customSessionParameter = {
                          6: myCookie.set("subID", __data['newsletter_subscription_id'])
                        };
                        wt.sendinfo();
                     }
                    if(__data['validation']) {
                        if(__data['error']=="This Email Id is already subscribed to Newsletter"){
                             onFooterNewsletterError(_form, __data['error']);
                         } else{                     
                            _form.find('.s-success').show();
                            _form.find('.s-success').html(__data['error']); //NEWSLETTER_SUBSCRIBE_NOCHANGE
                         }
                    } else {
                        onFooterNewsletterError(_form, __data['error']);
                    }
                });
            } else {
                onFooterNewsletterError(_form, 'Invalid email address');
            }
        return false;
    }
    
    function onFooterNewsletterError(__form, __error) {
        if (__error) {
            __form.find('.s-error').text(__error);
        }
        __form.find('.s-error').show();
    }
// new sticky INDFUR - 1231
// Updated in INDFUR-1511
jQuery(document).ready(function() {
    
  catalogInvokeFun ();
    $("a.tracked").click(function(e) {
    if (typeof(_gaq) != 'undefined') {
      var url = $(this).attr("href");
      var label = $(this).data('gavalue');
      var gaaction = $(this).data('gaaction');
      var gaCateglory = $(this).data('gacategory');
      _gaq.push(['_trackEvent', gaCateglory, gaaction,label]);
      setTimeout(function(){document.location= url;}, 1000);
    }
  });    
  //INDFUR-2248  yourVariable !== null && typeof yourVariable === 'object'
   if(typeof(_gaq) != 'undefined') {
//        $(document.body).on('click','a.catalogColorFamily', function() {
//            var label = $(this).data('gavalue');
//            _gaq.push(['_trackEvent', 'ColorFamily', 'CFPLP',label]);
//            setTimeout(function(){}, 1000);
//        });
//        $(document.body).on('click','a.colorThumbCount', function() {
//            var label = $(this).data('gavalue');
//            _gaq.push(['_trackEvent', 'ColorFamily', 'CFPLPViewMore',label]);
//            setTimeout(function(){}, 1000);
//        });          
        $(document.body).on('click','a.catWishList', function() {
            var label = $(this).data('gavalue');
            _gaq.push(['_trackEvent', 'Catalog/Search', 'AddToWishlist',label]);
        });  
        $(document.body).on('click','button.catAddToCartVarient', function() {
            var label = $(this).data('gavalue');
            _gaq.push(['_trackEvent', 'Catalog/Search', 'ViewVariations',label]);
        });           
        $(document.body).on('click','.product-link .quickview', function() {
            var label = $(this).data('gavalue');
            _gaq.push(['_trackEvent', 'Catalog/Search', 'Quickview',label]);
        });  
        $(document.body).on('click','button.catAddToCartGa', function() {
            var label = $(this).data('gavalue');
            _gaq.push(['_trackEvent', 'Catalog/Search', 'AddToCart',label]);
        });          
    };
    //mobileNoHoverState.init();
    
});

function catalogInvokeFun () {

    //INDFUR-1714 IN-STOCK PRODUCTS checkbox
    $('.stockSortingChkbox').click(function() {                 
        $('.stockSortingChkbox').each(function() {
            //loop through each checkbox
            this.checked = this.checked ? true : false;                                 
       });
       //INDFUR-2245
      if(typeof _gaq !== 'undefined')
      { var lableCat = $('.breadcrumbWideDesign li').map(function(i,n) {
                    return $.trim($(n).text());
                    }).get().join('>');
        if(lableCat=='')lableCat='Home>All products';
        var lable='Category:'+lableCat+$('#gaTagForStock').text();
        _gaq.push(['_trackEvent', 'Catalog','Sort', lable]);}
      
      setTimeout(function(){window.location= this.checked ?  $('.stockSortingChkbox').val() : $('#catalogUrlString').val();}, 1000);  
                        
    });
     
    
    $('.fct-hd').css('cursor', 'pointer').click(function() {
        //$(this).next('.fct-bd').slideToggle();
        if(!$.browser.msie){
            var offsetTop = $('html, body').offset().top;
            offsetTop = (offsetTop * (-1)) - 2;
            //$('html, body').animate({scrollTop: offsetTop + 'px'}, 300);
        }else{
           var offsetTop=0;
        }
      
      
    });
   
    // Reveiw By at Catalog
    jQuery(document).off("click",".refineByTitle");
   
		if($(window).width() < 767){
		$('.fct').each(function(){
		if($(this).find('.reset').length>0)
		{
		$(this).find('.refineByTitle').trigger('click');
		}
		}); 
		
		$('.filtermobile-count').hide();
		var appliedFilterCount = 0;
		$('input[name="attribute_select_count"]').each(function(){
			var selectedCount = $(this).val();
			if(selectedCount > 0){
			appliedFilterCount += parseInt(1);
			}
		});
		if(appliedFilterCount > 0) {
			$('.filtermobile-count').show();
		}
		} 
		
		
		
	
   // Carousel implemention for filter
   var catalogFilterLimit =5; 
   var filterCount = jQuery("#fabCarouselFilter li.fct").length; 
   if(filterCount > catalogFilterLimit){       
       jQuery("#fabCarouselFilter li.fct:gt(" + (catalogFilterLimit - 1)+")").hide();       
       //TODO: Need to show 4 items all the time, i.e. even if there are 7 items, 
       // on second page 4 items should be seen
       jQuery('#fabCarouselFilter').jcarousel({
        items: '.jcarousel-item',
        visible: catalogFilterLimit,
        scroll: catalogFilterLimit,
		itemLoadCallback:triggerCurrent
        });
   }
   function triggerCurrent(carousel, state){
	   	jQuery("div.refineListBox").removeClass("lastFilterPerSlide");
		jQuery(".jcarousel-item-"+carousel.last).find("div.refineListBox").addClass("lastFilterPerSlide");
		 
		 jQuery(".refineListBox").hide();	
		 jQuery(".refineByTitle").addClass("closed").removeClass("opened");   
	   }
   
// jQuery("#fabCarouselFilter > li.jcarousel-item:nth-child("+catalogFilterLimit+"n)").find("div.refineListBox").addClass("lastFilterPerSlide");
   
   
     
    jQuery("#fabCarouselFilter li.fct").show();
    var filterTimer = 0;
  // Arrow toggle for filter box
  jQuery("#filterBoxArrow").click(function(){ 
     if (filterTimer) {
            clearTimeout(filterTimer);
            filterTimer = 0;
        }
     // Remove filterRow class to remove Bottom row view which is required at
     // the time of loading only
     jQuery("#filterRow").removeClass("filterRow");

     if(jQuery(this).hasClass("expandFilterBox"))
     {
         jQuery(this).addClass("collapseFilterBox")
         .removeClass("expandFilterBox");
         jQuery(".selectFilterConsub").animate({height:35});
     }
     else
     {
        jQuery(this).addClass("expandFilterBox")
        .removeClass("collapseFilterBox");
        $('.selectFilterConsub').height('auto');
        var autoHeight = $('.selectFilterConsub').height();        
        jQuery(".selectFilterConsub").animate({height:autoHeight}); 
     }
  });
  
  // Toggle for Refine By
  jQuery("#refineByBoxArrow").click(function(){         
     if(jQuery(this).hasClass("expandRefineByBox"))
     {
         jQuery(this).addClass("collapseRefineByBox")
         .removeClass("expandRefineByBox");
         jQuery("#refine-by-container").hide(); 
     }
     else
     {
        jQuery(this).addClass("expandRefineByBox")
        .removeClass("collapseRefineByBox");
        jQuery("#refine-by-container").show(); 
     }
  });
  
  // Brand view all 
    

   
   jQuery(".switcher").bind("click", function(e){		
			var currentClass=$(this).data('grid');
			jQuery(".switcher").removeClass("showitemactive").addClass("showitem");
			jQuery(this).addClass("showitemactive");
			//jQuery("#product-grid").find('li').removeClass("selected");
                        //adding because id cannot be used with whitespace 
                        jQuery("#productsCatalog").find('li').removeClass("selected");
			if(currentClass=="product-grid-3")
			{
				jQuery(".catalog-products-section").find(".products").addClass("product-grid-3");
				jQuery(".catalog-products-section").find(".products li").addClass("selected");
				jQuery(".catalog-products-section").find(".products").removeClass("product-grid-4");
				//jQuery(".catalog-products-section").find(".product-grid-text").css({"display":"block"});
			} 
			else 
			{
				jQuery(".catalog-products-section").find(".products").addClass("product-grid-4");
				jQuery(".catalog-products-section").find(".products li").addClass("selected");
				jQuery(".catalog-products-section").find(".products").removeClass("product-grid-3");
				//jQuery(".catalog-products-section").find(".product-grid-text").css({"display":"block"});			
			}
			
	});
     jQuery(".mobswitcher").bind("click", function(e){		
			var currentClass=$(this).attr('id');
			jQuery(".mobswitcher").removeClass("mobgridactive");
			jQuery(this).addClass("mobgridactive");
			//jQuery("#product-grid").find('li').removeClass("selected");
                        
                        jQuery("#productsCatalog").find('li').removeClass("selected");
			if(currentClass=="product-grid-3")
			{
				jQuery(".catalog-products-section").find(".products").addClass("product-grid-3");
				jQuery(".catalog-products-section").find(".products li").addClass("selected");
				jQuery(".catalog-products-section").find(".products").removeClass("product-grid-4");
				//jQuery(".catalog-products-section").find(".product-grid-text").css({"display":"block"});
			} 
			else 
			{
				jQuery(".catalog-products-section").find(".products").addClass("product-grid-4");
				jQuery(".catalog-products-section").find(".products li").addClass("selected");
				jQuery(".catalog-products-section").find(".products").removeClass("product-grid-3");
				//jQuery(".catalog-products-section").find(".product-grid-text").css({"display":"inline"});			
			}
			
	});
     $(".mob-filter-button").unbind('click').on('click touch',function() {
            if(!localStorage.getItem("selectedFilter"))
             {
                 $(".mob-global-filter-section").find('.fct:first-child .refineByTitle').trigger('click');
             }
            var wHeight=$(window).height();
            $('html, body').css({overflow:'hidden',height:wHeight});
            $('.header').css({'z-index':1});
            $('.cataloghead').hide();
            //$(".mob-global-filter-section").find('.refineByTitle').click();
            $(".mob-global-filter-section").find('.widget-title').removeClass('opened').addClass('closed');
            $(".mob-global-filter-section").show();
            var sample= $(window).height()-($('.mobfiltertitle').height()+$('.clear').outerHeight())-20;	
            $('.fliterpartialleft').height(sample);
            sample=sample-10;
            $('.refineListBox').height(sample);  
            try{
                localStorage.setItem("filter", 'open');
            }
            catch(err){
                    console.log(err);
            }
     	});
	$(".mob-global-filter-section .clos, .mob-global-filter-section .done").unbind('click').on('click touch',function() {
		$('body,html').removeAttr('style');	
                $('.header').removeAttr('style');
		$(".mob-global-filter-section").hide();
		$('.cataloghead').show();
                try{
                    localStorage.setItem("filter", 'closed');
                }
                catch(err){
                    console.log(err);
                }
	});
     	$(".mob-global-filter-section").on('click touch','.widget-title', function(){
		$(".mob-global-filter-section").find('.widget-title').removeClass('closed').addClass('opened');
		$(".mob-global-filter-section").find('.product-categories').toggle();
	});
	if(localStorage.getItem("filter")=='open')
	{
		$('.cataloghead').hide();
		$(".mob-global-filter-section").show();
	}
	else 
	{
		$('.cataloghead').show();
		$(".mob-global-filter-section").hide();
	}
	 if($('.mobswitcher').length>0)
         {
		if(localStorage.getItem("grid")) {                  
                    if(localStorage.getItem("grid")=="product-grid-3") {
			$(".mob-grid-ico").find("#product-grid-3").click();
		    }
		    else 
		   {
			$(".mob-grid-ico").find("#product-grid-4").click();
		   }		   
		}
		else {
			$(".mob-grid-ico").find("#product-grid-4").click();
		   }
	 }
	$('.productwishlistcontainer .size_popup_btn, .addtocartbutton-wishlist, .togleaddSaved').live('click',function(event) {
            if(!$(this).hasClass('add-to-bag-disble')) {
                $('.productwishlistcontainer .size_popup_btn').unbind('click');               
		if(!$(this).hasClass('simple'))
		{
		 $(this).parents("div.product-thumb").find('.product-info').toggleClass('toggleOpacity');
                $(this).parents("div.product-thumb").find('.sizeArea').slideToggle("500");
		}
            }
            event.stopImmediatePropagation();
          });

        $(".addtocart-buton").live('click',function(event) {
	    
              if($(this).parents("div.productborder").hasClass('activeProduct'))
              {
                      $(this).parents("div.productborder").removeClass('activeProduct');
                      $(this).parents("div.productborder").find('.sizeArea').slideToggle("1000");	
              } else {	
                // $(".catalog-products-section").find(".productborder").find('.sizeArea').slideToggle("1000");
                  $(".catalog-products-section").find('.sizeArea').hide();
                  $(".catalog-products-section").find(".productborder").removeClass('activeProduct');
                  $(this).parents("div.productborder").addClass('activeProduct');
                  $(this).parents("div.productborder").find('.sizeArea').slideToggle("1000");
              }
              event.stopImmediatePropagation();
        });
        $(".product").live('mouseleave',function(event){
                if($(this).find(".productborder").hasClass('activeProduct'))
                {
                        $(this).find(".productborder").removeClass('activeProduct');
                        $(this).find('.sizeArea').slideToggle("1000");
                }
		event.stopImmediatePropagation();
        });
        $(".size_popup_btn").live('click',function(event) {
          $(this).parents(".productborder").removeClass('activeProduct');
          $(this).parents("div.productborder").find('.sizeArea').slideToggle("1000");
          event.stopImmediatePropagation();
        });
   
   
        $('#uiDialogBodyViewAll').live('click',function(e) {
            e.stopPropagation();
            //return false;
            
        });
        
        $('#view-all-dialog-box').live('click',function(e) {
            catalog.closeViewAllBox(e);
        });
        
   
   
  
  // INDFUR-1685 SURENDER NEGI
  
  var limitCategoryLinks = 10;
  
  if(jQuery("li.category-segment").attr("isvisible") != "no"){
    if(jQuery("#newFltLft li.cnv-level-2").length > (limitCategoryLinks)){
          jQuery("#categoryLevelsAsFilterMore").show();
          jQuery("#newFltLft li.cnv-level-2:gt(" + (limitCategoryLinks-1) + ")").hide();
        
    }
  }
  else
  {
      jQuery(".categoryTitle > div > h1 > span").removeClass("expand");
  }
  
  jQuery("#categoryLevelsAsFilterMore a").click(function(){
      if(jQuery(this).hasClass("categoryLevelsAsFilterMore-expand")){
            jQuery("#newFltLft li.cnv-level-2:gt(" + (limitCategoryLinks-1) + ")").show();            
            jQuery(this).removeClass("categoryLevelsAsFilterMore-expand")
                    .addClass("categoryLevelsAsFilterMore-collapse")
                    .text("Collapse"); 
            jQuery(".categoryNameForList").show();
        }
        else{
            jQuery("#newFltLft li.cnv-level-2:gt(" + (limitCategoryLinks-1) + ")").hide();            
            jQuery(this).addClass("categoryLevelsAsFilterMore-expand")
                    .removeClass("categoryLevelsAsFilterMore-collapse")
                    .text("Show More");   
            //loadCatDisplay();
        }
  });
  
  jQuery("#categoryListContainer").show();
  //loadCatDisplay();  
  
  // Click Category title heading
  if(jQuery("li.category-segment").attr("isvisible") != "no" && 
        jQuery("#categoryListContainer").find("li.category-segment").length > 0  
    ){
    jQuery(".categoryTitle > div > h1 > span").click(function(){
       if(jQuery(this).hasClass("expand")){
           jQuery("#categoryListContainer").hide();
           jQuery(this).addClass("collapse").removeClass("expand");
       } 
       else
       {
           jQuery("#categoryListContainer").show();
           jQuery(this).addClass("expand").removeClass("collapse");
       }
    });
  }
  
  // Handle if category list does not exist
  if(jQuery("#categoryListContainer").find("li.category-segment").length == 0)
  {
      jQuery(".categoryTitle > div > h1 > span").removeClass("expand");
  }
    
}

function closeViewAllBox()
{
    catalog.closeViewAllBox();
}


function loadCatDisplay(){
    // check if any subchild is visible: Then show the parent tab too
    jQuery(".cnv-level-1").each(function(){
       var visibleElements = jQuery("ul", this).find("li.cnv-level-2:visible").length;       
       if(visibleElements > 0){
           jQuery(".categoryNameForList", this).show();
       }
       else{
           jQuery(".categoryNameForList", this).hide();
       }
    });    
}
function pincodeedit(arg){
	   if(arg=='pdp')
	   {
			jQuery('.pin-num, .pincode-bottom, .pin-edit').hide();
			jQuery('.pincodentry, .pin-check').css('display', 'block');
	   }
}
var keypress={
	allowOnlyNumbers: function(element) {
	var keyDown = false, ctrl = 17, vKey = 86, Vkey = 118; 
  
      $(document).keydown(function (e) {
          if (e.keyCode == ctrl) keyDown = true;
      }).keyup(function (e) {
          if (e.keyCode == ctrl) keyDown = false;
      });
  
      $(element).on('keypress', function (e) {
          if (!e) var e = window.event;
          if (e.keyCode > 0 && e.which == 0) return true;
          if (e.keyCode)    code = e.keyCode;
          else if (e.which) code = e.which;
          var character = String.fromCharCode(code);
          if (character == '\b' || character == ' ' || character == '\t') return true;
          if (keyDown && (code == vKey || code == Vkey)) return (character);
          else return (/[0-9]$/.test(character));
      });
	}
}

var alphabetkeypress={
	allowOnlyAlphabets:function(element){
		 $(element).live('keypress',function(event){
        var inputValue = event.charCode;
        if(!(inputValue >= 65 && inputValue <= 122) && (inputValue != 32 && inputValue != 0)){
            event.preventDefault();
        }
    });
	}
}

var buttonbehaviour = {
	disableenable: function(element, number,disableClass) {
	 $(element).live('keyup',function(event) { //and event here
        if ($(this).val().length < number) {
            validatePin.disableButton(disableClass);
        }
        else{		
            validatePin.enableButton(disableClass);
        }
	});
	}
}
var mobile = 767;
$(document).ready(function(){
keypress.allowOnlyNumbers('.pincodentry[type=text]');
keypress.allowOnlyNumbers('input[name="StorePin"]');
buttonbehaviour.disableenable('.pincodentry',6,'#checkpincode .button');
buttonbehaviour.disableenable('input[name="StorePin"]',6,'.Store-Pincode-Entry .StorePincodeCheck');
//popup.popupwindow('.color-viewall', '.popup-outer', '#location-mask');
popup.popupwindow('.choose-coupon', '.popup-outer', '#location-mask');
popup.popupwindow('.choose-store', '.store-outer', '#location-mask');
var Is_Mobile = catalog.Is_Mobile();
if(Is_Mobile){
popup.popupwindow('.show-alert-cartremoval', '.alert-cartremoval');
popup.closewindow('.clos', '.alert-cartremoval');
//popup.popupwindow('#otp_generation_checkout', '.shippingglobal_otp');
popup.closewindow('.shippingglobalclose', '.shippingglobal_otp');
}
else
{
	popup.popupwindow('.show-alert-cartremoval', '.alert-cartremoval');
	popup.closewindow('.clos', '.alert-cartremoval', '#location-mask', '.btn-done');
	//popup.popupwindow('#otp_generation_checkout', '.shippingglobal_otp', '#location-mask');
	popup.closewindow('.shippingglobalclose', '.shippingglobal_otp', '#location-mask');
}
popup.closewindow('.clos', '.popup-outer', '#location-mask', '.btn-done');
popup.closewindow('.clos', '.alert-cartremoval', '#location-mask', '.btn-done');
popup.popupwindow('.size-guide', '.size-outer', '#location-mask');
popup.closewindow('.clos', '.size-outer', '#location-mask');
popup.closewindow('.clos', '.store-outer', '#location-mask');
});

var popup = {
	popupwindow:function(ele, newall, locationmask){		
		$(ele).live('click touch',function(){
		   if(ele==".size-guide" || ele==".choose-store")
			{
			   $("body").css({overflow:"hidden"});	
			}			
			$(newall+','+locationmask).show();
			});
		},
		closewindow:function(close, newall, locationmask, done){		
		$(close+','+done).live('click',function(){
			if(newall==".size-outer" || newall==".store-outer")
			{
			  $("body").removeAttr("style");  
			}			
			$(newall+','+ locationmask).hide();
		});
	}	
}


        
$(".color_select, .color_outer").on("click", function(e) {
        $(this).addClass("active").siblings().removeClass("active");

});
if(catalog.getCookie('isShowLoad') == 1 && $('.catalogpage').length > 0 && catalog.getCookie( 'scrollTopPosition') !== 0) {
    
    $('#loadId').show();
    $(window).load(function(){
        $('#loadId').remove();
        $('#location-mask').hide();
    });
    catalog.setCookie('isShowLoad',0,1);
    catalog.setCookie('scrollTopPosition', 0,1);
    if(catalog.getCookie('seeall') == 2 ){
        $('.more-button').hide();
    }
};


$(function() {
    var destination = $('.ie8NewClassShort').offset();
    if(typeof destination !== 'undefined'){
        $('#display_number_items').css({top: destination.top});
    }
    if ($('body').hasClass('cartpage')) {
        document.cookie = "cTab=;path=/";
        $('.cartblock').show();
    }
    if ($('body').hasClass('cartpage')) {
        $('.cartblock').show();
    } else {
        $('.cartblock').hide();
    }
    popup.closewindow('.button-area .cancel , .clos ', '.popup-outer', '#location-mask,#cartMask');
    popup.popupwindow('.activateCoupon', '.popup-outer', '#location-mask,#cartMask');

    $('span#addCoupon').click(function() {
        $('.couponHint').addClass('s-hidden');
        $('.couponFormEl').removeClass('s-hidden');
        $('#couponCode').focus();
    });
    
    //toggle customer data in myOrder view
    $('.shipping-address-box, .billing-address-box, .payment-box, .order-details-box').click(function(e) {
    	e.preventDefault();
    	var customDataDivs = $(this).parent().find('.shipping-address-box div, .billing-address-box div, .payment-box div, .order-details-box div');
    	var customDataSpan = $(this).parent().find('.arrowToogle')
    	customDataDivs.toggle();
    	customDataSpan.toggleClass('openCustomData', 'closeCustomData');
    });
    
    //hide print button when printing
    $('#print-button').click(function () {
    	$(this).hide();
    });
    
    $('.clickable-code').live('click',function(){
       var couponCode = $(this).data('coupon-code'); 
       $('input[name="couponcode"]').val(couponCode);
    });
	
	if($(window).width() < 767){
	$('.addtocartbutton-wishlist.simple').live('click',function(){
		$(this).text('Adding...').prop('disabled',true);	
		$('#cartMask, #loadId').hide();
	});
	
	$('.productwishlistcontainer .sizebox').live('click',function(){
		$(this).parents('.productwishlistcontainer').find('.addtocartbutton-wishlist').text('Adding...').prop('disabled',true);	
		$('#cartMask, #loadId').hide();
	});
	}
	
    $('.show-alert-cartremoval').live('click',function(){
        var items_overlay_id = $(this).parent().parent().attr('id');
        var cartOveralyHTML = '<div class="cart-removal-overlay">\
                                    <div class="cartremoval_desc_section"><p>Are you sure want to remove this item?</p>\
                                    <div class=""><button class="btn move-item cart-pop-btn">MOVE TO WISHLIST</button><button class="btn remove-item cart-pop-btn">REMOVE</button><span class="cart-overlay-close close-icon"></span></div></div>\
                               </div>';
        $(cartOveralyHTML).appendTo($('#'+items_overlay_id));
        var deleteUrl = $(this).data('delete-url');
        var deleteSkuId = $(this).data('delete-sku');
        deleteSku = deleteSkuId.replace("cartToWishlist-", ""); // Replace cartToWishlist- since we need only the removing SKU
        var ImgUrl = $(this).data('delete-image');
        var moveToWishlist = $(this).data('delete-sku');
        $('.cartremoval_img_section > img').attr('src',ImgUrl);
        if(typeof deleteUrl !== 'undefined') {
            cartAction.setDeleteUrl(deleteUrl,moveToWishlist,deleteSku);
        }
        $('.cart-overlay-close').on('click',function(){
            $('.cart-removal-overlay').remove();
        });

        $('.remove-item').live('click',function(event){
            event.preventDefault();
            $(this).parent().find('button').prop('disabled',true);
            $(this).html('Removing..');
            cartAction.deleteItem(); 
        });
    });
    
    
    $('.move-item').live('click',function(){
        $(this).parent().find('button').prop('disabled',true);
        $(this).html('Moving to wishlist');
        cartAction.moveItemToWishlist();
        //wishlistClick(this);
    });
    $('.saveditem').live('click',function(){
        $('.nav-tab li:first-child a').trigger('click');
    });
    $('.checkoutbutton').live('click',function(){
        $('.mini-cart-content3').addClass('active-minicart');
    });

    $("#coupon_redemption").live('submit',function(e) {     
        //prevent Default functionality
        e.preventDefault();
        var cartCouponHidden =$('.cart-coupon-hidden').val();
        var selectedCoupon=$("input[name='coupon_select']:checked").val();     
        var couponInput = $("#coupon_redemption input[name=couponcode]").val();
        if((typeof cartCouponHidden !== 'undefined') && (typeof selectedCoupon !== 'undefined') && (cartCouponHidden == selectedCoupon )){
            return false;
        }
        //get the action-url of the form        
        var actionurl = '/cart/ajaxcouponredemption/';
        var unsetLink = $('<a/>')
            .addClass("ui-link icon i-remove coupon-remove")
            .text("X")
            .attr('onclick','removeVoucher()');
        var couponAppliedInput = $('#coupon_applied_by_input');
        //do your own request an handle the results
        $.ajax({
                url: actionurl,
                type: 'post',
                dataType: 'json',
                data: $("#coupon_redemption").serialize(),
                success: function(data) {
                    $('.apply').text('Apply').prop('disabled',false);
                    $('.coupon-popup-inner .s-error-new').remove();
                    $('.coupon-popup-inner .added_coupon_area').remove();
                    $('.coupon-popup-inner .ui-link').remove();
                    $('input[name="couponcode"]').val('');
                    $('.orderdetails').html(data.html);
                    $('.cart-page-items').html(data.cartItems);
                    $('.fntsizOrderReview').html(data.finalAmount);
                    $('.cart-summary-right').html(data.html);
                    $('.mini-cart-total-wrapper .final_total .sub-toal').html(data.grandtotal);
                    $('.cart-page-items .item-product-to-price').each(function(){
                        if($(this).find('.old-price-cartpage').length >0){
                            $(this).find('.original_price').addClass('original_price_color');
                        }
                    });
                    
                    if(typeof data.resultMsg.success !== 'undefined') {
                        if(couponInput==""){couponInput='empty'}
                        var couponCode = couponInput.toUpperCase();
                        var couponData = $('[data-coupon-code='+couponCode+']');
                         couponData.prop("checked",true);
                        gaTracking.addPromotion(data.gaTrackingData);
                        couponAppliedInput = $('.coupon-popup-inner').find('#coupon_applied_by_input').show();
                        couponAppliedInput.append($('#coupan_applied').html('<i class="fa fa-circle" aria-hidden="true"></i> Coupon applied'));
                        couponAppliedInput.append($('.clickable-code1').html(data.couponCode));
                        
                        $(".apply").attr("disabled", "disabled");
                        $("#couponcode").attr('readonly', true);
                    
                    
                    }else if(typeof data.resultMsg.error !== 'undefined') {
                        $.each( data.resultMsg.error, function( key, value ) {
                            $('.applycoupon .s-error-new').remove();
                            var errorMsg = $('<div/>').addClass('s-error-new').text(value).show();
                            $('.coupon-popup-inner,.applycoupon').append(errorMsg)
                            $('.applycoupon .s-error-new').delay(3000).fadeOut('slow');
                        });
                        
                    }else if(typeof data.resultMsg.alreadyApplied !== 'undefined') {
                         $('.applycoupon .s-error-new').remove();
                        var errorMsg = $('<div/>').addClass('s-error-new').text(data.resultMsg.alreadyApplied).show();
                        $('.coupon-popup-inner,.applycoupon').append(errorMsg);
                        $('.applycoupon .s-error-new').delay(3000).fadeOut('slow');
                    }
                    couponAppliedInput.append(unsetLink);
                    //Cart page order summary script
                    cartOrderSummary();
                    $('.cart-page-items .item-product-to-price').each(function(){
            if($(this).find('.old-price-cartpage').length >0){
                $(this).find('.original_price').addClass('original_price_color');   
            }
            else{
               $(this).find('.original_price').removeClass('original_price_color');
            }
        });
                }
        });
        
    });
 
    
    $(document).on('submit', "#cartcoupon-redemption", function (e) { 
        e.preventDefault();
        
        var couponName = $("#cartcoupon-redemption input[name=couponcode]").val();
        if (!couponName.replace(/\s/g, '').length) {
            $('.applycoupon .s-error-new').remove();
            var erorrMsgHTML = '<div class="s-error-new" style="display: block;">Enter coupon code.</div>'
            $('.applycoupon').append(erorrMsgHTML);
            removeVoucher();
            return false;
        }
        if ($("#cartcoupon-redemption input[name=couponcode]").val().length == 0) {
            $('.applycoupon .s-error-new').remove();
            var erorrMsgHTML = '<div class="s-error-new" style="display: block;">Enter coupon code.</div>'
            $('.applycoupon').append(erorrMsgHTML);
            removeVoucher();
            return false;
        }
        //get the action-url of the form        
        var actionurl = '/cart/ajaxcouponredemption/';
        var unsetLink = $('<a/>')
            .addClass("ui-link icon i-remove coupon-remove")
            .text("X")
            .attr('onclick','removeVoucher()');
        var couponAppliedInput = $('#coupon_applied_by_input');
        //do your own request an handle the results
        $.ajax({
                url: actionurl,
                type: 'post',
                dataType: 'json',
                data: $("#cartcoupon-redemption").serialize(),
                success: function(data) {
                    $('.coupon-popup-inner .s-error-new').remove();
                    $('.cart-summary-right').html(data.html);
                    $('.orderdetails').html(data.html);                  
                    $('.fntsizOrderReview').html(data.finalAmount);    
                    if(typeof data.resultMsg.success !== 'undefined') {
                        var couponCode = couponName.toUpperCase();
                        var couponData = $('[data-coupon-code='+couponCode+']');
                        couponData.prop("checked",true);
                        gaTracking.addPromotion(data.gaTrackingData);
                        couponAppliedInput = $('.coupon-popup-inner').find('#coupon_applied_by_input').show();
                        couponAppliedInput.append($('#coupan_applied').html('<i class="fa fa-circle" aria-hidden="true"></i> Coupon applied'));
                        couponAppliedInput.append($('.clickable-code1').html(data.couponCode));                        
                        $(".apply").attr("disabled", "disabled");
                        $("#couponcode").attr('readonly', true);
                    }     
                   else if(typeof data.resultMsg.error !== 'undefined') {
                        $.each( data.resultMsg.error, function( key, value ) {
                            $('.applycoupon .s-error-new').remove();
                            var errorMsg = $('<div/>').addClass('s-error-new').text(value).show();
                            $('.applycoupon').append(errorMsg);
                            
                        });
                        return false;
                    }else if(typeof data.resultMsg.alreadyApplied !== 'undefined') {
                        $('.applycoupon .s-error-new').remove();
                        var errorMsg = $('<div/>').addClass('s-error-new').text(data.resultMsg.alreadyApplied).show();
                        $('.applycoupon').append(errorMsg);
                        return false;
                    }
                    $('.apply').text('Apply').prop('disabled',false);                 
                    $('.coupon-popup-inner .added_coupon_area').remove();
                    $('.coupon-popup-inner .ui-link').remove();
                    $('input[name="couponcode"]').val('');                   
                    $('.cart-page-items').html(data.cartItems);          
                    $('.mini-cart-total-wrapper .final_total .sub-toal').html(data.grandtotal);
                    $('.cart-page-items .item-product-to-price').each(function(){
                        if($(this).find('.old-price-cartpage').length >0){
                            $(this).find('.original_price').addClass('original_price_color');
                        }
                    });
                    
                        
                    couponAppliedInput.append(unsetLink);
                    //Cart page order summary script
                    cartOrderSummary();
                    $('.cart-page-items .item-product-to-price').each(function () {
                    if ($(this).find('.old-price-cartpage').length > 0) {
                        $(this).find('.original_price').addClass('original_price_color');
                    } else {
                        $(this).find('.original_price').removeClass('original_price_color');
                    }
                });
                }
        });
         
        
    });
    
 
});

var cartTimer = {
    count: 0,
    elementId: 'timer',
    interval: null,
    
    start: function(count) {
    	this.count = count;
    	if($('#' + this.elementId) && count > 0) {
    		this.interval = window.setInterval($.proxy(this.refreshTimer, this), 1000);
    	}
    },
    refreshTimer: function() {
    	var minutes = 0;
        var seconds = 0;
        if(this.count > 0) {
            if(this.count > 59) {
                minutes = Math.floor(this.count/60);
                seconds = this.count - (minutes*60);
            } else {
                seconds = this.count;
            }
            var displayMinutes = minutes.toString();
            var dispaySeconds = seconds.toString();
            if(minutes < 10) {
            	displayMinutes = "0" + displayMinutes;
            }
            if(seconds < 10) {
            	dispaySeconds = "0" + dispaySeconds;
            }

            $('#' + this.elementId).html(displayMinutes + ':' + dispaySeconds);
        }
        else {
        	window.clearInterval(this.interval);
            $('#' + this.elementId).html('00:00');
            window.location.reload();
        }
        this.count--;
    }
};

function checkCartCoupon(){
    var couponValue =   $('#couponCode').val();
if(couponValue!='' && typeof couponValue!="undefined" && couponValue!='Enter coupon code here'){
        $(this).children("span").remove();
        $('#couponError').html('<span style="color:red">Please click <STRONG>USE</strong> to redeem voucher</span>');
        return false;
    }else{
         $('#couponError').html('');
        return true;
    }
}

var cartAction = {
    setDeleteUrl: function(deleteUrl,moveToWishlist,deleteSku) {
        this.deleteUrl = deleteUrl;
        this.moveToWishlist = moveToWishlist;
        this.deleteSku = deleteSku;
    },
    deleteItem: function(){
        if(typeof this.deleteUrl !== 'undefined') {
            url = this.deleteUrl;
            sku = this.deleteSku;
            jQuery.get(url,{"requestType":"ajax"},function(response){
                response = jQuery.parseJSON(response);
                if(response.status){
                    var gaTrackingObject = {}; // preparing GA tracking data
                    var productObj = {}; // preparing GA tracking data
                    pageType = 'minicart';
                    skuArray = sku.split("-");
                    productObj.actualsku = skuArray[0];
                    productObj.variantSku = sku;
                    gaTrackingData = gaTracking.preparingData(gaTrackingObject,productObj,pageType)
                    if(gaTrackingData){
                        gaTracking.removeFromCart(gaTrackingData);
                    }
                    cartAction.wishlistAndAddtocartResponse(response,response.removalMsg,'cart');
                    var cartQty = response.cartItemQuantity;
                    if(cartQty<=0) {
                        cartQty = '';
                        window.location.reload();
                    }
                    else {
                        cartQty = detail.formatBadgeQty(response.cartItemQuantity);
                    }
                    $('.icon-bag.mini-cart span.badge').html(cartQty);
                    $('.cart-summary-right').html(response.orderSummary);
                    $('#mini-cart-drobdwon, .js-minicart-backdrop').hide();
                    if(response.kycCheck){
                    $("#ajaxKYC").show();
                    $('#ajaxKYC').html('<div class="container"><div class="lightBoxNewSubConHdrErr s-error error-msg-container">KYC: We can not process amount more than 1.99L</div></div>');
                    $("#ajaxKYC").delay(1000).fadeOut('slow');
                    }
                    cartOrderSummary();
                    $('.cart-page-items .item-product-to-price').each(function(){
                    if($(this).find('.old-price-cartpage').length >0){
                        $(this).find('.original_price').addClass('original_price_color');   
                    }
                    else{
                       $(this).find('.original_price').removeClass('original_price_color');
                    }
                });
                if($(window).width() < 767){
                    if ($('.pincode-slider').is(':empty')) {
                        $(".product-details").appendTo(".pincode-slider");
                    }  
                }
                }
                
                
            });
        }
    },
    wishlistAndAddtocartResponse: function(response,flashMessage,type) {
        if(response.status){
            var countWishList=parseInt(response.countWishList,10);
            jQuery('.miniWishlistContainer .badge').html(countWishList);
            $('.alert-cartremoval .button-area button').prop('disabled',false);
            $('.alert-cartremoval,#location-mask').hide();
            $('.alert-cartremoval .move-item').html('<i class="fa fa-heart buttonheart"></i>Move To saved');
            $('.alert-cartremoval .remove-item').html('Remove');
            detail.addToBagWishListMsgPopUp(flashMessage,'.wishlistadded',true);
            
            var badgeQty = detail.formatBadgeQty(response.cartItemQuantity);
            detail.addToBagWishListMsgPopUp(badgeQty,'.mini-cart .badge',false);
            
            //detail.addToBagWishListMsgPopUp(response.cartItemQuantity,'.mini-cart .badge',false);
            detail.addToBagWishListMsgPopUp(response.miniCartContent,'#mini-cart-drobdwon',false);
            $("#mini-cart-drobdwon .cartcontent").enscroll();
            detail.addToBagWishListMsgPopUp(response.miniWishlistContent,'.miniWishlistContainer .mini-cart-content',false);
            $('#mini-cart-drobdwon').hide();
            $('#cartSummary').hide();
            jQuery('#tab1').html(response.wishlistItems);
            jQuery('#cartSummary').html(response.orderSummary);
            jQuery('.cart-page-items').html(response.cartItems);
            if(countWishList>1){
                jQuery('#wishlistItemCount .carttabtitle').html('Your Saved Items ');
                jQuery('#wishlistItemCount .carttabitems').html('('+countWishList+' items)');
            }
            else{
                jQuery('#wishlistItemCount .carttabtitle').html('Your Saved Item ');
                jQuery('#wishlistItemCount .carttabitems').html('('+countWishList+' item)');
            }
            if(response.cartItemQuantity>1){
                jQuery('#cartItemCount .carttabitems').html('('+response.cartItemQuantity+' items)');
            }
            else{
                jQuery('#cartItemCount .carttabitems').html('('+response.cartItemQuantity+' item)');
            }
            if(response.cartItemQuantity != 0){
                if(type == 'savelist'){
                    customClass.wishlistLayoutChange();
                }else{
                    customClass.cartLayoutChange();
                }
                jQuery('.recently-viewed').remove();
            }else{
                if(type == 'savelist'){
                    customClass.wishlistLayoutChange();
                }else{
                    customClass.cartLayoutChange();
                }
                jQuery('.l-main').append(response.recentlyViewedItems);
            }

            jQuery(".mini-cart .mini-cart-content .cartcontent,.miniWishlistContainer .mini-cart-content .cartcontent").enscroll();
            
            $('#mini-cart-drobdwon').hide();
            $('.mini-cart-content').removeAttr('style');
        }
        
    },
    moveItemToWishlist: function(){
        if(typeof this.moveToWishlist !== 'undefined') {
            addItemFromCartToWishlist(this.moveToWishlist);
            //CDM-466
           //$('#'+this.moveToWishlist).trigger('click');
           $('#loadId').hide();
           $('.cartremoval_desc_section p').html('Product has been moved to wishlist');
            $(".cart-removal-overlay").delay(1000).fadeOut('slow');
           $('.alert-cartremoval,.cart-removal-overlay,#location-mask').hide();  
            if ($(window).width() < 767) {
                if ($('.pincode-slider').is(':empty')) {
                    $(".product-details").appendTo(".pincode-slider");
                }
            }
        }
         
    },
    cartupdateAjax: function() {

        $('#loadId').show();
        $('.lightBoxNewSubConHdr').remove();
        //$('.qty-btn').attr('disabled','enabled');
        //$('.qty-btn').css('opacity', '0.3');
        $('#btn_cart_checkout').prop( "onclick", 'return false' );
        var data = $("#cart-items-list-form").serializeArray();
        data.push({name: 'isAjaxTrue',value: true});
        var url =  $('#cart-url').val();
        $.ajax({
            type: "POST",
            dataType: 'json',
            url: url,
            data: data, // serializes the form's elements.
            success: function(data)
            {  
                $('.qty-btn').attr('disabled','disabled');
                $('.qty-btn').css('opacity', '1');
                var cartQty = data.cartQty;
                if(cartQty<=0) {
                    cartQty = '';
                }
                else {
                    cartQty = detail.formatBadgeQty(data.cartQty);
                }
                $('.icon-bag.mini-cart span.badge').html(cartQty);
                $('.mini-cart-content').html(data.miniCartContent);
                if($('.popup-outer').length > 0){
                    $('.popup-outer').remove();
                }
                 $(".cart-content").replaceWith(data.html);// show response from the php script.
                 //$("#headerCartId").html('<span>-</span>'+data.cartQty);
                 $(".lightBoxNewSubConHdr").css('display','block');
                 $(".lightBoxNewSubConHdr").delay(1000).fadeOut('slow');
                 //$('#checkoutajax-button').hide();
                 $('#btn_cart_checkout').attr( "onclick", 'return true' );
                 $('#loadId').hide();
                 $(".kyc_cart_msg").delay(1000).fadeOut('slow');
                //cart order summary for mobile
                 cartOrderSummary();
                  $('.cart-page-items .item-product-to-price').each(function(){
                    if($(this).find('.old-price-cartpage').length >0){
                        $(this).find('.original_price').addClass('original_price_color');   
                    }
                    else{
                       $(this).find('.original_price').removeClass('original_price_color');
                    }
                });
            }
        });
    },
    isCouponValid: function (selecter) {
        if(typeof selecter=='undefined') {
          selecter='.discountapplied';  
        }
        if ($(selecter).length) {
            var coupon = $(selecter).text();
            if(coupon!='') {
                var url =  '/cart/IsCouponValid';
                var data= {coupon:coupon};
                $.ajax({
                    type: "get",
                    dataType: 'json',
                    url: url,
                    data: data,
                    async:false,
                    success: function(data) { 
                       if(data.status && data.data==true) {
                           cartAction.couponValid= true;
                       } else {
                           cartAction.couponValid= false;
                           (data.response) ? $('#appliedcouponErr').html(data.response) : $('#appliedcouponErr').html('Invalid Coupon');
                       }
                    },
                    error: function(xhr,status,error) {
                        cartAction.couponValid= false;
                    }
                });   
            }
        }
    },
    tcShow: function (obj) {
        content = $(obj).data('tc');
        if (content == '') {
            $(".bank_content p").text("No terms and conditions");
        }
         $(".bank_content p").text(content);
        $('#bankOff_popup').modal('show');
    },
};

$(function() {

    $(".show_msg").delay(1000).fadeOut('slow');
    $(".kyc_cart_msg").delay(1000).fadeOut('slow');
 
});




(function(e){var n=e.event,o;n.special.smartresize={setup:function(){e(this).bind("resize",n.special.smartresize.handler)},teardown:function(){e(this).unbind("resize",n.special.smartresize.handler)},handler:function(j,l){var g=this,d=arguments;j.type="smartresize";o&&clearTimeout(o);o=setTimeout(function(){jQuery.event.handle.apply(g,d)},l==="execAsap"?0:100)}};e.fn.smartresize=function(j){return j?this.bind("smartresize",j):this.trigger("smartresize",["execAsap"])};e.fn.masonry=function(j,l){var g=
{getBricks:function(d,b,a){var c=a.itemSelector===undefined;b.$bricks=a.appendedContent===undefined?c?d.children():d.find(a.itemSelector):c?a.appendedContent:a.appendedContent.filter(a.itemSelector)},placeBrick:function(d,b,a,c,h){b=Math.min.apply(Math,a);for(var i=b+d.outerHeight(true),f=a.length,k=f,m=c.colCount+1-f;f--;)if(a[f]==b)k=f;d.applyStyle({left:c.colW*k+c.posLeft,top:b},e.extend(true,{},h.animationOptions));for(f=0;f<m;f++)c.colY[k+f]=i},setup:function(d,b,a){g.getBricks(d,a,b);if(a.masoned)a.previousData=
d.data("masonry");a.colW=b.columnWidth===undefined?a.masoned?a.previousData.colW:a.$bricks.outerWidth(true):b.columnWidth;a.colCount=Math.floor(d.width()/a.colW);a.colCount=Math.max(a.colCount,1)},arrange:function(d,b,a){var c;if(!a.masoned||b.appendedContent!==undefined)a.$bricks.css("position","absolute");if(a.masoned){a.posTop=a.previousData.posTop;a.posLeft=a.previousData.posLeft}else{d.css("position","relative");var h=e(document.createElement("div"));d.prepend(h);a.posTop=Math.round(h.position().top);
a.posLeft=Math.round(h.position().left);h.remove()}if(a.masoned&&b.appendedContent!==undefined){a.colY=a.previousData.colY;for(c=a.previousData.colCount;c<a.colCount;c++)a.colY[c]=a.posTop}else{a.colY=[];for(c=a.colCount;c--;)a.colY.push(a.posTop)}e.fn.applyStyle=a.masoned&&b.animate?e.fn.animate:e.fn.css;b.singleMode?a.$bricks.each(function(){var i=e(this);g.placeBrick(i,a.colCount,a.colY,a,b)}):a.$bricks.each(function(){var i=e(this),f=Math.ceil(i.outerWidth(true)/a.colW);f=Math.min(f,a.colCount);
if(f===1)g.placeBrick(i,a.colCount,a.colY,a,b);else{var k=a.colCount+1-f,m=[];for(c=0;c<k;c++){var p=a.colY.slice(c,c+f);m[c]=Math.max.apply(Math,p)}g.placeBrick(i,k,m,a,b)}});a.wallH=Math.max.apply(Math,a.colY);d.applyStyle({height:a.wallH-a.posTop},e.extend(true,[],b.animationOptions));a.masoned||setTimeout(function(){d.addClass("masoned")},1);l.call(a.$bricks);d.data("masonry",a)},resize:function(d,b,a){a.masoned=!!d.data("masonry");var c=d.data("masonry").colCount;g.setup(d,b,a);a.colCount!=c&&
g.arrange(d,b,a)}};return this.each(function(){var d=e(this),b={};b.masoned=!!d.data("masonry");var a=b.masoned?d.data("masonry").options:{},c=e.extend({},e.fn.masonry.defaults,a,j),h=a.resizeable;b.options=c.saveOptions?c:a;l=l||function(){};g.getBricks(d,b,c);if(!b.$bricks.length)return this;g.setup(d,c,b);g.arrange(d,c,b);!h&&c.resizeable&&e(window).bind("smartresize.masonry",function(){g.resize(d,c,b)});h&&!c.resizeable&&e(window).unbind("smartresize.masonry")})};e.fn.masonry.defaults={singleMode:false,
columnWidth:undefined,itemSelector:undefined,appendedContent:undefined,saveOptions:true,resizeable:true,animate:false,animationOptions:{}}})(jQuery);


// INDFUR - 1957: Shift common function of timer from CMS for both destop and mobile site
;(function($) {
	$.fn.countdown = function(options, callback) {
		var thisEl = $(this);
		var settings = { 
			'date': null,
			'format': null
		};
		if(options) {
			$.extend(settings, options);
		}
		var interval = 0;
		countdown_proc=function(){
			eventDate = Date.parse(settings['date']) / 1000;
			currentDate = Math.floor($.now() / 1000);
			if(eventDate <= currentDate) {
				if($('#dealoftheday_countdown').length){				
					dealDate = Date.parse($('#maxEndDate').html()) / 1000;
					if(dealDate <= currentDate) {
						history.go(0);
					}   
                 }
                 if ($('#dealoftheday_countdown-mobile').length) {
					dealDate = Date.parse($('#maxEndDate').html()) / 1000;
					if (dealDate <= currentDate) {
						history.go(0);
					}
				}
				clearInterval(interval);
				thisEl.find(".hours").text("00");
				thisEl.find(".minutes").text("00");
				thisEl.find(".seconds").text("00");
			} else {
				seconds = eventDate - currentDate;
				days = Math.floor(seconds / (60 * 60 * 24)); //calculate the number of days
				seconds -= days * 60 * 60 * 24; //update the seconds variable with no. of days removed 
				hours = Math.floor(seconds / (60 * 60));
				seconds -= hours * 60 * 60; //update the seconds variable with no. of hours removed
				minutes = Math.floor(seconds / 60);
				seconds -= minutes * 60; //update the seconds variable with no. of minutes removed
				if(settings['format'] == "on") {
					days = (String(days).length >= 2) ? days : "0" + days;
					hours = (String(hours).length >= 2) ? hours : "0" + hours;
					minutes = (String(minutes).length >= 2) ? minutes : "0" + minutes;
					seconds = (String(seconds).length >= 2) ? seconds : "0" + seconds;
				}
				if(!isNaN(eventDate)) {
					thisEl.find(".days").text(days);
					thisEl.find(".hours").text(hours);
					thisEl.find(".minutes").text(minutes);
					thisEl.find(".seconds").text(seconds);
				} else { 
					//alert("Invalid date. Here's an example: 4 february 2014 13:00:00");
					clearInterval(interval); 
				}
			}
		}
		$(this).countdown_proc;
		interval = setInterval(countdown_proc, 1000);
	}
}) (jQuery);  

var catalogCustomFilters = {
    priceSliderOpts: {
        min: 0,
        max: 1000,
        values: [100, 200],
        timeoutInterval: 2000
    },
 
    priceSliderCache: {
        slider: null,
        price_from: null,
        price_to: null,
        timeoutId: null
    },
 
 
    
    getUrlParam: function(name) {
        name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
        var regexS = "[\\?&]" + name + "=([^&#]*)";
        var regex = new RegExp(regexS);
        var results = regex.exec(window.location.search);
        if(results == null)
            return null;
        else
            return decodeURIComponent(results[1].replace(/\+/g, " "));
    },
 
 
    
    setUrlParam: function(name, value) {
        var params = window.location.search.split('&');
        params[0] = params[0].replace('?', '');
        for(idx in params) {
            var pairs = params[idx].split('=');
            if (pairs[0] == name) {
                params[idx] = name+"="+value;
                var search = "?" + params.join('&');
                
            
            var urlToload = window.location.protocol + '//' +
                    window.location.host + window.location.pathname + search;
            
            LeftFilterAjax.load(urlToload);
                return;
            }
        }
 
        var search = window.location.search;
        if (search.length < 1) {
            
        
        var urlToload = window.location.protocol + '//' +
                window.location.host + window.location.pathname + "?" + name + "=" + value;
            LeftFilterAjax.load(urlToload);
            
        } else {
            
        
        var urlToload = window.location.protocol + '//' +
                window.location.host + window.location.pathname + search + "&" + name + "=" + value;
            LeftFilterAjax.load(urlToload);
            
        }
    },
 
 
    
    priceSliderSubmit: function() {
        var value = $(catalogCustomFilters.priceSliderCache.price_from).val() + '-' + $(catalogCustomFilters.priceSliderCache.price_to).val();
        catalogCustomFilters.setUrlParam('price', value);
    },
 
 
    
    priceSliderValidateInputs: function() {
        var origFrom = $(this.priceSliderCache.price_from).val();
        var origTo = $(this.priceSliderCache.price_to).val();
 
        var from = parseInt(origFrom);
        if (isNaN(from))
            from = catalogCustomFilters.priceSliderOpts.min;
 
        var to = parseInt(origTo);
        if (isNaN(to))
            to = catalogCustomFilters.priceSliderOpts.max;
 
        if (to < from) {
            var tmp = to;
            to = from;
            from = tmp;
 
            $(this.priceSliderCache.price_from).val(from);
            $(this.priceSliderCache.price_to).val(to);
        }
 
        if (from < catalogCustomFilters.priceSliderOpts.min)
            from = catalogCustomFilters.priceSliderOpts.min;
 
        if (to > catalogCustomFilters.priceSliderOpts.max)
            to = catalogCustomFilters.priceSliderOpts.max;
 
        if (origFrom != from){
            $(this.priceSliderCache.price_from).val(from);
            $('div.catalogPriceSlider div.sliderInput input[name=price_from]').val(from);
        }
        
 
        if (to != origTo){
            $(this.priceSliderCache.price_to).val(to);
            $('div.catalogPriceSlider div.sliderInput input[name=price_to]').val(to);
        }
 
        $(catalogCustomFilters.priceSliderCache.slider).slider('values', 0, from);
        $(catalogCustomFilters.priceSliderCache.slider).slider('values', 1, to);
    },
 
 
    
    priceSliderInit: function() {
        catalogCustomFilters.priceSliderCache.slider = $(".customFiltersPriceSlider");
        catalogCustomFilters.priceSliderCache.price_from = $("div.catalogPriceSlider div.sliderInput input[name=price_from]");
        catalogCustomFilters.priceSliderCache.price_to = $("div.catalogPriceSlider div.sliderInput input[name=price_to]");
 
        if (catalogCustomFilters.priceSliderCache.slider.attr('disabled') != 'disabled') {
            jQuery(catalogCustomFilters.priceSliderCache.slider).slider({
                range: true,
                min: catalogCustomFilters.priceSliderOpts.min,
                max: catalogCustomFilters.priceSliderOpts.max,
                values: catalogCustomFilters.priceSliderOpts.values,
                start: function(event, ui) {
                    if (catalogCustomFilters.priceSliderCache.timeoutId !== null) {
                        clearTimeout(catalogCustomFilters.priceSliderCache.timeoutId);
                    }
                },
                stop: function(event, ui) {
                    catalogCustomFilters.priceSliderCache.timeoutId = setTimeout(function() {
                        catalogCustomFilters.priceSliderSubmit();
                    }, catalogCustomFilters.priceSliderOpts.timeoutInterval);
                },
                slide: function(event, ui) {
                    var that = $(this);
                    catalogCustomFilters.priceSliderCache.slider.each(function(idx, itm){
                        if (itm != that) {
                            $(itm).slider('values', 0, ui.values[0])
                            $(itm).slider('values', 1, ui.values[1])
                        }
                    });
                    $(catalogCustomFilters.priceSliderCache.price_from).val(ui.values[0]);
                    $(catalogCustomFilters.priceSliderCache.price_to).val(ui.values[1]);
                    $('#price_from').text(ui.values[0]);
                    $('#price_to').text(ui.values[1]);
                }
            });
        };
 
        $(document.body).on('blur','div.catalogPriceSlider div.sliderInput input[name=price_from]', function(event){
            $(catalogCustomFilters.priceSliderCache.price_from.val($(this).val()));
            catalogCustomFilters.priceSliderValidateInputs();
        });
 
        $(document.body).on('blur','div.catalogPriceSlider div.sliderInput input[name=price_to]', function(event){
            $(catalogCustomFilters.priceSliderCache.price_to.val($(this).val()));
            catalogCustomFilters.priceSliderValidateInputs();
 
        });
 
        $(document.body).on('submit','form.catalogPriceSliderFilterForm', function(e) {
            e.preventDefault();
            var form = $(this);
            $(catalogCustomFilters.priceSliderCache.price_from.val($(form).find('input[name=price_from]').val()));
            $(catalogCustomFilters.priceSliderCache.price_to.val($(form).find('input[name=price_to]').val()));
 
            catalogCustomFilters.priceSliderValidateInputs();
            catalogCustomFilters.priceSliderSubmit();
        });
 
        $(document.body).on('click','.catalogPriceSlider .catalogPriceFilterSubmit', function(event) {
			if($(window).width() < 767){
                        try{
                            localStorage.setItem("selectedFilter", 'price-fltr');
                        }catch(err){
                            console.log(err);
                        }
			}
            event.preventDefault();
            var form = $(this).closest('form');
            $(catalogCustomFilters.priceSliderCache.price_from.val($(form).find('input[name=price_from]').val()));
            $(catalogCustomFilters.priceSliderCache.price_to.val($(form).find('input[name=price_to]').val()));
 
            catalogCustomFilters.priceSliderValidateInputs();
            catalogCustomFilters.priceSliderSubmit();
        });
    },
 
 
    
    colorInit: function() {
        $(document).click(function(event) {
            if ( !$(event.target).hasClass('secondaryFilterSelectOverlay')) {
                $('#colorFilterTopForSecondary').hide();
            }
        });
 
        $('#secondaryFilterSelectOverlay').click(function() {
            $('#colorFilterTopForSecondary').toggle();
        });
    },
 
 
 
    
    brandInit: function() {
        $(".customFiltersBrand").change(function(event) {
            window.location.href = $(this).val();
        });
    },
 
 
    
    sizeInit: function() {
        $(".customFiltersSize").change(function(event) {
            catalogCustomFilters.setUrlParam('size', $(this).val());
        });
    },
        
 
    gaCodeTrackOnSlider : function() {
        _gaq.push(['_trackEvent', 'leftfilter', 'price',''+$('.categoryMenu [name=\'price_from\']').val()+'-'+$('.categoryMenu [name=\'price_to\']').val()+'']);
        setTimeout(function(){
            //catalogCustomFilters.priceSliderSubmit();
        },500);
    }
    
};
$( document ).ready(function() {
  $('.scrollbox').enscroll();
});
$( document ).ready(function() {
  $('.mScrollbox').enscroll();
  $(document).on('click',".filterSideBar",function(e){
            e.stopPropagation();
        });
        $(document).click(function(ev){
            if(ev.which == 1){
            $('.filterSideBar').removeClass('moveFilter');
        }
        });
        $(document).click(function(e){
            e.stopPropagation();
        });
});



        


$( document ).ready(function() {
    if(typeof(isNewFilter) != "undefined" && isNewFilter !== null) {
        LeftFilterAjax.init();
    }
    $('.mob-short-popup ul li').live('click', function () {
            var url = $(this).data('value');
            if (url.indexOf('void()') == -1 ) {
                LeftFilterAjax.FiltType = $(this).parent().parent().attr('class');
		if($('.mob-sort-overlay').hasClass('popUPOpenState')) 
		   { 	
			$('.mob-sort-overlay').removeClass('popUPOpenState');
			$('body').removeClass('OverHiddenSort');
		   } 
                LeftFilterAjax.load(url);
		$('body').removeClass('OverHiddenSort');
            }
            return false;
    });
    if($('.mobswitcher').length>0)
        {
            $('.mobswitcher').live('click',function() {
					if($('#product-grid-4').hasClass('mobswitcher mobgridactive')) {
						localStorage.setItem("grid", "product-grid-4");
					}
					else {
                    localStorage.setItem("grid", "product-grid-3");
				}
			
            });
            
            $(".item-mega-menu").live('click', function(){
				//var x = $(this).find("a").attr("href");
				//alert(x);
                                try{
                                    localStorage.setItem("grid", "product-grid-4");
                                }catch(err){
                                    console.log(err);
                                }
			})
        } 
     LeftFilterAjax.gridExist();
	
});

var LeftFilterAjax = {
    FiltType : '',
    init: function () {
        $('.refineListBox li, .color-close').each(function(){
            $(this).on('click', function (e) {
               var last_selected=$(this).parents('.fct').attr('id');
               try{
                    localStorage.setItem("selectedFilter", last_selected);
                }
                catch(err){
                    console.log(err);
                }
            });
        });
        //price filter setting local storage
        $('.price').on('click', function (e) {
           var last_selected=$(this).parent('.fct').attr('id');
           try{
                localStorage.setItem("selectedFilter", last_selected);
            }
            catch(err){
                console.log(err);
            }
        });
        $('.filterSideBar .fct li a, .selectFilterConsub div.filterRow a,.refinebyfil .clear a, #sort_by_catalog .cat-filters a,.reset').off('click');
        $('.selectFilterConsub div.filterRow a,.refinebyfil .clear a, #sort_by_catalog .cat-filters a,.reset').live('click', function () {

            var url = $(this).attr('href');
            if (url.indexOf('void()') == -1 ) {
                LeftFilterAjax.FiltType = $(this).parent().parent().attr('class');
                LeftFilterAjax.load(url);
            }
            return false;
        });
        
        $('.sortBar_right select').off('change');
        $('.sortBar_right select').live('change', function () {
            var url = $(this).val();
            if (url.indexOf('void()') == -1 ) {
                LeftFilterAjax.FiltType = $(this).parent().parent().attr('class');
                LeftFilterAjax.load(url,true);
                
            }
            return false;
            
        });
                
        //jQuery(".filterSideBar .refineByTitle").addClass("opened").removeClass("closed");
        //jQuery(".filterSideBar .refineListBox").show();
       
    
    window.onpopstate =  function(e) {
            if (window.location.hash === '' && window.location.href.indexOf('#') === -1) {
                LeftFilterAjax.FiltType = 'filterRow';
                var newUrl = decodeURI(window.location.href);
                LeftFilterAjax.load(newUrl);
            }
        }
            
    },
    load: function (url) {
        localStorage.removeItem( 'historyPLP' );
        localStorage.removeItem( 'isPDP' );
        var pageUrl = url;

        if (typeof url != "undefined") {
            $('#loadId').show();

            if (url.indexOf('?') != -1) {
                url = url + '&filterajax=true';
            }
            else {
                var isSlash = url.charAt(url.length-1);
                if(isSlash == '/'){
                    url = url + '?filterajax=true';
                }
                else{
                    url = url + '/?filterajax=true';
                }
            }
            
            if (LeftFilterAjax.isEncoded(pageUrl)){
                url = decodeURI(url);
            }
            url = encodeURI(url);

            $('div#content').load(url, function (LoadedData) {
                if (LoadedData.indexOf('</head>') == -1 && LoadedData.indexOf('</html>') == -1) {
                    $('.filterSideBar').hide();
                    $('#loadId').hide();
                    LeftFilterAjax.listners();
                    $('.filterSideBar').show();
                    LeftFilterAjax.selectChoosen();
                    if($('.video-product').length>0){
                        var imageloaded = false;
                        $('.video-product img').one('load',function(){
                            if(!imageloaded){
                                customJsObj.videoproduct();
                                imageloaded = true;
                            }           
                        });      
                    }
                }
                else {
                    $('div#content').show();
                    url = url.replace (/\&filterajax=true/g, "");
                    url = url.replace (/\?filterajax=true/g, "");
                    window.location.href = url;
                }
                 LeftFilterAjax.gridExist();	
                 $('.selectpicker').selectpicker({
                    dropupAuto: false
                });
		jQuery(".refineByTitle").removeClass('opened').addClass('closed');
                 jQuery(".filterSideBar .refineListBox").css('border-bottom','1px solid rgb(51,51,51');
                 $('.refineByTitle:lt(3)').css('border-bottom','1px solid rgb(51,51,51)');
                 
		$('.refineListBox li, .color-close').each(function(){
		$(this).on('click', function (e) {
		   var last_selected=$(this).parents('.fct').attr('id');
                   try{
                    localStorage.setItem("selectedFilter", last_selected);
                    }
                    catch(err){
                        console.log(err);
                    }
			
		});
                 var price = $('.fct').hasClass('price-fltr');
                 if(price){
                    $('.color-price').hide();
                    $('.price_filter').removeClass("closed").addClass('opened');
                    $(this).find(".price_filter").css('border-bottom','1px solid rgb(51,51,51)');  
                    $('.price').show();
                }
		});
                $('.add-filter').click(function(){
                    $('.fliterpartialleft').show('slow');
                    $('.catalog-products').hide();
                    $('footer').hide();
                    $('.sortBar').hide('slow');
                });
                $('.add-filter-close').click(function(){
                    $('.fliterpartialleft').hide('slow');
                    $('.catalog-products').show('slow');
                    $('footer').show('slow');
                    $('.sortBar').show('slow');
                });
		 if($(window).width()<768){
                    $('.sortBar_right').removeClass('plp-select').addClass('filter-select-box col-xs-7 nopadding');
            $('.sortBar_right select').addClass('selectpicker');
            $('.sortBar_right select').attr('data-width','190px');
            $('.selectpicker').selectpicker();
            $('.sortBar-left').addClass('col-xs-12 nopadding');
            $('.add-filter').addClass('col-xs-5 nopadding');
                 }
                jQuery(".refineListBox:lt(2)").show();
                jQuery(".refineListBox:gt(2)").hide();
                jQuery(".refineByTitle:lt(3)").removeClass('closed').addClass('opened'); 
                jQuery(".refineByTitle:gt(3)").removeClass('opened').addClass('closed'); 
		$('.price_filter').removeClass("closed").addClass('opened');
                $('.price').show();
                $(".price_filter").css('border-bottom','1px solid rgb(51,51,51)');  
			
                if(!oneStepCheckout.isMobile()){
			$('.stickyleftSidebar, .product-list-container').theiaStickySidebar({ additionalTopMargin: 20 });
                }
			
		catalog.addSelectedFilterCount();
		$('.scrollbox').enscroll(); 	
		if($('.selectFilterConsub a').length>0)
		{
			$('.category-banner').hide();
		}                
            });
            
            if (LeftFilterAjax.isEncoded(pageUrl)){
                pageUrl = decodeURI(pageUrl);
            }
            
            pageUrl = encodeURI(pageUrl);
            if (pageUrl != window.location) {
                window.history.pushState({path: pageUrl}, '', pageUrl);
            }
           
        }
        try{
            localStorage.setItem("historyHtml", jQuery("#productsCatalog").html());
        }
        catch(err){
                console.log(err);
        }
        return false;  
        
    },
    isEncoded: function (uri) {
        uri = uri || '';
        return uri !== decodeURI(uri);
    },
    gridExist: function()
    {           if($('.mobswitcher').length>0)
                {
                   if(localStorage.getItem("grid")) {                  
                    if(localStorage.getItem("grid")=="product-grid-3")
			{       $('.mobswitcher').removeClass('mobgridactive');
                                $('span#product-grid-3').addClass('mobgridactive');
				$(".catalog-products-section").find(".products").addClass("product-grid-3");
				$(".catalog-products-section").find(".products li").addClass("selected");
				$(".catalog-products-section").find(".products").removeClass("product-grid-4");
			} 
			else 
			{
                                $('.mobswitcher').removeClass('mobgridactive');
                                $('span#product-grid-4').addClass('mobgridactive');
				$(".catalog-products-section").find(".products").addClass("product-grid-4");
				$(".catalog-products-section").find(".products li").addClass("selected");
				$(".catalog-products-section").find(".products").removeClass("product-grid-3");			
			}
                   } 
               }     
    },
    listners: function () {
        $('.catListcon24').show();
        
        if(LeftFilterAjax.FiltType == 'filterRow' || LeftFilterAjax.FiltType == 'cat-filters'){
           $('.filterSideBar').removeClass('moveFilter');
        }
        else{
            $('.filterSideBar').addClass('moveFilter');
        }
        //jQuery(".refineByTitle").addClass("opened").removeClass("closed");
        //jQuery(".refineListBox").show();
        //jQuery(".filterSideBar .refineByTitle").addClass("opened").removeClass("closed");
        //jQuery(".filterSideBar .refineListBox").show();
        jQuery(".filterSideBar .refineByTitle").css('cursor','pointer');

           

        //scroll filter
        $('.mScrollbox').enscroll();

        //scroll to content top
        //$(window).scrollTop($('div#content').offset().top);
        $('html,body').animate({scrollTop: $('body').offset().top}, 'slow');
        //$(window).scrollTop($('body').offset().top-1);
        
        //invoke catalog evenets
        catalog.image_width= 310;
    catalog.image_height= 310;
    catalog.image_count_sprite= 4;
    catalog.scrollToTopButton_visible= false;
    catalog.scrollToTopButtonObj= null;
    catalog.itemListRootEl= null;
    catalog.currentItemEl= null; 
    catalog.webtrekk_prod_ids= '';
    catalog.webtrekk_prod_nos= '';
    catalog.webtrekk_arr= new Array();
    catalog.trackLoad = 2;
    catalog.loading = false;
    catalog.totalProductLeft = jQuery('#productCount').val();
    catalog.pageSize = jQuery('#pageSize').val();
    catalog.totalGroup = jQuery('#LazyLoadCount').val();
        catalog.init();
        
        //invoke catalog events
        catalogInvokeFun();
    },
    singleSelectFilter: function(key,link) {
        var boxes = $('input[name='+key+']:checked');
        var fv = '';
       
        fv += '--'+$('input[name='+key+']').val();

        var fv_new = fv.substr(2);
        if (fv_new.length > 0 ) {
          var url = link.replace("--param--", key+'='+fv_new);
        } else if (link.indexOf("/?--param--") != -1 && link.indexOf("&--param--") == -1 && link.indexOf("&") == -1) {
          var url = link.replace("/?--param--", '');
        } else if (link.indexOf("/?--param--") != -1 && link.indexOf("&") != -1) {
          var url = link.replace("--param--&", '');
        } else {
          var url = link.replace("&--param--", '');
        }
        //window.location = url;
        //load by ajax
        LeftFilterAjax.FiltType = '';
        LeftFilterAjax.load(url);
    },
    selectChoosen: function(){
        //$("select").chosen({width:"200px"});
        //$('.selectpicker').selectpicker();
    }
}




window.Modernizr=function(i,e,u){function s(a,b){return(""+a).indexOf(b)!==-1}function D(a,b){for(var c in a)if(j[a[c]]!==u&&(!b||b(a[c],E)))return true}function n(a,b){var c=a.charAt(0).toUpperCase()+a.substr(1);c=(a+" "+F.join(c+" ")+c).split(" ");return!!D(c,b)}function S(){f.input=function(a){for(var b=0,c=a.length;b<c;b++)L[a[b]]=!!(a[b]in h);return L}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));f.inputtypes=function(a){for(var b=0,c,k=a.length;b<
k;b++){h.setAttribute("type",a[b]);if(c=h.type!=="text"){h.value=M;if(/^range$/.test(h.type)&&h.style.WebkitAppearance!==u){l.appendChild(h);c=e.defaultView;c=c.getComputedStyle&&c.getComputedStyle(h,null).WebkitAppearance!=="textfield"&&h.offsetHeight!==0;l.removeChild(h)}else/^(search|tel)$/.test(h.type)||(c=/^(url|email)$/.test(h.type)?h.checkValidity&&h.checkValidity()===false:h.value!=M)}N[a[b]]=!!c}return N}("search tel url email datetime date month week time datetime-local number range color".split(" "))}
var f={},l=e.documentElement,E=e.createElement("modernizr"),j=E.style,h=e.createElement("input"),M=":)",O=Object.prototype.toString,q=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),F="Webkit Moz O ms Khtml".split(" "),v={svg:"http://www.w3.org/2000/svg"},d={},N={},L={},P=[],w,Q=function(a){var b=document.createElement("style"),c=e.createElement("div");b.textContent=a+"{#modernizr{height:3px}}";(e.head||e.getElementsByTagName("head")[0]).appendChild(b);c.id="modernizr";l.appendChild(c);a=c.offsetHeight===
3;b.parentNode.removeChild(b);c.parentNode.removeChild(c);return!!a},o=function(){var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(b,c){c=c||document.createElement(a[b]||"div");b="on"+b;var k=b in c;if(!k){c.setAttribute||(c=document.createElement("div"));if(c.setAttribute&&c.removeAttribute){c.setAttribute(b,"");k=typeof c[b]=="function";if(typeof c[b]!="undefined")c[b]=u;c.removeAttribute(b)}}return k}}(),G={}.hasOwnProperty,R;R=
typeof G!=="undefined"&&typeof G.call!=="undefined"?function(a,b){return G.call(a,b)}:function(a,b){return b in a&&typeof a.constructor.prototype[b]==="undefined"};d.flexbox=function(){var a=e.createElement("div"),b=e.createElement("div");(function(k,g,r,x){g+=":";k.style.cssText=(g+q.join(r+";"+g)).slice(0,-g.length)+(x||"")})(a,"display","box","width:42px;padding:0;");b.style.cssText=q.join("box-flex:1;")+"width:10px;";a.appendChild(b);l.appendChild(a);var c=b.offsetWidth===42;a.removeChild(b);
l.removeChild(a);return c};d.canvas=function(){var a=e.createElement("canvas");return!!(a.getContext&&a.getContext("2d"))};d.canvastext=function(){return!!(f.canvas&&typeof e.createElement("canvas").getContext("2d").fillText=="function")};d.webgl=function(){var a=e.createElement("canvas");try{if(a.getContext("webgl"))return true}catch(b){}try{if(a.getContext("experimental-webgl"))return true}catch(c){}return false};d.touch=function(){return"ontouchstart"in i||Q("@media ("+q.join("touch-enabled),(")+
"modernizr)")};d.geolocation=function(){return!!navigator.geolocation};d.postmessage=function(){return!!i.postMessage};d.websqldatabase=function(){return!!i.openDatabase};d.indexedDB=function(){for(var a=-1,b=F.length;++a<b;){var c=F[a].toLowerCase();if(i[c+"_indexedDB"]||i[c+"IndexedDB"])return true}return false};d.hashchange=function(){return o("hashchange",i)&&(document.documentMode===u||document.documentMode>7)};d.history=function(){return!!(i.history&&history.pushState)};d.draganddrop=function(){return o("drag")&&
o("dragstart")&&o("dragenter")&&o("dragover")&&o("dragleave")&&o("dragend")&&o("drop")};d.websockets=function(){return"WebSocket"in i};d.rgba=function(){j.cssText="background-color:rgba(150,255,150,.5)";return s(j.backgroundColor,"rgba")};d.hsla=function(){j.cssText="background-color:hsla(120,40%,100%,.5)";return s(j.backgroundColor,"rgba")||s(j.backgroundColor,"hsla")};d.multiplebgs=function(){j.cssText="background:url(//:),url(//:),red url(//:)";return/(url\s*\(.*?){3}/.test(j.background)};d.backgroundsize=
function(){return n("backgroundSize")};d.borderimage=function(){return n("borderImage")};d.borderradius=function(){return n("borderRadius","",function(a){return s(a,"orderRadius")})};d.boxshadow=function(){return n("boxShadow")};d.textshadow=function(){return e.createElement("div").style.textShadow===""};d.opacity=function(){var a=q.join("opacity:.5;")+"";j.cssText=a;return s(j.opacity,"0.5")};d.cssanimations=function(){return n("animationName")};d.csscolumns=function(){return n("columnCount")};d.cssgradients=
function(){var a=("background-image:"+q.join("gradient(linear,left top,right bottom,from(#9f9),to(white));background-image:")+q.join("linear-gradient(left top,#9f9, white);background-image:")).slice(0,-17);j.cssText=a;return s(j.backgroundImage,"gradient")};d.cssreflections=function(){return n("boxReflect")};d.csstransforms=function(){return!!D(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])};d.csstransforms3d=function(){var a=!!D(["perspectiveProperty","WebkitPerspective",
"MozPerspective","OPerspective","msPerspective"]);if(a)a=Q("@media ("+q.join("transform-3d),(")+"modernizr)");return a};d.csstransitions=function(){return n("transitionProperty")};d.fontface=function(){var a,b=e.head||e.getElementsByTagName("head")[0]||l,c=e.createElement("style"),k=e.implementation||{hasFeature:function(){return false}};c.type="text/css";b.insertBefore(c,b.firstChild);a=c.sheet||c.styleSheet;b=k.hasFeature("CSS2","")?function(g){if(!(a&&g))return false;var r=false;try{a.insertRule(g,
0);r=!/unknown/i.test(a.cssRules[0].cssText);a.deleteRule(a.cssRules.length-1)}catch(x){}return r}:function(g){if(!(a&&g))return false;a.cssText=g;return a.cssText.length!==0&&!/unknown/i.test(a.cssText)&&a.cssText.replace(/\r+|\n+/g,"").indexOf(g.split(" ")[0])===0};f._fontfaceready=function(g){g(f.fontface)};return b('@font-face { font-family: "font"; src: "font.ttf"; }')};d.video=function(){var a=e.createElement("video"),b=!!a.canPlayType;if(b){b=new Boolean(b);b.ogg=a.canPlayType('video/ogg; codecs="theora"');
b.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"')||a.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');b.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"')}return b};d.audio=function(){var a=e.createElement("audio"),b=!!a.canPlayType;if(b){b=new Boolean(b);b.ogg=a.canPlayType('audio/ogg; codecs="vorbis"');b.mp3=a.canPlayType("audio/mpeg;");b.wav=a.canPlayType('audio/wav; codecs="1"');b.m4a=a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")}return b};d.localstorage=function(){try{return"localStorage"in
i&&i.localStorage!==null}catch(a){return false}};d.sessionstorage=function(){try{return"sessionStorage"in i&&i.sessionStorage!==null}catch(a){return false}};d.webWorkers=function(){return!!i.Worker};d.applicationcache=function(){return!!i.applicationCache};d.svg=function(){return!!e.createElementNS&&!!e.createElementNS(v.svg,"svg").createSVGRect};d.inlinesvg=function(){var a=document.createElement("div");a.innerHTML="<svg/>";return(a.firstChild&&a.firstChild.namespaceURI)==v.svg};d.smil=function(){return!!e.createElementNS&&
/SVG/.test(O.call(e.createElementNS(v.svg,"animate")))};d.svgclippaths=function(){return!!e.createElementNS&&/SVG/.test(O.call(e.createElementNS(v.svg,"clipPath")))};for(var H in d)if(R(d,H)){w=H.toLowerCase();f[w]=d[H]();P.push((f[w]?"":"no-")+w)}f.input||S();f.crosswindowmessaging=f.postmessage;f.historymanagement=f.history;f.addTest=function(a,b){a=a.toLowerCase();if(!f[a]){b=!!b();l.className+=" "+(b?"":"no-")+a;f[a]=b;return f}};j.cssText="";E=h=null;i.attachEvent&&function(){var a=e.createElement("div");
a.innerHTML="<elem></elem>";return a.childNodes.length!==1}()&&function(a,b){function c(p){for(var m=-1;++m<r;)p.createElement(g[m])}function k(p,m){for(var I=p.length,t=-1,y,J=[];++t<I;){y=p[t];m=y.media||m;J.push(k(y.imports,m));J.push(y.cssText)}return J.join("")}var g="abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video".split("|"),r=g.length,x=RegExp("<(/*)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)",
"gi"),T=RegExp("\\b(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)\\b(?!.*[;}])","gi"),z=b.createDocumentFragment(),A=b.documentElement,K=A.firstChild,B=b.createElement("style"),C=b.createElement("body");B.media="all";c(b);c(z);a.attachEvent("onbeforeprint",function(){for(var p=-1;++p<r;)for(var m=b.getElementsByTagName(g[p]),I=m.length,t=-1;++t<I;)if(m[t].className.indexOf("iepp_")<0)m[t].className+=" iepp_"+
g[p];K.insertBefore(B,K.firstChild);B.styleSheet.cssText=k(b.styleSheets,"all").replace(T,".iepp_$1");z.appendChild(b.body);A.appendChild(C);C.innerHTML=z.firstChild.innerHTML.replace(x,"<$1bdo")});a.attachEvent("onafterprint",function(){C.innerHTML="";A.removeChild(C);K.removeChild(B);A.appendChild(z.firstChild)})}(this,document);f._enableHTML5=true;f._version="1.6";l.className=l.className.replace(/\bno-js\b/,"")+" js";l.className+=" "+P.join(" ");return f}(this,this.document);





(function (d) {
    if (!d.browser) {
        var l;
        l = navigator.userAgent || "";
        d.uaMatch = function (d) {
            d = d.toLowerCase();
            d = /(chrome)[ \/]([\w.]+)/.exec(d) || /(webkit)[ \/]([\w.]+)/.exec(d) || /(opera)(?:.*version)?[ \/]([\w.]+)/.exec(d) || /(msie) ([\w.]+)/.exec(d) || 0 > d.indexOf("compatible") && /(mozilla)(?:.*? rv:([\w.]+))?/.exec(d) || [];
            return {
                browser: d[1] || "",
                version: d[2] || "0"
            }
        };
        l = d.uaMatch(l);
        d.browser = {};
        l.browser && (d.browser[l.browser] = !0, d.browser.version = l.version);
        d.browser.webkit && (d.browser.safari = !0)
    }
})(jQuery);
jQuery.easing.jswing = jQuery.easing.swing;
jQuery.extend(jQuery.easing, {
    easeOutCubic: function (d, l, u, w, p) {
        return w * ((l = l / p - 1) * l * l + 1) + u
    },
    easeOutExpo: function (d, l, u, w, p) {
        return l == p ? u + w: w * ( - Math.pow(2, -10 * l / p) + 1) + u
    }
});
window.Modernizr = function (d, l, u) {
    function w(a, b) {
        for (var c in a) if (z[a[c]] !== u) return "pfx" == b ? a[c] : !0;
        return ! 1
    }
    function p(a, b, c) {
        var e = a.charAt(0).toUpperCase() + a.substr(1),
            f = (a + " " + A.join(e + " ") + e).split(" ");
        if ("string" === typeof b || "undefined" === typeof b) b = w(f, b);
        else a: {
            f = (a + " " + B.join(e + " ") + e).split(" "),
                a = f;
            for (var d in a) if (e = b[a[d]], e !== u) {
                b = !1 === c ? a[d] : "function" === typeof e ? e.bind(c || b) : e;
                break a
            }
            b = !1
        }
        return b
    }
    var g = {},
        s = l.documentElement,
        n = l.createElement("modernizr"),
        z = n.style;
    d = " -webkit- -moz- -o- -ms- ".split(" ");
    var A = ["Webkit", "Moz", "O", "ms"],
        B = ["webkit", "moz", "o", "ms"],
        n = {},
        a = [],
        c = a.slice,
        b,
        e = function (a, b, c, e) {
            var f, d, k, h = l.createElement("div"),
                p = l.body,
                g = p ? p: l.createElement("body");
            if (parseInt(c, 10)) for (; c--;) k = l.createElement("div"),
                k.id = e ? e[c] : "modernizr" + (c + 1),
                h.appendChild(k);
            return f = ["&#173;<style>", a, "</style>"].join(""),
                h.id = "modernizr",
                (p ? h: g).innerHTML += f,
                g.appendChild(h),
            p || (g.style.background = "", s.appendChild(g)),
                d = b(h, a),
                p ? h.parentNode.removeChild(h) : g.parentNode.removeChild(g),
                !!d
        },
        f = {}.hasOwnProperty,
        k;
    "undefined" === typeof f || "undefined" === typeof f.call ? k = function (a, b) {
        return b in a && "undefined" === typeof a.constructor.prototype[b]
    }: k = function (a, b) {
        return f.call(a, b)
    };
    Function.prototype.bind || (Function.prototype.bind = function (a) {
        var b = this;
        if ("function" != typeof b) throw new TypeError;
        var e = c.call(arguments, 1),
            f = function () {
                if (this instanceof f) {
                    var d = function () {};
                    d.prototype = b.prototype;
                    var d = new d,
                        k = b.apply(d, e.concat(c.call(arguments)));
                    return Object(k) === k ? k: d
                }
                return b.apply(a, e.concat(c.call(arguments)))
            };
        return f
    });
    (function (a, b) {
        var c = a.join(""),
            f = b.length;
        e(c, function (a, b) {
                for (var c = a.childNodes, e = {}; f--;) e[c[f].id] = c[f];
                g.csstransforms3d = 9 === (e.csstransforms3d && e.csstransforms3d.offsetLeft) && 3 === e.csstransforms3d.offsetHeight
            },
            f, b)
    })([, ["@media (", d.join("transform-3d),("), "modernizr){#csstransforms3d{left:9px;position:absolute;height:3px;}}"].join("")], [, "csstransforms3d"]);
    n.csstransforms3d = function () {
        var a = !!p("perspective");
        return a && "webkitPerspective" in s.style && (a = g.csstransforms3d),
            a
    };
    for (var h in n) k(n, h) && (b = h.toLowerCase(), g[b] = n[h](), a.push((g[b] ? "": "no-") + b));
    z.cssText = "";
    return n = null,
        g._version = "2.5.3",
        g._prefixes = d,
        g._domPrefixes = B,
        g._cssomPrefixes = A,
        g.testProp = function (a) {
            return w([a])
        },
        g.testAllProps = p,
        g.testStyles = e,
        g.prefixed = function (a, b, c) {
            return b ? p(a, b, c) : p(a, "pfx")
        },
        g
} (this, this.document);
(function (d, l, u) {
    function w(d) {
        d = d || location.href;
        return "#" + d.replace(/^[^#]*#?(.*)$/, "$1")
    }
    "$:nomunge";
    var p = "hashchange",
        g = document,
        s, n = d.event.special,
        z = g.documentMode,
        A = "on" + p in l && (z === u || 7 < z);
    d.fn[p] = function (d) {
        return d ? this.bind(p, d) : this.trigger(p)
    };
    d.fn[p].delay = 50;
    n[p] = d.extend(n[p], {
        setup: function () {
            if (A) return ! 1;
            d(s.start)
        },
        teardown: function () {
            if (A) return ! 1;
            d(s.stop)
        }
    });
    s = function () {
        function n() {
            var a = w(),
                e = k(b);
            a !== b ? (f(b = a, e), d(l).trigger(p)) : e !== b && (location.href = location.href.replace(/#.*/, "") + e);
            c = setTimeout(n, d.fn[p].delay)
        }
        var a = {},
            c, b = w(),
            e = function (a) {
                return a
            },
            f = e,
            k = e;
        a.start = function () {
            c || n()
        };
        a.stop = function () {
            c && clearTimeout(c);
            c = u
        };
        d.browser.msie && !A &&
        function () {
            var b, c;
            a.start = function () {
                b || (c = (c = d.fn[p].src) && c + w(), b = d('<iframe tabindex="-1" title="empty"/>').hide().one("load", function () {
                    c || f(w());
                    n()
                }).attr("src", c || "javascript:0").insertAfter("body")[0].contentWindow, g.onpropertychange = function () {
                    try {
                        "title" === event.propertyName && (b.document.title = g.title)
                    } catch(a) {}
                })
            };
            a.stop = e;
            k = function () {
                return w(b.location.href)
            };
            f = function (a, c) {
                var e = b.document,
                    f = d.fn[p].domain;
                a !== c && (e.title = g.title, e.open(), f && e.write('<script>document.domain="' + f + '"\x3c/script>'), e.close(), b.location.hash = a)
            }
        } ();
        return a
    } ()
})(jQuery, this);
(function (d) {
    function l(a, c) {
        a = d(a);
        var b = this;
        this.elem = a;
        this.id = a.attr("id");
        this.pages = [];
        this.opts = c;
        this.currentPage = null;
        this.pageWidth = c.width / 2;
        this.pageHeight = c.height;
        this.transparentPages = c.transparentPages = !1;
        this.startPage = c.startPage;
        this.onShowPage = c.onShowPage;
        this.slideShow = c.slideShow;
        this.slideShowDelay = c.slideShowDelay;
        this.pauseOnHover = c.pauseOnHover;
        this.turnPageDuration = c.turnPageDuration;
        this.foldGradient = c.foldGradient;
        this.foldGradientThreshold = c.foldGradientThreshold;
        this.shadows = c.shadows;
        this.shadowThreshold = c.shadowThreshold;
        this.clipBoundaries = c.clipBoundaries;
        this.zoomLevel = 1;
        this.zoomMax = c.zoomMax;
        this.zoomMin = c.zoomMin;
        this.zoomBoundingBox = c.zoomBoundingBox;
        this.zoomStep = c.zoomStep;
        this.onZoom = c.onZoom;
        this.mouseWheel = c.mouseWheel;
        this.flipSound = c.flipSound;
        this.centeredWhenClosed = c.centeredWhenClosed;
        this.sectionDefinition = c.sections;
        this.rtl = !!c.rtl;
        d.wowBook.support.filters = "filters" in a[0];
        a.addClass("wowbook");
        "static" === a.css("position") && a.css("position", "relative");
        var e = a.children();
        if (e.length < c.pageCount) {
            for (var f = c.pageCount - e.length; f--;) a.append("<div />");
            e = a.children()
        }
        f = this.pagesContainer = this.origin = d("<div class='wowbook-origin'></div>").css({
            position: "absolute"
        }).appendTo(a);
        b.bookShadow = d("<div class='wowbook-book-shadow'></div>").appendTo(a).css({
            top: 0,
            position: "absolute",
            display: "none",
            zIndex: 0
        });
        this.insertPages(e, !0);
        f.append("<div class='wowbook-shadow-clipper'><div class='wowbook-shadow-container'><div class='wowbook-shadow-internal'></div></div></div>");
        b.shadowContainer = d(".wowbook-shadow-container", f);
        b.internalShadow = d(".wowbook-shadow-internal", f);
        b.shadowClipper = d(".wowbook-shadow-clipper", f).css({
            display: "none"
        });
        b.foldShadow = d("<div class='wowbook-shadow-fold'></div>").appendTo(b.shadowContainer);
        b.foldGradientContainer = d("<div class='wowbook-fold-gradient-container'></div>").appendTo(b.shadowContainer);
        b.foldGradientElem = d("<div class='wowbook-fold-gradient'></div>").appendTo(b.foldGradientContainer);
        b.hardPageShadow = d("<div class='wowbook-hard-page-shadow'></div>").css({
            display: "none"
        }).appendTo(f); ! d.support.opacity && d.wowBook.support.filters && d.wowBook.applyAlphaImageLoader(["wowbook-fold-gradient", "wowbook-fold-gradient-flipped", "wowbook-shadow-fold", "wowbook-shadow-fold-flipped"]);
        b.shadowContainer.css("position", "relative");
        this.leftHandle = d("<div class='wowbook-handle wowbook-left'></div>").data("corner", "l").appendTo(f);
        this.rightHandle = d("<div class='wowbook-handle wowbook-right'></div>").data("corner", "r").appendTo(f);
        Modernizr.csstransforms3d && (e = d("<div>").css("transform", "perspective(1px)"), this.perspectiveUnit = "none" != e.css("transform") ? "px": "", e = null);
        d.browser.msie && d(".wowbook-handle", a).css({
            backgroundColor: "#fff",
            opacity: "0.01"
        });
        d(".wowbook-handle", f).bind("mousedown.wowbook", function (a) {
            return b.pageEdgeDragStart(a)
        });
        c.curl && d(".wowbook-handle", f).hover(function (a) {
                if (!b.curlTimer) {
                    var c = this == b.leftHandle[0] ? b.leftPage() : b.rightPage();
                    if (c) {
                        var e = c.offset(),
                            f = a.pageY - e.top;
                        b.curlTimer = setTimeout(function () {
                                b.curl(c, f > b.pageHeight / 2)
                            },
                            120)
                    }
                }
            },
            function () {
                b.curlTimer = clearTimeout(b.curlTimer);
                b.uncurl()
            });
        var k;
        d(".wowbook-handle", f).on("mousedown.wowbook", function () {
            k = d.now()
        }).on("mouseup.wowbook", function () {
            if (! ((new Date).getTime() - k > b.opts.handleClickDuration)) {
                b.stopAnimation();
                var a = d(this).data("corner");
                if ("r" === a) b[b.rtl ? "back": "advance"]();
                if ("l" === a) b[b.rtl ? "advance": "back"]()
            }
        });
        var h = !1;
        a.hover(function (a) {
                if (b.pauseOnHover) {
                    h = b.slideShowTimer;
                    a = d(b.opts.controls.slideShow);
                    var c = a.hasClass("wowbook-disabled");
                    b.stopSlideShow();
                    a.toggleClass("wowbook-disabled", c)
                }
            },
            function () {
                b.pauseOnHover && h && b.startSlideShow()
            });
        this.clipBoundaries && (this.origin.wrap("<div class='wowbook-clipper'><div class='wowbook-inner-clipper'></div></div>"), d(".wowbook-inner-clipper", a).css({
            position: "absolute",
            width: "100%",
            overflow: "hidden"
        }), this.clipper = d(".wowbook-clipper", a).css({
            position: "absolute",
            left: 0,
            top: 0,
            width: "100%",
            overflow: "hidden",
            zIndex: 1
        }));
        this.detectBestZoomMethod();
        a.wrapInner("<div class='wowbook-zoomwindow'><div class='wowbook-zoomcontent'></div></div>");
        this.zoomWindow = d(".wowbook-zoomwindow", a);
        this.zoomContent = d(".wowbook-zoomcontent", a);
        d.browser.ie8mode && this.zoomContent.wrapInner("<div class='IE8-zoom-helper'style='position:relative'></div>");
        this.zoomWindow.css({
            position: "absolute",
            top: 0
        });
        this.zoomContent.css({
            position: "absolute",
            left: 0,
            top: 0
        });
        this.setDimensions(this.opts.width, this.opts.height);
        c.scaleToFit && (this.scaleToFit(), this.responsive());
        this.fillToc();
        f = c.useTranslate3d;
        Modernizr.csstransforms3d && f && (d.wowBook.useTranslate3d = !0 == f || "mobile" == f && d.wowBook.utils.isMobile());
        if (c.deepLinking && this.getLocationHash()) {
            var m;
            try {
                m = b.selectorToPage("#" + this.getLocationHash())
            } catch(v) {}
            void 0 === m && (m = b.locationHashToPage());
            "number" === typeof m && (b.startPage = m, w(b.elem) || b.elem[0].scrollIntoView())
        }
        this.flipSound && (this.audio = this.createAudioPlayer());
        if (this.opts.keyboardNavigation) d(document).on("keydown.wowbook", function (a) {
            d(a.target).filter("input, textarea, select").length || (a.which === b.opts.keyboardNavigation.back && b.back(), a.which === b.opts.keyboardNavigation.advance && b.advance())
        });
        d(window).on("hashchange.wowbook", function () {
            var a = window.location.hash;
            if (a === b.locationHashSetTo) b.locationHashSetTo = void 0;
            else {
                var c = (a = "" === a && !b.locationEndsInHash()) ? b.startPage: b.locationHashToPage();
                "number" === typeof c && (b.gotoPage(c, !a), a || w(b.elem) || b.elem[0].scrollIntoView())
            }
        });
        c.forceBasicPage && (this.foldPage = this.holdHardpage = this.foldPageBasic);
        d.wowBook.support.transform || (this.foldPage = this.foldPageBasic, d.wowBook.support.filters || (this.holdHardpage = this.foldPageBasic));
        this.mouseWheel && a.mousewheel(function (a, c) {
            if (b.mouseWheel) return "zoom" === b.mouseWheel ? (0 < c && b.zoomIn(), 0 > c && b.zoomOut(), b.zoomedAt(a)) : (0 < c && b.advance(), 0 > c && b.back()),
                !1
        });
        this.opts.touchEnabled && this.touchSupport();
        this.controllify(this.opts.controls);
        this.opts.thumbnails && this.createThumbnails();
        this.setupFullscreen();
        this.showPage(this.startPage, !1);
        this.zoom(this.opts.zoomLevel);
        this.callRAFCallback = function () {
            b.rafCallback()
        };
        window.raf(this.callRAFCallback);
        c.slideShow && this.startSlideShow();
        this.showLastPage();
    }
    function u(a, c) {
        var b = Math.cos(c),
            e = Math.sin(c);
        return {
            x: b * a.x - e * a.y,
            y: e * a.x + b * a.y
        }
    }
    function w(a) {
        var c = d(window).height(),
            b = a.offset(),
            e = d(window).scrollTop();
        return b.top > e && b.top + a.height() < e + c
    }
    function p(a, c, b) {
        var e, f, k, h;
        e = f = 0;
        if (!d.wowBook.support.boxSizing) {
            var m;
            e = "none" == a.css("borderTopStyle") ? 0 : s[m = a.css("borderTopWidth")] || parseFloat(m);
            f = "none" == a.css("borderRightStyle") ? 0 : s[m = a.css("borderRightWidth")] || parseFloat(m);
            k = "none" == a.css("borderBottomStyle") ? 0 : s[m = a.css("borderBottomWidth")] || parseFloat(m);
            h = "none" == a.css("borderLeftStyle") ? 0 : s[m = a.css("borderLeftWidth")] || parseFloat(m);
            f = parseFloat(a.css("paddingLeft")) + parseFloat(a.css("paddingRight")) + h + f;
            e = parseFloat(a.css("paddingTop")) + parseFloat(a.css("paddingBottom")) + e + k
        }
        a.css("width", c - f);
        a.css("height", b - e)
    }
    d.wowBook = function (a) {
        return d(a).data("wowBook")
    };
    d.wowBook.support = {};
    d.fn.wowBook = function (a) {
        if ("string" === typeof a) {
            var c = Array.prototype.slice.call(arguments, 1);
            if ("options" === a || "prop" === a) {
                var b = d.wowBook(this[0]),
                    e = c[0];
                return 1 < c.length ? b[e] = c[1] : b[e]
            }
            return this.each(function () {
                var b = d.wowBook(this);
                b[a].apply(b, c)
            })
        }
        var f = d.extend({},
            d.wowBook.defaults, a);
        return this.each(function () {
            var a = new l(this, f);
            d(this).data("wowBook", a)
        })
    };
    l.prototype = {
        destroy: function () {
            this.callRAFCallback = d.noop;
            this.curlTimer = clearTimeout(this.curlTimer);
            d("*").add(document).add(window).off(".wowbook");
            this.destroyThumbnails();
            this.stopSlideShow();
            this.stopAnimation(!1);
            this.elem.empty().removeData().off()
        },
        setDimensions: function (a, c) {
            this.zoomed && this.zoom(1);
            this.currentScale = 1;
            var b = this.elem,
                e = this.pageWidth;
            b.css({
                height: c,
                width: a
            });
            var f = b.height();
            this.pageWidth = b.width() / 2;
            this.pageHeight = f;
            this._originalHeight || (this._originalHeight = this.pageHeight);
            this._originalWidth || (this._originalWidth = 2 * this.pageWidth);
            var k = this.origin.css({
                width: "100%",
                height: f
            });
            if (e && this.centeredWhenClosed) {
                var h = parseFloat(k.css("left"), 10);
                k.css("left", h / (e / this.pageWidth))
            }
            this.bookShadow.css({
                width: a,
                height: c
            });
            for (var h = 0, m = this.pages.length; h < m; h++) this.pages[h].css({
                width: this.pageWidth,
                height: this.pageHeight,
                left: this.pages[h].onLeft ? 0 : this.pageWidth
            }),
                e = d(".wowbook-page-content", this.pages[h]),
                p(e, this.pageWidth, this.pageHeight);
            this.opts.gutterShadow && d(".wowbook-gutter-shadow", b).css("height", this.pageHeight);
            this.positionBookShadow();
            this.shadowClipper.css({
                width: b.width(),
                height: f
            });
            this.hardPageShadow.css({
                width: this.pageWidth,
                height: this.pageHeight
            });
            this.opts.handleWidth && d(".wowbook-handle", k).css("width", this.opts.handleWidth);
            this.rightHandle.css("left", a - this.rightHandle.width());
            this.clipBoundaries && (k = Math.ceil(Math.sqrt(this.pageWidth * this.pageWidth + this.pageHeight * this.pageHeight)), k = [this.pageHeight - k, b.width(), k, 0], this.origin.css("top", -k[0]), d(".wowbook-inner-clipper", b).css({
                width: "100%",
                height: k[2] - k[0],
                top: k[0]
            }), this.clipper.css({
                width: "100%",
                height: f
            }));
            this.zoomWindow.css({
                width: 2 * this.pageWidth,
                height: f
            });
            this.zoomContent.css({
                width: 2 * this.pageWidth,
                height: f
            });
            this.corners = {
                tl: [0, 0],
                bl: [0, this.pageHeight],
                tr: [this.pageWidth, 0],
                br: [this.pageWidth, this.pageHeight],
                l: [0, 0],
                r: [this.pageWidth, 0]
            };
            this.thumbnails && this.updateThumbnails()
        },
        scale: function (a) {
            if (d.wowBook.support.transform) {
                this.zoomed && this.zoom(1);
                this.currentScale = a;
                var c = this.zoomContent;
                this.opts.zoomUsingTransform ? c.css({
                    transform: "scale(" + a + ")",
                    transformOrigin: "0 0"
                }) : c.css("zoom", a);
                this.elem.css({
                    height: this._originalHeight * a,
                    width: this._originalWidth * a
                });
                if (this.opts.onResize) this.opts.onResize(this)
            }
        },
        scaleToFit: function (a, c) {
            var b = a;
            if (!d.isNumeric(a)) {
                var e = d(a || this.opts.scaleToFit);
                if (!e.length) throw "jQuery selector passed to wowbook.resize did not matched in any DOM element.";
                b = e.width();
                c = e.height()
            }
            e = this._originalWidth / this._originalHeight;
            c * e <= b || (c = b / e);
            this.scale(c / this._originalHeight)
        },
        resize: function (a, c) {
            this.setDimensions(a, c);
            if (this.opts.onResize) this.opts.onResize(this)
        },
        responsive: function () {
            var a = this;
            d(window).on("resize.wowbook", function () {
                a.scaleToFit()
            })
        },
        insertPages: function (a, c) {
            for (var b = 0, e = a.length; b < e; b++) this.insertPage(a[b], !0);
            this.updateBook(c)
        },
        insertPage: function (a, c) {
            if (this.isDoublePage(a)) this.insertDoublePage(a, c);
            else {
                a = d(a).addClass("wowbook-page-content");
                var b = d("<div class='wowbook-page'></div>").css({
                    width: this.pageWidth,
                    height: this.pageHeight,
                    display: "none",
                    position: "absolute"
                }).appendTo(this.pagesContainer).append(a);
                d.wowBook.support.boxSizing && a.css(d.wowBook.support.boxSizing, "border-box");
                p(a, this.pageWidth, this.pageHeight);
                b.hardPageSetByUser = a.hasClass("wowbook-hardpage");
                this.opts.gutterShadow && d("<div class='wowbook-gutter-shadow'></div>").appendTo(a).css("height", this.pageHeight);
                this.pages.push(b);
                c || this.updateBook();
                return b
            }
        },
        insertDoublePage: function (a, c) {
            if (!this._insertingDoublePage) {
                this._insertingDoublePage = !0;
                var b = d(a),
                    e = b.clone().insertAfter(b),
                    f = b.add(e);
                b.css("left", 0);
                e.css("right", "100%");
                f.css({
                    width: "200%",
                    height: "100%",
                    position: "relative"
                });
                f.css(d.wowBook.support.boxSizing + "", "border-box").wrap("<div class='wowbook-double-page'></div>");
                this.insertPage(b.parent(), !0);
                this.insertPage(e.parent(), !0);
                d.wowBook.support.boxSizing || (p(b, 2 * this.pageWidth, this.pageHeight), p(e, 2 * this.pageWidth, this.pageHeight));
                c || this.updateBook();
                this._insertingDoublePage = !1
            }
        },
        isDoublePage: function (a) {
            a = d(a);
            return a.data("double") || a.is(this.opts.doublePages)
        },
        replaceNumberHolder: function (a, c) {
            if (void 0 == a) return a;
            c += "";
            return a.replace(/\{\{([^}]+)\}\}/g, function (a, e) {
                if (c.length < e.length) {
                    var f = e.replace(/./g, "0");
                    return (f + c).slice( - f.length)
                }
                return c
            })
        },
        loadPage: function (a) {
            "number" === typeof a && (a = this.pages[a]);
            if (a && !a.loaded && !a.loading && (a.src || a.image)) {
                a.loading = !0;
                var c = this;
                if (a.src) d.get(a.src, function (b) {
                    a.loaded = !0;
                    a.find(".wowbook-page-content").append(b);
                    a.removeClass("wowbook-loading");
                    c.updateThumbnail(a.pageIndex)
                });
                else if (a.image) {
                    var b = new Image;
                    b.onload = function () {
                        a.loaded = !0;
                        a.find(".wowbook-page-content").append(this);
                        d(this).addClass("wowbook-lazy");
                        a.removeClass("wowbook-loading");
                        c.updateThumbnail(a.pageIndex)
                    };
                    b.src = a.image
                }
            }
        },
        removePages: function (a, c) {
            arguments.length || (a = 0, c = -1);
            this.holdedPage && this.releasePage(this.holdedPage);
            var b = this.pages;
            c = (c || a) + 1 || b.length;
            var e = b.slice(a, c),
                f = b.slice(c);
            b.length = 0 > a ? b.length + a: a;
            b.push.apply(b, f);
            for (var f = 0, d = e.length; f < d; f++) e[f].remove();
            this.updateBook();
            return b.length
        },
        updateBook: function (a) {
            this.doPageNumbering();
            this.findPagesType();
            this.positionBookShadow();
            for (var c = this.rtl, b, e = 0, f = this.pages.length; e < f; e++) {
                b = this.pages[e].toggleClass("wowbook-left", c).toggleClass("wowbook-right", !c).data({
                    pageIndex: e,
                    holded: !1
                });
                b.pageIndex = e;
                var k = d(".wowbook-page-content", b);
                b.src = this.replaceNumberHolder(k.data("src") || this.opts.srcs, e);
                b.image = this.replaceNumberHolder(k.data("image") || this.opts.images, e); ! 0 != b.loaded && (b.loaded = !b.src && !b.image);
                b.loaded || b.addClass("wowbook-loading");
                b.onLeft = c;
                b.onRight = !c;
                c = !c
            }
            this.findSections();
            a || this.showPage(this.currentPage)
        },
        doPageNumbering: function () {
            var a = this.opts;
            if (a.pageNumbers) {
                var c = a.numberedPages,
                    a = this.pages.length - 1,
                    b = this.pageIsOnTheLeft(a);
                "all" == c && (c = [0, -1]);
                c || (c = [2, b ? -3 : -2]);
                var e = c[0],
                    c = c[1];
                0 > e && (e = a + e + 1);
                0 > e && (e = 0);
                e > this.pages.length - 1 && (e = a);
                0 > c && (c = a + c + 1);
                0 > c && (c = 0);
                c > this.pages.length - 1 && (c = a);
                for (var f = this.opts.firstPageNumber, b = 0; b < e; b++) d(".wowbook-page-number", this.pages[b]).remove();
                for (b = c + 1; b < a; b++) d(".wowbook-page-number", this.pages[b]).remove();
                for (b = e; b <= c; b++) a = d(".wowbook-page-number", this.pages[b]),
                a.length || (a = d(".wowbook-page-content", this.pages[b]), a = d('<div class="wowbook-page-number"></div>').appendTo(a)),
                    a.html(f++)
            }
        },
        findPagesType: function () {
            var a = this.opts,
                c = {},
                b, e, f;
            f = a.hardPages || [];
            var d = !0 === f;
            if (!d) for (a.hardcovers && (f.push(0, 1, -1), this.pageIsOnTheLeft(this.pages.length - 1) && f.push( - 2)), a = 0, e = f.length; a < e; a++) b = f[a],
            0 > b && (b = this.pages.length + b),
            0 <= b && b < this.pages.length && (c[b] = !0);
            for (a = this.pages.length; a--;) f = d || c[a] || this.pages[a].hardPageSetByUser,
                this.pages[a].toggleClass("wowbook-hardpage", f).isHardPage = f
        },
        showPage: function (a, c) {
            0 > a && (a = 0);
            a > this.pages.length - 1 && (a = this.pages.length - 1);
            var b = this.leftPageIndex(a),
                e = this.rightPageIndex(a),
                f = this.pageBelow(b),
                k = this.pageBelow(e),
                h = this.pageWidth,
                m = this.rtl,
                v = this.pages.length - 1,
                p,
                g;
            this.loadPage(b);
            this.loadPage(e);
            this.loadPage(f);
            this.loadPage(k);
            this.loadPage(this.backPage(b));
            this.loadPage(this.backPage(e));
            for (var t = 0; t <= v; t++) p = this.pages[t].onLeft != this.rtl ? t: v - t,
                g = this.transparentPages ? m ? t <= b ? "block": "none": t >= e ? "block": "none": t === f || t === b || t === e || t === k ? "block": "none",
                this.pages[t].data("zIndex", p).css({
                    display: g,
                    left: this.pages[t].onLeft ? 0 : h,
                    top: 0,
                    zIndex: p
                }),
                m = !m;
            f = 0 == a;
            v = a == v || a == this.otherPage(v);
            this.leftHandle.toggleClass("wowbook-disabled", !this.backPage(b));
            this.rightHandle.toggleClass("wowbook-disabled", !this.backPage(e));
            this.toggleControl("back", f);
            this.toggleControl("next", v);
            this.toggleControl("first", f);
            this.toggleControl("last", v);
            (b = this.onShowPage) && d.isFunction(b) && !this.isOnPage(a) && (b(this, this.pages[a], a), (e = this.otherPage(a)) && b(this, this.pages[e], e));
            this.currentPage = a;
            this.centeredWhenClosed && (b = !!this.leftPage(a), e = this.rightPage(a), this.origin.css("left", b && e ? 0 : b ? h / 2 : -h / 2));
            this.positionBookShadow(); ! 1 !== c && this.opts.updateBrowserURL && this.locationHashToPage() != a && (this.locationHashSetTo = window.location.hash = this.pageToLocationHash(a));
            this.showThumbnail();this.setActivePageNumber(a);
            
        },
        holdPage: function (a, c, b, e, f) {
            "number" === typeof a && (a = this.pages[a]);
            if (a) {
                var d = a.pageIndex,
                    h = this.pages.length - 1,
                    m = !this.otherPage(h);
                if (!e) e = this.pageIsOnTheLeft(d) ? "l": "r";
                else if (!this.corners[e] || (this.pageIsOnTheLeft(d) ? /r/: /l/).test(e)) return;
                void 0 === f && (f = this.backPage(d));
                if (f) {
                    var v = f.pageIndex;
                    a.data("holded_info", [c, b, e]);
                    if (this.centeredWhenClosed && (0 === d || 0 === v || m && (v === h || d === h))) {
                        var p = 0,
                            g, t = !this.rtl,
                            q = this.pageWidth,
                            r, n, l, u, s, w, z, A;
                        if (t ? 0 === d: d === h && m) r = -q / 2,
                            n = -q / 4,
                            l = 0,
                            u = -q / 2,
                            s = -q,
                            w = n,
                            z = s,
                            A = c;
                        if (t ? d === h && m: 0 === d) r = q,
                            n = 3 * q / 2,
                            l = q / 2,
                            u = 0,
                            s = q,
                            w = 2 * q,
                            z = c,
                            A = w;
                        if (t ? 0 === v: v === h && m) r = q / 2,
                            n = d === (t ? h: 0) ? q: 3 * q / 2,
                            l = d === (t ? h: 0) ? q / 2 : 0,
                            u = -q / 2,
                            s = r,
                            w = 2 * q,
                            z = c,
                            A = w;
                        if (t ? v === h && m: 0 === v) r = d === (t ? 0 : h) ? 0 : -q / 2,
                            n = q / 2,
                            l = q / 2,
                            u = d === (t ? 0 : h) ? -q / 2 : 0,
                            s = -q,
                            w = n,
                            z = s,
                            A = c;
                        c < r && (p = l, g = z);
                        c > n && (p = u, g = A);
                        c >= r && c <= n && (c = (c - r) / (n - r), p = l + c * (u - l), g = s + c * (w - s));
                        c = g;
                        this.origin.css("left", p);
                        this.positionBookShadow()
                    }
                    this.zoomed || "basic" == this.pageType(a) || "basic" == this.pageType(f) ? this.foldPageBasic(a, c, b, e, f) : a.isHardPage || f.isHardPage ? this.holdHardpage(a, c, b, e, f) : this.foldPage(a, c, b, e, f);
                    if (!a.data("holded") && (a.addClass("wowbook-page-holded"), f.addClass("wowbook-page-holded"), a.data("holded", !0), this.holdedPage = a, this.holdedPageBack = f, this.shadows && this.shadowClipper.css("display", "block"), this.clipBoundaries && this.clipper.css("overflow", "visible"), this.positionBookShadow(), this.opts.onHoldPage)) this.opts.onHoldPage(this, d, a, f)
                }
            }
        },
        foldPage: function (a, c, b, e, f) {
            this._currentFlip || (this._currentFlip = this.foldPageStart(a, c, b, e, f));
            this._currentFlip.page == a && (this._currentFlip.x = c, this._currentFlip.y = b, this._currentFlip.page.data("holdedAt", {
                x: c,
                y: b
            }), this._currentFlip.corner = e, this.foldPageStyles(this._currentFlip))
        },
        foldPageStart: function (a, c, b, e, f) {
            var d = {};
            "number" === typeof a && (a = this.pages[a]);
            d.book = this;
            d.page = a;
            d.pageIndex = a.data("pageIndex");
            void 0 === f && (f = this.backPage(d.pageIndex));
            if (f && f.length) {
                d.back = f;
                d.pageContent = a.children().first();
                d.backContent = f.children().first();
                var h = this.pageWidth,
                    m = this.pageHeight;
                e || (e = "tl");
                if ("l" == e || "r" == e) {
                    var v = {
                        x: "l" == e ? 0 : h,
                        y: b
                    };
                    a.data("grabPoint", v);
                    d.grabPoint = v;
                    e = (b >= v.y ? "t": "b") + e
                }
                d.page.data("holdedAt", {
                    x: c,
                    y: b
                });
                d.x = c;
                d.y = b;
                d.page.data("holdedCorner", e);
                d.corner = e;
                d.pageDiagonal = Math.sqrt(h * h + m * m);
                d.page.css("clip", "rect(-1000px 2000px 2000px 0px)");
                d.pageLeft = parseFloat(a.css("left"));
                f.css({
                    left: d.pageLeft + "px",
                    zIndex: 1E3,
                    clip: "rect(-1000px 2000px 2000px 0px)"
                });
                d.shadowHeight = 2 * Math.ceil(d.pageDiagonal);
                d.shadowTop = -(d.shadowHeight - m) / 2;
                this.internalShadow.css({
                    display: "block",
                    height: d.shadowHeight
                });
                d.foldShadowWidth = this.foldShadow.width();
                this.foldShadow.css({
                    display: "block",
                    height: d.shadowHeight
                });
                this.foldGradientContainer.appendTo(d.backContent);
                d.foldGradientWidth = this.foldGradientElem.width();
                d.foldGradientHeight = 2 * Math.ceil(d.pageDiagonal);
                this.foldGradientElem.css("height", d.foldGradientHeight);
                this.foldGradientContainer.css({
                    position: "absolute",
                    width: d.foldGradientWidth,
                    height: d.foldGradientHeight,
                    top: 0,
                    left: 0,
                    display: "none"
                });
                d.foldGradientVisible = !1;
                return d
            }
        },
        foldPageStyles: function (a) {
            var c = this.pageWidth,
                b = this.pageHeight,
                e = c / 2,
                f = b / 2,
                k = d.wowBook.utils.translate,
                h = a.pageLeft,
                m = a.x,
                v = a.y,
                p = a.back,
                g = a.corner || "tl";
            if ("l" == g || "r" == g) {
                var t = a.page.data("grabPoint");
                t || (t = {
                    x: "l" == g ? 0 : c,
                    y: v
                },
                    page.data("grabPoint", t));
                g = (v >= t.y ? "t": "b") + (this.pageIsOnTheLeft(a.pageIndex) ? "l": "r");
                a.corner = g;
                a.page.data("holdedCorner", g);
                var q = m - t.x,
                    r = v - t.y,
                    q = Math.atan2(r, q),
                    t = {
                        x: 0,
                        y: (v >= t.y ? 0 : b) - t.y
                    },
                    t = u(t, 2 * q),
                    m = t.x + m,
                    v = t.y + v
            }
            a.page.data("holdedAt", {
                x: m,
                y: v
            });
            a.page.data("holdedCorner", g);
            var t = this.corners[g],
                g = c - t[0],
                n = t[1],
                q = m - g,
                r = v - n,
                l = Math.sqrt(q * q + r * r);
            l > c && (m = g + c * q / l, v = n + c * r / l);
            var n = b - n,
                q = m - g,
                r = v - n,
                l = Math.sqrt(q * q + r * r),
                s = a.pageDiagonal;
            l > s && (m = g + s * q / l, v = n + s * r / l);
            g = t[0];
            t = t[1];
            t == v && (v = t + 0.001);
            q = m - g;
            r = v - t;
            l = Math.sqrt(q * q + r * r);
            m = l / 2;
            q = Math.atan2(r, q);
            r = Math.tan(q);
            v = q;
            q = 180 * q / Math.PI;
            n = {
                x: g - e,
                y: f - t
            };
            s = u(n, v);
            l = s.x + m + e + 0.5;
            a.pageContent.css("transform", k( - l, 0) + " rotate(" + ( - q).toFixed(7) + "deg)");
            a.page.css("transform", k((Math.cos(v) * l).toFixed(5), (Math.sin(v) * l).toFixed(5)) + " rotate(" + q.toFixed(7) + "deg)");
            s = this.calculateOpacity(m, c, this.shadowThreshold, 50);
            if (this.shadows && 0 < s) {
                var w = a.shadowTop;
                this.internalShadow.css({
                    transform: k(l + h, w) + " rotate(" + q + "deg)",
                    transformOrigin: e - l + "px " + (f + (a.shadowHeight - b) / 2) + "px"
                });
                l -= a.foldShadowWidth;
                this.foldShadow.css({
                    transform: k(l + h, w) + " rotate(" + q + "deg)",
                    transformOrigin: e - l + "px " + (f + (a.shadowHeight - b) / 2) + "px"
                });
                this.shadowContainer.css({
                    opacity: s,
                    display: "block"
                })
            } else this.shadowContainer.css("display", "none");
            p.show();
            n.x = -n.x;
            s = u(n, -v);
            l = s.x - m + e - 1;
            b = {
                x: s.x - m,
                y: s.y + m * r
            };
            h = {
                x: s.x - m,
                y: s.y - m / (0 == r ? 1E-4: r)
            };
            b = u(b, -v);
            h = u(h, -v);
            h = -(h.x + e);
            b = -(b.y - f);
            a.backContent.css("transform", k( - l, 0) + " rotate(" + q + "deg)");
            a.back.css("transform", k((g + h + Math.cos(v) * l).toFixed(5), (t - b + Math.sin(v) * l).toFixed(5)) + " rotate(" + q + "deg)");
            s = this.calculateOpacity(2 * m, 2 * c, this.foldGradientThreshold, 50);
            this.foldGradient && 0 < s ? (this.foldGradientContainer.css({
                opacity: s,
                display: "block",
                transform: k(c - g - a.foldGradientWidth / 2, t - a.foldGradientHeight / 2) + " rotate(" + -q + "deg)"
            }), this.foldGradientElem.css("transform", k( - m + a.foldGradientWidth / 2, 0)), a.foldGradientVisible || (this.foldGradientContainer.css("display", "block"), a.foldGradientVisible = !0)) : a.foldGradientVisible && (this.foldGradientContainer.css("display", "none"), a.foldGradientVisible = !1)
        },
        holdHardpage: function (a, c, b, e, d) {
            this._currentFlip || (this._currentFlip = this.flipHardPageStart(a, c, b, e, d));
            this._currentFlip.page == a && (this._currentFlip.x = c, this._currentFlip.y = b, this._currentFlip.page.data("holdedAt", {
                x: c,
                y: b
            }), this._currentFlip.corner = e, this.flipHardPageStyles(this._currentFlip))
        },
        flipHardPageStart: function (a, c, b, e, d) {
            this.clipBoundaries && this.clipper.children(".wowbook-inner-clipper").css("overflow", "visible");
            var k = {};
            "number" === typeof a && (a = this.pages[a]);
            k.book = this;
            k.page = a;
            k.pageIndex = a.data("pageIndex");
            void 0 === d && (d = this.backPage(k.pageIndex));
            if (d && d.length) {
                k.back = d;
                var h = this.pageWidth;
                e || (e = "tl");
                a.data("holdedAt", {
                    x: c,
                    y: b
                });
                a.data("holdedCorner", e);
                a.css("zIndex", 1E3);
                d.css("zIndex", 1E3);
                this.opts.use3d && Modernizr.csstransforms3d && (a.css(Modernizr.prefixed("perspectiveOrigin"), "0 50%"), d.css(Modernizr.prefixed("perspectiveOrigin"), "0 50%"));
                c = this.pageIsOnTheLeft(k.pageIndex) ? h: 0;
                a.css("transformOrigin", c + "px 50%");
                d.css("transformOrigin", h - c + "px 50%");
                this.shadows && this.hardPageShadow.css("display", "block");
                return k
            }
        },
        flipHardPageStyles: function (a) {
            var c = a.page,
                b = a.back;
            x = a.x;
            y = a.y;
            var e = this.pageIsOnTheRight(a.pageIndex),
                f = this.pageWidth,
                k = this.pageHeight;
            (a = a.corner) || (a = "tl");
            c.data("holdedAt", {
                x: x,
                y: y
            });
            c.data("holdedCorner", a);
            a = e ? f - x: x;
            var h = e ? 0 : f,
                m;
            0 > a && (a = 0);
            a = (m = a < f) ? c: b;
            (m ? b: c).css("display", "none");
            c = e != m;
            b = x - h;
            b > f && (b = f);
            b < -f && (b = -f);
            h = -Math.sqrt(1600 * (1 - b * b / ((f + 15) * (f + 15))));
            e = Math.abs(b / f);
            h = 1 == e ? 0 : Math.atan2(h, b);
            if (this.opts.use3d && Modernizr.csstransforms3d) {
                var g;
                g = c ? -this._calculateAngleFromX( - b, f) : this._calculateAngleFromX(b, f);
                this.animating && (m = this._animationData, this.curledPage || m.curled ? (m.curled = !0, m.angle || (h = {
                    from: g,
                    to: 0
                },
                    m.angle = h, g = b + m.dx, h.to = c ? -this._calculateAngleFromX( - g, f) : this._calculateAngleFromX(g, f), Math.abs(b) == f && (h.from = 0), Math.abs(g) == f && (h.to = 0), h.delta = h.to - h.from), g = m.angle.from - m.angle.delta * (m.from.x - x) / m.dx) : (Math.abs(x - m.from.x), Math.abs(m.dx / 2)));
                a.css({
                    transform: "perspective(" + this.opts.perspective + this.perspectiveUnit + ") rotate3d(0, 1, 0, " + g + "deg)",
                    display: "block"
                })
            } else a.css({
                transform: "skewY(" + h + "rad) scaleX(" + e + ")",
                display: "block"
            }); ! d.wowBook.support.transform && d.wowBook.support.filters && (e = "M11=" + e + ", M12=0, M21=" + Math.tan(h) * e + ", M22=1", a.css("filter", "progid:DXImageTransform.Microsoft.Matrix(" + e + ", sizingMethod='auto expand')"), a.css({
                marginTop: k - a.height(),
                marginLeft: c ? f - a.width() : 0
            }));
            this.shadows && this.hardPageShadow.css({
                left: c ? 0 : f,
                opacity: 0.5 * Math.abs(b / f)
            })
        },
        _calculateAngleFromX: function (a, c, b) {
            var e = 2 * c / 3;
            if (a > e) {
                var d = this._calculateAngleFromX(e, c, b);
                return d + (a - e) / (c - e) * (0 - d)
            }
            b = b || this.opts.perspective;
            e = 180 / Math.PI;
            d = c * c;
            b *= b;
            var k = a * a;
            a = Math.acos((c * b * a - Math.sqrt(d * d * b * k + d * d * k * k - d * b * k * k)) / (d * b + d * k));
            return a = -a * e
        },
        foldPageBasic: function (a, c, b, e, d) {
            this._currentFlip || (this._currentFlip = this.foldPageBasicStart(a, c, b, e, d));
            this._currentFlip && this._currentFlip.page == a && (this._currentFlip.x = c, this._currentFlip.y = b, this._currentFlip.page.data("holdedAt", {
                x: c,
                y: b
            }), this._currentFlip.corner = e, this.foldPageBasicStyles(this._currentFlip))
        },
        foldPageBasicStart: function (a, c, b, e, d) {
            var k = {};
            "number" === typeof a && (a = this.pages[a]);
            k.book = this;
            k.page = a;
            k.pageIndex = a.data("pageIndex");
            void 0 === d && (d = this.backPage(k.pageIndex));
            if (d && d.length) {
                k.back = d;
                var h = this.pageHeight;
                e || (e = "tl");
                a.data("holdedAt", {
                    x: c,
                    y: b
                });
                a.data("holdedCorner", e);
                d.css("zIndex", 1E3);
                a.data("foldPageBasic", !0);
                k.foldGradientWidth = this.foldGradientElem.width();
                k.foldShadowWidth = this.foldShadow.width();
                this.internalShadow.css("display", "none");
                this.foldShadow.css({
                    display: "none",
                    height: h,
                    transform: "",
                    top: 0
                }).toggleClass("wowbook-shadow-fold-flipped", a.onRight);
                this.shadowContainer.css("display", "block");
                c = d.children().first();
                this.foldGradientContainer.appendTo(c).css({
                    width: k.foldGradientWidth,
                    height: h,
                    top: 0,
                    transform: "",
                    zIndex: 1E9
                });
                this.foldGradientElem.css({
                    left: 0,
                    height: h
                }).toggleClass("wowbook-fold-gradient-flipped", a.onRight);
                return k
            }
        },
        foldPageBasicStyles: function (a) {
            var c = a.page,
                b = a.back;
            x = a.x;
            y = a.y;
            var d = this.pageWidth,
                f = a.corner;
            f || (f = "tl");
            c.data("holdedAt", {
                x: x,
                y: y
            });
            c.data("holdedCorner", f);
            var k = (f = this.pageIsOnTheLeft(a.pageIndex)) ? x: d - x;
            0 > k && (k = 0);
            k > 2 * d && (k = 2 * d);
            var h = k / 2,
                m, g;
            f ? (m = "rect(-1000px 1000px 1000px " + h + "px)", g = "rect(-1000px 1000px 1000px " + (d - h) + "px)", k -= d) : (m = "rect(-1000px " + (d - h) + "px 1000px -1000px)", g = "rect(-1000px " + h + "px 1000px -1000px)", k = d - k + d);
            c.css("clip", m);
            b.css({
                clip: g,
                left: k,
                display: "block"
            });
            c = this.calculateOpacity(2 * h, 2 * d, this.shadowThreshold, 50);
            this.shadows && 0 < c ? (b = f ? h - a.foldShadowWidth: d - h + d, this.shadowContainer.css("opacity", c), this.foldShadow.css({
                left: b,
                display: "block"
            })) : this.foldShadow.css("display", "none");
            c = this.calculateOpacity(2 * h, 2 * d, this.foldGradientThreshold, 50);
            this.foldGradient && 0 < c ? (b = f ? d - h: h - a.foldGradientWidth, this.foldGradientContainer.css({
                opacity: c,
                left: b,
                display: "block"
            })) : this.foldGradientContainer.css("display", "none")
        },
        stopAnimation: function (a) {
            arguments.length || (a = !0);
            d(this).stop(!0, a);
            this.animating = !1
        },
        flip: function (a, c, b, e) {
            e || (e = d.isPlainObject(a) ? a: {});
            e.from || (e.from = []);
            e.to || (e.to = []);
            var f = this;
            if (!f.animating) {
                f.animating = !0;
                b || (b = e.page || f.holdedPage);
                var k = b.data("holded_info");
                b.data("holdedAt");
                var h = e.corner || b.data("holdedCorner"),
                    m = d.easing[e.easing] || e.easing ||
                        function (a) {
                            return 1 == a ? 1 : -Math.pow(2, -10 * a) + 1
                        };
                a = {
                    page: b,
                    back: e.back || f.holdedPageBack || f.backPage(b.pageIndex),
                    initialX: void 0 != e.from[0] ? e.from[0] : k[0],
                    initialY: void 0 != e.from[1] ? e.from[1] : k[1],
                    finalX: void 0 != e.to[0] ? e.to[0] : a,
                    finalY: void 0 != e.to[1] ? e.to[1] : c,
                    corner: h || k[2],
                    duration: e.duration,
                    complete: function () {
                        f.animating = !1;
                        d.isFunction(e.complete) && e.complete()
                    },
                    easing: m,
                    arc: e.arc,
                    dragging: e.dragging,
                    start: d.now(),
                    finished: !1
                };
                a.deltaX = a.finalX - a.initialX;
                a.deltaY = a.finalY - a.initialY;
                this._animationData = {
                    from: {
                        x: a.initialX,
                        y: a.initialY
                    },
                    to: {
                        x: a.finalX,
                        y: a.finalY
                    },
                    dx: a.deltaX
                };
                void 0 == a.duration && (a.duration = this.turnPageDuration * Math.abs(a.deltaX) / (2 * this.pageWidth));
                a.duration < this.opts.turnPageDurationMin && (a.duration = this.opts.turnPageDurationMin); ! b.isHardPage && 0.4 < a.duration / this.turnPageDuration && this.playFlipSound();
                this.currentFlip = a
            }
        },
        rafCallback: function () {
            window.raf(this.callRAFCallback);
            if (this.currentFlip && !this.currentFlip.finished) {
                var a = this.currentFlip,
                    c = (d.now() - a.start) / a.duration;
                1 <= c && (c = 1);
                a.x = a.initialX + a.deltaX * a.easing(c, a.duration * c, 0, 1, a.duration);
                a.y = a.initialY + a.deltaY * a.easing(c, a.duration * c, 0, 1, a.duration);
                a.arc && (a.y -= (0.5 - Math.abs(0.5 - a.easing(c, a.duration * c, 0, 1))) * this.pageHeight / 10);
                a.dragging && (a.x = a.initialX + 0.2 * a.deltaX, a.y = a.initialY + 0.2 * a.deltaY, a.initialX = a.x, a.initialY = a.y, a.deltaX = a.finalX - a.initialX, a.deltaY = a.finalY - a.initialY, 1 > a.deltaX && 1 > a.deltaY && 1 == c);
                this.holdPage(a.page, a.x, a.y, a.corner, a.back);
                1 == c && (a.finished = !0, a.complete && a.complete())
            }
        },
        releasePages: function () {
            for (var a = 0, c = this.pages.length; a < c; a++) this.pages[a].data("holded") && this.releasePage(a)
        },
        releasePage: function (a, c, b, d) {
            "number" === typeof a && (a = this.pages[a]);
            var f = this,
                k = a.data("holdedAt"),
                h = a.data("holdedCorner");
            if (c && k) this.flip({
                from: [k.x, k.y],
                to: this.corners[h],
                page: a,
                easing: "linear",
                duration: 1E4,
                duration: d,
                complete: function () {
                    f.releasePage(a)
                }
            });
            else if (c = a.data("pageIndex"), void 0 === b && (b = this.holdedPageBack || this.backPage(c)), this.holdedPageBack = this.holdedPage = null, a.data({
                    holded_info: null,
                    holdedAt: null,
                    holdedCorner: null,
                    grabPoint: !1,
                    foldPageBasic: null,
                    holded: !1
                }), this.clipBoundaries && !this.zoomed && (this.clipper.css("overflow", "hidden"), this.clipper.children(".wowbook-inner-clipper").css("overflow", "hidden")), this.shadowClipper.css("display", "none"), this.internalShadow.parent().hide(), this.foldGradientContainer.hide(), this.hardPageShadow.hide(), this.resetPage(a), b && b.length && (this.resetPage(b), b.hide()), this.foldShadow.removeClass("wowbook-shadow-fold-flipped").css({
                    transform: "",
                    left: ""
                }), this.foldGradientElem.removeClass("wowbook-fold-gradient-flipped").css("transform", ""), this.foldGradientContainer.css("transform", "").appendTo(this.pagesContainer), this.positionBookShadow(), this.opts.onReleasePage) this.opts.onReleasePage(this, c, a, b)
        },
        resetPage: function (a) {
            this._currentFlip = void 0;
            a.removeClass("wowbook-page-holded");
            this.resetCSS || (this.resetCSS = {
                transform: "",
                transformOrigin: "",
                clip: "auto",
                marginLeft: 0,
                marginTop: 0,
                filter: ""
            });
            var c = this.pageWidth,
                b = this.pageHeight;
            a.css(this.resetCSS).css({
                zIndex: a.data("zIndex"),
                width: c,
                height: b,
                left: this.pageIsOnTheLeft(a.data("pageIndex")) ? 0 : c
            });
            d.browser.msie && 9 > d.browser.version && a.attr("style", a.attr("style").replace(/clip\: [^;]+;/i, ""));
            a = d(".wowbook-page-content", a);
            a.css(this.resetCSS);
            p(a, c, b)
        },
        gotoPage: function (a, c) {
            var b, d;
            if (!this.animating && (this._cantStopAnimation = !0, "string" === typeof a && "#" == a.charAt(0) && (a = this.selectorToPage(a)), 0 > a && (a = 0), a > this.pages.length - 1 && (a = this.pages.length - 1), !this.isOnPage(a))) {
                var f = a < this.currentPage;
                b = this.rtl ? a > this.currentPage: f;
                var k = this,
                    h = b ? k.leftPage() : k.rightPage();
                if (h) {
                    this.uncurl(!0);
                    var m, g;
                    b ? (m = this.leftPage(a), g = this.rightPage(a)) : (m = this.rightPage(a), g = this.leftPage(a));
                    var p = g && g.is(":visible");
                    if (f) for (f = h.pageIndex - 1; 0 <= f; f--) this.pages[f].css("display", "none");
                    else for (f = h.pageIndex + 1, d = this.pages.length; f < d; f++) this.pages[f].css("display", "none");
                    m && m.css("display", "block");
                    p && g.css("display", "block");
                    var l = a;
                    m = h.data("holdedAt");
                    p = h.data("holdedAt");
                    f = h.data("holdedCorner") || (b ? "tl": "tr");
                    b ? (p = p || {
                        x: 0,
                        y: 0
                    },
                        b = 2 * k.pageWidth, d = "bl" != f ? 0 : this.pageHeight) : (p = p || {
                        x: this.pageWidth,
                        y: 0
                    },
                        b = -k.pageWidth, d = "br" != f ? 0 : this.pageHeight);
                    var n = "linear";
                    if (this.centeredWhenClosed && (h.isHardPage || g.isHardPage)) {
                        var q = this.pages.length - 1,
                            r = !this.rtl,
                            n = "easeOutCubic";
                        this.currentPage == (r ? 0 : q) && (b += this.pageWidth / 2, r ? a == q && this.pageIsOnTheLeft(a) : 0 == a) && (b += this.pageWidth / 2);
                        this.currentPage == (r ? q: 0) && (b -= this.pageWidth / 2, a == (r ? 0 : q) && (b -= this.pageWidth / 2))
                    }
                    k.flip({
                        from: [p.x, p.y],
                        to: [b, d],
                        easing: n,
                        arc: !m,
                        page: h,
                        back: g,
                        corner: f,
                        complete: function () {
                            k._cantStopAnimation = !1;
                            k.releasePage(h, !1);
                            k.showPage(l, c)
                        }
                    });
                    return a
                }
            }
        },
        back: function () {
            return this.gotoPage(this.currentPage - 2)
        },
        advance: function () {
            return this.gotoPage(this.currentPage + 2)
        },
        leftPage: function (a) {
            void 0 === a && (a = this.currentPage);
            return this.pages[this.leftPageIndex(a)] || null
        },
        leftPageIndex: function (a) {
            this.pageIsOnTheLeft(a) || (a += this.rtl ? 1 : -1);
            if (0 > a || a > this.pages.length - 1) a = null;
            return a
        },
        rightPage: function (a) {
            void 0 === a && (a = this.currentPage);
            return this.pages[this.rightPageIndex(a)] || null
        },
        rightPageIndex: function (a) {
            this.pageIsOnTheRight(a) || (a += this.rtl ? -1 : 1);
            if (0 > a || a > this.pages.length - 1) a = null;
            return a
        },
        setActivePageNumber : function(a) {
                
                var pageLeftIndex = this.leftPageIndex(a)+1,pageRightIndex = this.rightPageIndex(a)+1,retrunval=null;
                if(pageLeftIndex==1 && pageRightIndex==1 ){
                    retrunval=1;
                }else if(pageRightIndex<pageLeftIndex){
                    retrunval=pageLeftIndex;
                }
                else if(pageLeftIndex!=pageRightIndex){
                    retrunval=pageLeftIndex+'-'+pageRightIndex;
                }
                d('#pageInp').val(retrunval);
                
            },
        pageIsOnTheRight: function (a) {
            return this.rtl ? !!(a % 2) : !(a % 2)
        },
        pageIsOnTheLeft: function (a) {
            return this.rtl ? !(a % 2) : !!(a % 2)
        },
        otherPage: function (a) {
            a = this.pageIsOnTheLeft(a) ? a + (this.rtl ? -1 : 1) : a + (this.rtl ? 1 : -1);
            if (0 > a || a > this.pages.length - 1) a = null;
            return a
        },
        isOnPage: function (a) {
            return "number" === typeof a && (a === this.currentPage || a === this.otherPage(this.currentPage))
        },
        backPage: function (a) {
            return this.pages[a] ? this.pages[a + (a % 2 ? -1 : 1)] : null
        },
        pageBelow: function (a) {
            a = parseInt(a, 10);
            if (a != a) return null;
            a += this.pageIsOnTheLeft(a) != this.rtl ? -2 : 2;
            if (0 > a || a > this.pages.length - 1) a = null;
            return a
        },
        pageType: function (a) {
            a = "number" === typeof a ? this.pages[a] : a;
            return a.isHardPage ? "hard": a.find(".wowbook-page-content.wowbook-basic-page").length ? "basic": "soft"
        },
        calculateOpacity: function (a, c, b, d) {
            if (a <= b || a >= c - b) return 0;
            if (a >= d && a <= c - d) return 1;
            a > d && (a = c - a);
            return (a - b) / (d - b)
        },
        startSlideShow: function () {
            this.slideShowRunning = !0;
            this.advanceAfterTimeout(this.slideShowDelay);
            d(this.opts.controls.slideShow).addClass("wowbook-disabled")
        },
        advanceAfterTimeout: function (a) {
            var c = this;
            this.slideShowTimer = setTimeout(function () {
                    c.animating || c.holdedPage ? c.advanceAfterTimeout(100) : (c.advance(), c.isOnPage(c.pages.length - 1) ? c.stopSlideShow() : c.advanceAfterTimeout(c.slideShowDelay + c.turnPageDuration))
                },
                a)
        },
        stopSlideShow: function () {
            clearTimeout(this.slideShowTimer);
            this.slideShowTimer = void 0;
            this.slideShowRunning = !1;
            d(this.opts.controls.slideShow).removeClass("wowbook-disabled")
        },
        toggleSlideShow: function () {
            this.slideShowRunning ? this.stopSlideShow() : this.startSlideShow()
        },
        findSections: function (a) {
            a && (this.sectionDefinition = a);
            var c = this.sectionDefinition;
            a = [];
            var b;
            "string" === typeof c && (b = c, c = [], d(b, this.elem).each(function (a, b) {
                c.push(["#" + b.id, d(b).html()])
            }));
            if (d.isArray(c)) {
                for (var e = 0, f = c.length; e < f; e++) {
                    b = c[e];
                    if ("string" === typeof b) try {
                        b = [b, d(b, this.elem).html()]
                    } catch(k) {
                        continue
                    }
                    try {
                        b[2] = this.selectorToPage(b[0])
                    } catch(h) {
                        continue
                    }
                    void 0 !== b[2] && a.push({
                        id: b[0],
                        title: b[1],
                        page: b[2]
                    })
                }
                a = a.sort(function (a, b) {
                    return a.page - b.page
                })
            }
            return this.sections = a
        },
        pageToSection: function (a) {
            for (var c = this.sections, b, d = 0, f = c.length; d < f && !(c[d].page > a); d++) b = c[d];
            return b
        },
        currentSection: function () {
            return this.pageToSection(this.currentPage)
        },
        fillToc: function (a, c) {
            var b = d(a || this.opts.toc),
                e,
                f,
                k = "";
            if (0 !== b.length) {
                e = this.sections;
                "undefined" === typeof c && (c = this.opts.tocTemplate);
                c || (k = b.is("UL, OL") ? "<li>": "<div>", c = '<a href="${link}">${section}</a>');
                for (var h = 0, g = e.length; h < g; h++) f = e[h],
                    f = c.replace(/\$\{link\}/g, "#" + this.id + "/" + f.id.substr(1)).replace(/\$\{section\}/g, f.title).replace(/\$\{page\}/g, f.page),
                    d(f).appendTo(b).wrap(k)
            }
        },
        locationHashToPage: function (a, c) {
            void 0 === a && (a = window.location.hash);
            if (a == "#" + this.id + "/") return 0;
            a = a.slice(1).split("/");
            if (a[0] === this.id) {
                if (1 === a.length) return 0;
                var b = parseInt(a[1]);
                if (!isNaN(b)) return Math.max(b - 1, 0);
                b = this.selectorToPage("#" + a[1]);
                if (void 0 === b) return 0;
                isNaN(a[2]) || (b += Math.max(parseInt(a[2]) - 1, 0));
                return + b
            }
        },
        pageToLocationHash: function (a) {
            var c = "",
                b = a + 1;
            if (a = this.pageToSection(a)) c += "/" + a.id.replace("#", ""),
                b -= a.page;
            1 < b && (c += "/" + b);
            return "#" + this.id + (c || "/")
        },
        selectorToPage: function (a) {
            a = d(a, this.elem).closest(".wowbook-page");
            if (a.length) return + a.data("pageIndex")
        },
        getLocationHash: function () {
            return window.location.hash.slice(1)
        },
        locationEndsInHash: function (a) {
            void 0 === a && (a = window.location.href);
            return a.lastIndexOf("#") == a.length - 1
        },
        zoom: function (a) {
            for (var c = 0, b = this.pages.length; c < b; c++) if (this.pages[c].data("holdedAt")) return;
            a < this.zoomMin && (a = this.zoomMin);
            a > this.zoomMax && (a = this.zoomMax);
            if (a !== this.zoomLevel) {
                this.zoomLevel = a;
                var e = this,
                    c = this.zoomWindow,
                    b = this.zoomContent,
                    f = d(this.zoomBoundingBox),
                    k = 2 * e.pageWidth * a * this.currentScale,
                    h = e.pageHeight * a * this.currentScale,
                    g = f.width(),
                    p = f.height(),
                    l = Math.min(k, g),
                    n = Math.min(h, p),
                    s = (2 * this.pageWidth * this.currentScale - l) / 2,
                    q = (this.pageHeight * this.currentScale - n) / 2;
                c.css({
                    width: l,
                    height: n,
                    left: s,
                    top: q
                });
                this.zoomContentOverflowed = k > g || h > p;
                var r = c.offset(),
                    f = f[0] !== window ? f.offset() : {
                        left: f.scrollLeft(),
                        top: f.scrollTop()
                    };
                r.right = r.left + l;
                r.bottom = r.top + n;
                f.right = f.left + g;
                f.bottom = f.top + p;
                r.left < f.left && c.css("left", s + (f.left - r.left));
                r.right > f.right && c.css("left", s + (f.right - r.right));
                r.top < f.top && c.css("top", q + (f.top - r.top));
                r.bottom > f.bottom && c.css("top", q + (f.bottom - r.bottom));
                r = c.offset();
                g = b.offset();
                r.right = r.left + l;
                r.bottom = r.top + n;
                g.right = g.left + k;
                g.bottom = g.top + h;
                g.left > r.left && b.css("marginLeft", 0);
                g.right < r.right && b.css("marginLeft", (parseFloat(b.css("marginLeft")) || 0) + (r.right - g.right));
                g.top > r.top && b.css("marginTop", 0);
                g.bottom < r.bottom && b.css("marginTop", (parseFloat(b.css("marginTop")) || 0) + (r.bottom - g.bottom));
                l === k && b.css("marginLeft", 0);
                n === h && b.css("marginTop", 0);
                this.opts.zoomUsingTransform ? b.css({
                    transform: "scale(" + a * this.currentScale + ")",
                    transformOrigin: "0 0"
                }) : b.css("zoom", a * this.currentScale);
                1 === this.zoomLevel ? (c.unbind("mousemove.wowbook").css({
                    overflow: "visible",
                    left: 0,
                    top: 0
                }), this.clipBoundaries && this.clipper.css("overflow", "hidden"), b.css({
                    marginLeft: 0,
                    marginTop: 0
                })) : (this.clipBoundaries && this.clipper.css("overflow", "visible"), c.css("overflow", "hidden"), this.zoomed || c.bind("mousemove.wowbook", function (a) {
                    e.zoomedAt(a)
                }));
                this.zoomed = 1 !== a;
                this.positionBookShadow();
                if (this.onZoom) this.onZoom(this);
                this.toggleControl("zoomIn", this.zoomLevel == this.zoomMax);
                this.toggleControl("zoomOut", this.zoomLevel == this.zoomMin)
            }
        },
        zoomIn: function (a) {
            this.zoom(this.zoomLevel + (a || this.zoomStep))
        },
        zoomOut: function (a) {
            this.zoom(this.zoomLevel - (a || this.zoomStep))
        },
        zoomedAt: function (a) {
            if (this.zoomContentOverflowed) {
                var c = this.zoomLevel,
                    b = this.zoomWindow.offset(),
                    d = a.pageX - b.left;
                a = a.pageY - b.top;
                var f = this.zoomWindow.width(),
                    b = 2 * this.pageWidth * c * this.currentScale - f,
                    d = d / f,
                    f = this.zoomWindow.height(),
                    g = this.pageHeight * c * this.currentScale - f;
                adjust = this.opts.zoomUsingTransform ? 1 : c;
                this.zoomContent.css({
                    marginLeft: -b * d / adjust,
                    marginTop: a / f * -g / adjust
                })
            }
        },
        detectBestZoomMethod: function (a, c, b) {
            void 0 === a && (a = d.wowBook.support.transform);
            void 0 === b && (b = d.browser.ie8mode);
            a = d.browser.chrome || d.browser.webkit || d.browser.safari || d.browser.opera || b || !a;
            this.opts.zoomUsingTransform = !a;
            return a ? "zoom": "transform"
        },
        setupFullscreen: function () {
            if (A) {
                var a = this,
                    c, b = "fullscreenerror mozfullscreenerror webkitfullscreenerror MSFullscreenError ";
                c = "fullscreenchange mozfullscreenchange webkitfullscreenchange MSFullscreenChange ".replace(/ /g, ".wowbook ");
                b = b.replace(/ /g, ".wowbook ");
                this._fullscreenChangeHandler = function () {
                    var b = n.fullscreenElement || n.mozFullScreenElement || n.webkitFullscreenElement || n.msFullscreenElement;
                    d(a.opts.fullscreenElement).toggleClass("fullscreen", b);
                    a.elem.toggleClass("fullscreen", b);
                    a.toggleControl("fullscreen", b)
                };
                d(document).on(c, this._fullscreenChangeHandler);
                this._fullscreenErrorHandler = function () {
                    a.opts.onFullscreenError && a.opts.onFullscreenError.apply(this, arguments)
                };
                d(document).on(b, this._fullscreenErrorHandler)
            } else d(this.opts.controls.fullscreen).hide()
        },
        enterFullscreen: function (a) {
            a = d(a || this.opts.fullscreenElement)[0];
            A.call(a || z)
        },
        exitFullscreen: function () {
            B.call(n)
        },
        toggleFullscreen: function () {
            n.fullscreenElement || n.mozFullScreenElement || n.webkitFullscreenElement || n.msFullscreenElement ? this.exitFullscreen() : this.enterFullscreen()
        },
        positionBookShadow: function () {
            var a = this.pages.length,
                c = !(!this.opts.bookShadow || this.zoomed || !a || 3 > a && this.holdedPage);
            this.bookShadow.toggle(c);
            if (c) {
                var c = this.pageWidth,
                    b = this.holdedPageBack,
                    d = !!b && b.onRight && b.pageIndex == (this.rtl ? a - 1 : 0);
                liftingLastPageOnRight = !!b && b.onLeft && b.pageIndex == (this.rtl ? 0 : a - 1);
                noPageOnLeft = !this.leftPage() || d;
                noPageOnRight = !this.rightPage() || liftingLastPageOnRight;
                onePageVisible = noPageOnLeft != noPageOnRight;
                noPageOnLeft && noPageOnRight ? this.bookShadow.hide() : (a = this.opts.zoomUsingTransform ? this.currentScale: 1, this.bookShadow.css({
                    left: (noPageOnLeft ? c: 0) + this.pagesContainer.position().left / a,
                    width: onePageVisible ? c: 2 * c
                }))
            }
        },
        playFlipSound: function () {
            if (this.flipSound) {
                var a = this.opts.onPlayFlipSound;
                d.isFunction(a) && !1 === a(this) || (this.audio || (this.audio = this.createAudioPlayer()), this.audio && this.audio.play && this.audio.play())
            }
        },
        toggleFlipSound: function (a) {
            arguments.length || (a = !this.flipSound);
            this.flipSound = a;
            this.toggleControl("flipSound", !a)
        },
        createAudioPlayer: function (a, c) {
            a || (a = this.opts.flipSoundPath);
            c || (c = this.opts.flipSoundFile);
            for (var b = [], e = 0, f = c.length; e < f; e++) b.push('<source src="' + a + c[e] + '">');
            return d("<audio preload>" + b.join("") + "</audio>")[0]
        },
        _untouch: function (a) {
            return a.originalEvent.touches && a.originalEvent.touches[0] || a
        },
        touchSupport: function () {
            var a = this;
            a.elem.bind("touchstart.wowbook", function (c) {
                var b = c.originalEvent.touches;
                1 < b.length || (a._touchStarted = {
                    x: b[0].pageX,
                    y: b[0].pageY,
                    timestamp: c.originalEvent.timeStamp,
                    inHandle: d(c.target).hasClass("wowbook-handle")
                },
                a._touchStarted.inHandle && a.pageEdgeDragStart(a._untouch(c)))
            });
            d(document).on("touchmove.wowbook", function (c) {
                if (a._touchStarted) {
                    var b = c.originalEvent.touches;
                    a._touchEnded = {
                        x: b[0].pageX,
                        y: b[0].pageY,
                        timestamp: c.originalEvent.timeStamp
                    };
                    if (a._touchStarted.inHandle) return a.pageEdgeDrag(a._untouch(c));
                    20 < Math.abs(a._touchEnded.x - a._touchStarted.x) && c.preventDefault();
                    c.preventDefault()
                }
            });
            d(document).on("touchend.wowbook touchcancel.wowbook", function (c) {
                if (a._touchStarted) { ! a._touchEnded && d(c.target).hasClass("wowbook-handle") && (c = d(c.target).data("corner"), "r" === c && a.advance(), "l" === c && a.back());
                    var b = a._touchStarted,
                        e = a._touchEnded || a._touchStarted;
                    a._touchStarted = null;
                    a._touchEnded = null;
                    if (b.inHandle) return a.pageEdgeDragStop({
                        pageX: e.x
                    }),
                        !1;
                    c = e.x - b.x;
                    var f = e.y - b.y,
                        b = e.timestamp - b.timestamp;
                    if (! (20 > Math.abs(c) || 200 < b) && Math.abs(c) > Math.abs(f)) return 0 > c ? a.advance() : a.back(),
                        !1
                }
            })
        },
        pageEdgeDragStart: function (a) {
            if (this.animating && !this.curledPage || this.zoomed || !d(a.target).hasClass("wowbook-handle")) return ! 1;
            var c = this,
                b = c.elem.offset();
            c.elem.addClass("wowbook-unselectable");
            c.mouseDownAtLeft = (a.pageX - b.left) / this.currentScale < c.pageWidth;
            c.pageGrabbed = c.mouseDownAtLeft ? c.leftPage() : c.rightPage();
            if (!c.pageGrabbed) return ! 1;
            this.uncurl(!0);
            c.pageGrabbedOffset = c.pageGrabbed.offset();
            this.opts.zoomUsingTransform && (c.pageGrabbedOffset.left /= this.currentScale, c.pageGrabbedOffset.top /= this.currentScale);
            b = a.pageX / this.currentScale - this.pageGrabbedOffset.left;
            a = a.pageY / this.currentScale - this.pageGrabbedOffset.top;
            this.stopAnimation(!1);
            var e = c.mouseDownAtLeft ? "l": "r";
            this.holdPage(this.pageGrabbed, b, a);
            this.flip(b, a, this.pageGrabbed, {
                corner: e
            });
            d(document).bind("mousemove.wowbook", function (a) {
                return c.pageEdgeDrag(a)
            }).bind("mouseup.wowbook", function (a) {
                return c.pageEdgeDragStop(a)
            });
            return ! 1
        },
        pageEdgeDrag: function (a) {
            var c = a.pageX / this.currentScale - this.pageGrabbedOffset.left;
            a = a.pageY / this.currentScale - this.pageGrabbedOffset.top;
            var b = this.mouseDownAtLeft ? "l": "r";
            this.stopAnimation(!1);
            this.flip(c, a, this.pageGrabbed, {
                corner: b,
                dragging: !0
            });
            return ! 1
        },
        pageEdgeDragStop: function (a) {
            var c = this.elem.offset();
            a = (a.pageX - c.left) / this.currentScale < this.pageWidth;
            this.elem.removeClass("wowbook-unselectable");
            this._cantStopAnimation || this.stopAnimation(!1);
            this.mouseDownAtLeft && !a ? this.rtl ? this.advance() : this.back() : !this.mouseDownAtLeft && a ? this.rtl ? this.back() : this.advance() : this.releasePage(this.pageGrabbed, !0);
            d(document).unbind("mousemove.wowbook mouseup.wowbook")
        },
        curl: function (a, c) {
            if (!this.curledPage && !this.holdedPage) {
                void 0 == a && (a = this.currentPage);
                if ("number" == typeof a || "string" == typeof a) a = this.pages[ + a];
                if (a && !a.isCurled) {
                    a.isCurled = !0;
                    this.curledPage = a;
                    var b = this.pageIsOnTheLeft(a.pageIndex),
                        d = b ? 0 : this.pageWidth,
                        f = c ? this.pageHeight - 1 : 2;
                    this.flip({
                        from: [d, f],
                        to: [d + this.opts.curlSize * (b ? 1 : -1), f + this.opts.curlSize * (c ? -1 : 1)],
                        corner: (c ? "b": "t") + (b ? "l": "r"),
                        page: a,
                        duration: 400
                    })
                }
            }
        },
        uncurl: function (a, c) {
            if (this.curledPage) { ! 0 == a && (c = !0, a = void 0);
                void 0 == a && (a = this.curledPage || this.currentPage);
                if ("number" == typeof a || "string" == typeof a) a = this.pages[ + a];
                a.isCurled && (this.stopAnimation(!1), this.releasePage(a, !c, void 0, 400), a.isCurled = !1, this.curledPage = null)
            }
        },
        initThumbnails: function () {
            var a = this.opts;
            this.thumbnails = [];
            var c = this.thumbnailsContainer = d("<div class='wowbook-thumbnails'>").append("<div class='wowbook-wrapper'><div class='wowbook-back wowbook-button' /><div class='wowbook-clipper'><ul></ul></div><div class='wowbook-next wowbook-button' /></div>").css("display", "none").css("transform", "translateZ(0)").appendTo(d(a.thumbnailsParent));
            this.thumbnailsList = c.find("ul");
            this.thumbnailsClipper = c.find(".wowbook-clipper");
            a.thumbnailsContainerWidth && c.width(a.thumbnailsContainerWidth);
            a.thumbnailsContainerHeight && c.height(a.thumbnailsContainerHeight);
            var b = a.thumbnailsPosition;
            if ("left" == b || "right" == b) a.thumbnailsVertical = !0,
            "right" == b && c.css({
                position: "absolute",
                left: "auto",
                right: "0px"
            });
            if ("top" == b || "bottom" == b) a.thumbnailsVertical = !1,
            "bottom" == b && c.css({
                position: "absolute",
                top: "auto",
                bottom: "0px"
            });
            c.addClass(a.thumbnailsVertical ? "wowbook-vertical": "wowbook-horizontal");
            var e = this,
                f = a.thumbnailsVertical ? "height": "width";
            this.thumbnailsBackButton = c.find(".wowbook-back.wowbook-button").click(function () {
                e._moveThumbnailsList(e.thumbnailsClipper[f]())
            });
            this.thumbnailsNextButton = c.find(".wowbook-next.wowbook-button").click(function () {
                e._moveThumbnailsList( - e.thumbnailsClipper[f]())
            });
            this.thumbnailsClipper.css("transform", "translateZ(0)")
        },
        destroyThumbnails: function () {
            this.thumbnailsContainer && this.thumbnailsContainer.remove();
            this.thumbnails = this.thumbnailsContainer = null
        },
        createThumbnails: function () {
            this.thumbnails || this.initThumbnails();
            var a, c = this.thumbnailConfig();
            this.thumbnails = [];
            for (var b = 0, d = this.pages.length; b < d; b++) a = this.createThumbnail(b, c),
                this.thumbnailsList.append(a),
                this.thumbnails.push(a);
            if (this.rtl) for (a = this.thumbnailsList.children(), a.eq(0).addClass("wowbook-right").removeClass("wowbook-left"), b = 1, d = a.length; b < d; b += 2) a.eq(b).insertAfter(a.eq(b + 1));
            b = this.thumbnailsContainer;
            b.width() || b.width(2 * c.width)
        },
        thumbnailConfig: function () {
            var a = {},
                c = d('<div class="wowbook-thumbnail" style="display:none;position:absolute;line-height:0px;font-size:0px;">').prependTo(this.thumbnailsContainer),
                b = this.opts.thumbnailHeight || (2 >= c.height() ? 0 : c.height()),
                e = this.opts.thumbnailWidth || c.width(),
                f = e / this.pageWidth || b / this.pageHeight || this.opts.thumbnailScale;
            c.remove();
            a.width = e || this.pageWidth * f;
            a.height = b || this.pageHeight * f;
            a.cloneCSS = {
                display: "block",
                left: 0,
                top: 0,
                position: "relative",
                transformOrigin: "0 0"
            };
            d.wowBook.support.transform ? a.cloneCSS.transform = "scale(" + f + ")": a.cloneCSS.zoom = f;
            return a
        },
        createThumbnail: function (a, c) {
            var b = this.pages[a];
            if (b) {
                c || (c = this.thumbnailConfig());
                var e = d('<li class="wowbook-thumbnail"><div class="wowbook-overlay">').addClass(this.pageIsOnTheLeft(a) ? "wowbook-left": "wowbook-right").css({
                    width: c.width,
                    height: c.height
                });
                this.opts.thumbnailsSprite ? e.css("background", "url(" + this.opts.thumbnailsSprite + ") no-repeat 0px -" + a * c.height + "px") : (b = b.clone(), b.hasClass("wowbook-page-holded") && (this.resetPage(b), b.find(".wowbook-fold-gradient-container").remove()), b.css(c.cloneCSS), e.prepend(b));
                var f = this;
                e.click(function () {
                    f.gotoPage(a)
                });
                return e
            }
        },
        updateThumbnail: function (a, c) {
            if (this.thumbnails) {
                var b = this.thumbnails[a];
                if (b) {
                    var d = this.createThumbnail(a, c);
                    d && (this.opts.thumbnailsSprite || b.children(":not(.wowbook-overlay)").replaceWith(d.children(":not(.wowbook-overlay)")), b.width(d.width()), b.height(d.height()))
                }
            }
        },
        updateThumbnails: function () {
            if (this.thumbnails) {
                for (var a = this.thumbnailConfig(), c = 0, b = this.pages.length; c < b; c++) this.updateThumbnail(c, a);
                c = this.thumbnailsContainer;
                c.width() || c.width(2 * a.width)
            } else this.createThumbnails()
        },
        _moveThumbnailsList: function (a, c) {
            var b = this.thumbnailsList.position()[this.opts.thumbnailsVertical ? "top": "left"];
            this._setThumbnailsListPosition(b + a, c)
        },
        _setThumbnailsListPosition: function (a, c) {
            var b = this.opts.thumbnailsVertical,
                d = b ? "height": "width",
                f = {},
                g = this.thumbnailsClipper[d](),
                d = -this.thumbnailsList[d]() + g;
            a < d && (a = d);
            0 < a && (a = 0);
            this.thumbnailsBackButton.toggleClass("wowbook-disabled", 0 == a || 0 < d);
            this.thumbnailsNextButton.toggleClass("wowbook-disabled", a == d || 0 < d);
            f[b ? "top": "left"] = a;
            this.thumbnailsList.animate(f, void 0 != c ? c: this.opts.thumbnailsAnimOptions)
        },
        showLastPage:function(){
            d('#wowTotalPage').html(this.pages.length );
        },
        showThumbnail: function (a, c) {
            if (this.thumbnails && this.thumbnailsContainer.is(":visible")) {
                void 0 == a && (a = this.currentPage);
                0 < a && this.pageIsOnTheRight(a) && a--;
                var b = this.opts.thumbnailsVertical,
                    d = b ? "top": "left",
                    f = b ? "height": "width",
                    g = this.thumbnails[a],
                    h = this.thumbnailsClipper,
                    b = h[f]() / 2 - g[f]() / (b ? 2 : 1),
                    d = g.offset()[d] - h.offset()[d];
                this._moveThumbnailsList(b - d, c)
            }
        },
        showThumbnails: function (a) {
            this.thumbnails && this.thumbnails.length || this.createThumbnails();
            this.thumbnailsContainer.fadeIn(void 0 != a ? a: this.opts.thumbnailsAnimOptions);
            this.showThumbnail(void 0, 0)
        },
        hideThumbnails: function (a) {
            this.thumbnailsContainer.fadeOut(void 0 != a ? a: this.opts.thumbnailsAnimOptions)
        },
        toggleThumbnails: function (a) {
            d(this.thumbnailsContainer).is(":visible") ? this.hideThumbnails(a) : this.showThumbnails(a)
        },
        controllify: function (a) {
            var c = this;
            d(a.zoomIn).on("click.wowbook", function () {
                c.zoomIn();
                return ! 1
            });
            d(a.zoomOut).on("click.wowbook", function () {
                c.zoomOut();
                return ! 1
            });
            d(a.next).on("click.wowbook", function () {
                c.advance();
                return ! 1
            });
            d(a.back).on("click.wowbook", function () {
                c.back();
                return ! 1
            });
            d(a.first).on("click.wowbook", function () {
                c.gotoPage(0);
                return ! 1
            });
            d(a.last).on("click.wowbook", function () {
                c.gotoPage(c.pages.length - 1);
                return ! 1
            });
            d(a.slideShow).on("click.wowbook", function () {
                c.toggleSlideShow();
                return ! 1
            });
            d(a.flipSound).on("click.wowbook", function () {
                c.toggleFlipSound();
                return ! 1
            });
            d(a.thumbnails).on("click.wowbook", function () {
                c.toggleThumbnails();
                return ! 1
            });
            d(a.fullscreen).on("click.wowbook", function () {
                c.toggleFullscreen();
                return ! 1
            })
        },
        toggleControl: function (a, c) { (a = this.opts.controls[a]) && d(a).toggleClass("wowbook-disabled", c)
        }
    };
    d.wowBook.defaults = {
        width: 500,
        height: 300,
        startPage: 0,
        hardcovers: !1,
        hardPages: !1,
        centeredWhenClosed: !1,
        transparentPages: !1,
        doublePages: ".double",
        responsive: !1,
        scaleToFit: "",
        onResize: null,
        fullscreenElement: document.documentElement,
        onFullscreenError: null,
        use3d: !0,
        perspective: 2E3,
        useTranslate3d: "mobile",
        bookShadow: !0,
        gutterShadow: !0,
        shadowThreshold: 20,
        shadows: !0,
        foldGradient: !0,
        foldGradientThreshold: 20,
        pageNumbers: !0,
        firstPageNumber: 1,
        numberedPages: !1,
        deepLinking: !0,
        updateBrowserURL: !0,
        curl: !0,
        curlSize: 40,
        slideShow: !1,
        slideShowDelay: 1E3,
        pauseOnHover: !0,
        touchEnabled: !0,
        mouseWheel: !1,
        handleWidth: !1,
        handleClickDuration: 300,
        turnPageDuration: 1E3,
        turnPageDurationMin: 300,
        forceBasicPage: !1,
        sections: ".wowbook-section",
        zoomLevel: 1,
        zoomMax: 2,
        zoomMin: 1,
        zoomBoundingBox: window,
        zoomStep: 0.25,
        onZoom: null,
        flipSound: !0,
        flipSoundFile: ["page-flip.mp3", "page-flip.ogg"],
        flipSoundPath: "/sound/",
        onPlayFlipSound: null,
        keyboardNavigation: {
            back: 37,
            advance: 39
        },
        clipBoundaries: !0,
        controls: {},
        onShowPage: null,
        onHoldPage: null,
        onReleasePage: null,
        thumbnails: !1,
        thumbnailsParent: "body",
        thumbnailScale: 0.2,
        thumbnailWidth: null,
        thumbnailHeight: null,
        thumbnailsPosition: null,
        thumbnailsVertical: !0,
        thumbnailsContainerWidth: null,
        thumbnailsContainerHeight: null,
        thumbnailsSprite: null,
        thumbnailsAnimOptions: {}
    };
    window.raf = function () {
        return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame ||
        function (a) {
            window.setTimeout(a, 1E3 / 60)
        }
    } ();
    d.browser.ie8mode = d.browser.msie && 8 == document.documentMode;
    var g = d.browser.msie && 9 > d.browser.version ? 1 : 0,
        s = {
            thin: 2 - g,
            medium: 4 - g,
            thick: 6 - g
        },
        n = window.document,
        z = n.documentElement,
        A = z.requestFullscreen || z.mozRequestFullScreen || z.webkitRequestFullscreen || z.msRequestFullscreen,
        B = n.exitFullscreen || n.mozCancelFullScreen || n.webkitExitFullscreen || n.msExitFullscreen;
    d.wowBook.utils = {
        translate: function (a, c, b) {
            return d.wowBook.useTranslate3d ? "translate3d(" + a + "px, " + c + "px, " + (b || 0) + "px) ": "translate(" + a + "px, " + c + "px) "
        },
        isMobile: function () {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
        }
    }
})(jQuery);
(function (d) {
    function l(p) {
        var g = p || window.event,
            l = [].slice.call(arguments, 1),
            n = 0,
            u = 0,
            w = 0;
        p = d.event.fix(g);
        p.type = "mousewheel";
        g.wheelDelta && (n = g.wheelDelta / 120);
        g.detail && (n = -g.detail / 3);
        w = n;
        void 0 !== g.axis && g.axis === g.HORIZONTAL_AXIS && (w = 0, u = -1 * n);
        void 0 !== g.wheelDeltaY && (w = g.wheelDeltaY / 120);
        void 0 !== g.wheelDeltaX && (u = -1 * g.wheelDeltaX / 120);
        l.unshift(p, n, u, w);
        return (d.event.dispatch || d.event.handle).apply(this, l)
    }
    var u = ["DOMMouseScroll", "mousewheel"];
    if (d.event.fixHooks) for (var w = u.length; w;) d.event.fixHooks[u[--w]] = d.event.mouseHooks;
    d.event.special.mousewheel = {
        setup: function () {
            if (this.addEventListener) for (var d = u.length; d;) this.addEventListener(u[--d], l, !1);
            else this.onmousewheel = l
        },
        teardown: function () {
            if (this.removeEventListener) for (var d = u.length; d;) this.removeEventListener(u[--d], l, !1);
            else this.onmousewheel = null
        }
    };
    d.fn.extend({
        mousewheel: function (d) {
            return d ? this.bind("mousewheel", d) : this.trigger("mousewheel")
        },
        unmousewheel: function (d) {
            return this.unbind("mousewheel", d)
        }
    })
})(jQuery);
(function (d) {
    function l(l) {
        if (l in u.style) return d.wowBook.support[l] = l;
        for (var g = w.length, s, n = l.charAt(0).toUpperCase() + l.substr(1); g--;) if (s = w[g] + n, s in u.style) return d.wowBook.support[l] = s
    }
    if (d.cssHooks) {
        var u = document.createElement("div"),
            w = ["O", "ms", "Webkit", "Moz"];
        l("transform");
        l("transformOrigin");
        l("boxSizing");
        l("zoom");
        d.wowBook.support.boxSizing && 8 > document.documentMode && (d.wowBook.support.boxSizing = !1);
        u = null;
        d.each(["transform", "transformOrigin"], function (l, g) {
            d.wowBook.support[g] && d.wowBook.support[g] !== g && !d.cssHooks[g] && (d.cssHooks[g] = {
                get: function (l, n, p) {
                    return d.css(l, d.wowBook.support[g])
                },
                set: function (l, n) {
                    l.style[d.wowBook.support[g]] = n
                }
            })
        });
        d.wowBook.applyAlphaImageLoader = function (l) {
            var g, s, n, u, w = "",
                B = d("<div style='display:none'></div>").appendTo("body");
            s = 0;
            for (n = l.length; s < n; s++) if (u = l[s], B.addClass(u), g = B.css("background-image").match(/^url\("(.*)"\)$/)) w += "." + u + "{background:none; filter : progid:DXImageTransform.Microsoft.AlphaImageLoader(src='" + g[1] + "', sizingMethod='scale'); } ",
                B.removeClass(u);
            d("body").append("<style>" + w + "</style>")
        }
    } else alert("jQuery 1.4.3+ is needed for this plugin to work")
})(jQuery);
$(document).ready(function() {	
//    $banks = $('#ccavenue_emi').parent().siblings('div.banks');
//    $("input[name='PaymentMethodForm[payment_method]']").bind(
//        'change', 
//        {$banks: $banks},
//        payment_options_select
//    );
    if ($('#checkout-address').length) {
        $('input[id="BillingAddressForm_phone"]').unmask();
        $('input[id="BillingAddressForm_postcode"]').unmask();
    }   
});
//
//function payment_options_select(e) {
//    $bank_div = e.data.$banks;
//    if($(this).attr('id') != 'ccavenue_emi'){
//        $bank_div.find('input[name="emi_months"]').attr('checked',false);
//        $bank_div.hide();
//    }
//    else if($(this).attr('id') == 'ccavenue_emi'){
//        $bank_div.show();
//    }
//
//}


// * INDFUR-1511

$('#cartMask').click(function () {
	 hideReadmorePopUp()
  });
$(document).ready(function(){
    if ($('.lightBoxCloseItmNewHome').length > 0){showTopBanner();}
    //INDFUR-1511
    if( typeof screen !== "undefined"){
        if (!((screen.width==800) && (screen.height==600) || (screen.width==1024) && (screen.height==768) || (screen.width==1024) && (screen.height==600))){
              if ($('#webEngageTab').length > 0) { document.getElementById('webEngageTab').style.display = 'block';}
        }
    }
    
$("#maskoffer").click(function() {
        $("#fabOffers").hide();
	$("#maskoffer").hide();
 	});


$(".offerClose").click(function() {
	$("#maskoffer").hide();
	$("#fabOffers").hide();
	});



  var popup_delay = $("#popup_delay").val();
  var userStartTime = '';
  var nameEQ = "_st_time" + "=";
  var ca = document.cookie.split(';');
  for(var i=0;i < ca.length;i++) {
      var c = ca[i];
      while (c.charAt(0)==' ') c = c.substring(1,c.length);
      if (c.indexOf(nameEQ) == 0) {
	userStartTime = c.substring(nameEQ.length,c.length);
      }
  }
  
  if (userStartTime == '') {    
    var c_name = "_st_time";
    var value = Math.round(new Date().getTime() / 1000);
    var c_value=escape(value);
	if($("#pagename").length){
    if(document.getElementById('pagename').value!='catalog/detail') 
    document.cookie=c_name + "=" + c_value;
    
    userStartTime =  Math.round(new Date().getTime() / 1000);
	}
  }
  var currentTime = Math.round(new Date().getTime() / 1000);
  var timeSpentOnSite = currentTime - userStartTime;
  var interval = (popup_delay - timeSpentOnSite)*1000;
    
  var showpopup = setTimeout(function(){
		//set default value for the Email field
                var defaultTextAreaValue = "Enter your email";
                $('#email').focus(function(){ 
                    if($(this).val() == defaultTextAreaValue){
                        $(this).val("");
                    }
                });

                $('#email').blur(function(){
                    if($(this).val() == "" || $(this).val() == defaultTextAreaValue){
                        $(this).val(defaultTextAreaValue);
                    }
                });					
                $('.social-widget-item-header iframe').css('display','none');

		//Get the screen height and width
		var maskHeight = $(document).height();
		var maskWidth = $(window).width();
	
		//Set heigth and width to mask to fill up the whole screen
		$('#mask').css({'width':maskWidth,'height':maskHeight});
		
		//transition effect		
		$('#mask').fadeIn(1000);	
		$('#mask').fadeTo("slow",0.8);	
		$('#mask').css({'z-index':100});
		$("#popupBox_map").show();

	
	//if close button is clicked
	$('.window .close').click(function (e) {
		clearInterval(showpopup);
		showpopup = 0;
		//Cancel the link behavior
		e.preventDefault();
		
		$('#mask').hide();
		$('.window').hide();
                $('.ie7 #header').css({'z-index':100});
                $('.social-widget-item-header iframe').css('display','block');
		$("#popupBox_map").css('display','none');
	});		
	
	//if mask is clicked
	$('#mask').click(function () {
		clearInterval(showpopup);
		showpopup = 0;
		$(this).hide();
		$('.window').hide();
                $('.ie7 #header').css({'z-index':100});
                $('.social-widget-item-header iframe').css('display','block');
		$("#popupBox_map").css('display','none');
	});		
	
// 	$('form#formCampaignId .popBoxInputImg').bind('click', submitmyformnew); 
	
	var c_name = "_fv";
	var value = "cmpnpp";
	//var exyear = 1;//Changes for set expire time for 2 days INDFUR-1173
        var exday = 2;
	var exdate = new Date();
        //exdate.setDate(exdate.getFullYear() + exyear);//Changes for set expire time for 2 days INDFUR-1173
        exdate.setDate(exdate.getDate() + exday);
	var c_value=escape(value) + ((exday==null) ? "" : "; expires="+exdate.toUTCString()) + ";path=/";
        if($('#pagename').length > 0){
	if(document.getElementById('pagename').value!='catalog/detail')  
            document.cookie=c_name + "=" + c_value;
        }
	
	
},interval);
 
$(".closePopup").click(function() {
  $("#maskTrackOrder").hide();
  $("#orderTracking").hide();
  $("#TrackOrderForm_ordernumber").removeClass("error").parent().next().text('').append("&nbsp;");
  $('#TrackOrderForm_ordernumber').val('For multiple orders, put a comma in between order numbers');
});

 $('#trackingOrderSubmit').bind('click', submittrackorderform); 


 $('#TrackOrderForm_ordernumber').live('click',function(){
       var or = removeBlankSpace($(this).val());
       if($(this).val()=='For multiple orders, put a comma in between order numbers'){
          $(this).val('');
        return false;
     }else if(or==''){
         $(this).val('For multiple orders, put a comma in between order numbers');
     }
 });
 $('#TrackOrderForm_ordernumber').live('blur',function(){
      var or = removeBlankSpace($(this).val());
      if(or==''){
         $(this).val('For multiple orders, put a comma in between order numbers');
     }
 });
 $(document).ready(function() {
     $('.pincode').focus(function(){
         $(this).select();
     });
});
//pincode availability check
$('.pin_box_checkIco').on('click', function(e){
    var $this = $(this);
    var searchTerm = $('input[name="pincode"]').val();
    if (typeof searchTerm != 'undefined') {
        searchTerm = searchTerm.replace(/[(?=+*'? ]/g, '');
        trimmedSearchInput = $.trim(searchTerm);
        var url = '/search/location/?q=' + encodeURIComponent(trimmedSearchInput);
        // if valid submit via ajax
        if (searchTerm.length == 6) {
            $.ajax({
                url: url,
                success: function(pincodes) {
                    $('.pincode-popuperror').remove();
                    var t = jQuery.parseJSON(pincodes);
                    //if(validatePin.checkPincodeExist(pincodes,trimmedSearchInput)){
                    if(typeof t[2]!=='undefined' && t[2].data2 === 'Y'){
                        setJCookie('location', trimmedSearchInput, 180);
                        //location.reload();
                        setTimeout(location.reload.bind(location), 3000);
						if(($(window).width())<=768){						
						 $('.pin_box').after('<div class="pincode-popuperror pinCodeServiceable">We deliver to this pincode!</div>');		
						}
						else {
						 $('.location_input_area').append('<div class="pincode-popuperror pinCodeServiceable">We deliver to this pincode!</div>');
						}
                       $('.pincode[type=text]').focusout();
                        
                    }
                   else{
                        if(($(window).width())<=768) {
						$("#mobPincode").prop("readonly", false);
						//$('.pin_box').after('<div class="pincode-popuperror pinCodeServiceable">Skip this for now>></div>');
						$('.pin_box').after('<div class="pincode-popuperror pinCodeNotServiceable">Pincode not serviceable.. Try a different one.</div>');
						}
						else {
						var classError="location_input_area";
                        $('.location_input_area').append('<div class="pincode-popuperror pinCodeNotServiceable">Pincode not serviceable.. <br>Try a different one.</div>');
						}                        
                    }                   
                },
                error: function() {
                    $('.deliveryerror-msg').show();
                }
            });
        }
    }
										
                    $('.pin_box_checkIco').hide();							
                    $('.pin_box_editIco').css('display', 'block');
                    e.preventDefault();
});
$('#form-account-create').submit(function(e) {
    e.preventDefault();
    var $this = $(this);
    var searchTerm = $('input[name="pincode_check"]').val();
    if (typeof searchTerm != 'undefined') {
        searchTerm = searchTerm.replace(/[(?=+*'? ]/g, '');
        trimmedSearchInput = $.trim(searchTerm);
        var url = '/search/location/?q=' + encodeURIComponent(trimmedSearchInput);
        // if valid submit via ajax
        if (searchTerm.length == 6) {
            $.ajax({
                url: url,
                success: function(pincodes) {
                    // return pincodes;
                   if(validatePin.checkPincodeExist(pincodes,trimmedSearchInput)){
                        setJCookie('location', trimmedSearchInput, 180);
                        location.reload();
                        $('.deliveryerror-msg').hide();
                    }else{
                        $('.deliveryerror-msg').show();
                    }
                },
                error: function() {
                    $('.deliveryerror-msg').show();
                }
            });
        }
    }
});
});
// * INDFUR-1511
function hideReadmorePopUp(){
    if ($('#cartMask').length > 0) {$('#cartMask').hide();}
    if ($('#loadId').length > 0) {$("#loadId").hide();}
    if ($('#perpetialCartId').length > 0) {$("#perpetialCartId").html('');}
}
$(document).keydown(function(e){ 
		if(e.keyCode==27){
                    hideReadmorePopUp()
                }
            });
function loadReadmorePopUp(readDataFromDivId){
          $('#cartMask').show();
          var data = $('#'+readDataFromDivId).html();
	  //Get the screen height and width
	  var maskHeight = $(document).height();
	  var maskWidth = $(window).width();
  
	  //Set heigth and width to mask to fill up the whole screen
	  $('#cartMask').css({'width':maskWidth,'height':maskHeight});
          $('#cartMask').fadeIn(1000);
	  $('#cartMask').fadeTo("slow",0.8);
	  $("#loadId").show();
          $("#loadId").hide();
          $("#perpetialCartId").show();
	  $("#perpetialCartId").html(data);
	  
}

function removeBlankSpace(str){
    return  str.replace(/ /g,'');
}
var nslAjaxCallAllowed = true;
function submitmyformnew(){ 
    	var _cForm  = $('form#formCampaignId');
    _cForm.find('#successDiv, #errorDivNew').hide(); 
    
    var _cEmail = _cForm.find('#news_letter_email').val(); 
        
    var categories = [];
    $("input[name='newsCategories[]']").each(function(){
            categories.push(parseInt($(this).val()));
    });
    
    if(nslAjaxCallAllowed == true){ 
       if(isValidEmailAddress(_cEmail)) {
            var _base   = '/newsletter/validate/';
            var _token  = _cForm.find('#token').val();
            var _cUrl    = _base + '?YII_CSRF_TOKEN=' + _token + '&email=' + _cEmail+ '&categories=' + categories.join('-');
            
            $.get(_cUrl, function(__data) {
                __data = $.parseJSON(__data);
                
                if(typeof wt == 'object'){
                    wtmessage= 'SignUp~PopUp_' + _cEmail+'_'+ __data['error'];
                    wtmessage = wtmessage.trim();
                    wtmessage = wtmessage.replace(/ /g, "~");
                    wt.linkId= wtmessage;
                    wt.customEcommerceParameter = {13:"lead"};
                    wt.customSessionParameter = {
                      6: myCookie.set("subID", __data['newsletter_subscription_id'])
                    };
                    wt.sendinfo();
                 }
                if(__data['validation']) {
                    _cForm.find('#successDiv').html(__data['error']); //NEWSLETTER_SUBSCRIBE_NOCHANGE
                   if (__data['error'] == "This Email Id is already subscribed to Newsletter") {
                       _cForm.find('#successDiv').addClass('error');
                   }else{
                       _cForm.find('#successDiv').removeClass('error');
                   }
                   _cForm.find('button').hide();
                   _cForm.find('.popInputBox').hide();
				   _cForm.find('.popBoxBtn').hide();
				   _cForm.find('.signUpError').hide();
                   _cForm.find('#titleDiv').hide();
                   _cForm.find('#txtDiv').hide();
                   _cForm.find('#successDiv').show();
                   if(__data['alreadySubscribed']==false) {
                       
                       facebookPixelTracking.callFbq('CompleteRegistration');
                       facebookPixelTracking.callFbq('Lead');
                   }
                     try{
                        var webtrekk_code = '<script>var wt2 = new webtrekkV3();var myCookie = new wt2.cookieManager("subscription");wt2.customEcommerceParameter = {"13:lead"};wt2.customSessionParameter = {"6: myCookie.set(\'subID\', '+__data["subscription_id"]+',31536000, \'last\')"};wt2.sendinfo();</script>';
                        //eval(webtrekk_code);
                     }catch(e){}
                   setTimeout( function() { $('#popupBox_map').hide(); }, 3000 );
                   setTimeout( function() { $('#mask').hide(); }, 3000 );
                } else {
                    onFooterNewsletterError(_cForm, __data['error']);
                    onCampaignNewsletterError(_cForm, 'Invalid email address');
                }
                    nslAjaxCallAllowed = true;
                   
            });
        } else {
            onCampaignNewsletterError(_cForm, 'Invalid email address');
            _cForm.find('#news_letter_email').focus();
            nslAjaxCallAllowed = true;
        }
    }
    
    return false;
}

function onCampaignNewsletterError(_cForm, __error) {
    if (__error) {
        _cForm.find('#errorDivNew').text(__error);
    }
    _cForm.find('#errorDivNew').show();
}

 document.onkeydown = function(evt) {
    evt = evt || window.event;
    if (evt.keyCode == 27) {
       $(".escClose").hide();
       $("#perpetialInnerId").hide();
       jQuery('#AddToCart').removeAttr("disabled");
      	$("#fabOffers").hide();
       $("#maskoffer").hide();
       $('#giftmask').hide();
       $('#creditmask').hide();
       $('#TrackOrderForm_ordernumber').val('For multiple orders, put a comma in between order numbers');
       $("#TrackOrderForm_ordernumber").removeClass("error").parent().next().text('').append("&nbsp;");
        $("#termPopUp,.overlay").hide();
    }
};



function submittrackorderform(){
    var cForm  = $('form#form-track-order');
    var ordernumber =$('#TrackOrderForm_ordernumber').val();
    if(ordernumber=='For multiple orders, put a comma in between order numbers'){
         cForm.find('.s-error').text('Please enter valid order number').show();
        $('#TrackOrderForm_ordernumber').addClass('error').focus();
        return false;
    }
    ordernumber = ordernumber.replace(/ /g,'');
    $('#TrackOrderForm_ordernumber').val(ordernumber);
     var rege = /^[0-9,]+$/;
     if(!rege.test(ordernumber)){
        cForm.find('.s-error').text('Please enter valid order number').show();
        $('#TrackOrderForm_ordernumber').addClass('error').focus();
        return false;
     }
    return true;
}
function showTopBanner(){
    var topBannerCookie = getJCookie('topBanner');
    if(topBannerCookie!=getJCookie('PHPSESSID')){
        $('.lightBoxCloseItmNewHome').show();
    }
}
$('.topBannerCloseIcon').click(function () {
	  closeTopBanner();
});
function closeTopBanner(){
    var sessionId = getJCookie('PHPSESSID');
    setJCookie('topBanner', sessionId, 1);
    $('.lightBoxCloseItmNewHome').hide();
}
function delTopBannerCookies(){
    setJCookie('topBanner', '', 0);
}
function setJCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+d.toGMTString();
    document.cookie = cname + "=" + cvalue + "; " + expires + " ; path=/;";
}
function getJCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) != -1) return c.substring(name.length, c.length);
    }
    return "";
}
//Pop up code for location
    function deselect(e) {
      $('.pop').slideFadeToggle(function() {
        e.removeClass('selected');
      });    
    }

    $(function() {
        var loc = $('#loc').val();
        //alert(loc);
        if (typeof loc != 'undefined') {

            setJCookie('location', loc, 180);
            //location.reload();
        }
        $('.changepincodetxt a, .changepincodetxt').on('click', function () {
            //$('.pop').slideFadeToggle();
            //$("#location-mask").css("display", "block");
            //$("#loc_close").css("display", "block");
			$(this).hide();
			$(".pin_box_checkIco").show();	
			$('.pincode').removeClass('defaultPincode');	
			$('.pincode').removeAttr('disabled');
			keypress.allowOnlyNumbers('.pincode[type=text]');
			$('.pincode[type=text]').focus();
        });

        $('#loc_close').on('click', function (e) {
            e.preventDefault();
            $('#form-account-create')[0].reset();
            $("#location-mask,.deliveryerror-msg").css("display", "none");
            $('.pop').slideUp();
        });
    });

    $.fn.slideFadeToggle = function(easing, callback) {
      return this.animate({ opacity: 'toggle', height: 'toggle' }, 'fast', easing, callback);
    };

var validatePin = {
   disableButton : function(disable) {
        $(disable).prop("disabled", true);
    },
	enableButton : function(enable) {
        $(enable).prop("disabled", false);
    },
    checkPincodeExist: function(Pincodes,trimmedSearchInput) {
        var Pincodes = jQuery.parseJSON(Pincodes);
        var hasMatch =false;
        for (var index = 0; index < Pincodes.length; ++index) {
         var pincode = Pincodes[index];
         if(pincode.data == trimmedSearchInput){
           hasMatch = true;
           break;
         }
        }
        return hasMatch;
    },
    preselectTab: function(className,tabId,cookieVal) {
        tabId = tabId || cookieVal;
        $(className).each(function(){
            if(tabId==$(this).data("category")) {
              $(this).parent().addClass('active');
              var href = $(this).attr('href');
              $(href).addClass('active in');
            }
        });
    }
};
	
    setTimeout(function(){
	if(document.getElementById('pincode_check')!=null) {
            $('#pincode_check').keyup(function(event) {
                if(event.keyCode == 13){
                   $('#pincodeSubmit').click();
                }
                var mString = $(this).val().split(" ").join(""); // remove hyphens
                if (mString.length > 0 && (mString.length < 7)) {
                  mString = mString.match(new RegExp('.{1,3}', 'g')).join(" ");
                }
                $(this).val(mString);
              });
              
//        document.getElementById('pincode_check').addEventListener('input', function (e) {
//                var target = e.target, position = target.selectionEnd, length = target.value.length;
//                 var pincode_string = e.target.value;
//                 mString = target.value;
//                 $("#pincode_check").mask("9999 9999 9999 9999");
//            });
	}
    },1000);
 $(document).ready(function () {
      keypress.allowOnlyNumbers('.required[type=text]');
    buttonbehaviour.disableenable('.required', 7,'.button');      
     
      $('.nav-tabs li').removeClass('active');
      $('.section-tabslide .tab-slide-category .tab-pane').removeClass('active in');
      var defaultTabVal = $('.nav-tabs li:first a').data('category');
      var cookieTabVal = getJCookie('tab-home-category') || defaultTabVal;
      validatePin.preselectTab('.nav-tabs li a',null,cookieTabVal);
      
  })
  


detail = {
    homePage: 'index/index',
    plpPage: 'catalog/index',
    pdpPage: 'catalog/detail',
    cartPage: 'cart/index',
    checkoutPage: 'onestepcheckout/index',
    checkoutSuccessPage: 'success/index',
    MAX_STOCK_DISPLAY : 6,
    pageType:'pdp',
    init: function(params){
        if ($('.product-tabs').length) {
            $('.tabsSimpleHead').hide();
            $('.product-tabs').show();
            $('#detail-attributes').hide();
            $('#detail-reviews').hide();
            $('#rating-form .rating-row label span').mouseenter(function() {
                $(this).parents('.rating-row').find('label span').removeAttr('class');
                $(this).addClass('active').parent('label').prevAll('label').children('span').addClass('fill');
            }).mouseleave(function() {
                $(this).parents('.rating-row').find('label span').removeAttr('class');
                $('#rating-form .rating-row label input:checked').next('span').addClass('active').parent('label').prevAll('label').children('span').addClass('fill');
            }).click(function() {
                $(this).prev('input').attr("checked", "checked");
            });
    
            $('#BtnCart').fadeTo(100,.5);
        };
        $('#dissableZeroEmiFacility').css('display','none');
        var zero_percent_emi_facility = $('#zero_emi_facility').data('zero_emi_facility');
        if(zero_percent_emi_facility === 0){
            $('#dissableZeroEmiFacility').css('display','block');
        }
        detail.initMultiOptions();
        detail.initThumbnailSlider();
        
        
        if ($('.prd-option-collection li').length == 1){
            $('.prd-option-collection li').trigger('click');
            
            if (jQuery.trim($('.prd-option-collection li').html()) == '...' || jQuery.trim($('.prd-option-collection li').html()) == 'not defined') {
                $('#productOptionsWrapper').hide();
            }
        }
        
        
        if (params){
            for(var param in params) {
                var val = params[param];
                
                if ($('.prd-'+param+' .prd-option-collection li').length) {
                    $('.prd-'+param+' .prd-option-collection li').each(function(){
                        if ($(this).html().trim() == val.trim()) {
                            $(this).trigger('click');
                        }
                    });
                }
                
                
                $selectbox = $('#productOptionsWrapper select.opt-select[data-attribute="'+param+'"]');
                if ($selectbox.length) {
                  $selectbox.find('option').each(function() {
                      if ($(this).text().trim() == val.trim()) {
                          $(this).attr('selected',true);
                          options.selectOption(param, $(this).val());
                      }
                  });
                } 
                
            }
        }
    },
    initThumbnailSlider: function() {
    	var that = this;
    	//: get amount from data-option-thumbnail-count
    	if ($('.prd-moreImagesListWrapper').length) {
			var threshold = parseInt($('.prd-moreImages').attr('data-thumbnailcount'));
    		$('.prd-moreImagesListWrapper').not('.hidden').each(function(){
    			if (threshold > 0 && $(this).find('li').length > threshold) {
    				that.initCarousel(this, threshold);
    			}
    		});
    	}
    },
    initCarousel: function(el, threshold) {
    	$(el).prepend('<a title="" href="#" class="ui-buttonNextSlideSmall"><div class="icon i-slideSmallNext"></div></a>');
		$(el).prepend('<a title="" href="#" class="ui-buttonPrevSlideSmall"><div class="icon i-slideSmallPrev"></div></a>');
    	$(el).find('.prd-moreImagesListContainer').jCarouselLite({
			btnNext: '#' + $(el).attr('id') + ' .ui-buttonNextSlideSmall',
			btnPrev: '#' + $(el).attr('id') + ' .ui-buttonPrevSlideSmall',
			visible: threshold,
			circular: false
		});
    	$(el).data('carousel-init', true);
    },
    initMultiOptions: function() {
        $('#productOptionsWrapper').on('change', 'select[data-js-function="selectOption"]', function(){
            var el = $(this).find('option:selected');
            options.selectOptionElement(el); 
            // INDFUR-1827: Webtrekk implementation for PDP
            if(typeof wt !== 'undefined' && el.val().trim() !== ""){
                var actionName = ["PDP-V"];
                var product_name = jQuery("#product_name").data("product_name");
                actionName.push(product_name); 
                actionName.push(el.text());
                var fullActionName = actionName.join("|");
                fullActionName = fullActionName.replace(/\s/g, '_');
                wt.sendinfo ({linkId: fullActionName});
            }
            
            //: update gallery on emptiness
            if ('' == el.val())
                $('#selectedSku').val(''); // reset AddToCartButton if "Please choose ...", hope no sideeffects :)
                detail.updateGallery('default');                
        });
        $('#productOptionsWrapper').on('click', 'li[data-js-function="selectOption"]', function(){
           options.selectOptionElement(this);
        });
    },
    clickTab: function(__tab) {
        __tab.parent().find('li').removeClass('selected');
        __tab.addClass('selected');
        __tab.parent().parent().find('.detailTab').hide();
        __tab.parent().parent().find(__tab.find('a').attr('id')).show();
        
        // INDFUR-1827: Webtrekk implementation for PDP
        if(typeof wt !== 'undefined'){
            var actionName = ["PDP-T"];
            var product_name = jQuery("#product_name").attr("product_name");
            actionName.push(product_name); 
            actionName.push(__tab.find("a").text());  
            var fullActionName = actionName.join("|");
            fullActionName = fullActionName.replace(/\s/g, '_');
            wt.sendinfo ({linkId: fullActionName});
        }
    },
    hoveraddtocart: function(elemID){
        //calculate position of tooltip
        var elem = $('#' + elemID);
        var position =  (elem.position().top);
        position = parseInt(position);
        if (elemID == 'FastLane') { position = position + 10; }
        //giving tooltip right top position
        //$('.prd-tooltip').css('top',position);
        //show tooltip
        if(!$('#selectedSku').val()){
			$('#notAvailableInfo').hide();
            $('#sizeSelectInfo').fadeIn(200);
        }
        if($('#product-selector-error').is(':visible')){
			$('#sizeSelectInfo').hide();
            $('#notAvailableInfo').fadeIn(200);
        }
		
    },
    hoverdeliveryestimate:function(elemID){
         $('#deliveryestimate').fadeIn(200);
    },
    hoverInactiveFastLane: function(elemID) {
    	 var elem = $('#' + elemID);
         var position =  (elem.position().top);
         position = parseInt(position);
         $('#fastLaneInactiveNotice').css('top',position+10).toggle();
    },
    configureFastLane: function() {
    	jQuery(location).attr('href', '/customer/fastlane/index?p=' + jQuery('#configSku').val());
    },
    addtocart: function() {
        var gaTrackingObject = {}; // preparing GA tracking data
        var productObj = this.getProductSkus();
        pageType = detail.pageType;
        if(productObj.actualsku.length && productObj.variantSku.length) {
            var customerWishlistId = '';
            if(typeof productObj.idCustomerWishlist !== 'undefined'){
                var customerWishlistId = '&id_customer_wishlist='+productObj.idCustomerWishlist;
                pageType = 'wishlist';
            }
        if($('.addtocartbutton-pdp').length!=0){
            $('.addtocartbutton-pdp').html('Adding...');
            $('.addtocartbutton-pdp').prop('disabled',true);
        }
            
            gaTrackingObject.quantity = 1; // assigning qty by default
            var qty = '&quantity=1';
            if (jQuery('#selectedQuantity').length != 0) {
                qty = '&quantity='+$('#selectedQuantity').val();
                gaTrackingObject.quantity = $('#selectedQuantity').val(); // assigning qty for PDP 
                pageType = 'pdp'; // assigning qty for PDP 
            } 
            
            var isAccountPage = 0;
            if(jQuery('#pagename').val() === 'account/index') {
                isAccountPage = 1;
            }
            gaTrackingData = gaTracking.preparingData(gaTrackingObject,productObj,pageType);
	  var cUrl    = '/cart/perpetualcart/?p=' + productObj.actualsku + '&sku=' + productObj.variantSku+ '&delivery_time_text=' + $('#delivery_time_text').text() + qty+ customerWishlistId+'&isAccountPage='+isAccountPage;
          detail.showLoader();
          if($('.sizeArea').length) {
            $('.product .productborder').removeClass('activeProduct');
            $('.product .productborder .sizeArea').hide('fast');
        }
	  //$('#AddToCart').append('<span id="loadId"><img src="/images/local_v2/icons/loader.gif" alt="Loading.."></span>');
	  $.get(cUrl, function(data) {
              detail.hideLoader();
              var responseJsonObject = jQuery.parseJSON( data );
              gaTrackingData.image = responseJsonObject.data.items[productObj.variantSku]['image'];
              $(".wishlistadded").addClass('addedToCart');
              if(typeof responseJsonObject.wishlist !== 'undefined'){
                  cartAction.wishlistAndAddtocartResponse(responseJsonObject.wishlist,responseJsonObject.flashMessage,'savelist');
                  //facebook pixel add to cart tracking
                  facebookPixelTracking.callFbq('AddToCart');
                    if(gaTrackingData){
                        gaTracking.addToCart(gaTrackingData);
                        iZootoTracking.addToCart(gaTrackingData);
                    }
                  if(typeof responseJsonObject.cartCoupon !== 'undefined'){
                    $('.popup-outer.coupon-popup').replaceWith(responseJsonObject.cartCoupon);
                    $('.scrollbox').enscroll('destroy');
                    $('.scrollbox').enscroll();
                  }
                  if($(".whish-list-page").length !== 0) {
                      $(".whish-list-page").replaceWith(responseJsonObject.wishlist.wishListDiv);
                      $('#mini-cart-drobdwon').html(responseJsonObject.minicartContent);
                      $("#mini-cart-drobdwon .cartcontent").enscroll();
                  }
              }else{
                  if(responseJsonObject.data.cartSuccess){
                      //facebook pixel add to cart tracking
                      facebookPixelTracking.callFbq('AddToCart');
                        if(gaTrackingData){
                          gaTracking.addToCart(gaTrackingData);
                          iZootoTracking.addToCart(gaTrackingData);
                        }
                    detail.addToBagWishListMsgPopUp(responseJsonObject.flashMessage,'.wishlistadded',true);
                    detail.addToBagWishListMsgPopUp(responseJsonObject.minicartContent,'.mini-cart-content',false);
                    $('.mini-cart-content, .js-minicart-backdrop').hide();
                   var addToBagItem =  detail.formatBadgeQty(responseJsonObject.data.ItemQuantity);
                    detail.addToBagWishListMsgPopUp(addToBagItem,'.mini-cart .badge',false);
					//}
                        if($(window).width()<767) {
                          //   $('body,html').animate({scrollTop:0},400);
                          if($('.append-button').hasClass('cartrelativeButton') && $('.catalogdetailpage').length>0)
                          {
                              $('.catalogdetailpage .addedToCart').addClass('bottomFix');
                          }else { $('.catalogdetailpage .addedToCart').removeClass('bottomFix'); }
                        }
                    $("#mini-cart-drobdwon .cartcontent").enscroll();
                        if($("#content_cart").length>0 && $("#quickviewWindow").length>0)
                        {
                                $("#quickviewWindow").hide();
                                location.reload();
                        }
                 }else{
                     detail.addToBagWishListMsgPopUp(responseJsonObject.data.cartError,'.wishlistadded',true);
                     if($(window).width()<767) {
                         if($('.catalogdetailpage').length==0)
                         {
			$('body,html').animate({scrollTop:0},400);
                         }
                     }
                 }				 
				 //if($("#global_cart").length>0)
				 //{
				//	$('body,html').animate({scrollTop:0},400); 
				 //}
                 if($('.addtocartbutton-pdp').length!=0){
                  //  $('.addtocartbutton-pdp').html('Add To Bag');                    
                    if($(window).width()<767) {
                        $('.catalogdetailpage .addtocartbutton-pdp').html('View Bag').removeClass('config').addClass('gotobag');
                    }else 
                    {
                       $('.addtocartbutton-pdp').html('View Bag').removeClass('config').addClass('gotobag'); 
                    }
                    $('.sizebox2').removeClass('active');
                    $('.addtocartbutton-pdp').prop('disabled',false);
                }

                  setTimeout(function() {
                      $(".lightBoxNewSubConHdr").slideUp();
                      $(".lightBoxNewSubConHdrErr").slideUp();
                  }, 1000);

                  //if close is clicked
                  $('.lightCartConMain .close').click(function (e) {
                    $('#cartMask').hide();

                    $("#perpetialInnerId").hide();
                    jQuery('#AddToCart').removeAttr("disabled");
                  });

                  //if mask is clicked
                  $('#cartMask').click(function () {
                    $('#cartMask').hide();
                    $("#perpetialInnerId").hide();
                    jQuery('#AddToCart').removeAttr("disabled");
                  });

                // * INDFUR-1511

                  var totalItems = parseInt($('#totalItems').val());
				
                  var itmTxt = "";
                  if(totalItems>0){
                    
                    $('#headerCartId').html(''+totalItems+itmTxt);
                    var subtotal = $('#Grandtotal').val(); 
                    $('#headerCartPriceId').html('  |  '+subtotal+'');
                    $('#emptyBag').hide();
                    $('#headerCartId').show();
                    $('#headerCartPriceId').show();
                  }else{
                      $('#headerCartId').hide();
                      $('#headerCartPriceId').hide();
                      $('#emptyBag').show();
                  }				  
                }
	  });
          
        } else {
            
            jQuery("#sizeSelectInfo").fadeIn(200);
            
        }
    },
    addToBagWishListMsgPopUp: function(data,displayHtmlClass,setTimeOut){
        setTimeOut = setTimeOut || null;
        if(($(window).width() > 767) || (
            navigator.userAgent.match(/Tablet/i) ||
            navigator.userAgent.match(/iPad/i) ||
            navigator.userAgent.match(/Kindle/i) ||
            navigator.userAgent.match(/Playbook/i) ||
            navigator.userAgent.match(/Nexus/i) ||
            navigator.userAgent.match(/Xoom/i) ||
            navigator.userAgent.match(/SM-N900T/i) || //Samsung Note 3
            navigator.userAgent.match(/GT-N7100/i) || //Samsung Note 2
            navigator.userAgent.match(/SAMSUNG-SGH-I717/i) || //Samsung Note
            navigator.userAgent.match(/SM-T330NU/i) //Samsung Tab 4
        )){
            $(displayHtmlClass).html(data).fadeIn(1000);
            if(setTimeOut){
                setTimeout(function() {
                    $(displayHtmlClass).fadeOut(1000);
                },1000);
            }
            if(displayHtmlClass == '#mini-cart-drobdwon'){
                $(displayHtmlClass).hide();
            }
            
        }else{
            if(displayHtmlClass == '#mini-cart-drobdwon'){
                $(displayHtmlClass).hide();
            }else{
                $(displayHtmlClass).html(data).fadeIn(1000);
                if(setTimeOut){
                    setTimeout(function() {
                        $(displayHtmlClass).fadeOut(1000);
                    },5000);
                }
            }
        }
        $('.mini-cart-content').removeAttr('style');
        if($('.empty_saved_item_block').length==0)
		{			
        
			$('.saveditem').hide();
		}
    },
    checkoutFastlane: function() {
        if(jQuery('#selectedSku').val()) {
            jQuery('#AddToCart').attr('disabled', true);
            
            var qty = '&quantity=1';
            if (jQuery('#selectedQuantity').length != 0) {
                qty = '&quantity='+$('#selectedQuantity').val();
            }

            if (jQuery('#quickviewWindow.boxunit').length <= 0) {
                $("body").append('<div id="quickviewWindow" class="ui-dialog ui-dialogQuickview boxunit" style="display: none"><div id="uiDialogClicker"></div><div id="uiDialogBody" class="container"></div></div>');
            }
            $('#quickviewWindow.boxunit').show();
            $.get('/checkout/fastlane/acceptcheckout/?p=' + jQuery('#configSku').val() + '&sku=' + $('#selectedSku').val() + qty, function(data) {
                $uiDialogBody = $('#quickviewWindow.boxunit #uiDialogBody');
                $uiDialogBody.html(data);
                $('.dialogClose,ui-dialogClose').click(function(e) {
                    if("undefined" != typeof(e)) {
                        e.stopPropagation();
                        e.preventDefault();
                    }
                    $('#quickviewWindow.boxunit').fadeOut(500, function(){$("#quickviewWindow.boxunit #uiDialogBody").html('');});
                });
                
                $('#checkoutBtn').click(function() {
                    if(typeof(_gaq) != 'undefined') {
                        _gaq.push(['_trackPageview','/checkout/step/finish']);
                    }
                    var wHeight = $(window).height();
                    var wDialog = $("#dialogProcessing .container").height();
                    var marginTop = wHeight / 2 - (156 / 2); 
                    $("#dialogProcessing .container").css( "margin-top", marginTop );
                    $('#dialogProcessing').show();
                    window.setTimeout('$("#dialogProcessingInfo1").slideUp(300); $("#dialogProcessingInfo2").slideDown(300);', 6500);
                });
            });
        } else {
            jQuery("#sizeSelectInfo").fadeIn(200);
        }
    },
    leavecart: function(){
        $("#sizeSelectInfo").fadeOut(200);
        $("#notAvailableInfo").fadeOut(200);
        $("#deliveryestimate").fadeOut(200);
    },
    selectSku: function(sku){        
        this.updatePrice(sku);
        this.updateDeliveryText(sku);        
        this.updateGallery(sku);
        this.updateStock(sku);
        this.updateCodLogo(sku);
        this.updateDeliveryTimeAsPerPincode(sku);
        this.checkZeroEMIFacility(sku);
        this.checkimageSKU(sku);
        this.updateShowroom(sku);
    },
    showLoader: function() {
      if ($("#loadingbar").length === 0) {
        $("body").append("<div id='loadingbar'></div>")
        $("#loadingbar").addClass("waiting").append($("<dt/><dd/>"));

        $("#loadingbar").width((50 + Math.random() * 30) + "%");

      }   
    },
    hideLoader: function() {
        $("#loadingbar").width("101%").delay(200).fadeOut(400, function() {
            $(this).remove();
        });
    },
    checkimageSKU: function(sku){
        var selectedSKU = sku;
        var skuclass;
        if (selectedSKU != '') {
            skuclass = selectedSKU + "_default";
            if (!($(".ad-thumbs a.image").hasClass(skuclass))) {
                skuclass = $("#configSku").val() + "_default";
            }
        } else {
            skuclass = $("#configSku").val() + "_default";
        }

        $(".ad-gallery").find('.ad-active').removeClass('ad-active').css({"opacity": ".7"});
        $("." + skuclass).addClass('ad-active').css({"opacity": "1"});

        var parentDivId = $("." + skuclass).parent().attr("id"), tempIndex, divNo;
        if (parentDivId != undefined) {
            divNo = parentDivId.split("_");
            tempIndex = divNo[1] - 1;
            if (galleries != null) {
                galleries[0].current_index = tempIndex;
            }
            $("#imgThumb_" + divNo[1] + " img.image2").css({"opacity": "1"});
            $('#gallery .example1').html('<a onclick="callwebtrekk(\'zoom_' + $('#configSku').val() + '\');fancyBoxClick(' + tempIndex + ')" data-href="' + $("." + skuclass + " img").attr("longdesc") + '" href="javascript:void(0)"><img width="432" height="432" src="' + $("." + skuclass).attr("href") + '" alt="' + $("." + skuclass + " img").attr("rel") + '"></a>');


            var store = window.store || {};
            this.optionsStore = store["optionsStore"];
            var variationCount = 0;
            $.each(this.optionsStore.variation, function(index, value) {
                variationCount = variationCount + 1;
            });
            var cur_li = jQuery('#productThumbImg .ad-active').closest('li');
            var all_li = jQuery('#productThumbImg li');
            var curr_index = all_li.index(cur_li);
            if (variationCount > 1) {
                $('#productThumbImg').jcarousel('scroll', curr_index);
            }

        }
    },
    checkZeroEMIFacility: function(sku){
        $('#dissableZeroEmiFacility').css('display','none');
        var zero_percent_emi_facility = $('#zero_emi_facility_'+sku).data('zero_emi_facility');
        if(zero_percent_emi_facility === 0){
            $('#dissableZeroEmiFacility').css('display','block');
        }
    },
    updateStock: function(sku) {
        var store = window.store || {};
        var stockStore = store["stockStore"];
        if (stockStore[sku] === undefined || stockStore[sku] == 0){
            $('#SoldOut').show();
            $('#reminder').show();
            $('#AddToCart').hide();
            $('#pincode').hide();
            $("#NewPincodeDeliveryEstimate").hide();
            $("#pincodeToggle").hide();
            $('#delivery_time_text').hide();
            $('#uiDialogBody #SoldOut').show();
            $('#uiDialogBody #pincode').hide();
            $('#uiDialogBody #delivery_time_text').hide();
            $('#uiDialogBody #AddToCart').hide();
            $('#uiDialogBody #delivery_time_text').hide();
            $('#reminderSimpleSku').val(sku);
            $("#wishlistselectedSku").val(sku);
            $("#selectedSku").val('');
            $('.buywishlist').hide();
            $('.soldoutwishlist').show();
            $('#product-selector-error').html($('#items-not-available').html()).fadeIn(100);
            $('#product-option-stock-hint').hide();
        } else {
            $('#product-selector-error').hide();
            $('#SoldOut').hide();
            $('#reminder').hide();
            $('#AddToCart').show();
            $('.buywishlist').show();
            $('.soldoutwishlist').hide();
            //$("#pincodeToggle").show();
            $("#wishlistselectedSku").val(sku);
            $("#skuForDeliveryEstimate").val(sku);
            var pincode = $("#InputBoxpincode").val();
            if(pincode!=''){
                getDeliveryEstimate();                 
            }else{
                $("#NewPincodeDeliveryEstimate").show();
            }
           
            $('#delivery_time_text').show();
             
            $('#pincode').show();
            $('#uiDialogBody #AddToCart').show();
            $('#uiDialogBody #delivery_time_text').show();
            $('#uiDialogBody #SoldOut').hide();
            $('#uiDialogBody #pincode').show();
            var singular = $('#items-left-singular').html();
            var plural = $('#items-left-plural').html();
            var stock = stockStore[sku];

            $('#selectedSku').val(sku);
            $('#BtnCart').fadeTo(100, 1);

            if (stock > 1){
                $('#product-option-stock-number').html(plural.split('--number--').join(stock));
            } else { 
                $('#product-option-stock-number').html(singular.split('--number--').join(stock));
            };
            $('#product-option-stock-hint').fadeIn(800);
        } 
        this.updateDisplayStock(stock);
    },
    updateGallery: function(sku) {
    	//: display according wrapper
    	var wrapper        = $('.prd-moreImagesListWrapper[data-simple-sku=' + sku + ']');
    	var defaultWrapper = $('.prd-moreImagesListWrapper[data-simple-sku=default]');
    	var currentWrapper = $('.prd-moreImagesListWrapper').not('.hidden');
    	var actOnWraper    = null; 
    	actOnWrapper = (wrapper.length ? wrapper : defaultWrapper);
    	if ($(actOnWrapper).attr('id') == $(currentWrapper).attr('id')) return ;
    	
    	currentWrapper.addClass('hidden');
    	
    	actOnWrapper.removeClass('hidden').find('img[data-src]').each(function(){
    		//: lazy load images, only on display
    		if (!$(this).attr('src')) $(this).attr('src', $(this).attr('data-src'));
    	});
    	//: add carousel
    	if (actOnWrapper.data('carousel-init') != true) 
    	{
    		var threshold = parseInt($('.prd-moreImages').attr('data-thumbnailcount'));
    		if (threshold > 0 && $(actOnWrapper).find('li').length > threshold) {
    			this.initCarousel(actOnWrapper, threshold);
    		}
    	};
    	
		actOnWrapper.find('li').first().trigger('mouseenter');
               
    },
            
    calculateEMIInterest :function(principalAmount, interestRate, month){	
        annualInterestRate = interestRate / (12 * 100);
        if(interestRate===0){
         emiInterest = 0;
        }else{
        emi=(principalAmount * annualInterestRate) * (Math.pow((1 + annualInterestRate), month) / (Math.pow((1 + annualInterestRate),month) - 1));
        emiInterest = (emi*month)-principalAmount;
        }
        return emiInterest;
    },
    calculateCashback :function(grandTotal,cashbackPercentage){
        cashback=(grandTotal * cashbackPercentage)/100;
        return cashback;
    },
            
    updatePrice: function(sku,plp,ele) {
        var Timer = null;
        var plp = plp || false;
        var ele = ele || false;
        $('.product-price-pdp').removeClass('special-price');
        $('#store-address').css("display","none");
        $('#product_discount_detail_box').css("display","none");
       // $('#supplier_address').css("display","none");
        var configSku = sku.substring(0, sku.indexOf('-'));
        var store = window.store || {};
        var priceStoreData = store["priceStore"][configSku];
        var productStock = store["stockStore"][sku];
        var selectedPriceData = priceStoreData['prices'][sku];
        for (var i = 1; i < 9999; i++){
            window.clearInterval(i);
            $("#offer-countdown-timer span").remove();
        }
        Timer = selectedPriceData.special_price_expiry;
        if(Timer != null){
            detail.offerCountdownTimer(Timer);
        }else{
            $(".offer-countdown-timer").hide();
        }
         $('.discounts-pdp').html('');
        this.sku = sku;
        if (selectedPriceData === undefined){            
            //todo: what todo?
            //console.log("no price store");
        } else {
	    var item_threshold = $('#item_threshold').val();
            if(productStock===undefined || productStock==0){
                $('.item-left').html('');
            }else if(productStock>0 && productStock<=item_threshold){
                 $('.item-left').html('Hurry. Only '+productStock+' left!');
            }else{
                 $('.item-left').html('');
            }
            var priceBox = $('#price_box');
	    var price = this.convertHtmlToText(selectedPriceData.price);
            if(plp && ele) {
                ele.parents('li,div.owl-item').find('.old-price').html(this.updateRupeeSymbol()+price).css("display","inline-block");
            }
            //CDM-596 if MRP and special price same not showing strikeout price
            else if(price != this.convertHtmlToText(selectedPriceData.special_price)){
                ele.parents('.product-details').find('.old-price-pdp').html(this.updateRupeeSymbol()+price).css("display","inline-block");
            }
            $('#product_price_prefix').text('');
            var specialPriceBox = $('#special_price_box');
            $("#pre-emi-cod-shipping").css("display", "block");
            var shippingMinLowerAmount = parseInt($('#shippingMinLowerAmount').val());
            this.product_shipping_cost = selectedPriceData.product_shipping_cost;            
            if(null === selectedPriceData.special_price) { 
                specialPriceBox.text('');
                $('#special_price').hide();
                $('.discounts-pdp').html('');
                $('#product-price-box').removeClass('old');
                $('#special_price').removeClass('prd-price-new');
                $('#special_price').addClass('prd-price-new2');
                $('#price_save').css("display","none");
                $('#special_price_show').css("display","none");
                $('.pre-ext-prod-ship-charge-bg').css("display", "block");                                             
                $('#product_price_label').text(priceStoreData['price_label_without_special']);
                $('#product_special_price_prefix').text('');
                $('#product_special_price_currency').hide();
                $('#product_special_price_label').text('');
                $('#product_saving_label').text('');
                if(plp && ele) {
                    ele.parents('li,div.owl-item').find('.discounts').html('').hide();
                }else {
                    $('#product_saving_percentage').text('');
                }
                this.simpleSpecialPrice = 'NA';
                this.savedPricewithSpecial = 'NA';
                this.savedPercentwithSpecial = 'NA';
                
                simplePriceNumber = price.replace(/\,/g, '');
                this.simplePrice = simplePriceNumber;
                if(plp && ele) {
                    ele.parents('li,div.owl-item').find('.product-price').html(this.updateRupeeSymbol()+simplePriceNumber.toLocaleString('en'));
                    ele.parents('li,div.owl-item').find('.old-price').hide();
                }else {
                    ele.parents('.product-details').find('.product-price-pdp').html(this.updateRupeeSymbol()+simplePriceNumber.toLocaleString('en'));
                    ele.parents('.product-details').find('.old-price-pdp').hide();
                }
                 $.ajax({
                	url:'/cart/applylabel/',
                	  data: {"q": sku},
                	  context: document.body
                	}).done(function(rsp) {
                	   $('#product-option-delivery_time').text(rsp);
                	});
                        
                // For ajax content update on variants for wishlist
                $.ajax({
                url:$('#baseUrl').val()+'/catalog/applyVariantToWishlist/',
                  data: {"q": sku,"cq":configSku,'quick': $('.ajax-update-on-variants').hasClass('quick-catWishList')},
                  context: document.body
                }).done(function(rsp) {
                    responseData = JSON.parse(rsp);
                    if(responseData.status) {
                        $('.ajax-update-on-variants').replaceWith(responseData.content);
                        $('.whishlist-msg-box').hide();
                    }
                });
                  
                 this.actualPrice = price[1].replace(/\,/g, '');
                 this.showShippingBlock(selectedPriceData, shippingMinLowerAmount);   
            } else {                
                //: convert html entities to text via jquery's help
		var specialPrice = this.convertHtmlToText(selectedPriceData.special_price);
                specialPriceBox.text(specialPrice);
                $('#special_price').show();
                $('#product-price-box').addClass('old');
                $('#special_price').removeClass('prd-price-new2');
                $('#special_price').addClass('prd-price-new');
                $('#price_save').css("display","block");
                $('#special_price_show').css("display","none");
                $('#product_price_label').text(priceStoreData['price_label_with_special']);
                $('#product_special_price_prefix').text('');
                //$('#product_special_price_currency').text(this.convertHtmlToText(priceStoreData['currency']));
                $('#product_special_price_currency').show();
                $('#product_special_price_label').text(priceStoreData['special_price_label']);
                $('#product_saving_label').text(priceStoreData['saving_label']+' ');
                if(plp && ele) {
                    ele.parents('li,div.owl-item').find('.discounts').html(selectedPriceData['saving_percentage']+' off').css("display","inline-block");
                }else {
                    if(typeof selectedPriceData['special_price'] === 'string' && price != this.convertHtmlToText(selectedPriceData.special_price)){
                        ele.parents('.product-details').find('.discounts-pdp').html(selectedPriceData['saving_percentage']+' off').css("display","inline-block");
                    }
                }
                
                
                // For ajax content update on variants for wishlist
                $.ajax({
                url:$('#baseUrl').val()+'/catalog/applyVariantToWishlist/',
                  data: {"q": sku,"cq":configSku,'quick': $('.ajax-update-on-variants').hasClass('quick-catWishList')},
                  context: document.body
                }).done(function(rsp) {
                    responseData = JSON.parse(rsp);
                    if(responseData.status) {
                        $('.ajax-update-on-variants').replaceWith(responseData.content);
                        $('.whishlist-msg-box').hide();
                    }
                });
                
                this.savedPricewithSpecial = selectedPriceData.saved_price;
                this.savedPercentwithSpecial = selectedPriceData['saving_percentage'];
                
                $('#saved_price_box').text(selectedPriceData.saved_price);
                
                simpleSpecialPriceNumber = specialPrice.replace(/\,/g, '');
                this.simpleSpecialPrice = simpleSpecialPriceNumber;
                
                simplePriceNumber = price.replace(/\,/g, '');
                this.simplePrice = simplePriceNumber;
                if(plp && ele) {
                    ele.parents('li,div.owl-item').find('.product-price').html(this.updateRupeeSymbol()+simpleSpecialPriceNumber.toLocaleString('en'));
                }else {
                    if(price == this.convertHtmlToText(selectedPriceData.special_price)){
                        $('.old-price-pdp').html('');
                    }
                    ele.parents('.product-details').find('.product-price-pdp').html(this.updateRupeeSymbol()+simpleSpecialPriceNumber.toLocaleString('en'));
                }
                this.actualPrice = parseInt(specialPrice.replace(/\,/g,''));
                this.showShippingBlock(selectedPriceData, shippingMinLowerAmount);
            }
            if(selectedPriceData.is_supplier_display == 1 ) {
                $('#store-address').css("display","block");
                $('#supplier_address').html(selectedPriceData.supplier_address);
                $('#store-address').on('click',function(){
                   $('#supplier_address').css("display","block");
                });
                 
               
           }
            this.resetCoupon(sku);
        }
        //add specia-price class if discount available
        //CDM-741 added class for getting discount value
         if($('.product-detail-left-container .prod-price .discounts-pdp').html()!=''){
                      $('.product-price-pdp').addClass('special-price');
         }
    },
    updateRupeeSymbol : function() {
      return '<i class="custom-icon-rupee"></i>';  
    },
    offerCountdownTimer: function(timer){
        var x = null;
        if(timer == null){
            $(".offer-countdown-timer").hide();
        }else{
            $(".offer-countdown-timer").show();
            
        var timer = timer.replace(/-/g, "/");
        // Set the date we're counting down to
        var countDownDate = new Date(timer).getTime();
        // Update the count down every 1 second
        x = setInterval(function() {
          // Get today's date and time
          var now = new Date().getTime();
          // Find the distance between now and the count down date
          var distance = countDownDate - now;
          // Time calculations for days, hours, minutes and seconds
          var days = Math.floor(distance / (1000 * 60 * 60 * 24));
          var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
          var seconds = Math.floor((distance % (1000 * 60)) / 1000);
          // Display the result in the element with id="demo"
          $("#offer-countdown-timer span").remove();
          if(days == 0 && hours !== 0 && minutes !== 0){
            $("#offer-countdown-timer").append("<span>" + hours + "h "
          + minutes + "m " + seconds + "s "+'</span>');
          }else if(days == 0 && hours == 0 && minutes !== 0){
              $("#offer-countdown-timer").append("<span>"
          + minutes + "m " + seconds + "s "+'</span>');
          }else if(days == 0 && hours == 0 && minutes == 0){
              $("#offer-countdown-timer").append("<span>" + seconds + "s "+'</span>');
          }else if(seconds < 0){
            window.location.reload();
          }else{
              $("#offer-countdown-timer").append("<span>"+days + "d " + hours + "h "
          + minutes + "m " + seconds + "s "+'</span>');
          }
          // If the count down is finished, write some text 
          if (distance < 0) {
            clearInterval(x);
            $("#offer-countdown-timer span").remove();
            $(".offer-countdown-timer").hide();
          }
        }, 200);
        }

    },
    updateShowroom : function(sku) {
        $('#showroomdata').html('');
        var configSku = sku.substring(0, sku.indexOf('-'));
        var store = window.store || {};
        var showroomData = store["showroomAddress"][configSku];
        var selectedaddressData = showroomData['address'][sku];
        var shoaddr = '';
       var loginshowroom = $("#login-showroom").val();
        if(Object.getOwnPropertyNames(selectedaddressData).length>1) {
            $.each(selectedaddressData,function(index,value){ 
                if(value.status == '1') {
                      shoaddr += '<li><a class=showroomAddress showroomId='+value.showroomid+' url =" http://maps.google.com/maps?q='+value.latitude+','+value.longitude+'&z=18"><img src=" https://maps.googleapis.com/maps/api/staticmap?zoom=15&size=80x80&sensor=false&maptype=roadmap&markers=color:red|'+value.latitude+','+value.longitude+'"/><p>'+value.address+'<br />'  
                       +value.city+ '<br />'+
                      value.state+' '+value.pincode+ '</p></a></li>';
                }
                   
            });
        } 
        if(shoaddr!='') {
             $('#showroomdata').html(shoaddr);
             $('#showroom').css("display","block"); 
             var getHeight = $('.nByshowrooms').height();
            if(getHeight > 235)
            {
              $(".nByshowrooms #showroomdata").css({"height": "185px", "overflow": "auto"}); 
            }
        } else {
            $('#showroom').css("display","none"); 
        }
    },
    resetCoupon : function(sku){
        if($('#coupon_detail_'+sku).length > 0) {
            $('#coupon_box_div #discount_per').show();
            $('#special_price').show();
            var coupon = $.parseJSON($('#coupon_detail_'+sku).html());
            $('#coupon_box_div input#code').val(coupon.code);
            $('#coupon_box_div #discount_percent').html(coupon.discount_percent);
            percentText = '%';            
            // $('#coupon_block').text('Get it for '+coupon.discounted_price);
            $('#coupon_box_div #code').html(coupon.code)
            $('#coupon_box_div #discount_percent').html(coupon.discount_percent);
            var couponDescription = '';
            $.each(coupon.description,function(index,value){
                couponDescription += "<li>"+value+"</li>"
            });
            $('#coupon_box_div ul').html(couponDescription);
            if(coupon.discount_type=='fixed'){
               $('#coupon_box_div #discount_per').hide();
               percentText = '';
               priceCouponDiscount = coupon.discount_percent;
               priceCouponDiscount = priceCouponDiscount.replace('Rs.','');
              priceCouponDiscountNumber = parseInt(priceCouponDiscount.replace(/\,/g,''));
            }else{
              priceCouponDiscount = Number(Math.round((this.actualPrice*coupon.discount_percent)/100));
              priceCouponDiscountNumber = priceCouponDiscount;
			}
                $('#save_price_coupon_discount').text(priceCouponDiscount.toLocaleString('en'));
                $('#final_price_text').text(coupon.discounted_price.replace('Rs.',''));
               if(this.simpleSpecialPrice==='NA'){
                   $('#special_price').removeClass('prd-price-new2');
                   $('#special_price').addClass('prd-price-new');
                   $('#price_save').show();
                   $('#saved_price_box').text(priceCouponDiscount.toLocaleString('en'));
                   savingPercent = (percentText=='%')?'('+coupon.discount_percent+percentText+')':'';
                   $('#product_saving_percentage').text(savingPercent);
                }else if(this.simpleSpecialPrice!=='NA'){
                    $('#special_price_show').css("display","block");
                    if(this.savedPricewithSpecial!=='NA'){

                       savedPriceNumber = parseInt(this.savedPricewithSpecial.replace(/\,/g,''));
                        totalSavedPrice = parseInt(savedPriceNumber + priceCouponDiscountNumber);
                        $('#product_saving_percentage').text('('+this.savedPercentwithSpecial+' + '+coupon.discount_percent+percentText+')');
                       $('#saved_price_box').text(totalSavedPrice.toLocaleString('en'));
                    }
                $('#retail_prefix').show();
                $('#retail_text').show();
                $('#retail').text(this.savedPricewithSpecial);
                $('#product_discount_detail_box').css("display","block");       
            }
                $('#coupon_box_div').show();
        }
        else {
            $('#coupon_box_div #code').val('');
            $('#coupon_box_div').hide();
        }
    },
    showShippingBlock : function(selectedPriceData, shippingMinLowerAmount){        
        if(selectedPriceData.product_shipping_cost === 'None' && this.actualPrice < shippingMinLowerAmount){                     
                    $('#product-ship-charges').text('None');
                    $('#shipppingChargeIcon').css('display','inline-block');
                    $('#shipppingChargeIcon').on({
                        mouseover: function() { 
                            detail.hoverShowPopUp('shippingChargeInfo');
                        },
                        mouseout: function() {
                        detail.hoverLeavePopUp('shippingChargeInfo');
                    }
                    });
                 }else{
                     $('#product-ship-charges').text(selectedPriceData.product_shipping_cost);
                     $('#shipppingChargeIcon').css('display','none');
                 }
        
    },
    updateDisplayStock: function(stock){
    	while($('#selectedQuantity option').length > stock){
    		$('#selectedQuantity option').last().remove();
    	}
    },
    showEmiAvailable : function(isAvail){
        $('#emiAvailable').css('display','none');
        if(isAvail){
            $('.bookMark').css('display', 'inline-block');
            $('#emiAvailable').css('display','none');
            $('#emiOptionalAvailable').css('display','block');
            $('.pre-ext-emi-bg').html('Available');
        }else{
            $('.bookMark').css('display', 'none');
            $('#emiOptionalAvailable').css('display', 'block');
            $('.pre-ext-emi-bg').html('Not Available');
        }
    },
    updateCodLogo: function(sku) {

        var no_cod = $('#no_cod_'+sku).data('no_cod');
        var no_partpay = $('#no_partpay_'+sku).data('no_partpay');
        var gift_wrap = $('#gift_wrap_'+sku).data('gift_wrap');
        var purchase_type = $('#purchase_type_'+sku).data('purchase_type');
        $('#AddToCart').html('<span class="i-addToCart cartTxt">'+purchase_type+'</span>');
        $('#AddToCart').attr('title', purchase_type);
        if(gift_wrap === 1){
            $('#giftWrap').css('display', 'block');
        }else{
            $('#giftWrap').css('display', 'none');
        }
        
        if( no_cod == 1 ){
            $('.pre-ext-cod-bg').html('Not Available');
            
            $('#codIcon').hide();
        }else{
            $('.pre-ext-cod-bg').html('Available');
            
            $('#codIcon').show();
        }
        //InDFUR 1498
        if( no_partpay == 1 ){
            $('.pre-ext-partpay-bg').html('Not Available');
            $('#partpayIcon').hide();
        }else{
            $('.pre-ext-partpay-bg').html('Available');
            $('#partpayIcon').show();
        }
       
        var no_emi = $('#no_emi_'+sku).data('no_emi');
        var zero_percent_emi_facility = $('#zero_emi_facility_'+sku).data('zero_emi_facility');
        if( no_emi == 1 && zero_percent_emi_facility !==0){
            this.showEmiAvailable(false);
        }else if(no_emi==1 && zero_percent_emi_facility===0){
            this.showEmiAvailable(false);
            $('#zeroEmiAvail').css('display', 'block');           
        }else{  
             $('#zeroEmiAvail').css('display', 'none');
            this.jsonPaymentConfig = $.parseJSON($('#paymentConfig').val());
            var innovitiAmount = parseInt(this.jsonPaymentConfig.Innoviti_MINIMUM_ORDER_AMOUNT);                         
            if(innovitiAmount > this.actualPriceWithShipping()){                
                this.showEmiAvailable(true);
                if(zero_percent_emi_facility===0){
                          $('#zeroEmiAvail').css('display', 'block');
                     }
            }else{               
                $('.main-emi-option').hide();
                this.findLowestEmi();                 
                if(this.lowestEmiBank.length === 0){
                     this.showEmiAvailable(false);                 
                }
                else if(isNaN(this.lowestEmiRate) !== false ||  this.lowestEmiRate === 0){
                    this.showEmiAvailable(true);
                }else{
                    $('#emiOptionalAvailable').css('display','none');
                    $('#emiAvailable').css('display','block');
                    $('#lowestEmiRatePrice').html('Rs.'+this.lowestEmiRate.toLocaleString('en'));
                    $('#emiAvailableFor').html(this.maxEmi[this.lowestEmiBank]+' months with '+this.lowestEmiBank.toUpperCase()+' Bank');
                }
            }
        }
        
        var part_pay_min_amt = $('#part_pay_min_amt').data('part_pay_min_amt');
        var no_partpay_amt = $('#no_partpay_'+sku).data('no_partpay');
        if( no_partpay_amt >= part_pay_min_amt &&  no_cod == 1 )
        {
            $('.pre-ext-part-pay').show();
        }
        else
        {
            $('.pre-ext-part-pay').hide();
        }
    },
    getOfferPriceForEMI: function() {
        var sku = this.sku;
        var offerPriceText = false;
        var offerPrice = 0;
     
        if ($('#coupon_detail_' + sku).length > 0) {
            var coupon = $.parseJSON($('#coupon_detail_'+sku).text());
            offerPriceText = coupon.discounted_price;
            if (offerPriceText !== undefined) {
                price = this.convertHtmlToText(offerPriceText).split('Rs.');

                if (price[1] !== undefined) {
                    productPrice = price[1];
                    var productShippingPrice = 0;
                    strProductShppingPrice = detail.product_shipping_cost;
                    if (strProductShppingPrice != undefined && strProductShppingPrice != 'None') {
                        productShippingPrice = strProductShppingPrice.match(/\d/g);
                        productShippingPrice = parseInt(productShippingPrice.join(""));
                    }
                    productPrice = parseInt(productPrice.replace(/\,/g, ''));
                    offerPrice = productPrice + productShippingPrice;
                }
            }
        }
        return offerPrice;
    },
    findLowestEmi : function(){ 
        var jsonEmiBankDetails = this.getjsonEmiBankDetails();
        var jsonEmiBankMonths = this.getjsonEmiBankMonths();
        var actualPrice = this.actualPriceWithShipping();
        var actualOfferPrice = this.getOfferPriceForEMI();
        var jsonPaymentConfig = this.jsonPaymentConfig;
        var lowestEmiBank = '';
        var lowestEmiRate = 0;
        var lowerEmiPrice = 0;
        this.bank = {};
        this.bankOption = {};
        this.maxEmi = {};
        if(actualOfferPrice > 0){actualPrice = actualOfferPrice;}
        for(bank in  this.jsonEmiBankDetails){
            if(parseInt(jsonEmiBankDetails[bank].is_active) !== 1 || jsonEmiBankDetails[bank].page_visibilty === 2){
                    continue;
            }            
            var arr = new Array();
             for(var i = 0;  i < jsonEmiBankMonths.length; i++){
                 var emiAvailableFor = jsonEmiBankMonths[i];
                 if(jsonEmiBankDetails[bank].bank_type == 1){
                if(emiAvailableFor === 3){
                    lowerEmiPrice = parseInt(jsonPaymentConfig.Innoviti_AMOUNT_LIMIT_THREE_MONTHS);
                }else if(emiAvailableFor === 6){
                    lowerEmiPrice = parseInt(jsonPaymentConfig.Innoviti_AMOUNT_LIMIT_SIX_MONTHS);
                }else if(emiAvailableFor === 9){
                    lowerEmiPrice = parseInt(jsonPaymentConfig.Innoviti_AMOUNT_LIMIT_NINE_MONTHS);
                }else if(emiAvailableFor === 12){
                    lowerEmiPrice = parseInt(jsonPaymentConfig.Innoviti_AMOUNT_LIMIT_TWELVE_MONTHS);
                }
              }
                if(actualPrice >= lowerEmiPrice || jsonEmiBankDetails[bank].bank_type!==1){
                    if(bank === 'hdfc'){
                        if(parseInt(this.jsonPaymentConfig.Hdfc) === 1){
                            if(parseInt(this.jsonPaymentConfig.HDFC_MINIMUM_ORDER_AMOUNT_FOR_EMI) > actualPrice){
                                continue;
                            }   
                        }else{
                            continue;
                        }
                    }

                    if(jsonEmiBankDetails[bank][emiAvailableFor+'_months']){                        
                        var cashbackAt = parseFloat(jsonEmiBankDetails[bank][emiAvailableFor+'_months_cashback']);
                        var cashbackPrice = this.calculateCashback(actualPrice, cashbackAt);                                
                        var actualPriceAfterCashBack = actualPrice - cashbackPrice;                          
                        var interestAtRate = parseFloat(jsonEmiBankDetails[bank][emiAvailableFor+'_months_interest_rate']);
                        var interest = this.calculateEMIInterest(actualPriceAfterCashBack, interestAtRate, emiAvailableFor);
                        var emiRate = Math.round((actualPriceAfterCashBack + interest) / emiAvailableFor);
                        if(isNaN(emiRate) !== false){
                            continue;
                        }
                        if(lowestEmiRate === 0){
                            lowestEmiBank = bank;
                            lowestEmiRate = emiRate;
                        }else{
                            if(emiRate < lowestEmiRate){
                                lowestEmiBank = bank;
                                lowestEmiRate = emiRate;
                            }
                        }
                        var bankInfo = {};
                        bankInfo.emi = emiRate;
                        bankInfo.emiAtRate = interestAtRate;
                        bankInfo.cashbackPrice = cashbackPrice;
                        
                        arr[emiAvailableFor] = bankInfo;                        
                        this.bank[bank] = arr;
                    }                    
                    this.maxEmi[bank]= emiAvailableFor;
                }
            }
        }        
        this.lowestEmiBank = lowestEmiBank;
        this.lowestEmiRate = lowestEmiRate;
    },
    prodEmiPopUpLink : function(){      
        //$(".prodEmiTbl").find("tr:gt(0)").remove();
         var jsonEmiBankDetails = this.getjsonEmiBankDetails();
         var jsonEmiBankMonths = this.getjsonEmiBankMonths();
         var actualPrice = this.actualPriceWithShipping();
         var actualOfferPrice = this.getOfferPriceForEMI();
         if(actualOfferPrice > 0){actualPrice = actualOfferPrice;}
         $("#actEMIPrice").text(Number(actualPrice).toLocaleString("en"));
         $(".emi_table").find("tr:gt(0)").remove();
         var str = '';
        var flagtoShowLowestEmi = false;
        for(bank in detail.bank){
            
            str += '<tr class="white"><td class="pts prm pbs plm fss bankName"><div class="l-relative logo-center"><img src="'+jsonEmiBankDetails[bank].bank_logo_url+'" alt="'+bank+'" title="'+bank+'"></div></td>';
             for(var i = 0;  i < jsonEmiBankMonths.length; i++){
                 var col = jsonEmiBankMonths[i];
                            
                if(detail.bank[bank][col] && isNaN(detail.bank[bank][col].emi) === false){
                    if(detail.bank[bank][col].emi == detail.lowestEmiRate && flagtoShowLowestEmi == false){
                        str += '<td class="lowestEmi"><div>';
                        str += '<p>Rs.'+Number(detail.bank[bank][col].emi).toLocaleString("en")+' p.m.</p>';
                        str += '<p>Interest Rate '+Number(detail.bank[bank][col].emiAtRate).toLocaleString('en')+'%</p>';
                        
                        if(detail.bank[bank][col].cashbackPrice===0){}else{
                        str += '<p>Instant Cashback</p><p>Rs.'+Number(Math.round(detail.bank[bank][col].cashbackPrice)).toLocaleString('en')+'</p></div></td>';
                        }
                        flagtoShowLowestEmi = true;
                    }else{
                        str += '<td class=""><div>';
                        str += '<p>Rs. '+Number(detail.bank[bank][col].emi).toLocaleString('en')+' p.m.</p>';
                        str += '<p>Interest Rate '+Number(detail.bank[bank][col].emiAtRate).toLocaleString('en')+'%</p>';
                         if(detail.bank[bank][col].cashbackPrice===0){}else{
                        str +='<p>Instant Cashback</p><p>Rs.'+Number(Math.round(detail.bank[bank][col].cashbackPrice)).toLocaleString('en')+'</p></div></td>';
                        }   
                }
                }else{
                    str += '<td class=""><div><p></p></div></td>';
                }
            }
            str += '</tr><tr><td colspan="4" class="hblank"></td></tr>';
        } 
        $(".emi_table tr:first").after(str);
        $(".main-emi-option").show();
        $("#fade-EMI").show();
    },
            
        
            
            
    prdEmiClose : function(){
        //$('.prodEmiTblCont').hide();
        $("#fade-EMI").hide();
        $('.main-emi-option').hide();
        
        
    },    
    actualPriceWithShipping : function(){
        var productShippingPrice = 0;
        strProductShppingPrice = detail.product_shipping_cost;
        if(strProductShppingPrice != undefined && strProductShppingPrice != 'None'){
            productShippingPrice = strProductShppingPrice.match(/\d/g);
            productShippingPrice = parseInt(productShippingPrice.join(""));
        }
        return this.priceActualTobeCalcuated = this.actualPrice + productShippingPrice;
    },
    getjsonEmiBankDetails : function(){
        if(this.jsonEmiBankDetails == undefined){
            this.jsonEmiBankDetails = $.parseJSON($('#emiBankDetails').val())
        }
        return this.jsonEmiBankDetails;
    },
    getjsonEmiBankMonths : function(){
        if(this.jsonEmiBankMonths == undefined){
            this.jsonEmiBankMonths = $.parseJSON($('#emiBankMonths').val())
        }
        return this.jsonEmiBankMonths;
    },
    convertHtmlToText: function(html){
        return $('<div/>').html(html).text();
    },
    hoveremi: function(elemID){
	//show tooltip
	$('#EMIInfo').fadeIn(200);
    },
    leaveemi: function(){
        $('#EMIInfo').fadeOut(200);
    },hovercodinfo: function(elemID){
	//show tooltip
        $('#codInfo').fadeIn(200);
    },
    leavecodinfo: function(){
        $('#codInfo').fadeOut(200);
    },hoverpartpayinfo: function(elemID){
	//show tooltip
        $('#partpayInfo').fadeIn(200);
    },
    leavepartpayinfo: function(){
        $('#partpayInfo').fadeOut(200);
    },
    hoverShowPopUp: function(elemID){	
	$('#'+elemID).fadeIn(200); //show tooltip
    },
    hoverLeavePopUp: function(elemID){
        $('#'+elemID).fadeOut(200);
    },        
     updateDeliveryText: function(sku){
         var configSku = sku.substring(0, sku.indexOf('-'));
        var store = window.store || {};
        var priceStoreData = store["priceStore"][configSku];
        var selectedPriceData = priceStoreData['prices'][sku];
        if (selectedPriceData === undefined){
            //todo: what todo?
           
        } else {
            if(selectedPriceData.delivery_time_text!=null){
             $('#delivery_time_text').html(selectedPriceData.delivery_time_text);
            }else{
                 $('#delivery_time_text').html('');
            }
        }
    },
     updateDeliveryTimeAsPerPincode: function(sku){  
        var store = window.store || {};
        var stockStore = store["stockStore"];
        if (stockStore[sku] === undefined || stockStore[sku] == 0){
            
        }else{
            $( "#pincode" ).show();
            $("#skuForDeliveryEstimate").val(sku);
            $("#deliveryTextId").hide();
        }
    },
    checkBuyButton: function(sku) {
        var store = window.store || {};
        var stockStore = store["stockStore"];
        if (stockStore[sku] === undefined || stockStore[sku] == 0){
            $('#SoldOut').show();
            $('#reminder').show();
            $('#AddToCart').hide();
            $('#delivery_time_text').hide();
            $('#uiDialogBody #SoldOut').show();
            $('#uiDialogBody #pincode').hide();
            $('#uiDialogBody #delivery_time_text').hide();
            $('#uiDialogBody #AddToCart').hide();
            $('#uiDialogBody #delivery_time_text').hide();
            $('#reminderSimpleSku').val(sku);
            $("#selectedSku").val('');
            $('#product-selector-error').html($('#items-not-available').html()).fadeIn(100);
            $('#product-option-stock-hint').hide();
        } else {
            $('#product-selector-error').hide();
            $('#SoldOut').hide();
            $('#reminder').hide();
            $('#AddToCart').show();
            $('#delivery_time_text').show();
            $('#uiDialogBody #AddToCart').show();
            $('#uiDialogBody #delivery_time_text').show();
            $('#uiDialogBody #SoldOut').hide();
            $('#uiDialogBody #pincode').show();
            
        } 
    },
    setCSRFToken: function(csrfToken) {
        return this.setCSRFToken = csrfToken;
    },
    getCSRFToken: function() {
        if(this.setCSRFToken == undefined){
            this.setCSRFToken = '';
        }
        return this.setCSRFToken;
    },
    setProductSkus: function(e,s, id_customer_wishlist,variantValue) {
        id_customer_wishlist = id_customer_wishlist || false;
        variantValue = variantValue || false;
        if(typeof e !== 'string') {
            var variantSku = e.data('js-variant');
            var variantSkuValue = e.data('js-variant-value');
            var actualSku  = e.data('actual-sku');
            var selectSize= e.data('size');
            $('.sizebox2').removeClass('active');
            e.addClass('active');
        }else{
            var actualSku = e;
            var variantSku  = s;
            var variantSkuValue  = variantValue;
        }
         if (typeof e == 'object') {
            var selectSize= e.data('js-variant');       
            $('.sizebox2').each(function () {
                if ($(this).data('js-variant') == selectSize) {
                    $(this).addClass('active');
                }
            });
            
        }
        
        this.actualsku = this.wishlistSku = actualSku;
        this.variantSku = variantSku;
        this.variantSkuValue = variantSkuValue;
        if(id_customer_wishlist){
            this.idCustomerWishlist = id_customer_wishlist;
        }
    },
    setWishlistId: function(id_customer_wishlist){
        this.idCustomerWishlist = id_customer_wishlist;
    },
    // Below function used for wishlist if user click on wisglist button without selecting variants: By Naveena BT
    setProductSkusForWishlist: function(e,s) {
        if(typeof e !== 'string') {
            var variantWishListSku = e.data('js-variant');
            var actualWishListSku  = e.data('actual-sku');
            $('.sizebox2').removeClass('active');
        }else{
            var actualWishListSku = e;
            var variantWishListSku  = s;
        }
        
        if(typeof actualWishListSku == 'undefined' || actualWishListSku=='') {
            actualWishListSku=$('#configSku').val();
        }
        
        this.actualWishListSku = this.wishlistSku = actualWishListSku;
        this.variantWishListSku = variantWishListSku;
        this.isWishlistWithoutSimple=true;
    },
    getProductSkus: function() {
        return this;
    },
    removeProductSkus: function(){
        var productObj = this.getProductSkus();
        productObj.actualsku = null;
        productObj.variantSku = null;
    },
    callsitega: function(category,event,lable,link)
    {   if (typeof _gaq !== 'undefined')
        { _gaq.push(['_trackEvent', category, event, lable]); }
        
        if(link!='')
        {
            setTimeout(function(){document.location.href = link;}, 1000);
            return true;
        }
    },
    setUpdatePrice: function(element,action,isplp) {
        var variant = $(element);
        variant.on(action,function(){
            var $this = $(this);
            window.currentSku = $this.data('actual-sku');
             var variantSku = $this.data('js-variant');
             detail.updatePrice(variantSku,isplp,$this);
        });
    },
    setColorGroup: function(colorGroupUrl) {
        this.colorGroupUrl = colorGroupUrl;
    },
    getColorGroup: function() {
        if(this.colorGroupUrl){
            window.location.href = this.colorGroupUrl;
        }
    },
    //remove wishlist item on click in wishlist page.
    removeFromWishlist: function() {
       // alert(2);
       
        var productObj = this.getProductSkus();
        if(productObj.idCustomerWishlist) {
            var customerWishlistId = '';
            if(typeof productObj.idCustomerWishlist !== 'undefined'){
                var customerWishlistId = 'id_customer_wishlist='+productObj.idCustomerWishlist;
            }

            var isAccountPage = 0;
            if(jQuery('#pagename').val() === 'account/index') {
                isAccountPage = 1;
            }
            
	  var cUrl    = '/cart/removefromwishlist/?'+customerWishlistId+'&isAccountPage='+isAccountPage;
           // detail.showLoader();
         //  $('#cartMask').show();
            //Get the screen height and width
         //   var maskHeight = $(document).height();
          //  var maskWidth = $(window).width();

            //Set heigth and width to mask to fill up the whole screen
         //   $('#cartMask').css({'width':maskWidth,'height':maskHeight});

            //transition effect
         //   $('#cartMask').fadeIn(1000);
          //  $('#cartMask').fadeTo("slow",0.8);
            $("#loadId").show();
          
	  //$('#AddToCart').append('<span id="loadId"><img src="/images/local_v2/icons/loader.gif" alt="Loading.."></span>');
          
	  $.get(cUrl, function(data) {
              if($('.addtocartbutton-pdp').length==0){
                $("#loadId").hide();
                animateRemoveItemFromWishList(productObj.idCustomerWishlist);
                $('#cartMask').hide();
                //detail.hideLoader();
              }
              var responseJsonObject = jQuery.parseJSON( data );
              if(typeof responseJsonObject !== 'undefined'){
                  //cartAction.wishlistAndAddtocartResponse(responseJsonObject,responseJsonObject.removalMsg,'savelist');
              }
              if($(".whish-list-page").length !== 0) {
                $(".whish-list-page").replaceWith(responseJsonObject.content);
              }
          });
          jQuery('.wrapper.whish-list-page').siblings('.my-account').remove(); 
      }
    },
    getBopisStoreDetails: function(){
        $('.alsoAvailable-popup .global-loader-mask').show();
        bopisurl = '/bopis/bopis/getstoredetails';
        hiddenProductName = jQuery('input[name="hiddenProductName"]').val();
        hiddenProductImage = jQuery('input[name="hiddenProductImage"]').val();
        StorePin = jQuery('input[name="StorePin"]').val();
        showFirstStore = jQuery('input[name="showFirstStore"]').val();
        jQuery.ajax({
            url:bopisurl,
            type:"get",
            dataType: 'json',
            data: {'hiddenProductName':hiddenProductName,'hiddenProductImage':hiddenProductImage,'StorePin':StorePin,'showFirstStore':showFirstStore},
            success: function (data) {
                storeHtml = data.html;
                nostoreClass = '';
                var success =  $($.parseHTML(storeHtml)).filter(".store-outer.alsoAvailable-popup").html();
                $(".store-outer.alsoAvailable-popup").html(success);
                $('.scrollbox').enscroll('destroy');
                $('.scrollbox').enscroll();
                $(".store-outer.alsoAvailable-popup input:radio:first").prop("checked", true);
                if(!$('.StoreList').length){
                    $(".store-outer.alsoAvailable-popup").addClass('noStore');
                }else{
                    $(".store-outer.alsoAvailable-popup").removeClass('noStore');
                }
            }
        });
    },
        
    pdpincrementValue: function(pageType,price, specialprice, maxqtyval, configSku, simpleSku) {
        var gaTrackingObject = {}; // preparing GA tracking data
        this.pageType=pageType;
        var productObj = detail.getProductSkus();
        var store = window.store || {};
        var selectedQuantity='';
        var parentId='';
        this.skuDeatils = store[pageType+"SkuDetails"];  
        var isPdpQuickView = (this.skuDeatils['page']=='pdp' || this.skuDeatils['page'] == 'quickview') ? true :false;
        
        if(isPdpQuickView===true) {
           
          if(typeof simpleSku == 'undefined' || simpleSku == '') {
              if(typeof productObj.variantSku=='undefined' || productObj.variantSku==null) {
                    detail.setProductSkus();
                    var  productObj = detail.getProductSkus();
              }
              configSku = productObj.actualsku;  
              simpleSku = productObj.variantSku;
          }
            if($('#quickview_productdetail').length > 0){
                selectedQuantity= 'selectedQuantity_quickview';
            }else{
                selectedQuantity= 'selectedQuantity';
            }
            parentId = $('#'+selectedQuantity).parent().parent().parent().parent().attr('id');
              if($('#'+parentId+' .sizebox2.active').length==0 && $('#'+parentId+' .message1').length==0){
                $('#'+parentId+' .size').prepend('<div class="message1">Please select a size</div>');            
              }
            if($('#'+parentId+' .sizebox2').length ==1){
                var configSku  = $('#'+parentId+' .sizebox2').data('actual-sku');
                var simpleSku = $('#'+parentId+' .sizebox2').data('js-variant');
            }
        } else if(this.skuDeatils['page']=='cart') {
             var selectedQuantity= 'selectedQuantity_'+simpleSku;
             var validSelectedQuantity= 'validSelectedQuantity_'+simpleSku;
        }
        if(configSku && simpleSku) {
            maxqtyval = this.skuDeatils[configSku][simpleSku]['quantity'];
            $('#'+selectedQuantity).prop('readonly',false);
            var value = parseInt(document.getElementById(selectedQuantity).value, 10);

            value = isNaN(value) ? 0 : value;
            var tmpVal = value+1;
            if(maxqtyval == 0){
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").show();
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").text(" Stock not available");
                if(isPdpQuickView===true) {
                    $(".addtocartbutton-pdp").prop("disabled", true);
                }
            }
             else if(tmpVal > detail.MAX_STOCK_DISPLAY) {
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").show();
                if (maxqtyval <= detail.MAX_STOCK_DISPLAY){
                    $('#'+selectedQuantity).parent().parent().find(".quantity_msg").text(maxqtyval +" Stock available");
                }
                else{
                    $('#'+selectedQuantity).parent().parent().find(".quantity_msg").text("Max allowed quantity is "+detail.MAX_STOCK_DISPLAY);
                }
                
                if(isPdpQuickView===true && value <= detail.MAX_STOCK_DISPLAY ) {
                    $(".addtocartbutton-pdp").prop("disabled", false);
                } else if(isPdpQuickView===true) {
                     $(".addtocartbutton-pdp").prop("disabled", true);
                }
            }else if (value >= maxqtyval) {
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").show();
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").text(maxqtyval +" Stock available");
                if(isPdpQuickView===true && value > maxqtyval) {
                    $(".addtocartbutton-pdp").prop("disabled", true);
                }               
            } else if (value < maxqtyval) {
                value++;
                document.getElementById(selectedQuantity).value = value;
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").hide();
                //PriceUpdate(value, price, specialprice);
                if(isPdpQuickView===true) {
                    $(".addtocartbutton-pdp").prop("disabled", false);
                }
                
                if(this.skuDeatils['page']=='cart') {
                    document.getElementById(validSelectedQuantity).value = value;
                    gaTrackingObject.quantity = 1; // assigning qty for cart 
                    pageType = 'cart';
                    productObj.actualsku = configSku;
                    productObj.variantSku = simpleSku;
                    gaTrackingData = gaTracking.preparingData(gaTrackingObject,productObj,pageType)
                    if(gaTrackingData){
                        gaTracking.addToCart(gaTrackingData);
                        iZootoTracking.addToCart(gaTrackingData);
                    }
                    cartAction.cartupdateAjax();
                }
            }
        } else {
            $('#'+selectedQuantity).prop('readonly',true);
            detail.setSizeAlert(parentId);
        }
        //cart order summary for mobile
        cartOrderSummary();
   },
    pdpdecrementValue: function(pageType,price, specialprice,maxqtyval,configSku,simpleSku) {
        var gaTrackingObject = {}; // preparing GA tracking data
        var selectedQuantity;
        var parentId;
        this.pageType=pageType;
        var productObj = detail.getProductSkus();
        var store = window.store || {};
        this.skuDeatils = store[pageType+"SkuDetails"];
        var isPdpQuickView = (this.skuDeatils['page']=='pdp' || this.skuDeatils['page'] == 'quickview') ? true :false;
        
        if(isPdpQuickView===true) {           
           if(typeof simpleSku =='undefined' || simpleSku=='') {  
                if(typeof productObj.variantSku=='undefined' || productObj.variantSku==null) {
                    detail.setProductSkus();
                    var  productObj = detail.getProductSkus();
                }
                configSku = productObj.actualsku;  
                simpleSku = productObj.variantSku;
            } 
            if($('#quickview_productdetail').length > 0) {
                selectedQuantity= 'selectedQuantity_quickview';
            }else{
                selectedQuantity= 'selectedQuantity';
            }
            parentId = $('#'+selectedQuantity).parent().parent().parent().parent().attr('id');
              if($('#'+parentId+' .sizebox2.active').length==0 && $('#'+parentId+' .message1').length==0){
                $('#'+parentId+' .size').prepend('<div class="message1">Please select a size</div>');            
              }
           if($('#'+parentId+' .sizebox2').length ==1) {
                var configSku  = $('#'+parentId+' .sizebox2').data('actual-sku');
                var simpleSku = $('#'+parentId+' .sizebox2').data('js-variant');
            }
        } else if(this.skuDeatils['page']=='cart') {
             var selectedQuantity= 'selectedQuantity_'+simpleSku;
             var validSelectedQuantity= 'validSelectedQuantity_'+simpleSku;
        }
        
        if(configSku && simpleSku) {
            this.skuDeatils = store[pageType+"SkuDetails"];
            maxqtyval = this.skuDeatils[configSku][simpleSku]['quantity']; 
            $('#'+selectedQuantity).prop('readonly',false);
            var value = parseInt(document.getElementById(selectedQuantity).value, 10);
            
            var tmpVal = value;
            tmpVal--;
            if (isNaN(value)) {
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").show();
                document.getElementById(selectedQuantity).value = 1;
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").text("Value cannot be empty");
                if(isPdpQuickView===true) {
                    $(".addtocartbutton-pdp").prop("disabled", true);
                }
                //detail.PriceUpdate(1, price, specialprice);
            }
            else if (value == 0) {
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").show();
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").text( "The Quantity cannot be zero");
                if(isPdpQuickView===true) {
                    $(".addtocartbutton-pdp").prop("disabled", true);
                }
            } else if(maxqtyval == 0) {
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").show();
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").text(" Stock not available");
                if(isPdpQuickView===true) {
                    $(".addtocartbutton-pdp").prop("disabled", true);
                }
            }
            else if (value > 1) {
                var valTmp = value;
                valTmp--;
                
                //check the max qty
                if(value > detail.MAX_STOCK_DISPLAY) {              
                    //valid qty
                    if((valTmp <= detail.MAX_STOCK_DISPLAY && valTmp <=maxqtyval )) {
                        document.getElementById(selectedQuantity).value = valTmp;
                        if(isPdpQuickView===true) {
                            $(".addtocartbutton-pdp").prop("disabled", false);
                        }
                        $('#'+selectedQuantity).parent().parent().find(".quantity_msg").hide();
                    } else {
                    value--;
                    document.getElementById(selectedQuantity).value = value;
                    $('#'+selectedQuantity).parent().parent().find(".quantity_msg").show();
                    if (maxqtyval <= detail.MAX_STOCK_DISPLAY) {
                        $('#'+selectedQuantity).parent().parent().find(".quantity_msg").text(maxqtyval +" Stock available");
                    }
                    else{
                        $('#'+selectedQuantity).parent().parent().find(".quantity_msg").text("Max allowed quantity is "+detail.MAX_STOCK_DISPLAY);
                    }
                    if(isPdpQuickView===true) {
                        $(".addtocartbutton-pdp").prop("disabled", true);
                    }
                }
                
                } 
                else if (valTmp > parseInt(maxqtyval)) {
                 $('#'+selectedQuantity).parent().parent().find(".quantity_msg").show();
                 $('#'+selectedQuantity).parent().parent().find(".quantity_msg").text( maxqtyval+" Stock available");
                 if(isPdpQuickView===true) {
                    $(".addtocartbutton-pdp").prop("disabled", true);
                }
                document.getElementById(selectedQuantity).value = valTmp;
            } else {                               
                    value--;
                    document.getElementById(selectedQuantity).value = value;
                    $('#'+selectedQuantity).parent().parent().find(".quantity_msg").hide();
                    //detail.PriceUpdate(value, price, specialprice);
                    if(isPdpQuickView===true) {
                        $(".addtocartbutton-pdp").prop("disabled", false);
                    }                    
                    if(this.skuDeatils['page']=='cart') { 
                        document.getElementById(validSelectedQuantity).value = value;
                        gaTrackingObject.quantity = 1; // assigning qty for cart 
                        pageType = 'cart';
                        productObj.actualsku = configSku;
                        productObj.variantSku = simpleSku;
                        gaTrackingData = gaTracking.preparingData(gaTrackingObject,productObj,pageType)
                        if(gaTrackingData){
                            gaTracking.removeFromCart(gaTrackingData);
                        }
                        cartAction.cartupdateAjax();
                    }
            }
            } else if (tmpVal >= maxqtyval) {
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").show();
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").text(maxqtyval +" Stock available");
                if(isPdpQuickView===true && tmpVal > maxqtyval) {
                    $(".addtocartbutton-pdp").prop("disabled", true);
                } else {
                    $(".addtocartbutton-pdp").prop("disabled", false);
                }
                value--;
                document.getElementById(selectedQuantity).value = value;
            } else {
                //detail.PriceUpdate(1, price, specialprice);
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").text("");
                $(".addtocartbutton-pdp").prop("disabled", false);

            }        
        }else {
            $('#'+selectedQuantity).prop('readonly',true);
            detail.setSizeAlert(parentId);
        }
        //cart order summary for mobile
         cartOrderSummary();
     },
    pdpquant_valid :function(pageType,price, specialprice,maxqtyval,configSku,simpleSku) {
        this.pageType=pageType;
        var productObj = detail.getProductSkus();
        var store = window.store || {};
        var selectedQuantity;        
        this.skuDeatils = store[pageType+"SkuDetails"];
        var isPdpQuickView = (this.skuDeatils['page']=='pdp' || this.skuDeatils['page'] == 'quickview') ? true :false;
        
        
        if(isPdpQuickView===true) { // single item
          if(typeof simpleSku =='undefined' || simpleSku=='') {
                if(typeof productObj.variantSku=='undefined' || productObj.variantSku==null) {
                    detail.setProductSkus();
                    var  productObj = detail.getProductSkus();
                }
                configSku = productObj.actualsku;  
                simpleSku = productObj.variantSku;
          } 
            if($('#quickview_productdetail').length > 0){
                selectedQuantity= 'selectedQuantity_quickview';
            }else{
                selectedQuantity= 'selectedQuantity';
            }
            
        }else if(this.skuDeatils['page']=='cart') { //Number of item
             var selectedQuantity= 'selectedQuantity_'+simpleSku;
             var validSelectedQuantity= 'validSelectedQuantity_'+simpleSku;
        }

        if(configSku && simpleSku) {
            var value = parseInt(document.getElementById(selectedQuantity).value);
            this.skuDeatils = store[pageType+"SkuDetails"];
            maxqtyval = this.skuDeatils[configSku][simpleSku]['quantity'];
            if (isNaN(value)) {
               $('#'+selectedQuantity).parent().parent().find(".quantity_msg").show();
                if(isPdpQuickView===true) {
                    $(".addtocartbutton-pdp").prop("disabled", true);
                }
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").text("Value cannot be empty");
                //detail.PriceUpdate(1, price, specialprice);
            }  else if (value == 0) {
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").show();
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").text("The Quantity cannot be zero");
                if(isPdpQuickView===true) {
                   $(".addtocartbutton-pdp").prop("disabled", true);
               }
            } 
            else if((value) > detail.MAX_STOCK_DISPLAY) {
                $('#'+selectedQuantity).parent().parent().find(".quantity_msg").show();
                if (maxqtyval <= detail.MAX_STOCK_DISPLAY){
                    $('#'+selectedQuantity).parent().parent().find(".quantity_msg").text(maxqtyval +" Stock available");
                }
                else{
                    $('#'+selectedQuantity).parent().parent().find(".quantity_msg").text("Max allowed quantity is "+detail.MAX_STOCK_DISPLAY);
                }
                if(isPdpQuickView===true) {
                   $(".addtocartbutton-pdp").prop("disabled", true);
                }
            } else if (value > parseInt(maxqtyval)) {
                 $('#'+selectedQuantity).parent().parent().find(".quantity_msg").show();
                 $('#'+selectedQuantity).parent().parent().find(".quantity_msg").text( maxqtyval+" Stock available");
                 if(isPdpQuickView===true) {
                    $(".addtocartbutton-pdp").prop("disabled", true);
                }
            }
            else {
                 //detail.PriceUpdate(value, price, specialprice);
                 $('#'+selectedQuantity).parent().parent().find(".quantity_msg").text("");
                 if(isPdpQuickView===true) {
                    $(".addtocartbutton-pdp").prop("disabled", false);
                }
                if(this.skuDeatils['page']=='cart') {
                    document.getElementById(validSelectedQuantity).value=value;
                    cartAction.cartupdateAjax();
                }
            }
        }
    },
    PriceUpdate: function(value, price, specialprice) {
        var newprice = parseInt(value * price);
        var newspecial_price = parseInt(value * specialprice);
        $('.price_box').text(newprice);
        $('.product_price_normal').text(newprice);
        if (window.priceflag == 1) {
            if (window.Price != null) {
                var price = parseInt(window.Price.replace(/\,/g, ''), 10);
                var newprice = parseInt(value * price);
                $('.price_box').text(newprice);
                $('.product_price_normal').text(newprice);                     
            }
            if (window.SpecialPrice != null) { 
                var specialprice = parseInt(window.SpecialPrice.replace(/\,/g, ''), 10);
                var newspecial_price = parseInt(value * specialprice);
                $('.product_price_special').text(newspecial_price);
            }
        } else {
            if(newspecial_price > 0){
                 $('.product_price_special').text(newspecial_price);
            }     
        } 
    },
    formatBadgeQty: function(badgeQty) {
        if(badgeQty == 0){
          return badgeQty;
        }
        else{
        badgeQty = badgeQty < 10 ? "0"+badgeQty : badgeQty;
        badgeQty = badgeQty > 99 ? badgeQty+"+" : badgeQty;   
        }
        return badgeQty;
    },

};


jQuery(function() { 
    var productObj = detail.getProductSkus();
    var pincode = $("#InputBoxpincode").val();
    var existPin = $("#existPin").val();		
    if(existPin == '') {
        $('.pincode_success').addClass('footer_sign_error');
    }else{
        $('.pincode_success').removeClass('footer_sign_error');
    }
    var $detailInit = $("#detailInit");
    if ($detailInit.length) {
        params = jQuery.parseJSON($detailInit.html());
        detail.init(params);
    }
    $('.popup-outer .color_outer.active a').trigger('click');
    detail.setUpdatePrice('.sizebox2.sizeboxtext','click',false);
    if($('.sizebox2.sizeboxtext.active').length) {
        $('.addtocartbutton-pdp').removeClass('add-to-bag-disble');
        $(window).load(function(){
            $('.sizebox2.sizeboxtext.active').trigger('click');
        });
     }
        detail.removeProductSkus();
        $('.product-main-headline h3 a').click(function(){
           location.href = $(this).attr('href'); 
        });
         $(document).on("click",".sizebox2",function() {
            if(!$(this).hasClass('disabled')){
                $('.product-details .size .message1').remove();
                if($(window).width()<768){
                $('.addtocartbutton-pdp').removeClass('add-to-bag-disble').removeClass('gotobag').addClass('config').html('Add to Shopping Bag');
                }
                else 
                {
                    $('.addtocartbutton-pdp').removeClass('add-to-bag-disble').removeClass('gotobag').addClass('config').html('Add to Shopping Bag');
                }
                detail.setProductSkus($(this));
            }
    });
    $('.wishlist.config').on('click',function(){
        var plpSku = $(this).attr("data-sku-plp");
        var productObj = detail.getProductSkus();
        if ($(this).attr("data-sku-plp") === 'undefined') {
            if(productObj.actualsku && productObj.variantSku) {
                wishlistClick(this);
            }else{
                // If no variants selected
                detail.setProductSkusForWishlist($('.sizebox2'));
                wishlistClick(this);
            }
        } else {
            var plpSku = $(this).attr("data-sku-plp");
            if($(this).parents('.recently-viewed').length !== 0 && typeof plpSku !== 'undefined'){
                detail.actualWishListSku = detail.wishlistSku = plpSku;
                detail.isWishlistWithoutSimple=true;
                wishlistClick(this);
            }else{
                if (productObj.actualsku && productObj.variantSku) {
                    wishlistClick(this);
                } else {
                    // If no variants selected
                    detail.setProductSkusForWishlist($('.sizebox2-'+plpSku));
                    wishlistClick(this);
                }
            }
        }
    });
    
    $('.wishlist.simple').on('click',function(){
        wishlistRender(this);
    });
    $('.addtocartbutton-pdp.config').on('click',function(){
        var productObj = detail.getProductSkus();
        var pincode = $("#InputBoxpincode").val();
		var existPin = $("#existPin").val();		
        //if(productObj.actualsku && productObj.variantSku && typeof existPin != 'undefined' && existPin != null && existPin != '' && $('.pincode_success').length!=0) {
         if(productObj.actualsku && productObj.variantSku) {
            $('.product-details .size .message1').remove();
            $('.product-details .pincode-box .message2').remove();
            searchTerm = pincode.replace(/[(?=+*'? ]/g, '');
            trimmedSearchInput = $.trim(searchTerm);
            setJCookie('pincode', trimmedSearchInput, 180);
            $('.pincode').val(trimmedSearchInput);
            $('#presentPin').val(trimmedSearchInput);
             if($('.addtocartbutton-pdp.gotobag').length>0){
                
                window.location = window.location.origin+'/cart';
             }else {
                 detail.addtocart(); 
             }
        }
        else if(productObj.actualsku && productObj.variantSku && $('.footer_sign_error').length==1 && existPin=='')
           {
				if($('.add-to').length>0 && $(window).width()<768)
				{
						if($('#InputBoxpincodeslide').hasClass('noPincodeNeed'))
						{
							$('.slideViewPort .pinCodeCheck').hide();
						}
						else {
							$('.slideViewPort .pinCodeCheck').show();
						}
						
                                                
				} else 
				{	
						$('.product-details .size .message1').remove();
						$('.message2').remove();
						
						$('.footer_sign_error, .pincode_success').addClass('shake-slow');
                                                var pincodePosTop = parseInt($('.mob-no-padding').offset().top);
                                                $('html,body').animate({scrollTop: pincodePosTop}, 1500);
                                                return false;
				}					
				}					
          else{
            //if($('.product-details .size') && $('.product-details .message1').length==0 && $('.footer_sign_error').length==1){
            if($('.product-details .size') && $('.product-details .message1').length==0){
					
                $('.product-details .size .size-left .sizebox2.sizeboxtext').first().prepend('<div class="message1" style="color:#fff;font-weight:lato;">Please select a size</div>');				
				
            }
            if($('.product-details .pincode-box') && $('.product-details .message2').length==0 && existPin==''){
                sizePopupinpdp();
                    
					//if($(window).width()>767) {
					$('.footer_sign_error, .pincode_success').addClass('shake-slow');
					return false;
                                        //}
            }
			if($('.add-to').length>0 && $(window).width()<768)
			{
				if($('#InputBoxpincodeslide').hasClass('noPincodeNeed'))
                                {
					$('.slideViewPort .pinCodeCheck').hide();
                                        $('.slideViewPort .size').addClass('noborder');
				}
                                else {
                                         $('.slideViewPort .pinCodeCheck').show();
                                         $('.slideViewPort .size').removeClass('noborder');
                                }
				
			}
            
        }
        sizePopupinpdp();
    });

 $('#sizePopup_pdpmobile .addtocartbutton-pdp').on('click', function (event) {
            if ($('#sizePopup_pdpmobile .sizebox2.active').length == 0) {
                $('#sizePopup_pdpmobile').modal('show');
                $('#sizePopup_pdpmobile .sizepoppdp_mob').prepend('<div id="send-mess" class="message1">Please select a size</div>');
            } else {
                $('#sizePopup_pdpmobile').modal('hide');
            }
            event.preventDefault();
        });
            
    
    jQuery('#wishlist-link').click(function(event) {
        // add simple sku value to the existing link with product sku
        var currentLink = $(this).attr('href');
        $(this).attr('href', currentLink + '/sku/' + $('#selectedSku').val());
    });
    $('#AddToCart,#FastLane').hover(function(){
        detail.hoveraddtocart(this.id);
    }, function(){
        detail.leavecart();
    });
    $('#delivery_time_text').hover(function(){
        detail.hoverdeliveryestimate(this.id);
    }, function(){
        detail.leavecart();
    });
    $('#FastLaneInactive').hover(function(){
    	detail.hoverInactiveFastLane(this.id);
    });
    $('#FastLaneInactive').click(function(event) {
    	event.preventDefault();
        detail.configureFastLane();
    });
    $('#FastLane').click(function(event) {
        detail.checkoutFastlane();
        event.stopPropagation();
        event.preventDefault();
    });
    $('#AddToCart').click(function(event){
        detail.addtocart();
        event.preventDefault();
    });
    $('#AddToCartFromCatalog').click(function(event){
        detail.addtocart();
        event.preventDefault();
    });
    $('.ui-tabViewNav li').click(function() {
        detail.clickTab($(this));
    });
    $('.ui-tabViewNav li a').click(function(event) {
        event.preventDefault();
		//added for appending url with # value
	//	window.location.hash = $(this).attr("href");
    });
    if ($('#click-reviews-tab').length) {
        $('#productReviewsTab').trigger('click');
    }
    if ($('#ProductRating').length && $('#ProductRating').hasClass('active')) {
        location.hash = 'rating';
    }
    $('#EmiID').hover(function(){
        detail.hoveremi(this.id);
    }, function(){
        detail.leaveemi();
    });
    
    $('#codIcon').hover(function(){
        detail.hovercodinfo(this.id);
    }, function(){
        detail.leavecodinfo();
    });
    //New partpay icon added INDFUR-1498
     $('#partpayIcon').hover(function(){
        detail.hoverpartpayinfo(this.id);
    }, function(){
        detail.leavepartpayinfo();
    });
    
    if ($('#questionFormContainer').is(":visible")){
        $('#show-faq-form').parent().hide();
    }

    $('#show-faq-form').click(function(){
    	if ($('#questionFormContainer').is(":hidden")){
    		$('#questionFormContainer').slideDown("slow");

            if ($('#show-faq-form').is(":visible")){
                $('#show-faq-form').parent().slideUp("fast");
            }
    	}	
    });
    
    $('.editIcon').live('click',function(){
       $('.Store-Pincode-Entry .storePin').val('').attr('placeholder','Your pincode');
       $('.Store-Pincode-Entry .StorePincodeCheck').attr('disabled',true);
       $('.Store-Pincode-Entry .storePinSaved,.Store-Pincode-Entry .editIcon').hide(); 
       $('.Store-Pincode-Entry .storePin,.Store-Pincode-Entry .StorePincodeCheck').show(); 
       $('.Store-Pincode-Entry .storePin').focus();
    });
    $('.alsoAvailable-popup .clos').live('click',function(){
       $(".selectedStoreBlk input:radio").prop("checked", true).trigger("click");
       bopisurl = '/bopis/bopis/getstoredetails';
        hiddenProductName = jQuery('input[name="hiddenProductName"]').val();
        hiddenProductImage = jQuery('input[name="hiddenProductImage"]').val();
        StorePin = getJCookie('location');
        showFirstStore = jQuery('input[name="showFirstStore"]').val();
        jQuery.ajax({
            url:bopisurl,
            type:"get",
            dataType: 'json',
            data: {'hiddenProductName':hiddenProductName,'hiddenProductImage':hiddenProductImage,'StorePin':StorePin,'showFirstStore':showFirstStore},
            success: function (data) {
                storeHtml = data.html;
                showContainer = false;
                if($('.store-outer.alsoAvailable-popup:visible').length){
                    showContainer = true;
                }
                var success =  $($.parseHTML(storeHtml)).filter(".store-outer.alsoAvailable-popup").html();
                $(".store-outer.alsoAvailable-popup").html(success);
                $('.scrollbox').enscroll('destroy');
                $('.scrollbox').enscroll();
                if(showContainer){
                    $('.store-outer.alsoAvailable-popup').show();
                    $(".store-outer.alsoAvailable-popup input:radio:first").prop("checked", true);
                }
                if(!$('.StoreList').length){
                    $(".store-outer.alsoAvailable-popup").addClass('noStore');
                }else{
                    $(".store-outer.alsoAvailable-popup").removeClass('noStore');
                }
            }
        });
    });
    $('.selectedStoreBlk .choose-store').live('click',function(e){
        $('.StorelistLeft').removeClass('RadioStorelistLeftBold');
        $(".store-outer.alsoAvailable-popup input:radio:first").prop("checked", true);
        $(".store-outer.alsoAvailable-popup input:radio:first").parents('.StorelistLeft').addClass('RadioStorelistLeftBold');
        e.preventDefault();
    });
	
	$('.StorelistLeft .radio-inline').live('mouseover',function(){
        $(this).parents('.StorelistLeft').addClass('StorelistLeftBold');
    });
    
    $('.StorelistLeft .radio-inline').live('mouseleave',function(){
        $(this).parents('.StorelistLeft').removeClass('StorelistLeftBold');
    });
	
    $('input[name="pickUpStore"]').live('click',function(){
        $('.StorelistLeft').removeClass('RadioStorelistLeftBold');
        $(this).parents('.StorelistLeft').addClass('RadioStorelistLeftBold');
        var getStoreCode = $(this).data('store-code');
        var getPincode = $(this).data('store-pincode');
        bopisurl = '/bopis/bopis/getsizedetails';
        jQuery.ajax({
            url:bopisurl,
            type:"get",
            dataType: 'json',
            data: {'storeCode':getStoreCode,'pincode':getPincode},
            success: function (data) {
                sizeHtml = data.html;
                $('.alsoavailable-popup-inner .available-right .size-left').html($.parseHTML(sizeHtml));
            }
        });
    });
    
    
    $('.mobile-prev-navigation').live('click',function(){
       if($('.newProductPage').length){
            localStorage.setItem( 'historyPLP', true);
            localStorage.setItem( 'isPDP', true);
        }
        window.location = document.referrer; 
    });
});
 
 var appendonce=0;
function sizePopupinpdp(){
    if ($(window).width() < 767) {
        $.fn.isOnScreen = function () {
            var win = $(window);
            var viewport = {
                top: win.scrollTop(),
                left: win.scrollLeft()
            };
            viewport.right = viewport.left + win.width();
            viewport.bottom = viewport.top + win.height();

            var bounds = this.offset();
            bounds.right = bounds.left + this.outerWidth();
            bounds.bottom = bounds.top + this.outerHeight();

            return (!(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom));

        };
        var top_of_element = $(".color-title").offset().top;
        var bottom_of_element = $(".color-title").offset().top + $(".color-title").outerHeight()+$(".size-left").offset().top;
        var bottom_of_screen = $(window).scrollTop() + window.innerHeight;
        var top_of_screen = $(window).scrollTop();
        if ($('.message1').length >= 1) {
            if ((bottom_of_screen > top_of_element) && (top_of_screen < bottom_of_element)) {
                if (($('.color-title').isOnScreen())) {
                    $('#sizePopup_pdpmobile').modal('hide');
                    var sizePositioncc = $('.color-swatch').offset().top;
                    $("html, body").animate({scrollTop: sizePositioncc}, 500);
                }
                if (!($('.color-title').isOnScreen())) {
                    $('#sizePopup_pdpmobile').modal('hide');
                    var sizePositioncc = $('.color-swatch').offset().top;
                    $("html, body").animate({scrollTop: sizePositioncc}, 500);
                }
            } else {
                $('#sizePopup_pdpmobile').modal({
                    show: true,
                });

                if (appendonce <= 0) {
                    var sizeInnerHtml = $('.size-left').html();
                    $('.sizepoppdp_mob').append(sizeInnerHtml);
                    appendonce++;
                }
            }
            return false;
        }

    }
}
//New catalog page- addtocart INDFUR-978
function callAddtocart(configSku, selectedSku, id_customer_wishlist,variantValue) {
  id_customer_wishlist = id_customer_wishlist || false;
  $("#selectedSkuSelector").append("<input type='hidden' id='selectedSku' name='selectedSku' class='selectedSku' value=''>");
  detail.setProductSkus(configSku,selectedSku, id_customer_wishlist,variantValue);
  detail.addtocart();
  if($("#global_cart").length>0)
   {
	$('body,html').animate({scrollTop:0},400); 
    }
}
function deleteFromWishlist(id_customer_wishlist) {  
    detail.setWishlistId(id_customer_wishlist);
    detail.removeFromWishlist();
      
}
function newsletterRegister(){
	$("#form-register-newsletter input[name='name']").removeClass("error");
	$("#form-register-newsletter input[name='name']").removeClass("error");
	var baseUrl = $("#form-register-newsletter input[name='baseUrl']").val();
	
	$.ajax({
		  url: baseUrl+"customer/register/newsletter",
		  type: 'POST',
		  data: {
			  "YII_CSRF_TOKEN" : $("#form-register-newsletter input[name='YII_CSRF_TOKEN']").val(),
			  "name" : $("#form-register-newsletter input[name='name']").val(),
			  "email" : $("#form-register-newsletter input[name='email']").val(),
			  "is_newsletter_subscribed" : $("#form-register-newsletter input[name='is_newsletter_subscribed']").val()
		  		},
		  context: document.body,
		  success: function(rsp) {
			  var obj = jQuery.parseJSON(rsp);

			  if(obj.type == 'error'){
				  if(obj.name_error == 1)
					  $("#form-register-newsletter input[name='name']").addClass("error");
				  if(obj.email_error == 1)
					  $("#form-register-newsletter input[name='email']").addClass("error");
			  }
			  if(obj.type == 'sucess')
				  window.location.replace(baseUrl+"/customer/register/confirm");
			}
		
	});
}

//$(".imageSlider .jCarouselLite").jCarouselLite({
//    btnNext: ".imageSlider .next",
//    btnPrev: ".imageSlider .prev",
//    visible: 1,
//    speed: 500,
//    easing: "easeinout"
//});

// to open particular tab mentioned in URL as # value. 
$(function(){
	var hashStr = window.location.hash;
        if(hashStr!=''){
            var productTabIndx = $("#productAttrTab li").find("a[id='"+hashStr+"']");
            if(productTabIndx.length){
                    productTabIndx = productTabIndx.parent();
                    productTabIndx.parent().find('li').removeClass('selected');
                    productTabIndx.addClass('selected');
                    productTabIndx.parent().parent().find('.detailTab').hide();
                    productTabIndx.parent().parent().find("#"+hashStr).show();

            }
        }
	
});


function removefromcart(sku,itemPrice) {
    var url    = '/cart/removepcart/?sku='+ sku ;
    var newSubTotal = 0;
    var add_to_cart_page_rr1=$("#add_to_cart_page_rr1" ).html();
    $.get(url, function(data) {
       $('#cartMask').show();
      //Get the screen height and width
      var maskHeight = $(document).height();
      var maskWidth = $(window).width();
      
      //transition effect
      $('#cartMask').fadeIn(1000);
      $('#cartMask').fadeTo("slow",0.8);
      
      $("#perpetialCartId").html(data);
     
      setTimeout(function() {
	  $(".lightBoxNewSubConHdr").slideUp();
	  $(".lightBoxNewSubConHdrErr").slideUp();
      }, 1000);
      
      //if close is clicked
      $('.lightCartConMain .close').click(function (e) {
	$('#cartMask').hide();
	$("#perpetialInnerId").hide();
	jQuery('#AddToCart').removeAttr("disabled");
      });
      
      //if mask is clicked
      $('#cartMask').click(function () {
	$('#cartMask').hide();
	$("#perpetialInnerId").hide();
	jQuery('#AddToCart').removeAttr("disabled");
      }); 
      // * INDFUR-1511

	      var totalItems = parseInt($('#totalItems').val());
              var itmTxt= '';
              if(totalItems>0){
                
                $('#headerCartId').html(''+totalItems+itmTxt);
                var subtotal = $('#Grandtotal').val(); 
                $('#headerCartPriceId').html('  |  '+subtotal+'');
                $('#emptyBag').hide();
                $('#headerCartId').show();
                $('#headerCartPriceId').show();
              }else{
                  $('#headerCartId').hide();
                  $('#headerCartPriceId').hide();
                  $('#emptyBag').show();
              }
      $("#add_to_cart_page_rr1" ).html(add_to_cart_page_rr1);
    });
}
function updateCart(qty,configSku, selectedSku, count) {
  if (qty == '' || qty == 'undefined') {
    var select = document.getElementById("qty_"+selectedSku);
    qty = select.options[select.selectedIndex].value;
  }
  var url='';var i;
  if (count > 1) {
    for (i=1;i <= count;i++) {
      var sku = $("#sku"+i).val();
      var quantity = $("#qty"+i).val();
      if(sku != selectedSku) {
	url += '&qty_'+sku+'='+quantity;
      }
    }
  }
  var cUrl    = '/cart/perpetualcart/?p=' + configSku + '&sku=' + selectedSku + '&cartUpdate=1'+ '&qty_'+selectedSku+'=' + qty + url + '&type=perpetualcart';
  var add_to_cart_page_rr1=$("#add_to_cart_page_rr1" ).html();
  $.get(cUrl, function(data) {
    
      $('#cartMask').show();
      //Get the screen height and width
      var maskHeight = $(document).height();
      var maskWidth = $(window).width();
      
      //transition effect
      $('#cartMask').fadeIn(1000);
      $('#cartMask').fadeTo("slow",0.8);
      
      $("#perpetialCartId").html(data);
     
      setTimeout(function() {
	  $(".lightBoxNewSubConHdr").slideUp();
	  $(".lightBoxNewSubConHdrErr").slideUp();
      }, 1000);
      
      //if close is clicked
      $('.lightCartConMain .close').click(function (e) {
	$('#cartMask').hide();
	$("#perpetialInnerId").hide();
	jQuery('#AddToCart').removeAttr("disabled");
      });
      
      //if mask is clicked
      $('#cartMask').click(function () {
	$('#cartMask').hide();
	$("#perpetialInnerId").hide();
	jQuery('#AddToCart').removeAttr("disabled");
      });
      // * INDFUR-1511

	      var totalItems = parseInt($('#totalItems').val());
              var itmTxt= '';
              if(totalItems>0){
                
                $('#headerCartId').html(''+totalItems+itmTxt);
                var subtotal = $('#Grandtotal').val(); 
                $('#headerCartPriceId').html('  |  '+subtotal+'');
                $('#emptyBag').hide();
                $('#headerCartId').show();
                $('#headerCartPriceId').show();
              }else{
                  $('#headerCartId').hide();
                  $('#headerCartPriceId').hide();
                  $('#emptyBag').show();
              }
      $("#add_to_cart_page_rr1" ).html(add_to_cart_page_rr1);
  });
}
function hideLightCart() {
  $('#cartMask').hide();
  $("#perpetialInnerId").hide();
  jQuery('#AddToCart').removeAttr("disabled");
}

function playVideo() {
       $("#ProductVideos").show();
 }
 


$(document).ready(function() {
    var url=window.location.href;
    var arr=url.split('#')[1];
    if(typeof arr!=='undefined') {
        if(arr == 'view-all-color') {
            $('.color-viewall').trigger('click');
        }
        if(arr == 'size-chart') {
            $('.size-guide').trigger('click');
        }
		if(arr == 'contact' || arr == 'contact-us') {
           // $('.size-guide').trigger('click');
        }		
    }
  //setting csrf token
  if(typeof setCSRFCoupon === "function") {
       setCSRFCoupon();
  }
  
  
  //select all the a tag with name equal to modal
  $('a[name=modal]').click(function(e) {
	  //Cancel the link behavior
	  e.preventDefault();
	  
	  //Get the A tag
	  var id = $(this).attr('href');
	  var videoId = $(this).attr('id');

	  var src = 'http://www.youtube.com/v/'+ videoId +'?version=3&enablejsapi=1&rel=0';
	  var flash = '<object><embed id="playerid" allowfullscreen="true" width="100%" height="100%" allowscriptaccess="always" quality="high" bgcolor="#000000" name="playerid" style="" type="application/x-shockwave-flash" src="'+src+'"></embed></object>';
    
	  $('#flash').html(flash);

	  //Get the screen height and width
	  var maskHeight = $(document).height();
	  var maskWidth = $(window).width();

	  //Set heigth and width to mask to fill up the whole screen
	  $('#maskVideo').css({'width':maskWidth,'height':maskHeight});
	  
	  //transition effect		
	  $('#maskVideo').fadeIn(1000);	
	  $('#maskVideo').fadeTo("slow",0.8);	

	  //Get the window height and width
	  var winH = $(window).height();
	  var winW = $(window).width();
	
	  //Set the popup window to center
	  $(id).css('top',  winH/2-$(id).height()/2);
	  $(id).css('left', winW/2-$(id).width()/2);

	  //transition effect
	  $(id).fadeIn(2000); 

  });

  //if close button is clicked
  $('.windowVideo .close').click(function (e) {
	  //Cancel the link behavior
	  e.preventDefault();
	  
	  $('#maskVideo').hide();
	  $('.windowVideo').hide();
	  //alert(1);
	  var myPlayer = document.getElementById('playerid');
	  myPlayer.stopVideo();
  });		

  //if mask is clicked
  $('#maskVideo').click(function () {
	  closeVideo();
  });			

  $(document).keyup(function(e) {

	  if (e.keyCode == 27) { 
		    closeVideo();
		    }   // esc
	  });

  function closeVideo()
  {
	  $('#maskVideo').hide();
	  $('.windowVideo').hide();
          if ($('#playerid').length > 0) {
            var myPlayer = document.getElementById('playerid');
            myPlayer.stopVideo();
          }  
  }

  $(window).resize(function () {
    
      var box = $('#boxes .windowVideo');

      //Get the screen height and width
      var maskHeight = $(document).height();
      var maskWidth = $(window).width();

      //Set height and width to mask to fill up the whole screen
      $('#maskVideo').css({'width':maskWidth,'height':maskHeight});
	      
      //Get the window height and width
      var winH = $(window).height();
      var winW = $(window).width();

      //Set the popup window to center
      box.css('top',  winH/2 - box.height()/2);
      box.css('left', winW/2 - box.width()/2);
    
  });
  
});

function getQuickviewEstimate(){
	var pincode = $("#quickviewWindow").find("#InputBoxpincode").val();
    $('#quickviewWindow .product-details .pincode-box .message2').remove();
	if (typeof pincode != 'undefined'){
		var pincoderegex = /^[0-9]{6}$/
        if(!pincoderegex.test(pincode) || !$("#quickviewWindow").find('#skuForDeliveryEstimate').val() || pincode.charAt(0)=='0'){            
            $("#quickviewWindow").find(".pin-delivery").show();
           return false;
        }
	var delivery = $("#quickviewWindow").find("#InputBoxpincode").val();
        var sku = $("#quickviewWindow").find("#skuForDeliveryEstimate").val();
        var is_heavy = $("#quickviewWindow").find("#isheavy").val();
        var pincode_group = $("#quickviewWindow").find("#pincode_group").val();
        var processing_time = $("#quickviewWindow").find("#processing_time").val();
        var partpayment_limit =$("#quickviewWindow").find("#partPayment_limit").val();
        var price = $("#quickviewWindow").find("#price_Check").val();
        showHidePCLoader(true);
		$.get('/catalog/deliverydetails/delivery/'+delivery+'/sku/'+sku+'/isheavy/'+is_heavy+'/pincode_group/'+pincode_group+'/processing_time/'+processing_time+'/partpayment_limit/'+partpayment_limit+'/price/'+price+'/',function(data){
            if(data){
                showHidePCLoader(false);
                pincodeToggle(true);
                var searchTerm = pincode.replace(/[(?=+*'? ]/g, '');
                var trimmedSearchInput = $.trim(searchTerm);
                var obj = $.parseJSON(data);
                $("#quickviewWindow .pincode-bottom .pin-delivery, .pincode-bottom .pin-delivery").html(obj['del_message']);
             	$('#quickviewWindow .pin-num').removeClass('noPinCode');
				if ($("#quickviewWindow").find('.pincode_success').length) {
                    var deliveryText= $.trim($("#quickviewWindow").find('.pincode_success').html());
                    setJCookie('location', trimmedSearchInput, 180); //FW-776
					$(".pincode, .pin-num").val(trimmedSearchInput);//FW-776
					$(".pincode").removeClass('defaultPincode');
					$("#quickviewWindow #presentPin, #presentPin").val(trimmedSearchInput);//FW-776
					$("#quickviewWindow, #existPin, #existPin").val(trimmedSearchInput);//FW-776
					$("#quickviewWindow #InputBoxpincode, #InputBoxpincode").val(trimmedSearchInput);
					$("#quickviewWindow .pin-num, .pin-num").removeClass('noPinCode');
					$("#quickviewWindow .pin-num, .pin-num").html(trimmedSearchInput);
					bopisurl = '/bopis/bopis/getstoredetails';
					hiddenProductName = jQuery('input[name="hiddenProductName"]').val();
					hiddenProductImage = jQuery('input[name="hiddenProductImage"]').val();
					StorePin = getJCookie('location');
					
                }else{
                    var deliveryText= '';
					$("#quickviewWindow").find('.pincode').val('');//FW-776
					$("#quickviewWindow").find('#presentPin').val('');//FW-776
					$("#quickviewWindow").find('#existPin').val(''); //FW-776
					$("#quickviewWindow").find('#InputBoxpincode').val('');
					$("#quickviewWindow").find('.pin-num').html(pincode);
					//$('#quickviewWindow .footer_sign_error').addClass('shake-slow');
                }
                if ($('#quickviewWindow .footer_sign_error').length) {
                    var errorDeliveryText= $('#quickviewWindow .footer_sign_error').html();
                }else{
                    var errorDeliveryText= '';
                }
                togglePincodeOnWebtrekk(sku,pincode,deliveryText,errorDeliveryText);				
            }            
        });
	}
}
function getDeliveryEstimate(){
	if($('.add-to').hasClass('activeSlide'))
	   {
		   var pincode = $("#InputBoxpincodeslide").val();
	   }
	   else {
    var pincode = $("#InputBoxpincode").val();
	   }
    $('.product-details .pincode-box .message2').remove();
    detail.hoverLeavePopUp('deliveryestimate');
       if (typeof pincode != 'undefined'){
        
        var pincoderegex = /^[0-9]{6}$/
        if(!pincoderegex.test(pincode) || !$('#skuForDeliveryEstimate').val() || pincode.charAt(0)=='0'){
            //$(".pin-delivery").html('Invalid pincode').addClass( "footer_sign_error" );
            $(".pin-delivery").show();
           return false;
        }
        
       // var delivery = $("#InputBoxpincode").val();
		if($('.add-to').hasClass('activeSlide'))
	   {
		   var delivery = $("#InputBoxpincodeslide").val();
	   }
	   else {
        var delivery = $("#InputBoxpincode").val();
	   }
        var sku = $("#skuForDeliveryEstimate").val();
        var is_heavy = $("#isheavy").val();
        var pincode_group = $("#pincode_group").val();
        var processing_time = $("#processing_time").val();
        //INDFUR -1498
        var partpayment_limit =$("#partPayment_limit").val();
         var price = $("#price_Check").val();
        showHidePCLoader(true);
        $.get('/catalog/deliverydetails/delivery/'+delivery+'/sku/'+sku+'/isheavy/'+is_heavy+'/pincode_group/'+pincode_group+'/processing_time/'+processing_time+'/partpayment_limit/'+partpayment_limit+'/price/'+price+'/',function(data){
            if(data){
                showHidePCLoader(false);
                pincodeToggle(true);
                var searchTerm = pincode.replace(/[(?=+*'? ]/g, '');
                var trimmedSearchInput = $.trim(searchTerm);
                //setJCookie('location', trimmedSearchInput, 180); FW-776
                //$('.pincode').append(trimmedSearchInput).val();
                //$('.pincode').val(trimmedSearchInput); FW-776
               // $('#presentPin').val(trimmedSearchInput); FW-776
                var obj = $.parseJSON(data);				
                $(".pincode-bottom .pin-delivery").html(obj['del_message']);									
		$('.pin-num').removeClass('noPinCode').html(pincode);				
                $(".codavailText").html(obj['cod_message']);
                $(".partpayavailText").html(obj['partpay_serviceable']);
                $('#codIcon').hide();
                if($(window).width()<768 && $('.footer_sign_error').length>0 && $('.add-to').hasClass('activeSlide'))
                {
                    //$('.footer_sign_error').addClass('shake-slow');
                }
                //INDFUR-1620
                if(obj['assembly_message']!='' && obj['assembly_message']!='0'){
                    $('#assembly').show();
                    $('#assembly').html(obj['assembly_message']);
                }else{
                    $('#assembly').hide();
                    $('#assembly').html('');
                }
                //INDFUR 1498
                $('#partpayIcon').show();
                if(obj['partpay_message']!='' && obj['partpay_serviceable']!='Not Available'){
                    $('#partpayIcon').show();
                    $('#partPayText').html(obj['partpay_message']);
                }else{
                    $('#partpayIcon').hide();
                }
		
                $("#deliveryTextId").show();                
                $('#deliveryTextId .pincode_success').on({
                    mouseover: function() {
                        detail.hoverShowPopUp('deliveryestimate');
                    },
                    mouseout: function() {
                        detail.hoverLeavePopUp('deliveryestimate');
                    }
                });
                if ($('.pincode_success').length) {
                    var deliveryText= $.trim($('.pincode_success').html());
                    setJCookie('location', trimmedSearchInput, 180); //FW-776
					$('.pincode').val(trimmedSearchInput);//FW-776
					$('#presentPin').val(trimmedSearchInput);//FW-776
					$('#existPin').val(trimmedSearchInput);//FW-776
					$('#InputBoxpincode').val(trimmedSearchInput);
					$(".pincode").removeClass('defaultPincode');
                                        $('#InputBoxpincodeslide').addClass('noPincodeNeed');
                }else{
                    var deliveryText= '';
					$('.pincode').val('');//FW-776
					$('#presentPin').val('');//FW-776
					$('#existPin').val(''); //FW-776
					$('#InputBoxpincode').val('');
                                        $('#InputBoxpincodeslide').val('');
                                        $('#InputBoxpincodeslide').removeClass('noPincodeNeed');
					//$('.footer_sign_error').addClass('shake-slow');
                }
                if ($('.footer_sign_error').length) {
                    var errorDeliveryText= $('.footer_sign_error').html();
                }else{
                    var errorDeliveryText= '';
                }
                togglePincodeOnWebtrekk(sku,pincode,deliveryText,errorDeliveryText);
				$("#partpayInfo").addClass('partpayInfoPin');
                if ($('.pincode_success').length) {             
                    jQuery('#masterPincodeContainer .pdp-feature-sec .global-loader-mask').show();
                    bopisurl = '/bopis/bopis/getstoredetails';
                    hiddenProductName = jQuery('input[name="hiddenProductName"]').val();
                    hiddenProductImage = jQuery('input[name="hiddenProductImage"]').val();
                    StorePin = getJCookie('location');
                    
                }
            }            
        });
       }
   }
    
    $('#InputBoxpincode').focusin(function(){
        $(this).attr('placeholder','');
        var pincode = document.getElementById("InputBoxpincode").value;
        if(pincode.charAt(0)=='0'){
                $("#InputBoxpincode").val('');
               return false;
        }
        var pincoderegex = /^[0-9]{6}$/
        if(!pincoderegex.test(pincode)){
            $("#InputBoxpincode").val('');
           return false;
        }
    });
    $("input[name='StorePin']").live('focusin',function(){
        $(this).attr('placeholder','');
        var pincode = $(this).val();
        if(pincode.charAt(0)=='0'){
                $(this).val('');
               return false;
        }
        var pincoderegex = /^[0-9]{6}$/;
        if(!pincoderegex.test(pincode)){
            $(this).val('');
           return false;
        }
    });
    
    $('#InputBoxpincode').blur(function(){
        //$(this).attr('placeholder','Your pincode');
    });
//    $('input[name="StorePin"]').blur(function(){
//        $('.Store-Pincode-Entry .storePinSaved,.Store-Pincode-Entry .editIcon').show(); 
//        cookiePincode = $('input[name="storeCookiePincode"]').val();
//        $('.Store-Pincode-Entry .storePin,.Store-Pincode-Entry .StorePincodeCheck').hide(); 
//        $(this).val(cookiePincode);
//        $('.Store-Pincode-Entry .storePinSaved').val(cookiePincode);
//    });
//    
       
    function showHidePCLoader(status){
        if(status){
            $("#pp-pincode-loader").show();
        }else {
            $("#pp-pincode-loader").hide();
        }

    }
    $(document).ready(function(){
        var variationsku = $("#variationSkuSimple").val();
        var sku = $("#reminderSimpleSku").val();
         if(variationsku!=''){detail.checkBuyButton(variationsku);}else{detail.updateStock(sku);}
        var pincode = $("#InputBoxpincode").val();
        var qty = $("#quantityForPincode").val();
        if(pincode!=''){
            getDeliveryEstimate();
            $("#NewPincodeDeliveryEstimate").hide();
        }

        
    });

   function getReminderEstimate(){
        var email = $("#customerEmail").val();
        var email_id = $("#customerID").val();
        var remindersku = $("#reminderSimpleSku").val();
        $.get('/catalog/reminderdetails/reminderEmail/'+email+'/remindersku/'+remindersku+'/email_id/'+email_id+'/',function(data){
           if(data){
                showHidePCLoader(false);
                $('#reminderMsg').removeClass("remindermsg");
                $('#reminderMsg').addClass("footer_sign_success");
                $("#reminderMsg").html(data);
                $("#reminderMsg").show();
            }

        });
   }
   function pincodeQuickToggle(isTrue)
	{
       var delivery = $("#quickviewWindow").find("#InputBoxpincode").val();
       if(isTrue){
            $("#quickviewWindow").find('.pin-num').html(delivery);
            $("#quickviewWindow").find('.pin-num, .pin-edit').show();
            $("#quickviewWindow").find('.pincodentry, .pin-check').css('display', 'none');
       }else{	  
			$("#quickviewWindow").find('#InputBoxpincode').val('');		
            $("#quickviewWindow").find('.pin-num, .pin-edit').hide();
            $("#quickviewWindow").find('.pincodentry, .pin-check').css('display', 'block');
			$("#quickviewWindow").find('.pincodentry').addClass('hheh');
            if ($("#quickviewWindow").find('.pincodentry').val().length < 6) {
                validatePin.disableButton('.button');
            }
            else{		
                    validatePin.enableButton('.button');
            }
			$("#quickviewWindow").find('#InputBoxpincode').focus();
       }
	}	
   function pincodeToggle(isTrue){
	   if($('.add-to').hasClass('activeSlide'))
	   {
		   var delivery = $("#InputBoxpincodeslide").val();
	   }
	   else {
       var delivery = $("#InputBoxpincode").val();
	   }
       if(isTrue){
            $('.pin-num').html(delivery);
            $('.pin-num, .pin-edit').show();
            $('.pincodentry, .pin-check').css('display', 'none');
			if($(window).width()<768) {
			$('.append-button').show();
			}
       }else{	  
	    $('#InputBoxpincode, #InputBoxpincodeslide').val('');		
            $('.pin-num, .pin-edit').hide();
            $('.pincodentry, .pin-check').css('display', 'block');
			$('.pincodentry').addClass('hheh');
            if ($('.pincodentry').val().length < 6) {
                validatePin.disableButton('.button');
            }
            else{		
                    validatePin.enableButton('.button');
            }
			if($(window).width()<768) {
			$('.append-button').hide();
			}
			if($('.add-to').hasClass('activeSlide'))
			   {
				   var delivery = $("#InputBoxpincodeslide").focus();
       }
			   else {
				   var delivery = $("#InputBoxpincode").focus();
   }
       }
   }
   
 

   function togglePincodeOnWebtrekk(sku,pincode,deliveryText,errorDeliveryText){
       try{
           if(wt){
               pincode = pincode.replace(/ /g, "_");
               if(deliveryText!=''){
                   var msgArray = deliveryText.split(" in ");
                   var  msg = msgArray[1];
                   msgArray = msg.split("to");
                   msg = msgArray[0].trim();
                   msg = msg.replace(/ /g, "_");
                  
               }else{ 
                   var msg = 'do_not_deliver';
               }
               var cityParameter= sku+"|"+pincode+"|"+msg;
               wt.sendinfo({linkId:cityParameter});
               }
       }catch(e){
      
       }
   }
   function calculateHederShopingBag(){
        // * INDFUR-1511

	      var totalItems = parseInt($('#totalItems').val());
              var itmTxt= '';
              if(totalItems>0){
                
                $('#headerCartId').html(''+totalItems+itmTxt);
                var subtotal = $('#Grandtotal').val(); 
                $('#headerCartPriceId').html('  |  '+subtotal+'');
                $('#emptyBag').hide();
                $('#headerCartId').show();
                $('#headerCartPriceId').show();
              }else{
                  $('#headerCartId').hide();
                  $('#headerCartPriceId').hide();
                  $('#emptyBag').show();
              }
    }
   $('#customerEmail').keydown(function (e){
        e = e || window.event;
        var code = typeof e.which !== 'undefined' ? e.which : e.keyCode;
       if(code == 13){
            validationReminder();
        }
  });
$.fn.rand = function(){
    return this.eq(Math.floor(Math.random()*this.length));
};



// On display in store
$(".store-address h3, .store-ondemand small").hover( function () 
{ 
    var id = $(this).closest("div").attr("id");
    $("#"+id+" span").show(); 
},
 function () { 
    $(".store-address span, .store-ondemand span").hide();
 }); 
 




 $(function(){
	 $('.store-address h3').on('click', function(){
		 $(this).toggleClass('down-arrowIcon')
		 $('.store-address-toggle').slideToggle()
		 })
	 })
	 
	 
	 $(function(){	 
	 $('.avl-on-diaplay a').on('click', function(){
                if ( $(".nByshowrooms").css("display") == "none" ){
                        var sku = $('#selectedSku').val();
                        if(sku.length>0){                    
                        $.get('/mobileapi/main/OnDisplayLog?sku='+sku,function(){});                        
                    }                    
                } 
		 $('.nByshowrooms').slideToggle();
		 })
		 
		 $('.nByshowrooms small').on('click', function(){

		 //$(this).toggleClass('down-arrowIcon')
		 $('.nByshowrooms').slideUp();
		 
		 })
		 $(document.body).on('click', '.showroomAddress', function(){
                     var url = $(this).attr('url');
                     var showroomid = $(this).attr('showroomid');
                     var sku = $('#selectedSku').val();
                     $.get('/mobileapi/main/OnDisplayLog?mode=map_display&sku='+sku+'&showroomId='+showroomid,function(){});
                     var win = window.open(url, '_blank');
                     win.focus();
		 })       
        	  
	 })
         
       
 $(function(){
     embedWeb.init();
 });
 
var embedWeb = {
  init : function (){
      var embedWidth = 161;
      var embedHeight = 280;
      var embedBorder = 1;
      
       $('#embd_get_code').click(function(event){
           var baseUrl = $('input[name="baseUrl"]').val();
           var selected_sku = $('#wishlistselectedSku').val();
           if($.trim(selected_sku)!=''){ var embedSKU = selected_sku; }
           else{ var embedSKU = $("#variationSkuSimple").val(); }
           
           var embedUrl = baseUrl+'/embed?sku='+embedSKU;
           var embedCode = '<iframe src="'+embedUrl+'" style="border: '+embedBorder+'px solid #DCDCDC;"  frameborder="0" scrolling="no" width="'+embedWidth+'" height="'+embedHeight+'"></iframe>';
           
           $('#embd_popup textarea').html(embedCode);
           $("#embd_popup").show();
           $("#embd_fade_overlay").show();
           event.preventDefault();
        });
        $('#embd_fade_overlay').click(function () {
            $("#embd_fade_overlay").hide();
            $('#embd_popup').hide();
        });
        $('#embd_popup_close').click(function (event) {
            $("#embd_fade_overlay").hide();
            $('#embd_popup').hide();
            event.preventDefault();
        });
        var selectbox = $('#productOptionsWrapper select.opt-select[data-attribute="variation"]');
        selectbox.change(function(){
            var selOpt = selectbox.val();
            if($.trim(selOpt)!=''){
                $('#embd_get_code').show();
            }
            else{
                $('#embd_get_code').hide();
            }
        });
        detail.setUpdatePrice('.sizebox.sizeboxtext','hover',true);
       $('.sizeBox').live('mouseout',function(){
           if(window.currentSku) {
               var leastPriceSku = $('#'+window.currentSku+' .leastPriceSku');
               leastPriceSku.parents('li,div.owl-item').find('.product-price').hide();
               leastPriceSku.parents('li,div.owl-item').find('.old-price').hide();
               leastPriceSku.parents('li,div.owl-item').find('.discounts').hide();
               var actualPrice   = leastPriceSku.data('actual-price');
               var crossPrice    = leastPriceSku.data('cross-price');
               var discountPrice = leastPriceSku.data('discount-price');
               
               if(actualPrice) {
                    if(parseInt(actualPrice)) {
                        var actualPrice = detail.updateRupeeSymbol()+actualPrice;
                    }
                    leastPriceSku.parents('li,div.owl-item').find('.product-price').html(actualPrice).css("display","inline-block");
                }
                if(crossPrice) {
                    leastPriceSku.parents('li,div.owl-item').find('.old-price').html(detail.updateRupeeSymbol()+crossPrice).css("display","inline-block");
                }
                if(discountPrice) {
                    leastPriceSku.parents('li,div.owl-item').find('.discounts').html(discountPrice+' off').css("display","inline-block");
                }
           }
       });
  }  
};
//INDFUR-2230
$(function() {
   if ( $( ".pdpFreqCont" ).length ) {
        loadResults(0);
         $('.pdpFreqCont').scroll(function() {
           if($(".productFamilyLoading").css('display') == 'none') {
             if($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {
                 if($(".pagenum:last").length > 0 && $(".total-page").length > 0 ){
                 if(parseInt($(".pagenum:last").val()) < parseInt($(".total-page").val())) {
                         var pagenum = parseInt($(".pagenum:last").val()) + 1;
                         loadResults(pagenum);
                 }
             }
             }
           }
             }); 
    }         
    function loadResults(page) {
            $(".productFamilyLoading").show();            
            var sku = $("input[name=configSku]").val();
            var url =  '/catalog/productfamily?sku='+sku+'&page='+page;
            $.get(url, function(data) {
                data = $.parseJSON(data);
                $(".pdpFreqCont").append(data.data);
                $(".productFamilyLoading").hide();  
            });
    };       
    //INDFUR-2230
    $(document).bind('click touch', function(event) {
      if (!$(event.target).parents().addBack().is('.colorFamilyItmMoreDiv') && !$(event.target).parents().addBack().is('.colorBoxPopUp')) {
         $('.colorBoxPopUp').hide();
         
      }
    });   
    //End INDFUR-2230
});



var offermessageBobProduct = $('.product-offer').html();

if (typeof offermessageBobProduct !== 'undefined' && offermessageBobProduct.indexOf(',') > -1) {
    var offermessageBob = offermessageBobProduct;
    offermessageBob = offermessageBob.substring(0, offermessageBob.indexOf(','));
    offermessageBob = '<div class="product-offer">' + offermessageBob + '</div>';
    $('.product-offer').replaceWith(offermessageBob);
    //$('.offer_1').show();

    $('.offer_1').live('click', function () {
        offermessageBobProduct = offermessageBobProduct.split(",").join("</li><li>");

        offermessageBobProduct = '<div class="product-offer">' + offermessageBobProduct + '</div>';
        $('.product-offer').replaceWith(offermessageBobProduct);
        //$('.offer_1').hide();

    });
} else {
    var formattedString = offermessageBobProduct;
    formattedString = '<div class="product-offer">' + formattedString + '</div>';
    $('.product-offer').replaceWith(formattedString);
    //$('.offer_1').hide();
} 

$(document).ready(function() {
    var timer = $("#offer-countdown-timer").data('timer');
    detail.offerCountdownTimer(timer);
	$('.pin-num').on('click',function(){
			pincodeToggle(0);
	});
    //$('.offermessagestyle').css('width','89%');
   // $('.product-offer ul').hide();
   // $('.product-offer ul:lt(1)').show()
   $("#InputBoxpincode").keypress(function( event ) {
			  if ( event.which == 13 ) {
				 $('.pin-check').trigger('click');
				 event.preventDefault();
			  }
	});
	$("#InputBoxpincodeslide").keypress(function( event ) {
			  if ( event.which == 13 ) {
				 $('.slideViewPort .pin-check').trigger('click');
				 event.preventDefault();
			  }
	});	
	$("#mobPincode").keypress(function( event ) {
			  if ( event.which == 13 ) {
				 $(this).prop("readonly", true);
				 $('.pin_box_checkIco').trigger('click');				
				 event.preventDefault();
			  }
	});

    $('#offer_1, .offer_1').on('click', function(){
        var variantSku = $(this).data('sku');
    if($(this).hasClass('openOffer')) {
        $('.product-offer ul, .product-simple-offer-multi .product-offer1 ul').hide();
        $('.product-offer ul:lt(1), .product-simple-offer-multi .product-offer1 ul:lt(1)').show(); 
        $(this).removeClass('openOffer');
        $('.offerSimbel').html('+');
        if(variantSku != undefined && variantSku == $("#"+variantSku).attr("id")){
            $("#product-simple-offer-"+variantSku+" ul").hide();
            $("#product-simple-offer-"+variantSku+" ul:lt(1)").show();
        }
        if($('.product-offer ul').length <= 2 || $('#product-simple-offer-'+variantSku+' .product-offer1 ul').length <=2) {
        $('.offermessage').html('offer');
    } else if($('.product-offer ul').length > 2 || $('#product-simple-offer-'+variantSku+' .product-offer1 ul').length > 2) {
        $('.offermessage').html('offers');
    } else {
        
    }
        $('.offercount_number').show();
        if($('#product-simple-offer-'+variantWishListSku+' .product-offer1 ul').length <= 2) {
       $('.offermessage').html('offer');
    } else if($('#product-simple-offer-'+variantWishListSku+' .product-offer1 ul').length > 2) {
        $('.offermessage').html('offers');
    }
    }
    else {
       $('.product-offer ul, .product-simple-offer-multi .product-offer1 ul').show();
       $(this).addClass('openOffer');
       $('.offerSimbel').html('-');
       $('.offermessage').html('hide');
       $('.offercount_number').hide();
    }
    //var count_offer = $(".product-offer li").length;
    //var count = $(".product-offer ul").children().length;
    
    //console.log(count_offer);console.log(count);
});
});
function gotoMap(storeId){
    var IsLatLong=getJCookie('IsLatLong');
    var latitude=getJCookie('latitude');
    var longitude=getJCookie('longitude');
    if(IsLatLong && latitude && longitude){  
        window.open('/customer/location/map/?store_id='+storeId+'&lat='+latitude+'&long='+longitude);
    }else{
        window.open('/customer/location/map/?store_id='+storeId);
    }   
}
function animateRemoveItemFromWishList(customerWishlistId){
    var itemWidth = $("#wish_list_item_"+customerWishlistId).width();
    var itemHeight = $("#wish_list_item_"+customerWishlistId).height();
    $("#wish_list_item_"+customerWishlistId).find('.wish-list-item-box-size').css({height:itemHeight+'px',width:itemWidth+'px'});
    $("#wish_list_item_"+customerWishlistId).animate({width:"-="+itemWidth,margin:0},1000,function(){
        $("#wish_list_item_"+customerWishlistId).remove();
        //$("#wishlist_"+customerWishlistId).remove();
        
        if($('.wish-list-item').length==0){
            //facebookPixelCodeCart();
            var heightoFWishlist = $('.whish-list-page').height()+50;
            $('#content').css('min-height',heightoFWishlist+'px');
            $("html, body").animate({ scrollTop: 0 }, 600);
        }        
    });
}

// INDFUR - 1701: Show selected wishlist item in popup on catalog and product detail page
var wishlistBoxHeader = "wishlistBoxHeader";
function wishlistClick(wishlistObj,checkListPage) {
    var productImage, skuclass,configDefault;
    var productSkus = detail.getProductSkus();
    var sku = productSkus.variantSku;
    var configSku=productSkus.actualsku;
    // below condition will activate only when user click on the add to wishlist without selecting variants
    if(configSku==null && sku==null) {
         var productSkus = detail.getProductSkus();
         if(productSkus.isWishlistWithoutSimple===true) {
              var configSku=productSkus.actualWishListSku;
         }
    }
    
    var productName = jQuery(wishlistObj).data("productname");
    if(typeof sku !== 'undefined' && sku!=''){  
        if(typeof wt !== 'undefined'){
           wt.sendinfo ({linkId: "PdPAddToWishlist_"+sku});
        }   
        
        var url;
        
        if(checkListPage===true || checkListPage==='true') {
            url = '/customer/wishlist/removeAllSimple/p/'+configSku+'/sku/'+sku;
        }
        else {
            url = '/customer/wishlist/add/p/'+configSku+'/sku/'+sku;
        }
        
        // INDFUR-1778 - Wishlist popup image
        skuclass = sku+"_default";
        configDefault = configSku+"_default";
        productImage = jQuery(wishlistObj).data('productimage');
                
        // Check wishlishbutton belong to dialog box at catalog page
        var isDialogBox = jQuery(".prodWishlist").closest(".zoom-right").length;
        if ($(".loginNecessary").length > 0) {
            //Redirect login page when user click wishlist without login.
             //window.location = '/customer/account/login';
           
                var addWhislistUnlogged = $(wishlistObj).attr("data-sku-plp");
                var skuWishlistUnLogged = '';
                if(addWhislistUnlogged == undefined){
                        addWhislistUnlogged = configSku;
                }
		if($(wishlistObj).data("quickview")==1) {
			var hideAcc=true;
		}		
                var addWhislistUnloggedClass = "add-whislist-unlogged-"+addWhislistUnlogged;
                //localStorage.setItem("redirectUrl", window.location.href+"?addsaveditem="+addWhislistUnloggedClass);
                var gotoPage = window.location.href+"?addsaveditem="+addWhislistUnloggedClass;
                document.cookie = "AddWishListUrl="+gotoPage+";";
                $('.header-login-btn-std').attr('href', '/customer/account/login?redirecturl='+window.location.href+"&addsaveditems="+addWhislistUnloggedClass);
                if(oneStepCheckout.isMobile()){
		    // window.location.href = '/customer/account/login?redirecturl='+window.location.href+"&addsaveditems="+addWhislistUnloggedClass;
                    if(!hideAcc)
           		{
			     $('.mobileSignPopup').addClass('active');
                              $('.mob_overlay').addClass('displySignblock');
				$('body').addClass('overHiddenHeader');
			}else{
      			     $(".show_wishlist_msg").fadeIn('slow').animate({opacity: 1.0}, 1500).delay(1000).fadeOut('500');
			}
		}else{
			if(!hideAcc)
           		{
			     $('.mini-cart-content3').addClass('active-minicart');
			}else{
      			     $(".show_wishlist_msg").fadeIn('slow').animate({opacity: 1.0}, 1500).delay(1000).fadeOut('500');
			}
		}
		if(($(window).width()<768) && ($('.catalogdetailpage').length>0)) {
		//$('body,html').animate({scrollTop:0},400);
		}
                //console.log(window);
                
                
                var newURL = location.href.split("#")[0];
                window.history.pushState('object', document.title, newURL);
                window.location.href = window.location.href+'/#Signin-popup?redirecturl='+encodeURIComponent(window.location.href);
                  
        }
            else{
            addItemToWishlist(wishlistObj, "productWishlistBox", wishlistBoxHeader, url, productImage, productName,0);
            // The method makes ajax request to add item to wishlist
            //addItemToWishlist(event, "productWishlistBox", wishlistItemBox, url, productImage, productName,0);
            jQuery(document).on("click", ".closeWishlistBox", function(){
                 jQuery("div."+wishlistItemBox).fadeOut("slow");
            });
        }
    }    
     
 }
 function closeWishlistBoxHeader(){                
   jQuery("div#"+wishlistBoxHeader).fadeOut("slow");
 }




(function (window, document, $, undefined) {
	"use strict";

	var W = $(window),
		D = $(document),
		F = $.fancybox = function () {
			F.open.apply( this, arguments );
		},
		didUpdate = null,
		isTouch	  = document.createTouch !== undefined,

		isQuery	= function(obj) {
			return obj && obj.hasOwnProperty && obj instanceof $;
		},
		isString = function(str) {
			return str && $.type(str) === "string";
		},
		isPercentage = function(str) {
			return isString(str) && str.indexOf('%') > 0;
		},
		isScrollable = function(el) {
			return (el && !(el.style.overflow && el.style.overflow === 'hidden') && ((el.clientWidth && el.scrollWidth > el.clientWidth) || (el.clientHeight && el.scrollHeight > el.clientHeight)));
		},
		getScalar = function(orig, dim) {
			var value = parseInt(orig, 10) || 0;

			if (dim && isPercentage(orig)) {
				value = F.getViewport()[ dim ] / 100 * value;
			}

			return Math.ceil(value);
		},
		getValue = function(value, dim) {
			return getScalar(value, dim) + 'px';
		};

	$.extend(F, {
		// The current version of fancyBox
		version: '2.1.1',

		defaults: {
			padding : 15,
			margin  : 20,

			width     : 800,
			height    : 600,
			minWidth  : 100,
			minHeight : 100,
			maxWidth  : 9999,
			maxHeight : 9999,

			autoSize   : true,
			autoHeight : false,
			autoWidth  : false,

			autoResize  : !isTouch,
			autoCenter  : !isTouch,
			fitToView   : true,
			aspectRatio : false,
			topRatio    : 0.5,
			leftRatio   : 0.5,

			scrolling : 'auto', // 'auto', 'yes' or 'no'
			wrapCSS   : '',

			arrows     : true,
			closeBtn   : true,
			closeClick : false,
			nextClick  : false,
			mouseWheel : true,
			autoPlay   : false,
			playSpeed  : 3000,
			preload    : 3,
			modal      : false,
			loop       : true,

			ajax  : {
				dataType : 'html',
				headers  : { 'X-fancyBox': true }
			},
			iframe : {
				scrolling : 'auto',
				preload   : true
			},
			swf : {
				wmode: 'transparent',
				allowfullscreen   : 'true',
				allowscriptaccess : 'always'
			},

			keys  : {
				next : {
					13 : 'left', // enter
					34 : 'up',   // page down
					39 : 'left', // right arrow
					40 : 'up'    // down arrow
				},
				prev : {
					8  : 'right',  // backspace
					33 : 'down',   // page up
					37 : 'right',  // left arrow
					38 : 'down'    // up arrow
				},
				close  : [27], // escape key
				play   : [32], // space - start/stop slideshow
				toggle : [70]  // letter "f" - toggle fullscreen
			},

			direction : {
				next : 'left',
				prev : 'right'
			},

			scrollOutside  : true,

			// Override some properties
			index   : 0,
			type    : null,
			href    : null,
			content : null,
			title   : null,

			// HTML templates
			tpl: {
				wrap     : '<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',
				image    : '<img class="fancybox-image" src="{href}" alt="" />',
				iframe   : '<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0"' + ($.browser.msie ? ' allowtransparency="true"' : '') + '></iframe>',
				error    : '<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',
				closeBtn : '<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',
				next     : '<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',
				prev     : '<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'
			},

			// Properties for each animation type
			// Opening fancyBox
			openEffect  : 'fade', // 'elastic', 'fade' or 'none'
			openSpeed   : 250,
			openEasing  : 'swing',
			openOpacity : true,
			openMethod  : 'zoomIn',

			// Closing fancyBox
			closeEffect  : 'fade', // 'elastic', 'fade' or 'none'
			closeSpeed   : 250,
			closeEasing  : 'swing',
			closeOpacity : true,
			closeMethod  : 'zoomOut',

			// Changing next gallery item
			nextEffect : 'elastic', // 'elastic', 'fade' or 'none'
			nextSpeed  : 250,
			nextEasing : 'swing',
			nextMethod : 'changeIn',

			// Changing previous gallery item
			prevEffect : 'elastic', // 'elastic', 'fade' or 'none'
			prevSpeed  : 250,
			prevEasing : 'swing',
			prevMethod : 'changeOut',

			// Enable default helpers
			helpers : {
				overlay : true,
				title   : true
			},

			// Callbacks
			onCancel     : $.noop, // If canceling
			beforeLoad   : $.noop, // Before loading
			afterLoad    : $.noop, // After loading
			beforeShow   : $.noop, // Before changing in current item
			afterShow    : $.noop, // After opening
			beforeChange : $.noop, // Before changing gallery item
			beforeClose  : $.noop, // Before closing
			afterClose   : $.noop  // After closing
		},

		//Current state
		group    : {}, // Selected group
		opts     : {}, // Group options
		previous : null,  // Previous element
		coming   : null,  // Element being loaded
		current  : null,  // Currently loaded element
		isActive : false, // Is activated
		isOpen   : false, // Is currently open
		isOpened : false, // Have been fully opened at least once

		wrap  : null,
		skin  : null,
		outer : null,
		inner : null,

		player : {
			timer    : null,
			isActive : false
		},

		// Loaders
		ajaxLoad   : null,
		imgPreload : null,

		// Some collections
		transitions : {},
		helpers     : {},

		

		open: function (group, opts) {
			if (!group) {
				return;
			}

			if (!$.isPlainObject(opts)) {
				opts = {};
			}

			// Close if already active
			if (false === F.close(true)) {
				return;
			}

			// Normalize group
			if (!$.isArray(group)) {
				group = isQuery(group) ? $(group).get() : [group];
			}

			// Recheck if the type of each element is `object` and set content type (image, ajax, etc)
			$.each(group, function(i, element) {
				var obj = {},
					href,
					title,
					content,
					type,
					rez,
					hrefParts,
					selector;

				if ($.type(element) === "object") {
					// Check if is DOM element
					if (element.nodeType) {
						element = $(element);
					}

					if (isQuery(element)) {
						obj = {
							href    : element.data('fancybox-href') || element.attr('href'),
							title   : element.data('fancybox-title') || element.attr('title'),
							isDom   : true,
							element : element
						};

						if ($.metadata) {
							$.extend(true, obj, element.metadata());
						}

					} else {
						obj = element;
					}
				}

				href  = opts.href  || obj.href || (isString(element) ? element : null);
				title = opts.title !== undefined ? opts.title : obj.title || '';

				content = opts.content || obj.content;
				type    = content ? 'html' : (opts.type  || obj.type);

				if (!type && obj.isDom) {
					type = element.data('fancybox-type');

					if (!type) {
						rez  = element.prop('class').match(/fancybox\.(\w+)/);
						type = rez ? rez[1] : null;
					}
				}

				if (isString(href)) {
					// Try to guess the content type
					if (!type) {
						if (F.isImage(href)) {
							type = 'image';

						} else if (F.isSWF(href)) {
							type = 'swf';

						} else if (href.charAt(0) === '#') {
							type = 'inline';

						} else if (isString(element)) {
							type    = 'html';
							content = element;
						}
					}

					// Split url into two pieces with source url and content selector, e.g,
					// "/mypage.html #my_id" will load "/mypage.html" and display element having id "my_id"
					if (type === 'ajax') {
						hrefParts = href.split(/\s+/, 2);
						href      = hrefParts.shift();
						selector  = hrefParts.shift();
					}
				}

				if (!content) {
					if (type === 'inline') {
						if (href) {
							content = $( isString(href) ? href.replace(/.*(?=#[^\s]+$)/, '') : href ); //strip for ie7

						} else if (obj.isDom) {
							content = element;
						}

					} else if (type === 'html') {
						content = href;

					} else if (!type && !href && obj.isDom) {
						type    = 'inline';
						content = element;
					}
				}

				$.extend(obj, {
					href     : href,
					type     : type,
					content  : content,
					title    : title,
					selector : selector
				});

				group[ i ] = obj;
			});

			// Extend the defaults
			F.opts = $.extend(true, {}, F.defaults, opts);

			// All options are merged recursive except keys
			if (opts.keys !== undefined) {
				F.opts.keys = opts.keys ? $.extend({}, F.defaults.keys, opts.keys) : false;
			}

			F.group = group;

			return F._start(F.opts.index);
		},

		// Cancel image loading or abort ajax request
		cancel: function () {
			var coming = F.coming;

			if (!coming || false === F.trigger('onCancel')) {
				return;
			}

			F.hideLoading();

			if (F.ajaxLoad) {
				F.ajaxLoad.abort();
			}

			F.ajaxLoad = null;

			if (F.imgPreload) {
				F.imgPreload.onload = F.imgPreload.onerror = null;
			}

			// If the first item has been canceled, then clear everything
			if (coming.wrap) {
				coming.wrap.stop(true).trigger('onReset').remove();
			}

			if (!F.current) {
				F.trigger('afterClose');
			}

			F.coming = null;
		},

		// Start closing animation if is open; remove immediately if opening/closing
		close: function (immediately) {
			F.cancel();

			if (false === F.trigger('beforeClose')) {
				return;
			}

			F.unbindEvents();

			if (!F.isOpen || immediately === true) {
				$('.fancybox-wrap').stop(true).trigger('onReset').remove();

				F._afterZoomOut();

			} else {
				F.isOpen = F.isOpened = false;
				F.isClosing = true;

				$('.fancybox-item, .fancybox-nav').remove();

				F.wrap.stop(true, true).removeClass('fancybox-opened');

				if (F.wrap.css('position') === 'fixed') {
					F.wrap.css(F._getPosition( true ));
				}

				F.transitions[ F.current.closeMethod ]();
			}
		},

		// Manage slideshow:
		//   $.fancybox.play(); - toggle slideshow
		//   $.fancybox.play( true ); - start
		//   $.fancybox.play( false ); - stop
		play: function ( action ) {
			var clear = function () {
					clearTimeout(F.player.timer);
				},
				set = function () {
					clear();

					if (F.current && F.player.isActive) {
						F.player.timer = setTimeout(F.next, F.current.playSpeed);
					}
				},
				stop = function () {
					clear();

					$('body').unbind('.player');

					F.player.isActive = false;

					F.trigger('onPlayEnd');
				},
				start = function () {
					if (F.current && (F.current.loop || F.current.index < F.group.length - 1)) {
						F.player.isActive = true;

						$('body').bind({
							'afterShow.player onUpdate.player'   : set,
							'onCancel.player beforeClose.player' : stop,
							'beforeLoad.player' : clear
						});

						set();

						F.trigger('onPlayStart');
					}
				};

			if (action === true || (!F.player.isActive && action !== false)) {
				start();
			} else {
				stop();
			}
		},

		// Navigate to next gallery item
		next: function ( direction ) {
			var current = F.current;

			if (current) {
				if (!isString(direction)) {
					direction = current.direction.next;
				}

				F.jumpto(current.index + 1, direction, 'next');
			}
		},

		// Navigate to previous gallery item
		prev: function ( direction ) {
			var current = F.current;

			if (current) {
				if (!isString(direction)) {
					direction = current.direction.prev;
				}

				F.jumpto(current.index - 1, direction, 'prev');
			}
		},

		// Navigate to gallery item by index
		jumpto: function ( index, direction, router ) {
			var current = F.current;

			if (!current) {
				return;
			}

			index = getScalar(index);

			F.direction = direction || current.direction[ (index >= current.index ? 'next' : 'prev') ];
			F.router    = router || 'jumpto';

			if (current.loop) {
				if (index < 0) {
					index = current.group.length + (index % current.group.length);
				}

				index = index % current.group.length;
			}

			if (current.group[ index ] !== undefined) {
				F.cancel();

				F._start(index);
			}
		},

		// Center inside viewport and toggle position type to fixed or absolute if needed
		reposition: function (e, onlyAbsolute) {
			var pos;

			if (F.isOpen) {
				pos = F._getPosition(onlyAbsolute);

				if (e && e.type === 'scroll') {
					delete pos.position;

					F.wrap.stop(true, true).animate(pos, 200);

				} else {
					F.wrap.css(pos);
				}
			}
		},

		update: function (e) {
			var type = (e && e.type),
				anyway = !type || type === 'orientationchange';

			if (anyway) {
				clearTimeout(didUpdate);

				didUpdate = null;
			}

			if (!F.isOpen || didUpdate) {
				return;
			}

			// Help browser to restore document dimensions
			if (anyway || isTouch) {
				F.wrap.removeAttr('style').addClass('fancybox-tmp');

				F.trigger('onUpdate');
			}

			didUpdate = setTimeout(function() {
				var current = F.current;

				if (!current) {
					return;
				}

				F.wrap.removeClass('fancybox-tmp');

				if (type !== 'scroll') {
					F._setDimension();
				}

				if (!(type === 'scroll' && current.canShrink)) {
					F.reposition(e);
				}

				F.trigger('onUpdate');

				didUpdate = null;

			}, (isTouch ? 500 : (anyway ? 20 : 300)));
		},

		// Shrink content to fit inside viewport or restore if resized
		toggle: function ( action ) {
			if (F.isOpen) {
				F.current.fitToView = $.type(action) === "boolean" ? action : !F.current.fitToView;

				F.update();
			}
		},

		hideLoading: function () {
			D.unbind('keypress.fb');

			$('#fancybox-loading').remove();
		},

		showLoading: function () {
			var el, viewport;

			F.hideLoading();

			// If user will press the escape-button, the request will be canceled
			D.bind('keypress.fb', function(e) {
				if ((e.which || e.keyCode) === 27) {
					e.preventDefault();
					F.cancel();
				}
			});

			el = $('<div id="fancybox-loading"><div></div></div>').click(F.cancel).appendTo('body');

			if (!F.defaults.fixed) {
				viewport = F.getViewport();

				el.css({
					position : 'absolute',
					top  : (viewport.h * 0.5) + viewport.y,
					left : (viewport.w * 0.5) + viewport.x
				});
			}
		},

		getViewport: function () {
			var locked = (F.current && F.current.locked) || false,
				rez    = {
					x: W.scrollLeft(),
					y: W.scrollTop()
				};

			if (locked) {
				rez.w = locked[0].clientWidth;
				rez.h = locked[0].clientHeight;

			} else {
				// See http://bugs.jquery.com/ticket/6724
				rez.w = isTouch && window.innerWidth  ? window.innerWidth  : W.width();
				rez.h = isTouch && window.innerHeight ? window.innerHeight : W.height();
			}

			return rez;
		},

		// Unbind the keyboard / clicking actions
		unbindEvents: function () {
			if (F.wrap && isQuery(F.wrap)) {
				F.wrap.unbind('.fb');
			}

			D.unbind('.fb');
			W.unbind('.fb');
		},

		bindEvents: function () {
			var current = F.current,
				keys;

			if (!current) {
				return;
			}

			// Changing document height on iOS devices triggers a 'resize' event,
			// that can change document height... repeating infinitely
			W.bind('orientationchange.fb' + (current.autoResize ? ' resize.fb' : '' ) + (current.autoCenter && !current.locked ? ' scroll.fb' : ''), F.update);

			keys = current.keys;

			if (keys) {
				D.bind('keydown.fb', function (e) {
					var code   = e.which || e.keyCode,
						target = e.target || e.srcElement;

					// Ignore key combinations and key events within form elements
					if (!e.ctrlKey && !e.altKey && !e.shiftKey && !e.metaKey && !(target && (target.type || $(target).is('[contenteditable]')))) {
						$.each(keys, function(i, val) {
							if (current.group.length > 1 && val[ code ] !== undefined) {
								F[ i ]( val[ code ] );

								e.preventDefault();
								return false;
							}

							if ($.inArray(code, val) > -1) {
								F[ i ] ();

								e.preventDefault();
								return false;
							}
						});
					}
				});
			}

			if ($.fn.mousewheel && current.mouseWheel) {
				F.wrap.bind('mousewheel.fb', function (e, delta, deltaX, deltaY) {
					var target = e.target || null,
						parent = $(target),
						canScroll = false;

					while (parent.length) {
						if (canScroll || parent.is('.fancybox-skin') || parent.is('.fancybox-wrap')) {
							break;
						}

						canScroll = isScrollable( parent[0] );
						parent    = $(parent).parent();
					}

					if (delta !== 0 && !canScroll) {
						if (F.group.length > 1 && !current.canShrink) {
							if (deltaY > 0 || deltaX > 0) {
								F.prev( deltaY > 0 ? 'down' : 'left' );

							} else if (deltaY < 0 || deltaX < 0) {
								F.next( deltaY < 0 ? 'up' : 'right' );
							}

							e.preventDefault();
						}
					}
				});
			}
		},

		trigger: function (event, o) {
			var ret, obj = o || F.coming || F.current;

			if (!obj) {
				return;
			}

			if ($.isFunction( obj[event] )) {
				ret = obj[event].apply(obj, Array.prototype.slice.call(arguments, 1));
			}

			if (ret === false) {
				return false;
			}

			if (event === 'onCancel' && !F.isOpened) {
				F.isActive = false;
			}

			if (obj.helpers) {
				$.each(obj.helpers, function (helper, opts) {
					if (opts && F.helpers[helper] && $.isFunction(F.helpers[helper][event])) {
						opts = $.extend(true, {}, F.helpers[helper].defaults, opts);

						F.helpers[helper][event](opts, obj);
					}
				});
			}

			$.event.trigger(event + '.fb');
		},

		isImage: function (str) {
			return isString(str) && str.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$)/i);
		},

		isSWF: function (str) {
			return isString(str) && str.match(/\.(swf)((\?|#).*)?$/i);
		},

		_start: function (index) {
			var coming = {},
				obj,
				href,
				type,
				margin,
				padding;

			index = getScalar( index );
			obj   = F.group[ index ] || null;

			if (!obj) {
				return false;
			}

			coming = $.extend(true, {}, F.opts, obj);

			// Convert margin and padding properties to array - top, right, bottom, left
			margin  = coming.margin;
			padding = coming.padding;

			if ($.type(margin) === 'number') {
				coming.margin = [margin, margin, margin, margin];
			}

			if ($.type(padding) === 'number') {
				coming.padding = [padding, padding, padding, padding];
			}

			// 'modal' propery is just a shortcut
			if (coming.modal) {
				$.extend(true, coming, {
					closeBtn   : false,
					closeClick : false,
					nextClick  : false,
					arrows     : false,
					mouseWheel : false,
					keys       : null,
					helpers: {
						overlay : {
							closeClick : false
						}
					}
				});
			}

			// 'autoSize' property is a shortcut, too
			if (coming.autoSize) {
				coming.autoWidth = coming.autoHeight = true;
			}

			if (coming.width === 'auto') {
				coming.autoWidth = true;
			}

			if (coming.height === 'auto') {
				coming.autoHeight = true;
			}

			

			coming.group  = F.group;
			coming.index  = index;

			// Give a chance for callback or helpers to update coming item (type, title, etc)
			F.coming = coming;

			if (false === F.trigger('beforeLoad')) {
				F.coming = null;

				return;
			}

			type = coming.type;
			href = coming.href;

			if (!type) {
				F.coming = null;

				//If we can not determine content type then drop silently or display next/prev item if looping through gallery
				if (F.current && F.router && F.router !== 'jumpto') {
					F.current.index = index;

					return F[ F.router ]( F.direction );
				}

				return false;
			}

			F.isActive = true;

			if (type === 'image' || type === 'swf') {
				coming.autoHeight = coming.autoWidth = false;
				coming.scrolling  = 'visible';
			}

			if (type === 'image') {
				coming.aspectRatio = true;
			}

			if (type === 'iframe' && isTouch) {
				coming.scrolling = 'scroll';
			}

			// Build the neccessary markup
			coming.wrap = $(coming.tpl.wrap).addClass('fancybox-' + (isTouch ? 'mobile' : 'desktop') + ' fancybox-type-' + type + ' fancybox-tmp ' + coming.wrapCSS).appendTo( coming.parent || 'body' );

			$.extend(coming, {
				skin  : $('.fancybox-skin',  coming.wrap),
				outer : $('.fancybox-outer', coming.wrap),
				inner : $('.fancybox-inner', coming.wrap)
			});

			$.each(["Top", "Right", "Bottom", "Left"], function(i, v) {
				coming.skin.css('padding' + v, getValue(coming.padding[ i ]));
			});

			F.trigger('onReady');

			// Check before try to load; 'inline' and 'html' types need content, others - href
			if (type === 'inline' || type === 'html') {
				if (!coming.content || !coming.content.length) {
					return F._error( 'content' );
				}

			} else if (!href) {
				return F._error( 'href' );
			}

			if (type === 'image') {
				F._loadImage();

			} else if (type === 'ajax') {
				F._loadAjax();

			} else if (type === 'iframe') {
				F._loadIframe();

			} else {
				F._afterLoad();
			}
		},

		_error: function ( type ) {
			$.extend(F.coming, {
				type       : 'html',
				autoWidth  : true,
				autoHeight : true,
				minWidth   : 0,
				minHeight  : 0,
				scrolling  : 'no',
				hasError   : type,
				content    : F.coming.tpl.error
			});

			F._afterLoad();
		},

		_loadImage: function () {
			// Reset preload image so it is later possible to check "complete" property
			var img = F.imgPreload = new Image();

			img.onload = function () {
				this.onload = this.onerror = null;

				F.coming.width  = this.width;
				F.coming.height = this.height;

				F._afterLoad();
			};

			img.onerror = function () {
				this.onload = this.onerror = null;

				F._error( 'image' );
			};

			img.src = F.coming.href;

			if (img.complete === undefined || !img.complete) {
				F.showLoading();
			}
		},

		_loadAjax: function () {
			var coming = F.coming;

			F.showLoading();

			F.ajaxLoad = $.ajax($.extend({}, coming.ajax, {
				url: coming.href,
				error: function (jqXHR, textStatus) {
					if (F.coming && textStatus !== 'abort') {
						F._error( 'ajax', jqXHR );

					} else {
						F.hideLoading();
					}
				},
				success: function (data, textStatus) {
					if (textStatus === 'success') {
						coming.content = data;

						F._afterLoad();
					}
				}
			}));
		},

		_loadIframe: function() {
			var coming = F.coming,
				iframe = $(coming.tpl.iframe.replace(/\{rnd\}/g, new Date().getTime()))
					.attr('scrolling', isTouch ? 'auto' : coming.iframe.scrolling)
					.attr('src', coming.href);

			// This helps IE
			$(coming.wrap).bind('onReset', function () {
				try {
					$(this).find('iframe').hide().attr('src', '//about:blank').end().empty();
				} catch (e) {}
			});

			if (coming.iframe.preload) {
				F.showLoading();

				iframe.one('load', function() {
					$(this).data('ready', 1);

					// iOS will lose scrolling if we resize
					if (!isTouch) {
						$(this).bind('load.fb', F.update);
					}

					// Without this trick:
					//   - iframe won't scroll on iOS devices
					//   - IE7 sometimes displays empty iframe
					$(this).parents('.fancybox-wrap').width('100%').removeClass('fancybox-tmp').show();

					F._afterLoad();
				});
			}

			coming.content = iframe.appendTo( coming.inner );

			if (!coming.iframe.preload) {
				F._afterLoad();
			}
		},

		_preloadImages: function() {
			var group   = F.group,
				current = F.current,
				len     = group.length,
				cnt     = current.preload ? Math.min(current.preload, len - 1) : 0,
				item,
				i;

			for (i = 1; i <= cnt; i += 1) {
				item = group[ (current.index + i ) % len ];

				if (item.type === 'image' && item.href) {
					new Image().src = item.href;
				}
			}
		},

		_afterLoad: function () {
			var coming   = F.coming,
				previous = F.current,
				placeholder = 'fancybox-placeholder',
				current,
				content,
				type,
				scrolling,
				href,
				embed;

			F.hideLoading();

			if (!coming || F.isActive === false) {
				return;
			}

			if (false === F.trigger('afterLoad', coming, previous)) {
				coming.wrap.stop(true).trigger('onReset').remove();

				F.coming = null;

				return;
			}

			if (previous) {
				F.trigger('beforeChange', previous);

				previous.wrap.stop(true).removeClass('fancybox-opened')
					.find('.fancybox-item, .fancybox-nav')
					.remove();

				if (previous.wrap.css('position') === 'fixed') {
					previous.wrap.css(F._getPosition( true ));
				}
			}

			F.unbindEvents();

			current   = coming;
			content   = coming.content;
			type      = coming.type;
			scrolling = coming.scrolling;

			$.extend(F, {
				wrap  : current.wrap,
				skin  : current.skin,
				outer : current.outer,
				inner : current.inner,
				current  : current,
				previous : previous
			});

			href = current.href;

			switch (type) {
				case 'inline':
				case 'ajax':
				case 'html':
					if (current.selector) {
						content = $('<div>').html(content).find(current.selector);

					} else if (isQuery(content)) {
						if (!content.data(placeholder)) {
							content.data(placeholder, $('<div class="' + placeholder + '"></div>').insertAfter( content ).hide() );
						}

						content = content.show().detach();

						current.wrap.bind('onReset', function () {
							if ($(this).find(content).length) {
								content.hide().replaceAll( content.data(placeholder) ).data(placeholder, false);
							}
						});
					}
				break;

				case 'image':
					content = current.tpl.image.replace('{href}', href);
				break;

				case 'swf':
					content = '<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="' + href + '"></param>';
					embed   = '';

					$.each(current.swf, function(name, val) {
						content += '<param name="' + name + '" value="' + val + '"></param>';
						embed   += ' ' + name + '="' + val + '"';
					});

					content += '<embed src="' + href + '" type="application/x-shockwave-flash" width="100%" height="100%"' + embed + '></embed></object>';
				break;
			}

			if (!(isQuery(content) && content.parent().is(current.inner))) {
				current.inner.append( content );
			}

			// Give a chance for helpers or callbacks to update elements
			F.trigger('beforeShow');

			// Set scrolling before calculating dimensions
			current.inner.css('overflow', scrolling === 'yes' ? 'scroll' : (scrolling === 'no' ? 'hidden' : scrolling));

			// Set initial dimensions and start position
			F._setDimension();

			current.wrap.removeClass('fancybox-tmp');

			current.pos = $.extend({}, current.dim, F._getPosition( true ));

			F.isOpen = false;
			F.coming = null;

			F.bindEvents();

			if (!F.isOpened) {
				$('.fancybox-wrap').not( current.wrap ).stop(true).trigger('onReset').remove();

			} else if (previous.prevMethod) {
				F.transitions[ previous.prevMethod ]();
			}

			F.transitions[ F.isOpened ? current.nextMethod : current.openMethod ]();

			F._preloadImages();
		},

		_setDimension: function () {
			var viewport   = F.getViewport(),
				steps      = 0,
				canShrink  = false,
				canExpand  = false,
				wrap       = F.wrap,
				skin       = F.skin,
				inner      = F.inner,
				current    = F.current,
				width      = current.width,
				height     = current.height,
				minWidth   = current.minWidth,
				minHeight  = current.minHeight,
				maxWidth   = current.maxWidth,
				maxHeight  = current.maxHeight,
				scrolling  = current.scrolling,
				scrollOut  = current.scrollOutside ? current.scrollbarWidth : 0,
				margin     = current.margin,
				wMargin    = margin[1] + margin[3],
				hMargin    = margin[0] + margin[2],
				wPadding,
				hPadding,
				wSpace,
				hSpace,
				origWidth,
				origHeight,
				origMaxWidth,
				origMaxHeight,
				ratio,
				width_,
				height_,
				maxWidth_,
				maxHeight_,
				iframe,
				body;

			// Reset dimensions so we could re-check actual size
			wrap.add(skin).add(inner).width('auto').height('auto');

			wPadding = skin.outerWidth(true)  - skin.width();
			hPadding = skin.outerHeight(true) - skin.height();

			// Any space between content and viewport (margin, padding, border, title)
			wSpace = wMargin + wPadding;
			hSpace = hMargin + hPadding;

			origWidth  = isPercentage(width)  ? (viewport.w - wSpace) * getScalar(width)  / 100 : width;
			origHeight = isPercentage(height) ? (viewport.h - hSpace) * getScalar(height) / 100 : height;

			if (current.type === 'iframe') {
				iframe = current.content;

				if (current.autoHeight && iframe.data('ready') === 1) {
					try {
						if (iframe[0].contentWindow.document.location) {
							inner.width( origWidth ).height(9999);

							body = iframe.contents().find('body');

							if (scrollOut) {
								body.css('overflow-x', 'hidden');
							}

							origHeight = body.height();
						}

					} catch (e) {}
				}

			} else if (current.autoWidth || current.autoHeight) {
				inner.addClass( 'fancybox-tmp' );

				// Set width or height in case we need to calculate only one dimension
				if (!current.autoWidth) {
					inner.width( origWidth );
				}

				if (!current.autoHeight) {
					inner.height( origHeight );
				}

				if (current.autoWidth) {
					origWidth = inner.width();
				}

				if (current.autoHeight) {
					origHeight = inner.height();
				}

				inner.removeClass( 'fancybox-tmp' );
			}

			width  = getScalar( origWidth );
			height = getScalar( origHeight );

			ratio  = origWidth / origHeight;

			// Calculations for the content
			minWidth  = getScalar(isPercentage(minWidth) ? getScalar(minWidth, 'w') - wSpace : minWidth);
			maxWidth  = getScalar(isPercentage(maxWidth) ? getScalar(maxWidth, 'w') - wSpace : maxWidth);

			minHeight = getScalar(isPercentage(minHeight) ? getScalar(minHeight, 'h') - hSpace : minHeight);
			maxHeight = getScalar(isPercentage(maxHeight) ? getScalar(maxHeight, 'h') - hSpace : maxHeight);

			// These will be used to determine if wrap can fit in the viewport
			origMaxWidth  = maxWidth;
			origMaxHeight = maxHeight;

			maxWidth_  = viewport.w - wMargin;
			maxHeight_ = viewport.h - hMargin;

			if (current.aspectRatio) {
				if (width > maxWidth) {
					width  = maxWidth;
					height = width / ratio;
				}

				if (height > maxHeight) {
					height = maxHeight;
					width  = height * ratio;
				}

				if (width < minWidth) {
					width  = minWidth;
					height = width / ratio;
				}

				if (height < minHeight) {
					height = minHeight;
					width  = height * ratio;
				}

			} else {
				width  = Math.max(minWidth,  Math.min(width,  maxWidth));
				height = Math.max(minHeight, Math.min(height, maxHeight));
			}

			// Try to fit inside viewport (including the title)
			if (current.fitToView) {
				maxWidth  = Math.min(viewport.w - wSpace, maxWidth);
				maxHeight = Math.min(viewport.h - hSpace, maxHeight);

				inner.width( getScalar( width ) ).height( getScalar( height ) );

				wrap.width( getScalar( width + wPadding ) );

				// Real wrap dimensions
				width_  = wrap.width();
				height_ = wrap.height();

				if (current.aspectRatio) {
					while ((width_ > maxWidth_ || height_ > maxHeight_) && width > minWidth && height > minHeight) {
						if (steps++ > 19) {
							break;
						}

						height = Math.max(minHeight, Math.min(maxHeight, height - 10));
						width  = height * ratio;

						if (width < minWidth) {
							width  = minWidth;
							height = width / ratio;
						}

						if (width > maxWidth) {
							width  = maxWidth;
							height = width / ratio;
						}

						inner.width( getScalar( width ) ).height( getScalar( height ) );

						wrap.width( getScalar( width + wPadding ) );

						width_  = wrap.width();
						height_ = wrap.height();
					}

				} else {
					width  = Math.max(minWidth,  Math.min(width,  width  - (width_  - maxWidth_)));
					height = Math.max(minHeight, Math.min(height, height - (height_ - maxHeight_)));
				}
			}

			if (scrollOut && scrolling === 'auto' && height < origHeight && (width + wPadding + scrollOut) < maxWidth_) {
				width += scrollOut;
			}

			inner.width( getScalar( width ) ).height( getScalar( height ) );

			wrap.width( getScalar( width + wPadding ) );

			width_  = wrap.width();
			height_ = wrap.height();

			canShrink = (width_ > maxWidth_ || height_ > maxHeight_) && width > minWidth && height > minHeight;
			canExpand = current.aspectRatio ? (width < origMaxWidth && height < origMaxHeight && width < origWidth && height < origHeight) : ((width < origMaxWidth || height < origMaxHeight) && (width < origWidth || height < origHeight));

			$.extend(current, {
				dim : {
					width	: getValue( width_ ),
					height	: getValue( height_ )
				},
				origWidth  : origWidth,
				origHeight : origHeight,
				canShrink  : canShrink,
				canExpand  : canExpand,
				wPadding   : wPadding,
				hPadding   : hPadding,
				wrapSpace  : height_ - skin.outerHeight(true),
				skinSpace  : skin.height() - height
			});

			if (!iframe && current.autoHeight && height > minHeight && height < maxHeight && !canExpand) {
				inner.height('auto');
			}
		},

		_getPosition: function (onlyAbsolute) {
			var current  = F.current,
				viewport = F.getViewport(),
				margin   = current.margin,
				width    = F.wrap.width()  + margin[1] + margin[3],
				height   = F.wrap.height() + margin[0] + margin[2],
				rez      = {
					position: 'absolute',
					top  : margin[0],
					left : margin[3]
				};

			if (current.autoCenter && current.fixed && !onlyAbsolute && height <= viewport.h && width <= viewport.w) {
				rez.position = 'fixed';

			} else if (!current.locked) {
				rez.top  += viewport.y;
				rez.left += viewport.x;
			}

			rez.top  = getValue(Math.max(rez.top,  rez.top  + ((viewport.h - height) * current.topRatio)));
			rez.left = getValue(Math.max(rez.left, rez.left + ((viewport.w - width)  * current.leftRatio)));

			return rez;
		},

		_afterZoomIn: function () {
			var current = F.current;

			if (!current) {
				return;
			}

			F.isOpen = F.isOpened = true;

			F.wrap.addClass('fancybox-opened').css('overflow', 'visible');

			F.reposition();

			// Assign a click event
			if (current.closeClick || current.nextClick) {
				F.inner.css('cursor', 'pointer').bind('click.fb', function(e) {
					if (!$(e.target).is('a') && !$(e.target).parent().is('a')) {
						F[ current.closeClick ? 'close' : 'next' ]();
					}
				});
			}

			// Create a close button
			if (current.closeBtn) {
				$(current.tpl.closeBtn).appendTo(F.skin).bind('click.fb', F.close);
			}

			// Create navigation arrows
			if (current.arrows && F.group.length > 1) {
				if (current.loop || current.index > 0) {
					$(current.tpl.prev).appendTo(F.outer).bind('click.fb', F.prev);
				}

				if (current.loop || current.index < F.group.length - 1) {
					$(current.tpl.next).appendTo(F.outer).bind('click.fb', F.next);
				}
			}

			F.trigger('afterShow');

			// Stop the slideshow if this is the last item
			if (!current.loop && current.index === current.group.length - 1) {
				F.play( false );

			} else if (F.opts.autoPlay && !F.player.isActive) {
				F.opts.autoPlay = false;

				F.play();
			}
		},

		_afterZoomOut: function () {
			var current = F.current;

			$('.fancybox-wrap').stop(true).trigger('onReset').remove();

			$.extend(F, {
				group  : {},
				opts   : {},
				router : false,
				current   : null,
				isActive  : false,
				isOpened  : false,
				isOpen    : false,
				isClosing : false,
				wrap   : null,
				skin   : null,
				outer  : null,
				inner  : null
			});

			F.trigger('afterClose', current);
		}
	});

	

	F.transitions = {
		getOrigPosition: function () {
			var current  = F.current,
				element  = current.element,
				orig     = current.orig,
				pos      = {},
				width    = 50,
				height   = 50,
				hPadding = current.hPadding,
				wPadding = current.wPadding,
				viewport = F.getViewport();

			if (!orig && current.isDom && element.is(':visible')) {
				orig = element.find('img:first');

				if (!orig.length) {
					orig = element;
				}
			}

			if (isQuery(orig)) {
				pos = orig.offset();

				if (orig.is('img')) {
					width  = orig.outerWidth();
					height = orig.outerHeight();
				}

			} else {
				pos.top  = viewport.y + (viewport.h - height) * current.topRatio;
				pos.left = viewport.x + (viewport.w - width)  * current.leftRatio;
			}

			if (current.locked) {
				pos.top  -= viewport.y;
				pos.left -= viewport.x;
			}

			pos = {
				top     : getValue(pos.top  - hPadding * current.topRatio),
				left    : getValue(pos.left - wPadding * current.leftRatio),
				width   : getValue(width  + wPadding),
				height  : getValue(height + hPadding)
			};

			return pos;
		},

		step: function (now, fx) {
			var ratio,
				padding,
				value,
				prop       = fx.prop,
				current    = F.current,
				wrapSpace  = current.wrapSpace,
				skinSpace  = current.skinSpace;

			if (prop === 'width' || prop === 'height') {
				ratio = fx.end === fx.start ? 1 : (now - fx.start) / (fx.end - fx.start);

				if (F.isClosing) {
					ratio = 1 - ratio;
				}

				padding = prop === 'width' ? current.wPadding : current.hPadding;
				value   = now - padding;

				F.skin[ prop ](  getScalar( prop === 'width' ?  value : value - (wrapSpace * ratio) ) );
				F.inner[ prop ]( getScalar( prop === 'width' ?  value : value - (wrapSpace * ratio) - (skinSpace * ratio) ) );
			}
		},

		zoomIn: function () {
			var current  = F.current,
				startPos = current.pos,
				effect   = current.openEffect,
				elastic  = effect === 'elastic',
				endPos   = $.extend({opacity : 1}, startPos);

			// Remove "position" property that breaks older IE
			delete endPos.position;

			if (elastic) {
				startPos = this.getOrigPosition();

				if (current.openOpacity) {
					startPos.opacity = 0.1;
				}

			} else if (effect === 'fade') {
				startPos.opacity = 0.1;
			}

			F.wrap.css(startPos).animate(endPos, {
				duration : effect === 'none' ? 0 : current.openSpeed,
				easing   : current.openEasing,
				step     : elastic ? this.step : null,
				complete : F._afterZoomIn
			});
		},

		zoomOut: function () {
			var current  = F.current,
				effect   = current.closeEffect,
				elastic  = effect === 'elastic',
				endPos   = {opacity : 0.1};

			if (elastic) {
				endPos = this.getOrigPosition();

				if (current.closeOpacity) {
					endPos.opacity = 0.1;
				}
			}

			F.wrap.animate(endPos, {
				duration : effect === 'none' ? 0 : current.closeSpeed,
				easing   : current.closeEasing,
				step     : elastic ? this.step : null,
				complete : F._afterZoomOut
			});
		},

		changeIn: function () {
			var current   = F.current,
				effect    = current.nextEffect,
				startPos  = current.pos,
				endPos    = { opacity : 1 },
				direction = F.direction,
				distance  = 200,
				field;

			startPos.opacity = 0.1;

			if (effect === 'elastic') {
				field = direction === 'down' || direction === 'up' ? 'top' : 'left';

				if (direction === 'down' || direction === 'right') {
					startPos[ field ] = getValue(getScalar(startPos[ field ]) - distance);
					endPos[ field ]   = '+=' + distance + 'px';

				} else {
					startPos[ field ] = getValue(getScalar(startPos[ field ]) + distance);
					endPos[ field ]   = '-=' + distance + 'px';
				}
			}

			// Workaround for http://bugs.jquery.com/ticket/12273
			if (effect === 'none') {
				F._afterZoomIn();

			} else {
				F.wrap.css(startPos).animate(endPos, {
					duration : current.nextSpeed,
					easing   : current.nextEasing,
					complete : F._afterZoomIn
				});
			}
		},

		changeOut: function () {
			var previous  = F.previous,
				effect    = previous.prevEffect,
				endPos    = { opacity : 0.1 },
				direction = F.direction,
				distance  = 200;

			if (effect === 'elastic') {
				endPos[ direction === 'down' || direction === 'up' ? 'top' : 'left' ] = ( direction === 'up' || direction === 'left' ? '-' : '+' ) + '=' + distance + 'px';
			}

			previous.wrap.animate(endPos, {
				duration : effect === 'none' ? 0 : previous.prevSpeed,
				easing   : previous.prevEasing,
				complete : function () {
					$(this).trigger('onReset').remove();
				}
			});
		}
	};

	

	F.helpers.overlay = {
		defaults : {
			closeClick : true,  // close if clicking on the overlay
			speedOut   : 200,   // animation speed of fading out
			showEarly  : true,  // should be opened immediately or wait until the content is ready
			css        : {},    // custom overlay style
			locked     : true   // should be content locked into overlay
		},

		overlay : null,

		update : function () {
			var width = '100%', offsetWidth;

			// Reset width/height so it will not mess
			this.overlay.width(width).height('100%');

			// jQuery does not return reliable result for IE
			if ($.browser.msie) {
				offsetWidth = Math.max(document.documentElement.offsetWidth, document.body.offsetWidth);

				if (D.width() > offsetWidth) {
					width = D.width();
				}

			} else if (D.width() > W.width()) {
				width = D.width();
			}

			this.overlay.width(width).height(D.height());
		},

		// This is where we can manipulate DOM, because later it would cause iframes to reload
		onReady : function (opts, obj) {
			$('.fancybox-overlay').stop(true, true);

			if (!this.overlay) {
				$.extend(this, {
					overlay : $('<div class="fancybox-overlay"></div>').appendTo( obj.parent || 'body' ),
					margin  : D.height() > W.height() || $('body').css('overflow-y') === 'scroll' ? $('body').css('margin-right') : false,
					el : document.all && !document.querySelector ? $('html') : $('body')
				});
			}

			if (obj.fixed && !isTouch) {
				this.overlay.addClass('fancybox-overlay-fixed');

				if (obj.autoCenter && opts.locked) {
					obj.locked = this.overlay.append( obj.wrap );
				}
			}

			if (opts.showEarly === true) {
				this.beforeShow.apply(this, arguments);
			}
		},

		beforeShow : function(opts, obj) {
			var overlay = this.overlay.unbind('.fb').css( opts.css );

			if (opts.closeClick) {
				overlay.bind('click.fb', function(e) {
					if ($(e.target).hasClass('fancybox-overlay')) {
						F.close();
					}
				});
			}

			if (obj.fixed && !isTouch) {
				if (obj.locked) {
					this.el.addClass('fancybox-lock');

					if (this.margin !== false) {
						$('body').css('', getScalar( this.margin ) + obj.scrollbarWidth);
					}
				}

			} else {
				this.update();
			}

			overlay.show();
		},

		onUpdate : function(opts, obj) {
			if (!obj.fixed || isTouch) {
				this.update();
			}
		},

		afterClose: function (opts) {
			var that  = this,
				speed = opts.speedOut || 0;

			// Remove overlay if exists and fancyBox is not opening
			// (e.g., it is not being open using afterClose callback)
			if (that.overlay && !F.isActive) {
				that.overlay.fadeOut(speed || 0, function () {
					$('body').css('', that.margin);

					that.el.removeClass('fancybox-lock');

					that.overlay.remove();

					that.overlay = null;
				});
			}
		}
	};

	

	F.helpers.title = {
		defaults : {
			type     : 'float', // 'float', 'inside', 'outside' or 'over',
			position : 'bottom' // 'top' or 'bottom'
		},

		beforeShow: function (opts) {
			var current = F.current,
				text    = current.title,
				type    = opts.type,
				title,
				target;

			if ($.isFunction(text)) {
				text = text.call(current.element, current);
			}

			if (!isString(text) || $.trim(text) === '') {
				return;
			}

			title = $('<div class="fancybox-title fancybox-title-' + type + '-wrap">' + text + '</div>');

			switch (type) {
				case 'inside':
					target = F.skin;
				break;

				case 'outside':
					target = F.wrap;
				break;

				case 'over':
					target = F.inner;
				break;

				default: // 'float'
					target = F.skin;

					title.appendTo('body');

					if ($.browser.msie) {
						title.width( title.width() );
					}

					title.wrapInner('<span class="child"></span>');

					//Increase bottom margin so this title will also fit into viewport
					F.current.margin[2] += Math.abs( getScalar(title.css('margin-bottom')) );
				break;
			}

			title[ (opts.position === 'top' ? 'prependTo'  : 'appendTo') ](target);
		}
	};

	// jQuery plugin initialization
	$.fn.fancybox = function (options) {
		var index,
			that     = $(this),
			selector = this.selector || '',
			run      = function(e) {
				var what = $(this).blur(), idx = index, relType, relVal;

				if (!(e.ctrlKey || e.altKey || e.shiftKey || e.metaKey) && !what.is('.fancybox-wrap')) {
					relType = options.groupAttr || 'data-fancybox-group';
					relVal  = what.attr(relType);

					if (!relVal) {
						relType = 'rel';
						relVal  = what.get(0)[ relType ];
					}

					if (relVal && relVal !== '' && relVal !== 'nofollow') {
						what = selector.length ? $(selector) : that;
						what = what.filter('[' + relType + '="' + relVal + '"]');
						idx  = what.index(this);
					}

					options.index = idx;

					// Stop an event from bubbling if everything is fine
					if (F.open(what, options) !== false) {
						e.preventDefault();
					}
				}
			};

		options = options || {};
		index   = options.index || 0;

		if (!selector || options.live === false) {
			that.unbind('click.fb-start').bind('click.fb-start', run);
		} else {
			D.undelegate(selector, 'click.fb-start').delegate(selector + ":not('.fancybox-item, .fancybox-nav')", 'click.fb-start', run);
		}

		return this;
	};

	// Tests that need a body at doc ready
	D.ready(function() {
		if ( $.scrollbarWidth === undefined ) {
			// http://benalman.com/projects/jquery-misc-plugins/#scrollbarwidth
			$.scrollbarWidth = function() {
				var parent = $('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo('body'),
					child  = parent.children(),
					width  = child.innerWidth() - child.height( 99 ).innerWidth();

				parent.remove();

				return width;
			};
		}

		if ( $.support.fixedPosition === undefined ) {
			$.support.fixedPosition = (function() {
				var elem  = $('<div style="position:fixed;top:20px;"></div>').appendTo('body'),
					fixed = ( elem[0].offsetTop === 20 || elem[0].offsetTop === 15 );

				elem.remove();

				return fixed;
			}());
		}

		$.extend(F.defaults, {
			scrollbarWidth : $.scrollbarWidth(),
			fixed  : $.support.fixedPosition,
			parent : $('body')
		});
	});

}(window, document, jQuery));
var options = {
    
    skus: undefined,
    optionsStore: undefined,
    
    init: function() {
        
       $('.prd-option-item').fadeTo(0,1);
       $('.prd-option-item').removeClass('selected');
       $('.prd-option-item').removeClass('inactive');
       
       this.skus = undefined;
    },
    initStore: function() {
       var store = window.store || {};
       this.optionsStore = store["optionsStore"];
    },
    selectOptionElement : function (el) {
        $('#product-selector-error').hide();
        var attribute = $(el).data('attribute');
        var valueClass = $(el).data('value-class');
        if (attribute && valueClass)
            options.selectOption(attribute, valueClass);
    },
    selectOption: function(option, value, index) {
        //: init store
        if (this.optionsStore == undefined || this.optionsStore != store["optionsStore"]) {
            this.initStore(store);
        }
        
        //: check if option is available, stop here if it is not
        if (!this.optionsStore[option]) { 
            return; 
        }
        
        var el = $('.prd-option-collection.' + option + ' .prd-option-item.' + value);
        if (el.hasClass('inactive') || this.countAllOptions() == 1) {
            options.init();
        } else {
            $('.prd-option-collection.' + option + ' .prd-option-item').removeClass('selected');
        }
        
        el.removeClass('inactive');
        el.addClass('selected');

        
        if(this.skus == undefined) {            
            this.skus = this.optionsStore[option][value]['skus'];
        } else {
            
            
            var mySkus = this.optionsStore[option][value]['skus'];
            var intersect = {};
            
            for(var skuVal in mySkus) {
                
                if(this.skus[skuVal] != undefined) {
                    intersect[skuVal] = true;
                }
                
            }
            
            this.skus = intersect;
            
        }
        
        
        var selSkus = '';
        var selSkusCount = 0;
        
        
        var processed = 0;
        
        for(var attr in this.optionsStore) {
            
            if(attr != option) {
                
                processed++;
                
                
                var otherOption = this.optionsStore[attr];
                
                for(var val in otherOption) {
                
                    
                    var optionValueSkus = otherOption[val].skus;
                    var possible = false;
                    
                    
                    for(var s in optionValueSkus) {
                        
                        
                        if(this.skus[s] != undefined) {
                            
                            possible = true;
                            
                            if(selSkus != s) {
                                
                                selSkusCount++;
                                selSkus += s;
                                
                            }
                            
                        }
                    }
                    
                    if(possible == false) {
                        
                        $('.prd-option-collection.' + attr + ' .prd-option-item.' + val).addClass('inactive');
                        
                    }
                    
                }
                
            }
        }
        
        if(processed == 0) {
            for(var s in this.skus) {                
                selSkus = s;
                break;
            }
            selSkusCount = 1;
        }
        
        if(selSkus && selSkusCount == 1) {
            detail.selectSku(selSkus);
        }
        
    },
    
    selectDropdownOption: function(option, value, index) {
        
        if($('.prd-option-item.' + value).hasClass('inactive')) {
            return;
        }
        
        this.selectOption(option, value, index);
        $('.prd-option-title .selection-title').html(value);
        $('.prd-option-collection').removeClass('show');
        
    },
    
    countAllOptions: function() {
        var optionsCount = 0;
        for(var opt in this.optionsStore) {
            optionsCount++;
        }
        return optionsCount;
    }
    

}

$(document).ready(function(){
  var click_to_call_delay = $("#click_to_call_delay").val();
  click_to_call_delay = click_to_call_delay*1000;
  var clickToCall = setInterval(function(){
    $("#clickToCallDiv").show();
  },click_to_call_delay);
});

function submitmyform(){ 

    var token  = $("#token").val();
  
    var _cname = $('#name').val();     
    var _cmobile = $('#phone').val();
    
        if(_cmobile != '' && _cmobile != 'Mobile' && (isNaN(_cmobile) == false) && _cmobile.length >= 10 &&  _cmobile.length <= 11) {             
	 
	  var _url = '/Clickcall/Saveclickcall/?YII_CSRF_TOKEN=' + token+'&phone=' + _cmobile+ '&name=' + _cname;
	  $.ajax({
	      url: _url,
	      type: 'GET',
	      error: function(e) {
		$('#errorDiv1').show();
	      },
	      beforeSend: function() {
		$('#loadingDiv').show();
		$('#callmeDiv').hide();
	      },
	      complete: function (data) {
		$('#formDiv').hide();
		$('#successDiv').show();
		$('#loadingDiv').hide();
	      }
	  });
	} else {
	  $('#errorDiv').show().fadeOut(7000);
	}
    
    return false;
}



// jQuery hcSticky
// =============
// Version: 1.1.96
// Copyright: Some Web Media
// Author: Some Web Guy
// Author URL: http://twitter.com/some_web_guy
// Website: http://someweblog.com/
// Plugin URL: http://someweblog.com/hcsticky-jquery-floating-sticky-plugin/
// License: Released under the MIT License www.opensource.org/licenses/mit-license.php
// Description: Makes elements on your page float as you scroll

(function($, undefined){
    
    
    // check for scroll direction and speed
    var getScroll = function() {
	var pageXOffset = window.pageXOffset !== undefined ? window.pageXOffset : window.document.documentElement.scrollLeft;
	var pageYOffset = window.pageYOffset !== undefined ? window.pageYOffset : window.document.documentElement.scrollTop;
	
        if (typeof getScroll.x == 'undefined') {
            getScroll.x = pageXOffset;
            getScroll.y = pageYOffset;
        }
        if (typeof getScroll.distanceX == 'undefined') {
            getScroll.distanceX = pageXOffset;
            getScroll.distanceY = pageYOffset;
        } else {
            getScroll.distanceX = pageXOffset - getScroll.x;
            getScroll.distanceY = pageYOffset - getScroll.y;
        }
        var diffX = getScroll.x - pageXOffset,
            diffY = getScroll.y - pageYOffset;
        getScroll.direction = diffX < 0 ? 'right' :
            diffX > 0 ? 'left' :
            diffY <= 0 ? 'down' :
            diffY > 0 ? 'up' : 'first';
        getScroll.x = pageXOffset;
        getScroll.y = pageYOffset;
    };
    $(window).on('scroll', getScroll);
    
    // get original css (auto, %)
    var getCSS = function(el,style) {
	// check if we already cloned this element
        if (typeof el.cssClone == 'undefined') {
            el.cssClone = el.clone().css('display','none');
	    // change the name of cloned radio buttons, otherwise selections get screwed
	    el.cssClone.find('input:radio').attr('name','sfd4fgdf');
	    // insert clone to DOM
            el.after(el.cssClone);
        }
        var clone = el.cssClone[0];
        if(typeof style != 'undefined') {
            var value;
            if (clone.currentStyle) {
		// regex e.g. padding-left to paddingLeft
                value = clone.currentStyle[style.replace(/-\w/g, function(s){return s.toUpperCase().replace('-','')})];
            } else if (window.getComputedStyle) {
                value = document.defaultView.getComputedStyle(clone,null).getPropertyValue(style);
            }
	    // check for margin:auto
            value = (/margin/g.test(style)) ? ((parseInt(value) === el[0].offsetLeft) ? value : 'auto') : value;
        }
        return {
            value: value || null,
            remove: function() {
                el.cssClone.remove();
            }
        };
    };
    
    
    
    $.fn.extend({
        
        hcSticky: function(options, reinit){
            
	    // check if selected element exist in DOM, user doesn't have to worry about that
	    if (this.length == 0)
		return this;
	    
            var settings = options || {},
                running = (this.data('hcSticky')) ? true : false,
                $window = $(window),
                $document = $(document);
            
            if (typeof settings == 'string') {
                switch(settings){
                    case 'reinit':
                        // detach scroll event
                        $window.off('scroll', this.data('hcSticky').f);
                        // call itself to start again
                        return this.hcSticky({},true);
                        break;
                    case 'off':
                        this.data('hcSticky', $.extend(this.data('hcSticky'),{on:false}));
                        break;
                    case 'on':
                        this.data('hcSticky', $.extend(this.data('hcSticky'),{on:true}));
                        break;
                }
                return this;
            } else if (typeof settings == 'object') {
                if (!running) {
                    // these are the default settings
                    this.data('hcSticky', $.extend({
                        top: 0,
                        bottom: 0,
                        bottomEnd: 0,
                        bottomLimiter: null,
                        innerTop: 0,
                        innerSticker: null,
                        className: 'sticky',
                        wrapperClassName: 'wrapper-sticky',
                        noContainer: false,
			parent: null,
			responsive: true,
                        followScroll: true,
			onStart: function(){},
			onStop: function(){},
                        on: true
                    }, settings));
                    // check for bottom limiter
                    var $bottom_limiter = this.data('hcSticky').bottomLimiter;
                    if ($bottom_limiter !== null && this.data('hcSticky').noContainer) {
                        this.data('hcSticky', $.extend(this.data('hcSticky'),{bottomEnd:$document.height() - $($bottom_limiter).offset().top}));
                    }
                } else {
                    // update existing settings
                    this.data('hcSticky', $.extend(this.data('hcSticky'),settings));
                }
                // if already running and not reinited don't go further all we needed was to update settings
                if (running && !reinit) {
                    return this;
                }
            }
	    
	    // do our thing
            return this.each(function(){
                
                var $this = $(this),
		    $parent = $this.data('hcSticky').parent ? $($this.data('hcSticky').parent) : $this.parent(),
		    // get wrapper if already created, if not create it
		    $wrapper = (function(){
                            // wrapper exists
                            var $this_wrapper = $this.parent('.'+$this.data('hcSticky').wrapperClassName);
                            if ($this_wrapper.length > 0) {
                                $this_wrapper.css({
                                    'height': $this.outerHeight(true),
                                    'width': (function(){
                                        // check if wrapper already has width in %
                                        var width = getCSS($this_wrapper,'width').value;
                                        getCSS($this_wrapper).remove();
                                        if (width.indexOf('%') >= 0 || width == 'auto') {
                                            $this.css('width',$this_wrapper.width());
                                            return width;
                                        } else {
                                            return $this.outerWidth(true);
                                        }
                                    })()
                                });
                                return $this_wrapper;
                            } else {
                                return false;
                            }
                        })() || (function(){
                            // wrapper doesn't exist, create it
                            var $this_wrapper = $('<div>',{'class':$this.data('hcSticky').wrapperClassName}).css({
                                'height': $this.outerHeight(true),
                                'width': (function(){
                                    // check if element has width in %
                                    var width = getCSS($this,'width').value;
                                    if (width.indexOf('%') >= 0 || width == 'auto') {
                                        $this.css('width',parseFloat($this.css('width')));
                                        return width;
                                    } else {
                                        // check if margin is set to 'auto'
                                        var margin = getCSS($this,'margin-left').value;
                                        return (margin == 'auto') ? $this.outerWidth() : $this.outerWidth(true);
                                    }
                                })(),
                                'margin': (getCSS($this,'margin-left').value) ? 'auto' : null,
                                'position': (function(){
                                    var position = $this.css('position');
                                    return position == 'static' ? 'relative' : position;
                                })(),
                                'float': $this.css('float') || null,
                                'left': getCSS($this,'left').value,
                                'right': getCSS($this,'right').value,
                                'top': getCSS($this,'top').value,
                                'bottom': getCSS($this,'bottom').value
                            });
                            $this.wrap($this_wrapper);
                            // return appended element
                            return $this.parent();
                        }
                    )(),
                    // functions for attachiung and detaching sticky
                    setFixed = function(args){
			// check if already floating
			if ($this.hasClass($this.data('hcSticky').className))
			    return;
                        args = args || {};
                        $this.css({
                            position: 'fixed',
                            top: args.top || 0,
                            left: args.left || $wrapper.offset().left
                        }).addClass($this.data('hcSticky').className);
			// run function for start event of sticky
			$this.data('hcSticky').onStart.apply(this);
                    },
                    reset = function(args){
                        args = args || {};
                        $this.css({
                            position: args.position || 'absolute',
                            top: args.top || 0,
                            left: args.left || 0
                        }).removeClass($this.data('hcSticky').className);
			// run function for stop event of sticky
			$this.data('hcSticky').onStop.apply(this);
                    };
                
                // clear clone element we created for geting real css value
                getCSS($this).remove();
                // reset sticky content
                $this.css({top:'auto',bottom:'auto',left:'auto',right:'auto'});
                
		// before anything, check if element height is bigger than the content
		if ($this.outerHeight(true) > $parent.height())
		    return this;
		// also attach event on entire page load, maybe some images inside element has been delayd, so chek widths again
		$(window).load(function(){
		    if ($this.outerHeight(true) > $parent.height()) {
			$wrapper.css('height', $this.outerHeight(true));
			$this.hcSticky('reinit');
		    }
		});
		
                // start the magic
                var f = function(init){
                    
                    // get referring element
                    $referrer = ($this.data('hcSticky').noContainer) ? $document : ($this.data('hcSticky').parent ? $($this.data('hcSticky').parent) : $wrapper.parent());
                    
                    // check if we need to run sticky
                    if (!$this.data('hcSticky').on || $this.outerHeight(true) >= $referrer.height())
                        return;

                    var top_spacing = ($this.data('hcSticky').innerSticker) ? $($this.data('hcSticky').innerSticker).position().top : (($this.data('hcSticky').innerTop) ? $this.data('hcSticky').innerTop : 0),
                        //wrapper_inner_top = $wrapper.offset().top + ($this.data('hcSticky').noContainer ? 0 : (parseInt($referrer.css('borderTopWidth')) + parseInt($referrer.css('padding-top')) + parseInt($referrer.css('margin-top')))), 
			wrapper_inner_top = $wrapper.offset().top,
                        bottom_limit = $referrer.height() - $this.data('hcSticky').bottomEnd + ($this.data('hcSticky').noContainer ? 0 : wrapper_inner_top),
                        top_limit = $wrapper.offset().top - $this.data('hcSticky').top + top_spacing,
                        this_height = $this.outerHeight(true) + $this.data('hcSticky').bottom,
                        window_height = $window.height(),
                        offset_top = $window.scrollTop(),
                        this_document_top = $this.offset().top,
                        this_window_top = this_document_top - offset_top,
                        bottom_distance; // this is for later
                    
                    
                    if (offset_top >= top_limit) {
                        
                        // I have no idea what am I checking here, but it works
			// http://geek-and-poke.com/geekandpoke/2012/7/27/simply-explained.html
                        //if (bottom_limit + $this.data('hcSticky').bottom - $this.data('hcSticky').top <= offset_top + this_height - top_spacing - ((this_height - top_spacing > window_height - (top_limit - top_spacing) && $this.data('hcSticky').followScroll) ? (((bottom_distance = this_height - window_height - top_spacing) > 0) ? bottom_distance : 0) : 0)) {
			if (bottom_limit + $this.data('hcSticky').bottom - ($this.data('hcSticky').followScroll ? 0 : $this.data('hcSticky').top) <= offset_top + this_height - top_spacing - ((this_height - top_spacing > window_height - (top_limit - top_spacing) && $this.data('hcSticky').followScroll) ? (((bottom_distance = this_height - window_height - top_spacing) > 0) ? bottom_distance : 0) : 0)) {
                            // bottom reached end
                            reset({
                                top: bottom_limit - this_height + $this.data('hcSticky').bottom - wrapper_inner_top
                            });
                        } else if (this_height - top_spacing > window_height && $this.data('hcSticky').followScroll ) {
                            // sidebar bigger than window with follow scroll on
                            if (this_window_top + this_height <= window_height) {
                                if (getScroll.direction == 'down') {
                                    // scroll down
                                    setFixed({
                                        top: window_height - this_height
                                    });
                                } else {
                                    // scroll up
                                    if (this_window_top < 0 && $this.css('position') == 'fixed') {
                                        reset({
                                            top: this_document_top - (top_limit + $this.data('hcSticky').top - top_spacing) - getScroll.distanceY
                                        });
                                    }
                                }
                            // sidebar smaller than window or follow scroll turned off
                            } else {
                                if (getScroll.direction == 'up' && this_document_top >= offset_top + $this.data('hcSticky').top - top_spacing) {
                                    // scroll up
                                    
                                    setFixed({
                                        top: $this.data('hcSticky').top - top_spacing
                                    });
                                } else if (getScroll.direction == 'down' && this_document_top + this_height > window_height && $this.css('position') == 'fixed') {
                                    // scroll down
                                    reset({
                                        top: this_document_top - (top_limit + $this.data('hcSticky').top - top_spacing) - getScroll.distanceY
                                    });
                                }
                            }
                        } else {
                            // starting (top) fixed position
                            setFixed({
                                top: $this.data('hcSticky').top - top_spacing
                            });
                        }
                    } else {
                        // reset bar
                        reset();
                    }

                    // just in case someone set "top" larger than elements style top
                    if (init === true) {
			$this.css('top', ($this.css('position') == 'fixed') ? $this.data('hcSticky').top - top_spacing : 0);
                        //$this.css('top', ($this.css('position') == 'fixed') ? $wrapper.offset().top : 0);
                    }

                };
		
		// store resize data in case responsive is on
                var resize_timeout = false,
		    $resize_clone = false;
		
		function onResize(){
		    // check for width change (css media queries)
		    if ($this.data('hcSticky').responsive) {
			// clone element and make it invisible
			if (!$resize_clone) {
			    $resize_clone = $this.clone().attr('style','').css({visibility:'hidden',height:0,overflow:'hidden',paddingTop:0,paddingBottom:0,marginTop:0,marginBottom:0});
			    $wrapper.after($resize_clone);
			}
			
			if (getCSS($resize_clone,'width').value != getCSS($wrapper,'width').value)
			    $wrapper.width(getCSS($resize_clone,'width').value);
			// remove wrapper clone
			getCSS($wrapper).remove();
			
			// clear previous timeout
			if (resize_timeout) {
			    clearTimeout(resize_timeout);
			}
			// timedout destroing of cloned elements
			resize_timeout = setTimeout(function(){
			    // clear timeout id
			    resize_timeout = false;
			    // destroy cloned elements
			    getCSS($resize_clone).remove();
			    $resize_clone.remove();
			    $resize_clone = false;
			}, 100);
		    }
		    
		    // set left position
                    if ($this.css('position') == 'fixed') {
                        $this.css('left', $wrapper.offset().left);
                    } else {
                        $this.css('left', 0);
                    }
		    // recalculate inner element width (maybe original width was in %)
		    if ($this.width() != $wrapper.width())
			$this.css('width', $wrapper.width());
                }
		// attach resize event
                $window.on('resize', onResize);
                
                // set scroll empty function in case we need to reinit plugin
                $this.data('hcSticky', $.extend($this.data('hcSticky'),{f:function(){}}));
                // set scroll function
                $this.data('hcSticky', $.extend($this.data('hcSticky'),{f:f}));
                // run it for the first time to disable glitching
                $this.data('hcSticky').f(true);
                // attach function to scroll event
                $window.on('scroll', $this.data('hcSticky').f);
		
            });
        }
    });

})(jQuery);


$(function(){
  $('#header').data('size','big');
});

$(window).scroll(function(){
  if($(document).scrollTop() > 90)
{
    $('#header').addClass("stickyHeader");
	//$('#searchSuggestResult').hide();
    if($('#header').data('size') == 'big')
    {
        $('#header').data('size','small');
        $('#header').stop().animate({           
			top:'0px'
        },800);
    }
}
else
  {
   $('#header').removeClass("stickyHeader");
    if($('#header').data('size') == 'small')
      {
        $('#header').data('size','big');
		$('#header').removeAttr('style');
      }  
  }

});



!function(a,b,c,d){var e={verticalScrolling:!0,horizontalScrolling:!1,verticalScrollerSide:"right",showOnHover:!1,scrollIncrement:20,minScrollbarLength:40,pollChanges:!0,drawCorner:!0,drawScrollButtons:!1,clickTrackToScroll:!0,easingDuration:500,propagateWheelEvent:!0,verticalTrackClass:"vertical-track",horizontalTrackClass:"horizontal-track",horizontalHandleClass:"horizontal-handle",verticalHandleClass:"vertical-handle",scrollUpButtonClass:"scroll-up-btn",scrollDownButtonClass:"scroll-down-btn",scrollLeftButtonClass:"scroll-left-btn",scrollRightButtonClass:"scroll-right-btn",cornerClass:"scrollbar-corner",zIndex:1,addPaddingToPane:!0,horizontalHandleHTML:'<div class="left"></div><div class="right"></div>',verticalHandleHTML:'<div class="top"></div><div class="bottom"></div>'},f=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},g=b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.oRequestAnimationFrame||b.msRequestAnimationFrame||function(a){setTimeout(a,17)},h=function(b,c){var d=a(b).css(c),e=/^-?\d+/.exec(d);return e?+e[0]:0},i=function(a){var b,c,d={width:"5px",height:"1px",overflow:"hidden",padding:"8px 0",visibility:"hidden",whiteSpace:"pre-line",font:"10px/1 serif"},e=document.createElement(a),f=document.createTextNode("a\na");for(c in d)e.style[c]=d[c];return e.appendChild(f),document.body.appendChild(e),b=e.scrollHeight<28,document.body.removeChild(e),b},j=.5*Math.PI,k=10*Math.log(2),l=function(a,b,c){var d=j/b,e=a*d;return Math.round(e*Math.cos(d*c))},m=function(a,b,c){return Math.round(a*k*Math.pow(2,-10*c/b+1)/b)},n=function(a,b,c,d){return 2*c/Math.PI*Math.asin((d-a)/b)},o=function(b){var c=a(this).data("enscroll"),d=this,e=c.settings,f=function(){var b=a(this).data("enscroll"),c=b.settings;b&&c.showOnHover&&(c.verticalScrolling&&a(b.verticalTrackWrapper).is(":visible")&&a(b.verticalTrackWrapper).stop().fadeTo(275,0),c.horizontalScrolling&&a(b.horizontalTrackWrapper).is(":visible")&&a(b.horizontalTrackWrapper).stop().fadeTo(275,0),b._fadeTimer=null)};c&&e.showOnHover&&(c._fadeTimer?clearTimeout(c._fadeTimer):(e.verticalScrolling&&a(c.verticalTrackWrapper).is(":visible")&&a(c.verticalTrackWrapper).stop().fadeTo(275,1),e.horizontalScrolling&&a(c.horizontalTrackWrapper).is(":visible")&&a(c.horizontalTrackWrapper).stop().fadeTo(275,1)),b!==!1&&(c._fadeTimer=setTimeout(function(){f.call(d)},1750)))},p=function(b,c){var d=a(b),e=d.data("enscroll"),f=d.scrollTop();e&&e.settings.verticalScrolling&&(d.scrollTop(f+c),e.settings.showOnHover&&o.call(b))},q=function(b,c){var d=a(b),e=d.data("enscroll"),f=d.scrollLeft();e&&e.settings.horizontalScrolling&&(d.scrollLeft(f+c),e.settings.showOnHover&&o.call(b))},r=function(b){if(1===b.which){var d,e,f,h,i,j,k,l,m,n=b.data.pane,p=a(n),q=p.data("enscroll"),r=!0,s=function(){r&&(f!==h&&(q._scrollingY||(q._scrollingY=!0,q._startY=p.scrollTop(),g(function(){t(p)})),e.style.top=f+"px",q._endY=f*m/l,h=f),g(s),q.settings.showOnHover&&o.call(n))},u=function(a){return r&&(f=a.clientY-j-i,f=Math.min(0>f?0:f,l)),!1},v=function(){return r=!1,c.body.style.cursor=k,this.style.cursor="",d.removeClass("dragging"),a(c.body).off("mousemove.enscroll.vertical").off("mouseup.enscroll.vertical"),a(c).off("mouseout.enscroll.vertical"),p.on("scroll.enscroll.pane",function(a){x.call(this,a)}),!1};return d=a(q.verticalTrackWrapper).find(".enscroll-track"),e=d.children().first()[0],f=parseInt(e.style.top,10),m=n.scrollHeight-(q._scrollHeightNoPadding?a(n).height():a(n).innerHeight()),i=b.clientY-a(e).offset().top,l=d.height()-a(e).outerHeight(),j=d.offset().top,p.off("scroll.enscroll.pane"),a(c.body).on({"mousemove.enscroll.vertical":u,"mouseup.enscroll.vertical":function(a){v.call(e,a)}}),a(c).on("mouseout.enscroll.vertical",function(a){a.target.nodeName&&"HTML"===a.target.nodeName.toUpperCase()&&v.call(e,a)}),d.hasClass("dragging")||(d.addClass("dragging"),k=a(c.body).css("cursor"),this.style.cursor=c.body.style.cursor="default"),g(s),!1}},s=function(b){if(1===b.which){var d,e,f,h,i,j,k,l,m,n=b.data.pane,p=a(n),q=a(n).data("enscroll"),r=!0,s=function(){r&&(f!==h&&(q._scrollingX||(q._scrollingX=!0,q._startX=p.scrollLeft(),g(function(){t(p)})),e.style.left=f+"px",q._endX=f*i/m,h=f),g(s),q.settings.showOnHover&&o.call(n))},u=function(a){return r&&(f=a.clientX-k-j,f=Math.min(0>f?0:f,m)),!1},v=function(){return r=!1,d.removeClass("dragging"),c.body.style.cursor=l,this.style.cursor="",d.removeClass("dragging"),a(c.body).off("mousemove.enscroll.horizontal").off("mouseup.enscroll.horizontal"),a(c).off("mouseout.enscroll.horizontal"),p.on("scroll.enscroll.pane",function(a){x.call(this,a)}),!1};return d=a(q.horizontalTrackWrapper).find(".enscroll-track"),e=d.children().first()[0],f=parseInt(e.style.left,10),i=n.scrollWidth-a(n).innerWidth(),j=b.clientX-a(e).offset().left,m=d.width()-a(e).outerWidth(),k=d.offset().left,p.off("scroll.enscroll.pane"),a(c.body).on({"mousemove.enscroll.horizontal":u,"mouseup.enscroll.horizontal":function(a){v.call(e,a)}}),a(c).on("mouseout.enscroll.horizontal",function(a){a.target.nodeName&&"HTML"===a.target.nodeName.toUpperCase()&&v.call(e,a)}),d.hasClass("dragging")||(d.addClass("dragging"),l=a("body").css("cursor"),this.style.cursor=c.body.style.cursor="ew-resize"),g(s),!1}},t=function(a){var b,c,d,e=a.data("enscroll"),f=e._duration;e._scrollingX===!0&&(b=e._endX-e._startX,0===b?e._scrollingX=!1:(c=a.scrollLeft(),d=n(e._startX,b,f,c),b>0?c>=e._endX||c<e._startX?e._scrollingX=!1:(q(a,Math.max(1,l(b,f,d))),g(function(){t(a)})):c<=e._endX||c>e._startX?e._scrollingX=!1:(q(a,Math.min(-1,l(b,f,d))),g(function(){t(a)})))),e._scrollingY===!0&&(b=e._endY-e._startY,0===b?e._scrollingY=!1:(c=a.scrollTop(),d=n(e._startY,b,f,c),b>0?c>=e._endY||c<e._startY?e._scrollingY=!1:(p(a,Math.max(1,l(b,f,d))),g(function(){t(a)})):c<=e._endY||c>e._startY?e._scrollingY=!1:(p(a,Math.min(-1,l(b,f,d))),g(function(){t(a)}))))},u=function(a,b){var c=a.data("enscroll"),d=a.scrollLeft(),e=a[0].scrollWidth-a.innerWidth();return!c.settings.horizontalScrolling||c._scrollingY?!1:(c._scrollingX||(c._scrollingX=!0,c._startX=d,c._endX=c._startX,g(function(){t(a)})),c._endX=b>0?Math.min(d+b,e):Math.max(0,d+b),0>b&&d>0||b>0&&e>d)},v=function(a,b){var c=a.data("enscroll"),d=a.scrollTop(),e=a[0].scrollHeight-(c._scrollHeightNoPadding?a.height():a.innerHeight());return!c.settings.verticalScrolling||c._scrollingX?!1:(c._scrollingY||(c._scrollingY=!0,c._startY=d,c._endY=c._startY,g(function(){t(a)})),c._endY=b>0?Math.min(d+b,e):Math.max(0,d+b),0>b&&d>0||b>0&&e>d)},w=function(b){var c,d=a(this),e=d.data("enscroll"),g=e.settings.scrollIncrement,h="deltaX"in b?-b.deltaX:"wheelDeltaX"in b?b.wheelDeltaX:0,i="deltaY"in b?-b.deltaY:"wheelDeltaY"in b?b.wheelDeltaY:"wheelDelta"in b?b.wheelDelta:0;Math.abs(h)>Math.abs(i)?(c=(h>0?-g:g)<<2,(u(d,c)||!e.settings.propagateWheelEvent)&&f(b)):(c=(i>0?-g:g)<<2,(v(d,c)||!e.settings.propagateWheelEvent)&&f(b))},x=function(){var b,c,d,e=a(this),f=e.data("enscroll");f&&(f.settings.verticalScrolling&&(c=a(f.verticalTrackWrapper).find(".enscroll-track")[0],b=c.firstChild,d=e.scrollTop()/(this.scrollHeight-(f._scrollHeightNoPadding?e.height():e.innerHeight())),d=isNaN(d)?0:d,b.style.top=d*(a(c).height()-a(b).outerHeight())+"px"),f.settings.horizontalScrolling&&(c=a(f.horizontalTrackWrapper).find(".enscroll-track")[0],b=c.firstChild,d=e.scrollLeft()/(this.scrollWidth-e.innerWidth()),d=isNaN(d)?0:d,b.style.left=d*(a(c).width()-a(b).innerWidth())+"px"))},y=function(b){var c,d=a(this),e=d.data("enscroll");if(!/(input)|(select)|(textarea)/i.test(this.nodeName)&&b.target===this&&e){switch(c=e.settings.scrollIncrement,b.keyCode){case 32:case 34:return v(d,d.height()),!1;case 33:return v(d,-d.height()),!1;case 35:return v(d,this.scrollHeight),!1;case 36:return v(d,-this.scrollHeight),!1;case 37:return u(d,-c),!1;case 38:return v(d,-c),!1;case 39:return u(d,c),!1;case 40:return v(d,c),!1}return!0}},z=function(){var b=this,d=a(b).data("enscroll").settings,e=!0,f=0,h=0,i=a(b).offset().top,j=i+a(b).outerHeight(),k=a(b).offset().left,l=k+a(b).outerWidth(),m=function(a){var b=a.pageX,c=a.pageY;f=k>b?b-k:b>l?b-l:0,h=i>c?c-i:c>j?c-j:0},n=function(){d.horizontalScrolling&&f&&q(b,parseInt(f/4,10)),d.verticalScrolling&&h&&p(b,parseInt(h/4,10)),e&&g(n)},o=function(){e=!1,a(c).off("mousemove.enscroll.pane").off("mouseup.enscroll.pane")};g(n),a(c).on({"mousemove.enscroll.pane":m,"mouseup.enscroll.pane":o})},A=function(a){var b,c,e,h,i,j,k,l=this,n=function(a){b=a.touches[0].clientX,c=a.touches[0].clientY,e||(e=c===i&&b===h?d:Math.abs(i-c)>Math.abs(h-b)?"y":"x"),f(a)},o=function(){j&&("y"===e?(p(l,i-c),k=i-c,i=c):"x"===e&&(q(l,h-b),k=h-b,h=b),g(o))},r=function(){var a=0,b=Math.abs(1.5*k);this.removeEventListener("touchmove",n,!1),this.removeEventListener("touchend",r,!1),j=!1,g(function c(){var d;a===b||j||(d=m(k,b,a),isNaN(d)||0===d||(a+=1,"y"===e?p(l,d):q(l,d),g(c)))})};1===a.touches.length&&(h=a.touches[0].clientX,i=a.touches[0].clientY,j=!0,this.addEventListener("touchmove",n,!1),this.addEventListener("touchend",r,!1),g(o))},B={reposition:function(){return this.each(function(){var b,c,d,e=a(this),f=e.data("enscroll"),g=function(a,b,c){a.style.left=b+"px",a.style.top=c+"px"};f&&(d=e.position(),b=f.corner,f.settings.verticalScrolling&&(c=f.verticalTrackWrapper,g(c,"right"===f.settings.verticalScrollerSide?d.left+e.outerWidth()-a(c).width()-h(this,"border-right-width"):d.left+h(this,"border-left-width"),d.top+h(this,"border-top-width"))),f.settings.horizontalScrolling&&(c=f.horizontalTrackWrapper,g(c,d.left+h(this,"border-left-width"),d.top+e.outerHeight()-a(c).height()-h(this,"border-bottom-width"))),b&&g(b,d.left+e.outerWidth()-a(b).outerWidth()-h(this,"border-right-width"),d.top+e.outerHeight()-a(b).outerHeight()-h(this,"border-bottom-width")))})},resize:function(){return this.each(function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=a(this),s=r.data("enscroll");return s?(b=s.settings,r.is(":visible")?(b.verticalScrolling&&(e=s.verticalTrackWrapper,c=r.innerHeight(),f=c/this.scrollHeight,g=a(e).find(".enscroll-track")[0],j=a(e).find("."+b.scrollUpButtonClass),k=a(e).find("."+b.scrollDownButtonClass),i=b.horizontalScrolling?c-a(s.horizontalTrackWrapper).find(".enscroll-track").outerHeight():c,i-=a(g).outerHeight()-a(g).height()+j.outerHeight()+k.outerHeight(),n=g.firstChild,p=Math.max(f*i,b.minScrollbarLength),p-=a(n).outerHeight()-a(n).height(),e.style.display="none",g.style.height=i+"px",n.style.height=p+"px",1>f&&(f=r.scrollTop()/(this.scrollHeight-r.height()),n.style.top=f*(i-p)+"px",e.style.display="block")),b.horizontalScrolling&&(e=s.horizontalTrackWrapper,d=r.innerWidth(),f=d/this.scrollWidth,g=a(e).find(".enscroll-track")[0],l=a(e).find("."+b.scrollLeftButtonClass),m=a(e).find("."+b.scrollRightButtonClass),h=b.verticalScrolling?d-a(s.verticalTrackWrapper).find(".enscroll-track").outerWidth():d,h-=a(g).outerWidth()-a(g).width()+l.outerWidth()+m.outerWidth(),n=g.firstChild,o=Math.max(f*h,b.minScrollbarLength),o-=a(n).outerWidth()-a(n).width(),e.style.display="none",g.style.width=h+"px",n.style.width=o+"px",1>f&&(f=r.scrollLeft()/(this.scrollWidth-r.width()),n.style.left=f*(h-o)+"px",e.style.display="block"),s._prybar&&(q=s._prybar,this.removeChild(q),b.verticalScrolling&&(q.style.width=this.scrollWidth+a(s.verticalTrackWrapper).find(".enscroll-track").outerWidth()+"px",this.appendChild(q)))),s.corner&&(s.corner.style.display=s.verticalTrackWrapper&&s.horizontalTrackWrapper&&a(s.verticalTrackWrapper).is(":visible")&&a(s.horizontalTrackWrapper).is(":visible")?"":"none")):(b.verticalScrolling&&(s.verticalTrackWrapper.style.display="none"),b.horizontalScrolling&&(s.horizontalTrackWrapper.style.display="none"),s.corner&&(s.corner.style.display="none")),void 0):!0})},startPolling:function(){return this.each(function(){var b,c=a(this).data("enscroll"),d=this,e=a(d),f=-1,g=-1,h=-1,i=-1,j=function(){if(c.settings.pollChanges){var a=d.scrollWidth,k=d.scrollHeight,l=e.width(),m=e.height(),n=e.offset();(c.settings.verticalScrolling&&(m!==g||k!==i)||c.settings.horizontalScrolling&&(l!==f||a!==h))&&(h=a,i=k,B.resize.call(e)),(b.left!==n.left||b.top!==n.top||l!==f||m!==g)&&(b=n,f=l,g=m,B.reposition.call(e)),setTimeout(j,350)}};c&&(c.settings.pollChanges=!0,i=d.scrollHeight,h=d.scrollWidth,b=e.offset(),j())})},stopPolling:function(){return this.each(function(){var b=a(this).data("enscroll");b&&(b.settings.pollChanges=!1)})},destroy:function(){return this.each(function(){var c,d,e=a(this),f=e.data("enscroll");f&&(B.stopPolling.call(e),d=f._mouseScrollHandler,f.settings.verticalScrolling&&(c=f.verticalTrackWrapper,a(c).remove(),c=null),f.settings.horizontalScrolling&&(c=f.horizontalTrackWrapper,a(c).remove(),c=null),f._fadeTimer&&clearTimeout(f._fadeTimer),f.corner&&a(f.corner).remove(),f._prybar&&f._prybar.parentNode&&f._prybar.parentNode===this&&a(f._prybar).remove(),this.setAttribute("style",f._style||""),f._hadTabIndex||e.removeAttr("tabindex"),e.off("scroll.enscroll.pane").off("keydown.enscroll.pane").off("mouseenter.enscroll.pane").off("mousedown.enscroll.pane").data("enscroll",null),this.removeEventListener?(this.removeEventListener("wheel",d,!1),this.removeEventListener("mousewheel",d,!1),this.removeEventListener("touchstart",A,!1)):this.detachEvent&&this.detachEvent("onmousewheel",d),a(b).off("resize.enscroll.window"))})}};a.fn.enscroll=function(d){var f;return B[d]?B[d].call(this):(f=a.extend({},e,d),this.each(function(){if(f.verticalScrolling||f.horizontalScrolling){var d,e,g,j,k,l,m,n,t,C,D,E,F,G,H,I,J,K,L=a(this),M=this,N=L.attr("style"),O=!0,P={position:"absolute","z-index":f.zIndex,margin:0,padding:0},Q=function(a){w.call(M,a)},R=function(b,c){"string"==typeof c?a(b).html(c):b.appendChild(c)};if(f.verticalScrolling){e=c.createElement("div"),j=c.createElement("div"),l=c.createElement("a"),a(j).css("position","relative").addClass("enscroll-track").addClass(f.verticalTrackClass).appendTo(e),f.drawScrollButtons&&(m=c.createElement("a"),n=c.createElement("a"),a(m).css({display:"block","text-decoration":"none"}).attr("href","").html("&nbsp;").addClass(f.scrollUpButtonClass).on("click",function(){return p(M,-f.scrollIncrement),!1}).insertBefore(j),a(n).css({display:"block","text-decoration":"none"}).attr("href","").html("&nbsp;").on("click",function(){return p(M,f.scrollIncrement),!1}).addClass(f.scrollDownButtonClass).appendTo(e)),f.clickTrackToScroll&&a(j).on("click",function(b){b.target===this&&v(L,b.pageY>a(l).offset().top?L.height():-L.height())}),a(l).css({position:"absolute","z-index":1}).attr("href","").addClass(f.verticalHandleClass).mousedown({pane:this},r).click(function(){return!1}).appendTo(j),R(l,f.verticalHandleHTML),a(e).css(P).insertAfter(this),f.showOnHover&&a(e).css("opacity",0).on("mouseover.enscroll.vertical",function(){o.call(M,!1)}).on("mouseout.enscroll.vertical",function(){o.call(M)}),E=a(j).outerWidth(),f.addPaddingToPane&&(K="right"===f.verticalScrollerSide?{"padding-right":h(this,"padding-right")+E+"px"}:{"padding-left":h(this,"padding-left")+E+"px"},L.css(a.extend({width:L.width()-E+"px"},K)));try{I=parseInt(L.css("outline-width"),10),0!==I&&!isNaN(I)||"none"!==L.css("outline-style")||L.css("outline","none")}catch(S){L.css("outline","none")}}f.horizontalScrolling&&(d=c.createElement("div"),g=c.createElement("div"),k=c.createElement("a"),a(g).css({position:"relative","z-index":1}).addClass("enscroll-track").addClass(f.horizontalTrackClass).appendTo(d),f.drawScrollButtons&&(t=c.createElement("a"),C=c.createElement("a"),a(t).css("display","block").attr("href","").on("click",function(){return q(M,-f.scrollIncrement),!1}).addClass(f.scrollLeftButtonClass).insertBefore(g),a(C).css("display","block").attr("href","").on("click",function(){return q(M,f.scrollIncrement),!1}).addClass(f.scrollRightButtonClass).appendTo(d)),f.clickTrackToScroll&&a(g).on("click",function(b){b.target===this&&u(L,b.pageX>a(k).offset().left?L.width():-L.width())}),a(k).css({position:"absolute","z-index":1}).attr("href","").addClass(f.horizontalHandleClass).click(function(){return!1}).mousedown({pane:this},s).appendTo(g),R(k,f.horizontalHandleHTML),a(d).css(P).insertAfter(this),f.showOnHover&&a(d).css("opacity",0).on("mouseover.enscroll.horizontal",function(){o.call(M,!1)}).on("mouseout.enscroll.horizontal",function(){o.call(M)}),D=a(g).outerHeight(),f.addPaddingToPane&&L.css({height:L.height()-D+"px","padding-bottom":parseInt(L.css("padding-bottom"),10)+D+"px"}),J=document.createElement("div"),a(J).css({width:"1px",height:"1px",visibility:"hidden",display:"none",padding:0,margin:"-1px"}).appendTo(this)),f.verticalScrolling&&f.horizontalScrolling&&f.drawCorner&&(F=c.createElement("div"),a(F).addClass(f.cornerClass).css(P).insertAfter(this)),H=L.attr("tabindex"),H||(L.attr("tabindex",0),O=!1);try{G=L.css("outline"),(!G||G.length<1)&&L.css("outline","none")}catch(S){L.css("outline","none")}L.on({"scroll.enscroll.pane":function(a){x.call(this,a)},"keydown.enscroll.pane":y,"mousedown.enscroll.pane":z}).css("overflow","hidden").data("enscroll",{settings:f,horizontalTrackWrapper:d,verticalTrackWrapper:e,corner:F,_prybar:J,_mouseScrollHandler:Q,_hadTabIndex:O,_style:N,_scrollingX:!1,_scrollingY:!1,_startX:0,_startY:0,_endX:0,_endY:0,_duration:parseInt(f.easingDuration/16.66666,10),_scrollHeightNoPadding:i(this.nodeName)}),a(b).on("resize.enscroll.window",function(){B.reposition.call(L)}),f.showOnHover&&L.on("mouseenter.enscroll.pane",function(){o.call(this)}),this.addEventListener?("onwheel"in this||"WheelEvent"in b&&navigator.userAgent.toLowerCase().indexOf("msie")>=0?this.addEventListener("wheel",Q,!1):"onmousewheel"in this&&this.addEventListener("mousewheel",Q,!1),this.addEventListener("touchstart",A,!1)):this.attachEvent&&this.attachEvent("onmousewheel",Q),f.pollChanges&&B.startPolling.call(L),B.resize.call(L),B.reposition.call(L)}}))}}(jQuery,window,document);
// INDFUR - 1701: Show selected wishlist item in popup on catalog and product detail page
var listBoxTimerObj = null;
var addItemToWishlist = function(clickedObj, action, containerBoxClass, url, productImage, productName,arrow,dataDeleteUrl){
    dataDeleteUrl = dataDeleteUrl || null;
    var brandName = jQuery(clickedObj).data('brand');
    var brandname = null;
     var base_url = window.location.origin;
    if (typeof brandName !== "undefined") {
        brandname = brandName;
    }
    clearTimeout(listBoxTimerObj);
    var productImageStr = "";
    
    var isAccountPage = 0;
    if(jQuery('#pagename').val() === 'account/index') {
        isAccountPage = 1;
    }

    jQuery.get(url,{"requestType":"ajax",'isAccountPage':isAccountPage},function(response){
                $('.wishlistadded').removeClass('addedToCart');
                //productImageStr  = '<img src="'+productImage+'">';
                productImageStr  = '<a href="'+base_url+'/customer/wishlist">view saved</a>';
                var wishlistBoxString = [];
		if($(window).width()>767) {
                wishlistBoxString.push('<p>Product added to wishlist</p>');
                wishlistBoxString.push('<div class="popup-wishlist-button">'+ productImageStr +'</div>');
                //wishlistBoxString.push('<div class="col-sm-9 col-md-9 col-lg-9 pull-right">');
               // wishlistBoxString.push('<p class="cart_wishlist_added"><b>'+ brandname+'<b></br>'+productName+'##ADDED_OR_ALREADY_EXISTS##</p>');
                wishlistBoxString.push('</div>');
                //$('body,html').animate({scrollTop:0},400);
            }
		else {
		if($(window).width()<768) {
		//$('body,html').animate({scrollTop:0},400);
		}
		wishlistBoxString.push('<p>Product added to wishlist</p>');
                wishlistBoxString.push('<div class="popup-wishlist-button">'+ productImageStr +'</div>');
                if($('.append-button').hasClass('cartrelativeButton') && $('.catalogdetailpage').length>0)
                          {
                              $('.catalogdetailpage .wishlistadded').addClass('bottomFix');
                          }
                          else { $('.catalogdetailpage .wishlistadded').removeClass('bottomFix'); }
		}
                if(jQuery(clickedObj).attr('data-mode') == 'ideabook'){
                 wishlistBoxString.push('<div class="textAlignCenter"><a class="viewWishlist" onClick="moveToIdeabookListPage()" href="javascript:void(0)">VIEW YOUR IDEABOOK</a></div>');                           
                }               
                if(response.configSku!=undefined && response.configSku!=''){
                   if(jQuery(clickedObj).attr('data-mode') == 'ideabook'){
                    jQuery('.cwl-'+response.configSku).removeClass("catWishList").addClass("catideabookListAdded");                            
                   } else {
                    jQuery('.cwl-'+response.configSku).removeClass("catWishList").addClass("catWishListAdded");
                    if(jQuery('.product-details .wishlist').data('sku-plp') === response.configSku){
                        jQuery('.product-details .buttom-wishlist .fa').removeClass("fa-heart-o").addClass("fa-heart");
						jQuery('.product-details .save-later').text('Added To Wishlist');
                                            }else{
                                                jQuery('.product-details .save-later').text('Add To Wishlist');
                                            }
                   }

                }
                var countWishList=parseInt(response.countWishList,10);
                jQuery('.miniWishlistContainer .badge').html(countWishList);
                if(response.movedTowishlist){
                    if(action == "cartWishlistBox")
                    {
                        $('.alert-cartremoval .button-area button').prop('disabled',false);
                        detail.hideLoader();
                        $('.alert-cartremoval .move-item').html('<i class="fa fa-heart buttonheart"></i>Move To saved');
                        $('.alert-cartremoval .remove-item').html('Remove');
                        detail.addToBagWishListMsgPopUp(response.removalMsg,'.wishlistadded',true);
                        detail.addToBagWishListMsgPopUp(response.cartItemQuantity,'.mini-cart .badge',false);
                        detail.addToBagWishListMsgPopUp(response.miniCartContent,'.mini-cart .mini-cart-content',false);
                        if($(".whish-list-page").length !== 0) {
                            $(".whish-list-page").replaceWith(response.wishListDiv);
                        }
                        detail.addToBagWishListMsgPopUp(response.miniWishlistContent,'.miniWishlistContainer .mini-cart-content',false);
                        detail.addToBagWishListMsgPopUp(response.orderSummary,'#cartSummary',false);
                        jQuery('#tab1').html(response.wishlistItems);
                        jQuery('#cartSummary').html(response.orderSummary);
                        jQuery('#tab2').html(response.cartItems);
                        jQuery('#left-cart-container').removeClass();
                        if(countWishList>1){
                            //jQuery('#wishlistItemCount .carttabtitle').html('Saved Items');
                            jQuery('#wishlistItemCount .carttabitems').html('('+countWishList+')');
                        }
                        else{
                            //jQuery('#wishlistItemCount .carttabtitle').html('Your Saved Item ');
                            jQuery('#wishlistItemCount .carttabitems').html('('+countWishList+')');
                        }
                        if(response.cartItemQuantity>1){
                            jQuery('#cartItemCount .carttabitems').html('('+response.cartItemQuantity+')');
                        }
                        else{
                            jQuery('#cartItemCount .carttabitems').html('('+response.cartItemQuantity+')');
                        }
                        if(response.cartItemQuantity != 0){
                            jQuery('#left-cart-container').addClass('col-sm-7 col-lg-8 col-md-8 col-xs-12');
                            jQuery('#cartSummary').fadeIn();
                            jQuery('.recently-viewed').remove();
                        }else{
                            jQuery('#left-cart-container').addClass('col-sm-12 col-lg-12 col-md-12 col-xs-12');
                            jQuery('.l-main').append(response.recentlyViewedItems);
                            jQuery('#cartSummary').fadeOut();
                        }
                        
                        jQuery(".mini-cart .mini-cart-content .cartcontent,.miniWishlistContainer .mini-cart-content .cartcontent").enscroll();
                    }
                    if(typeof response.couponRemoved !== 'undefined'){
                        $('.show_msg .s-error').remove();
                        $('.show_msg').append('<div class="box s-error mbs couponRemovalMessage msgBox">'+response.couponRemoved+'</div>');
                        setTimeout(function(){ $('.couponRemovalMessage').remove() }, 3000);
                    }
                    if(typeof response.cartCoupon !== 'undefined'){
                        $('.popup-outer.coupon-popup').replaceWith(response.cartCoupon);
                        $('.scrollbox').enscroll('destroy');
                        $('.scrollbox').enscroll();
                    }
                }
                else if(response.msg == "Product successfully added to your wishlist"){
                    //facebook pixel add to wishlist tracking
                    facebookPixelTracking.callFbq('AddToWishlist');
                    var successStr = wishlistBoxString.join(" ");  
                    successStr = successStr.replace("##ADDED_OR_ALREADY_EXISTS##", " has been saved for later"); 
                    //INDFUR-2253 After moved in wishlist product remove from cart after 500 ms for GA Capture
                    if(action == "cartWishlistBox")
                    {
                    var urlItems=url.split('/');
                    var SKU=$(urlItems).last()[0];
                    var SKUhref = $('.buttonsave.sel-cart-remove-item-'+SKU).data('href');
                    setTimeout(function(){window.location.href=dataDeleteUrl+'&movedWishlist=1';}, 700);
                    return false;
                    }
                    else
                    {
                        jQuery(".wishlistadded").removeClass('addedToCart');
                        detail.addToBagWishListMsgPopUp(successStr,'.wishlistadded',true);
                    }  
                    if(action != "productWishlistBox"){
                        jQuery("#wishlistFlyButton").click();
                    } 
                    jQuery("#wishLishHeaderIcon").removeClass("wishListIcon2Grey").addClass("wishListIcon");
                }
                else if(response.msg== "Item already exist in your wishlist"){
                    var errorStr = wishlistBoxString.join(" ");
                    errorStr = errorStr.replace("##ADDED_OR_ALREADY_EXISTS##", "already exists in your wishlist"); 
                    jQuery("#" + containerBoxClass).html(errorStr);
                    jQuery("#wishlistImageContainter img").fadeIn(3300);
                    jQuery("#" + containerBoxClass).show();
                    if(action != "productWishlistBox"){
                        jQuery("#wishlistFlyButton").click();
                    }
                  
                }  else if(response.msg == "Idea successfully added to your idea book"){
                    //console.log($( '.imageInfoBg .popupimg').attr('data-mode'));
                     if($( '.imageInfoBg .popupimg').attr('data-mode') == 'ideabookpopup'){
                          jQuery( '.imageInfoBg .popupimg').removeClass("catideabookList").addClass("catideabookListAdded");                            
                     } else {
                        var successStr = wishlistBoxString.join(" ");  
                        successStr = successStr.replace("##ADDED_OR_ALREADY_EXISTS##", "has been added to your idea book"); 
                        jQuery("#" + containerBoxClass).html(successStr);
                        jQuery("#wishlistImageContainter img").fadeIn(3300);
                        jQuery("#" + containerBoxClass).show();
                        if(action != "productWishlistBox"){
                            jQuery("#wishlistFlyButton").click();
                        } 
                        jQuery("#wishLishHeaderIcon").removeClass("wishListIcon2Grey").addClass("wishListIcon");
                   }
               } else if(response.msg== "Idea already exist in your idea book"){
                  if($( '.imageInfoBg .popupimg').attr('data-mode') != 'ideabookpopup'){
                    var errorStr = wishlistBoxString.join(" ");
                    errorStr = errorStr.replace("##ADDED_OR_ALREADY_EXISTS##", "already exists in your idea book"); 
  
                   jQuery("#" + containerBoxClass).html(errorStr);
                    jQuery("#wishlistImageContainter img").fadeIn(3300);
                    jQuery("#" + containerBoxClass).show();
                    if(action != "productWishlistBox"){
                        jQuery("#wishlistFlyButton").click();
                    }
                 }
                } else if(response.removalMsg) {
                    jQuery(".wishlistadded").removeClass('addedToCart');
                    jQuery('.cwl-'+response.configSku).removeClass("catWishListAdded").addClass("catWishList");
                    if(jQuery('.product-details .wishlist').data('sku-plp') === response.configSku)
                    {
                    jQuery('.buttom-wishlist .fa').removeClass("fa-heart").addClass("fa-heart-o");
					jQuery('.product-details .save-later').text('Add To Wishlist');
                    }
                    detail.addToBagWishListMsgPopUp(response.removalMsg,'.wishlistadded',true);
                }
                else
                {
                    window.location.href = url;
                }
                
                if(response.miniWishlistContent){
                    jQuery('.miniWishlistContainer .mini-cart-content').html(response.miniWishlistContent);
                    jQuery(".miniWishlistContainer .mini-cart-content .cartcontent").enscroll();
                }
            },'json') .fail(function() {
                window.location.href = url;
            });            
            listBoxTimerObj = setTimeout(function(){closeWishlistItemBox(containerBoxClass)}, 1000);
};

var addItemFromCartToWishlist = function(clickedObj){
    var currentID = '#'+clickedObj;
    var url = jQuery(currentID).data("url");
    var deleteUrl = jQuery(currentID).data("deleteUrl");
    checkLogin = jQuery(currentID).hasClass('loginNecessary');
    if(checkLogin==='true' || checkLogin===true){
        var base_url = window.location.origin;
        var newUrl = url+'?backurl='+deleteUrl;
        jQuery("#Signin-popup").modal('show');
        jQuery('#redirecturl-login').val(newUrl);
        jQuery('#redirecturl-login-otp').val(newUrl);
        jQuery('#redirecturl-registration').val(newUrl);
        document.cookie = "RemoveCartUrl=''; expires=Thu, 01 Jan 1970 00:00:00 UTC;";
        var gotoPage = base_url+'/customer/account/login?redirecturl='+encodeURIComponent(newUrl);
        document.cookie = "RemoveCartUrl="+gotoPage+";";
        //CDM-871 login redirection to popup
        window.location.href = window.location.href+'/#Signin-popup?redirecturl='+encodeURIComponent(newUrl);
    }
    else {
        jQuery.ajax({
            type: "get",
            data:{"requestType":"ajax"},
            dataType: 'json',
            url: url,
            success: function(response)
            {  
                //facebook pixel add to wishlist tracking
                facebookPixelTracking.callFbq('AddToWishlist');
                var badgeQty = detail.formatBadgeQty(response.cartItemQuantity);
                jQuery('.icon-bag.mini-cart span.badge').html(badgeQty);
                jQuery('.mini-cart-content').html(response.miniCartContent);
                detail.addToBagWishListMsgPopUp(response.removalMsg,'.wishlistadded',true);
                if(response.cartItemQuantity<0){
                    window.location.reload();
                }else{
                    jQuery('.cart-summary-right').html(response.orderSummary);
                    jQuery('.cart-page-items').html(response.cartItems);  
                     //cart order summary for mobile
                    cartOrderSummary();              
                }
            }
        });
    }
    return false;
};
var closeWishlistItemBox = function(containerBoxClass){                
    jQuery("div#"+containerBoxClass).fadeOut("slow");
};

var moveToWishListPage = function(){
    window.location.href = "/customer/wishlist";
};
var moveToIdeabookListPage = function(){
    window.location.href = "/customer/ideabook";
};

// INDFUR - 1701: Add fly effect to wishlist click on product detail page. 
if(jQuery(".fly-image-wrapper").length){
    jQuery('.fly-image-wrapper').flyto({
        item      : 'li',
        target    : '#wishlistBoxHeader',
        button    : '.my-fly-btn',
        shake:false
    });
} 


    jQuery(document).ready(function(){
        $('.wishlistadded').hide();
        // INDFUR - 1701: Show selected wishlist item in popup on catalog and product detail page
        jQuery(document).on("click", ".catWishList,.catWishListAdded,.catideabookList,.catideabookListAdded", function(event){
                var productType = $(this).attr('data-producttype');
                if(productType=='simple') {
                    wishlistRender(this);
                } else if(productType=='config') {  
                    var actualWishListSku = $(this).data('sku');
                    var checkListPage = $(this).hasClass('list') && $(this).hasClass('catWishListAdded');
                    //In plp variant, we are not using now. we can use in future 
                   var variantWishListSku = $('.sizebox.sizeboxtext.active').attr('data-js-variant');
                   if(typeof variantWishListSku=='undefined' || variantWishListSku=='') {
                       variantWishListSku  = null;
                   }
                    detail.setProductSkus(actualWishListSku,variantWishListSku);
                    wishlistClick(this,checkListPage);
                }
            
            });
                        
        //LIKE Idea
        userEngage.likeAction();
        if(window.userEngage_pos == 'design-inspiration' || window.userEngage_pos == 'design-inspiration-detail'){
           userEngage.renderLikeLog();
        }
        //END LIKE  Idea
        
        // Wishlist at cart page.
        jQuery(document).on("click", ".cartWishList", function(event){   
			if($(window).width() < 767){
			$(this).find('.buttonsavetxt').text('Moving...').prop('disabled',true);	
			}						
            var wishlistItemBox = "wishlistBoxHeader";
            var url = jQuery(this).data("url");
            var sku = jQuery(this).data("sku"); 
            var gatags = jQuery(this).data("gatags");
            var productName = jQuery(this).data("productname");
            var productImage = (jQuery(this).data("productimage"));
            var dataDeleteUrl = jQuery(this).data('delete-url');
            if(typeof sku !== 'undefined' && sku!='' && typeof wt !== 'undefined'){                
                wt.sendinfo ({linkId: "PdPAddToWishlist_"+sku});
            }
            if ($(".loginNecessary").length > 0) {
		if(oneStepCheckout.isMobile()){
		     //window.location.href = '/customer/account/login';
                      $('.mobileSignPopup').addClass('active');
			$('body').addClass('overHiddenHeader');
		      $('.mob_overlay').addClass('displySignblock');
		}else{
		     $('.mini-cart-content3').addClass('active-minicart');
		}
		if(($(window).width()<768) && ($('.catalogdetailpage').length>0)) {
		//$('body,html').animate({scrollTop:0},400);
		}
            }
            else{
                //INDFUR-2253  GA track 
                if (typeof _gaq !== 'undefined')
                {
                 _gaq.push(['_trackEvent', 'Product', 'Move to wishlist from cart', gatags]);    
                }
                //End INDFUR-2253
				if($(window).width() < 767){
					$('#location-mask,#loadId,.alert-cartremoval').hide();
				}
				else
				{
					detail.showLoader();
				}
                addItemToWishlist(this, "cartWishlistBox", wishlistItemBox, url, productImage, productName,1,dataDeleteUrl);
				if($(window).width() < 767){
					$(this).find('.buttonsavetxt').text('Moving...').prop('disabled',false);	
				}	
                jQuery(document).on("click", ".closeWishlistBox", function(){
                     jQuery("div."+wishlistItemBox).fadeOut("slow");
                });
             }
        });
        
        // Wishlist at detail page.
        jQuery(document).on("click", ".selleraddr", function(event){    
            var url = jQuery(this).attr("url");
            
            if ($(".loginNecessary").length > 0) {
                loginPopUp.showLoginPopUp(url);
            }
        });
        
        // INDFUR - 2250: Show recently viewed items
        
    });

function redeemGiftVoucher(){
    url = '/customer/loyalty/applygiftvoucher/code'
    jQuery.get(url,$( "#gift_voucher_code" ).serialize(),function(response){ jQuery("#gift_voucher_redeemed_response").html(response);});
} 

function wishlistRender(event) {
    
    var wishlistItemBox = "wishlistItemBox";    
        
            var sku = jQuery(event).data("sku");
			if( typeof(sku)  === 'undefined'){
				var sku = jQuery(event).data("sku-plp");
			}
            if (sku.indexOf('-') != -1) {
                configSkuData = sku.split('-');
                configSku = configSkuData[0];
             }else{
                configSku = sku;
            }
            var url = jQuery(event).data("url");
            if(url == undefined){
                url = '/customer/wishlist/add/p/'+configSku+'/sku/'+sku;
            }
            //Note: catalog_370 should be changed if changed in catalog page
            var productImage = (jQuery(event).data("productimage")).replace("catalog_370","cart");
            var productName = jQuery(event).data("productname");
            
            if(typeof sku !== 'undefined' && sku!=''  && typeof wt !== 'undefined'){                
                wt.sendinfo ({linkId: "PdPAddToWishlist_"+sku});
            }
            if ($( event ).hasClass('loginNecessary') || ($(".loginNecessary").length) > 0) {
                var addWhislistUnlogged = $(event).attr("data-sku-plp");
                if(addWhislistUnlogged == undefined){
                        addWhislistUnlogged = configSku;
                }
                var addWhislistUnloggedClass = "add-whislist-unlogged-"+addWhislistUnlogged;
                //localStorage.setItem("redirectUrl", window.location.href+"?addsaveditem="+addWhislistUnloggedClass);
                var gotoPage = window.location.href+"?addsaveditem="+addWhislistUnloggedClass;
                document.cookie = "AddWishListUrl="+gotoPage+";";
                $('.header-login-btn-std').attr('href', '/customer/account/login?redirecturl='+window.location.href+"&addsaveditems="+addWhislistUnloggedClass);
		if(oneStepCheckout.isMobile()){
		    // window.location.href = '/customer/account/login?redirecturl='+window.location.href+"&addsaveditems="+addWhislistUnloggedClass;
                      $('.mobileSignPopup').addClass('active');
			$('body').addClass('overHiddenHeader');
                          $('.mob_overlay').addClass('displySignblock');
		}else{
		     $('.mini-cart-content3').addClass('active-minicart');
		}
		if(($(window).width()<768) && ($('.catalogdetailpage').length>0)) {
		//$('body,html').animate({scrollTop:0},400);
		}
            }
            else{
            // The method makes ajax request to add item to wishlist
            addItemToWishlist(event, "productWishlistBox", wishlistItemBox, url, productImage, productName,0);
            jQuery(document).on("click", ".closeWishlistBox", function(){
                 jQuery("div."+wishlistItemBox).fadeOut("slow");
            });
        }
}



var userEngage = {
    likeInfo: {},
    init: function () {
    },
    renderLikeLog: function () {
        var skuArray = userEngage_sku_array;
        var data = {};
        data.sku_array = skuArray;
        data.YII_CSRF_TOKEN = $('input[name="YII_CSRF_TOKEN"]').val();
        var baseUrl = $('input[name="baseUrl"]').val();
        var url = baseUrl + '/customer/like/get';

        jQuery.post(url, data, function (response) {
            var resObj = response.response;
            $.each(resObj, function (i, v) {
                var sku = v.simple_sku;
                var lkid = '.lk-' + sku;
                if (window.userEngage_pos == 'design-inspiration') {
                    var lkObj = $('#designInspiration ' + lkid).find('.ideaLikeCls');
                }
                else {//for details page
                    var lkObj = $('.imageInfo').find('.ideaLikeCls');
                }
                var lkCountObj = lkObj.find('.ideaLikeCount');
                //var number = 1 + Math.floor(Math.random() * 600000);
                var count_format = userEngage.nFormatter(v.count);
                lkCountObj.html(count_format);
                lkCountObj.show();
                
                if (v.user_flag) {
                    (lkObj.attr('like_st') == 'like') ? lkObj.attr('like_st', 'liked') : lkObj.attr('like_st', 'like');
                    lkObj.removeClass('ideaLike').addClass('ideaUnlike');
                }
            });

        }, 'json').fail(function () {
            // window.location.href = url;
        });
    },
    likeAction: function () {
        jQuery(document).on("click", ".ideaLike,.ideaUnlike", function (event) {
            var thisObj = jQuery(this);
            var url = jQuery(this).data("url");
            var sku = jQuery(this).data("sku");

            if ($(this).hasClass('loginNecessary')) {
                if (thisObj.attr('data-mode') == 'idealikepopup') {
                    jQuery(".fancybox-close").click();
                }
                loginPopUp.wishListUrl = url;
                loginPopUp.showLoginPopUp(url);
            }
            else {
                // The method makes ajax request to like/dislike item
                jQuery.get(url, {"requestType": "ajax"}, function (response) {
                    var resObj = response.response;
                    if (resObj.status == 200) {
                        if (resObj.action == 'add') {
                            thisObj.removeClass('ideaLike').addClass('ideaUnlike');
                            thisObj.attr('like_st', 'liked');
                        }
                        else {
                            thisObj.removeClass('ideaUnlike').addClass('ideaLike');
                            thisObj.attr('like_st', 'like');
                        }
                        
                        var lkparObj = thisObj.parent();
                        if (resObj.countLike > 0) {
                            var count_format = userEngage.nFormatter(resObj.countLike);
                            lkparObj.find('.ideaLikeCount').html(count_format);
                            lkparObj.find('.ideaLikeCount').show();
                        }
                        else {
                            lkparObj.find('.ideaLikeCount').html('');
                            lkparObj.find('.ideaLikeCount').hide();
                        }
                        
                        //var countLike = (resObj.countLike > 0) ? count_format : '';
                        

                        //if popup opened
                        if (thisObj.attr('data-mode') == 'idealikepopup') {
                            var lkid = '.lk-' + sku;
                            var lkObj = $('#designInspiration ' + lkid).find('.ideaLikeCls');
                            var lkCountObj = lkObj.find('.ideaLikeCount');
                            
                            if (resObj.countLike > 0) {
                                lkCountObj.html(count_format);
                                lkCountObj.show();
                            }
                            else{
                                lkCountObj.html('');
                                lkCountObj.hide();
                            }
                            
                            if (resObj.action == 'add') {
                                lkObj.removeClass('ideaLike').addClass('ideaUnlike');
                                lkObj.attr('like_st', 'liked');
                            }
                            else {
                                lkObj.removeClass('ideaUnlike').addClass('ideaLike');
                                lkObj.attr('like_st', 'like');
                            }
                        }
                    }
                    else {
                        window.location.href = url;
                    }
                }, 'json').fail(function () {
                    //window.location.href = url;
                });
            }
            event.preventDefault();
        });
    },
    triggerLikeideaPopup: function (thisObj) {
        var sku = thisObj.element.data('sku');
        var id = thisObj.element.attr('id');
        var simple_squ = (id) ? sku + '-' + id : sku;
        var lkid = '.lk-' + simple_squ;
        
        var lkCountObj = $('#designInspiration ' + lkid).find('.ideaLikeCount');
        var count = lkCountObj.html();
        var lkLikeObj = $('#designInspiration ' + lkid).find('.ideaLikeCls');
        var like_st = lkLikeObj.attr('like_st');

        if (like_st == 'liked') {
            var likeElmt = $('.fancybox-wrap').find('.ideaLikeCls');
            likeElmt.removeClass('ideaLike').addClass('ideaUnlike');
        }
        var countElmt = $('.fancybox-wrap').find('.ideaLikeCount');
        if ($.trim(count)) {
            countElmt.html(count);
            countElmt.show();
        }
        
    },
    nFormatter: function (num) {
        if (num >= 1000000000) {
            return (num / 1000000000).toFixed(1).replace(/\.0$/, '') + 'G';
        }
        if (num >= 1000000) {
            return (num / 1000000).toFixed(1).replace(/\.0$/, '') + 'M';
        }
        if (num >= 1000) {
            return (num / 1000).toFixed(1).replace(/\.0$/, '') + 'K';
        }
        return num;
    }

}

$( ".sizeboxtext" ).click(function() {
    $(".product-simple-offer, .product-simple-offer-multi").hide();
    var variantWishListSku = $(this).data('js-variant');
    $('.product-offer ul, .product-simple-offer-multi .product-offer1 ul').hide();
    $("#product-simple-offer-"+variantWishListSku+" ul:lt(1)").show();
    $(this).removeClass('openOffer');
    $('.offerSimbel').html('+');
    $('.offercount_number').show();
    if($('#product-simple-offer-'+variantWishListSku+' .product-offer1 ul').length <= 2) {
        $('.offermessage').html('offer');
    } else if($('#product-simple-offer-'+variantWishListSku+' .product-offer1 ul').length > 2) {
        $('.offermessage').html('offers');
    }
    $(".product-offer").hide();
    $('.product-offer-discount').hide();
    $("#product-simple-offer-"+variantWishListSku).show();
});

$(function() {
    //Hide navigation dropdown on mouseover
    $( "ul.fabMenuTabbed li" ).mouseenter(function() {
            $(".login-popup").hide();
    })
    //show popup when clicking the trigger
    $('.open-login').bind('click touch', function(){
     $('#log-loader').hide();   
    loginPopUp.showLoginPopUp('header');
    });        
    //hide it when clicking anywhere else except the popup and the trigger
    $(document).bind('click touch', function(event) {
      if (!$(event.target).parents().addBack().is('.open-login') && !$(event.target).parents().addBack().is('.catWisvshList') && !$(event.target).parents().addBack().is('.catideabookList') && !$(event.target).parents().addBack().is('.cartWishList') && !$(event.target).parents().addBack().is('.prodWishlist') ) {
        $('.login-popup').hide();
      }
    });

    // Stop propagation to prevent hiding "#tooltip" when clicking on it
    $('.login-popup').bind('click touch', function(event) {
      event.stopPropagation();
    }); 
    
    
    $("#loginiFrame").contents().find('#register').click(function(){
          $('.login-popup').hide();
    });    
var input = document.createElement("input");
if(('placeholder' in input)==false) { 
       $('[placeholder]').focus(function() {
               var i = $(this);
               if(i.val() == i.attr('placeholder')) {
                       i.val('').removeClass('placeholder');
                       if(i.hasClass('password')) {
                               i.removeClass('password');
                       }			
               }
       }).blur(function() {
               var i = $(this);	
               if(i.val() == '' || i.val() == i.attr('placeholder')) {
                       if(this.type=='password') {
                               i.addClass('password');
                               //this.type='text';
                       }
                       i.addClass('placeholder').val(i.attr('placeholder'));
               }
       }).blur().parents('form').submit(function() {
               $(this).find('[placeholder]').each(function() {
                       var i = $(this);
                       if(i.val() == i.attr('placeholder'))
                               i.val('');
               })
       });
}
});

loginPopUp = {
    wishListUrl : null,
    showLoginPopUp : function(url){
    var status = $('.login-popup').css('display');
    if(status == 'none' || url !='header') {
        var iframe = $("#loginiFrame");
	var protocol = iframe.data('protocol');
        iframe.hide();
        $('#log-loader').show();
        if(url !='header'){
            iframe.attr("src", iframe.data("src")+'?'+'wishlistUrl='+url+'&protocol='+protocol);
        }
        else {
            iframe.attr("src", iframe.data("src")+'?'+'protocol='+protocol);
        } 
        iframe.load(function(){
             $('#log-loader').hide();
             iframe.show();
             $(".login-popup").show();
        });
        $(".login-popup").show();
    } 
    else {
        $(".login-popup").toggle();
          }      
    }
};

	

















(function () {
	

	
	function EventEmitter() {}

	// Shortcuts to improve speed and size
	var proto = EventEmitter.prototype;
	var exports = this;
	var originalGlobalValue = exports.EventEmitter;

	
	function indexOfListener(listeners, listener) {
		var i = listeners.length;
		while (i--) {
			if (listeners[i].listener === listener) {
				return i;
			}
		}

		return -1;
	}

	
	function alias(name) {
		return function aliasClosure() {
			return this[name].apply(this, arguments);
		};
	}

	
	proto.getListeners = function getListeners(evt) {
		var events = this._getEvents();
		var response;
		var key;

		// Return a concatenated array of all matching events if
		// the selector is a regular expression.
		if (typeof evt === 'object') {
			response = {};
			for (key in events) {
				if (events.hasOwnProperty(key) && evt.test(key)) {
					response[key] = events[key];
				}
			}
		}
		else {
			response = events[evt] || (events[evt] = []);
		}

		return response;
	};

	
	proto.flattenListeners = function flattenListeners(listeners) {
		var flatListeners = [];
		var i;

		for (i = 0; i < listeners.length; i += 1) {
			flatListeners.push(listeners[i].listener);
		}

		return flatListeners;
	};

	
	proto.getListenersAsObject = function getListenersAsObject(evt) {
		var listeners = this.getListeners(evt);
		var response;

		if (listeners instanceof Array) {
			response = {};
			response[evt] = listeners;
		}

		return response || listeners;
	};

	
	proto.addListener = function addListener(evt, listener) {
		var listeners = this.getListenersAsObject(evt);
		var listenerIsWrapped = typeof listener === 'object';
		var key;

		for (key in listeners) {
			if (listeners.hasOwnProperty(key) && indexOfListener(listeners[key], listener) === -1) {
				listeners[key].push(listenerIsWrapped ? listener : {
					listener: listener,
					once: false
				});
			}
		}

		return this;
	};

	
	proto.on = alias('addListener');

	
	proto.addOnceListener = function addOnceListener(evt, listener) {
		return this.addListener(evt, {
			listener: listener,
			once: true
		});
	};

	
	proto.once = alias('addOnceListener');

	
	proto.defineEvent = function defineEvent(evt) {
		this.getListeners(evt);
		return this;
	};

	
	proto.defineEvents = function defineEvents(evts) {
		for (var i = 0; i < evts.length; i += 1) {
			this.defineEvent(evts[i]);
		}
		return this;
	};

	
	proto.removeListener = function removeListener(evt, listener) {
		var listeners = this.getListenersAsObject(evt);
		var index;
		var key;

		for (key in listeners) {
			if (listeners.hasOwnProperty(key)) {
				index = indexOfListener(listeners[key], listener);

				if (index !== -1) {
					listeners[key].splice(index, 1);
				}
			}
		}

		return this;
	};

	
	proto.off = alias('removeListener');

	
	proto.addListeners = function addListeners(evt, listeners) {
		// Pass through to manipulateListeners
		return this.manipulateListeners(false, evt, listeners);
	};

	
	proto.removeListeners = function removeListeners(evt, listeners) {
		// Pass through to manipulateListeners
		return this.manipulateListeners(true, evt, listeners);
	};

	
	proto.manipulateListeners = function manipulateListeners(remove, evt, listeners) {
		var i;
		var value;
		var single = remove ? this.removeListener : this.addListener;
		var multiple = remove ? this.removeListeners : this.addListeners;

		// If evt is an object then pass each of it's properties to this method
		if (typeof evt === 'object' && !(evt instanceof RegExp)) {
			for (i in evt) {
				if (evt.hasOwnProperty(i) && (value = evt[i])) {
					// Pass the single listener straight through to the singular method
					if (typeof value === 'function') {
						single.call(this, i, value);
					}
					else {
						// Otherwise pass back to the multiple function
						multiple.call(this, i, value);
					}
				}
			}
		}
		else {
			// So evt must be a string
			// And listeners must be an array of listeners
			// Loop over it and pass each one to the multiple method
			i = listeners.length;
			while (i--) {
				single.call(this, evt, listeners[i]);
			}
		}

		return this;
	};

	
	proto.removeEvent = function removeEvent(evt) {
		var type = typeof evt;
		var events = this._getEvents();
		var key;

		// Remove different things depending on the state of evt
		if (type === 'string') {
			// Remove all listeners for the specified event
			delete events[evt];
		}
		else if (type === 'object') {
			// Remove all events matching the regex.
			for (key in events) {
				if (events.hasOwnProperty(key) && evt.test(key)) {
					delete events[key];
				}
			}
		}
		else {
			// Remove all listeners in all events
			delete this._events;
		}

		return this;
	};

	
	proto.removeAllListeners = alias('removeEvent');

	
	proto.emitEvent = function emitEvent(evt, args) {
		var listeners = this.getListenersAsObject(evt);
		var listener;
		var i;
		var key;
		var response;

		for (key in listeners) {
			if (listeners.hasOwnProperty(key)) {
				i = listeners[key].length;

				while (i--) {
					// If the listener returns true then it shall be removed from the event
					// The function is executed either with a basic call or an apply if there is an args array
					listener = listeners[key][i];

					if (listener.once === true) {
						this.removeListener(evt, listener.listener);
					}

					response = listener.listener.apply(this, args || []);

					if (response === this._getOnceReturnValue()) {
						this.removeListener(evt, listener.listener);
					}
				}
			}
		}

		return this;
	};

	
	proto.trigger = alias('emitEvent');

	
	proto.emit = function emit(evt) {
		var args = Array.prototype.slice.call(arguments, 1);
		return this.emitEvent(evt, args);
	};

	
	proto.setOnceReturnValue = function setOnceReturnValue(value) {
		this._onceReturnValue = value;
		return this;
	};

	
	proto._getOnceReturnValue = function _getOnceReturnValue() {
		if (this.hasOwnProperty('_onceReturnValue')) {
			return this._onceReturnValue;
		}
		else {
			return true;
		}
	};

	
	proto._getEvents = function _getEvents() {
		return this._events || (this._events = {});
	};

	
	EventEmitter.noConflict = function noConflict() {
		exports.EventEmitter = originalGlobalValue;
		return EventEmitter;
	};

	// Expose the class either via AMD, CommonJS or the global object
	if (typeof define === 'function' && define.amd) {
		define('eventEmitter/EventEmitter',[],function () {
			return EventEmitter;
		});
	}
	else if (typeof module === 'object' && module.exports){
		module.exports = EventEmitter;
	}
	else {
		this.EventEmitter = EventEmitter;
	}
}.call(this));






( function( window ) {



var docElem = document.documentElement;

var bind = function() {};

function getIEEvent( obj ) {
  var event = window.event;
  // add event.target
  event.target = event.target || event.srcElement || obj;
  return event;
}

if ( docElem.addEventListener ) {
  bind = function( obj, type, fn ) {
    obj.addEventListener( type, fn, false );
  };
} else if ( docElem.attachEvent ) {
  bind = function( obj, type, fn ) {
    obj[ type + fn ] = fn.handleEvent ?
      function() {
        var event = getIEEvent( obj );
        fn.handleEvent.call( fn, event );
      } :
      function() {
        var event = getIEEvent( obj );
        fn.call( obj, event );
      };
    obj.attachEvent( "on" + type, obj[ type + fn ] );
  };
}

var unbind = function() {};

if ( docElem.removeEventListener ) {
  unbind = function( obj, type, fn ) {
    obj.removeEventListener( type, fn, false );
  };
} else if ( docElem.detachEvent ) {
  unbind = function( obj, type, fn ) {
    obj.detachEvent( "on" + type, obj[ type + fn ] );
    try {
      delete obj[ type + fn ];
    } catch ( err ) {
      // can't delete window object properties
      obj[ type + fn ] = undefined;
    }
  };
}

var eventie = {
  bind: bind,
  unbind: unbind
};

// transport
if ( typeof define === 'function' && define.amd ) {
  // AMD
  define( 'eventie/eventie',eventie );
} else {
  // browser global
  window.eventie = eventie;
}

})( this );



( function( window, factory ) { 
  // universal module definition

  

  if ( typeof define === 'function' && define.amd ) {
    // AMD
    define( [
      'eventEmitter/EventEmitter',
      'eventie/eventie'
    ], function( EventEmitter, eventie ) {
      return factory( window, EventEmitter, eventie );
    });
  } else if ( typeof exports === 'object' ) {
    // CommonJS
    module.exports = factory(
      window,
      require('wolfy87-eventemitter'),
      require('eventie')
    );
  } else {
    // browser global
    window.imagesLoaded = factory(
      window,
      window.EventEmitter,
      window.eventie
    );
  }

})( window,

// --------------------------  factory -------------------------- //

function factory( window, EventEmitter, eventie ) {



var $ = window.jQuery;
var console = window.console;
var hasConsole = typeof console !== 'undefined';

// -------------------------- helpers -------------------------- //

// extend objects
function extend( a, b ) {
  for ( var prop in b ) {
    a[ prop ] = b[ prop ];
  }
  return a;
}

var objToString = Object.prototype.toString;
function isArray( obj ) {
  return objToString.call( obj ) === '[object Array]';
}

// turn element or nodeList into an array
function makeArray( obj ) {
  var ary = [];
  if ( isArray( obj ) ) {
    // use object if already an array
    ary = obj;
  } else if ( typeof obj.length === 'number' ) {
    // convert nodeList to array
    for ( var i=0, len = obj.length; i < len; i++ ) {
      ary.push( obj[i] );
    }
  } else {
    // array of single index
    ary.push( obj );
  }
  return ary;
}

  // -------------------------- imagesLoaded -------------------------- //

  
  function ImagesLoaded( elem, options, onAlways ) {
    // coerce ImagesLoaded() without new, to be new ImagesLoaded()
    if ( !( this instanceof ImagesLoaded ) ) {
      return new ImagesLoaded( elem, options );
    }
    // use elem as selector string
    if ( typeof elem === 'string' ) {
      elem = document.querySelectorAll( elem );
    }

    this.elements = makeArray( elem );
    this.options = extend( {}, this.options );

    if ( typeof options === 'function' ) {
      onAlways = options;
    } else {
      extend( this.options, options );
    }

    if ( onAlways ) {
      this.on( 'always', onAlways );
    }

    this.getImages();

    if ( $ ) {
      // add jQuery Deferred object
      this.jqDeferred = new $.Deferred();
    }

    // HACK check async to allow time to bind listeners
    var _this = this;
    setTimeout( function() {
      _this.check();
    });
  }

  ImagesLoaded.prototype = new EventEmitter();

  ImagesLoaded.prototype.options = {};

  ImagesLoaded.prototype.getImages = function() {
    this.images = [];

    // filter & find items if we have an item selector
    for ( var i=0, len = this.elements.length; i < len; i++ ) {
      var elem = this.elements[i];
      // filter siblings
      if ( elem.nodeName === 'IMG' ) {
        this.addImage( elem );
      }
      // find children
      // no non-element nodes, #143
      var nodeType = elem.nodeType;
      if ( !nodeType || !( nodeType === 1 || nodeType === 9 || nodeType === 11 ) ) {
        continue;
      }
      var childElems = elem.querySelectorAll('img');
      // concat childElems to filterFound array
      for ( var j=0, jLen = childElems.length; j < jLen; j++ ) {
        var img = childElems[j];
        this.addImage( img );
      }
    }
  };

  
  ImagesLoaded.prototype.addImage = function( img ) {
    var loadingImage = new LoadingImage( img );
    this.images.push( loadingImage );
  };

  ImagesLoaded.prototype.check = function() {
    var _this = this;
    var checkedCount = 0;
    var length = this.images.length;
    this.hasAnyBroken = false;
    // complete if no images
    if ( !length ) {
      this.complete();
      return;
    }

    function onConfirm( image, message ) {
      if ( _this.options.debug && hasConsole ) {
        console.log( 'confirm', image, message );
      }

      _this.progress( image );
      checkedCount++;
      if ( checkedCount === length ) {
        _this.complete();
      }
      return true; // bind once
    }

    for ( var i=0; i < length; i++ ) {
      var loadingImage = this.images[i];
      loadingImage.on( 'confirm', onConfirm );
      loadingImage.check();
    }
  };

  ImagesLoaded.prototype.progress = function( image ) {
    this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;
    // HACK - Chrome triggers event before object properties have changed. #83
    var _this = this;
    setTimeout( function() {
      _this.emit( 'progress', _this, image );
      if ( _this.jqDeferred && _this.jqDeferred.notify ) {
        _this.jqDeferred.notify( _this, image );
      }
    });
  };

  ImagesLoaded.prototype.complete = function() {
    var eventName = this.hasAnyBroken ? 'fail' : 'done';
    this.isComplete = true;
    var _this = this;
    // HACK - another setTimeout so that confirm happens after progress
    setTimeout( function() {
      _this.emit( eventName, _this );
      _this.emit( 'always', _this );
      if ( _this.jqDeferred ) {
        var jqMethod = _this.hasAnyBroken ? 'reject' : 'resolve';
        _this.jqDeferred[ jqMethod ]( _this );
      }
    });
  };

  // -------------------------- jquery -------------------------- //

  if ( $ ) {
    $.fn.imagesLoaded = function( options, callback ) {
      var instance = new ImagesLoaded( this, options, callback );
      return instance.jqDeferred.promise( $(this) );
    };
  }


  // --------------------------  -------------------------- //

  function LoadingImage( img ) {
    this.img = img;
  }

  LoadingImage.prototype = new EventEmitter();

  LoadingImage.prototype.check = function() {
    // first check cached any previous images that have same src
    var resource = cache[ this.img.src ] || new Resource( this.img.src );
    if ( resource.isConfirmed ) {
      this.confirm( resource.isLoaded, 'cached was confirmed' );
      return;
    }

    // If complete is true and browser supports natural sizes,
    // try to check for image status manually.
    if ( this.img.complete && this.img.naturalWidth !== undefined ) {
      // report based on naturalWidth
      this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );
      return;
    }

    // If none of the checks above matched, simulate loading on detached element.
    var _this = this;
    resource.on( 'confirm', function( resrc, message ) {
      _this.confirm( resrc.isLoaded, message );
      return true;
    });

    resource.check();
  };

  LoadingImage.prototype.confirm = function( isLoaded, message ) {
    this.isLoaded = isLoaded;
    this.emit( 'confirm', this, message );
  };

  // -------------------------- Resource -------------------------- //

  // Resource checks each src, only once
  // separate class from LoadingImage to prevent memory leaks. See #115

  var cache = {};

  function Resource( src ) {
    this.src = src;
    // add to cache
    cache[ src ] = this;
  }

  Resource.prototype = new EventEmitter();

  Resource.prototype.check = function() {
    // only trigger checking once
    if ( this.isChecked ) {
      return;
    }
    // simulate loading on detached element
    var proxyImage = new Image();
    eventie.bind( proxyImage, 'load', this );
    eventie.bind( proxyImage, 'error', this );
    proxyImage.src = this.src;
    // set flag
    this.isChecked = true;
  };

  // ----- events ----- //

  // trigger specified handler for event type
  Resource.prototype.handleEvent = function( event ) {
    var method = 'on' + event.type;
    if ( this[ method ] ) {
      this[ method ]( event );
    }
  };

  Resource.prototype.onload = function( event ) {
    this.confirm( true, 'onload' );
    this.unbindProxyEvents( event );
  };

  Resource.prototype.onerror = function( event ) {
    this.confirm( false, 'onerror' );
    this.unbindProxyEvents( event );
  };

  // ----- confirm ----- //

  Resource.prototype.confirm = function( isLoaded, message ) {
    this.isConfirmed = true;
    this.isLoaded = isLoaded;
    this.emit( 'confirm', this, message );
  };

  Resource.prototype.unbindProxyEvents = function( event ) {
    eventie.unbind( event.target, 'load', this );
    eventie.unbind( event.target, 'error', this );
  };

  // -----  ----- //

  return ImagesLoaded;

});


(function($) {
	function autosuggest(callBackUrl, textField){
		this.divId="suggestions_holder";
		this.hovered=false;
		this.arrData=null;

		this.textField=textField;
		this.callBackUrl=callBackUrl;

		
		var width=this.textField.width() + 30;
		var minChars=1;
		var currRow=0;
		var suggestRow="suggest_row";
		var suggestItem="suggest_item";

		this.idField=null;
		this.submitOnSelect=false;
		this.thumbnail=false;
		this.description=false;

		this.textField.after('<ul class="suggestions" id="' + this.divId + '"></ul>');
		this.textField.attr("autocomplete", "off");

		this.holder=this.textField.next("#" + this.divId);
		this.holder.hide();

		this.onSelected=null;

		var me=this;
		this.textField.keyup(
			function(e){
				if(e.keyCode!=37 && e.keyCode!=38 && e.keyCode!=39 && e.keyCode!=40 && e.keyCode!=13){
					if($(this).val().length>=minChars){
						$.ajax({
							url:me.callBackUrl + encodeURI($(this).val()),
							success:function(data){
								try{
									me.arrData=$.parseJSON(data);

									var arr=me.arrData;
									var html="";

									currRow=0;

									if(arr==null){
										me.hide();
									}
									else{
										if(arr.length>0){
											for(i=0;i<arr.length;i++){
												cssClass=suggestItem;

												if(i==0){
													cssClass+=" first";
												}
												if(i==(arr.length-1)){
													cssClass+=" last";
												}

												var id_field='';
												if(me.idField!=null){
													id_field=' id_field="' + arr[i].id + '"';
												}

												var thumb="";
												if(me.thumbnail==true){
													var style="";
													if(arr[i].thumbnail!=undefined){
														style=' style="background-image:url(' + arr[i].thumbnail + ');"';
													}
													thumb='<div class="thumbnail"' + style + '></div>';
												}

												var desc="";
												if(me.description==true){
													if(arr[i].description!=undefined){
														desc='<div class="description">' + arr[i].description + '</div>';
													}
												}

												html+='<li id="' + suggestRow + (i+1) + '" class="' + cssClass + '"' + id_field + ' seq_id="' + i + '" >' + thumb + '<div class="suggestion_title" style="margin-left: 2px">' + arr[i].data.replace(new RegExp('(' + me.textField.val() + ')', 'gi'), "<b>$1</b>") + '</div>' + desc + '</li>';
											}

											me.holder.html(html);

											for(i=1;i<=arr.length;i++){
												var target=me.holder.find("#" + suggestRow + i);
												target.mouseover(function(e){
													me.hovered=true;
													me.unSelectAll(this);
													$(this).addClass("selected");
												});

												target.mouseout(function(e){
													me.hovered=false;
													$(this).removeClass("selected");
												});

												target.click(function(e){
													me.textField.val($(this).find(".suggestion_title").text());
													if(me.idField!=null){
														me.idField.val($(this).attr("id_field"));
													}

													// Callback function
													if(me.onSelected!=null){
														me.onSelected.call(this, me.arrData[$(this).attr("seq_id")]);
													}

													if(me.submitOnSelect==true){
														$("form").has(me.textField).submit();
													}

													me.hide();
												});
											}

											me.show(me.holder.find("." + suggestItem).height() * arr.length);
										}
										else{
											me.hide();
										}
									}
								}
								catch(e){
									console.log('Sorry, an error has occured!');
								}
							},
							error: function(xhr, status, ex){
								console.log('Sorry, an error has occured!');
							}
						});
					}
					else{
						me.hide();
					}
				}
				else{
					if(me.holder.css("display")!="none"){
						checkKey(e);
					}
					else{
						// Callback function
						if(me.onSelected!=null){
							me.onSelected.call(this, null);
						}
					}
				}
			}
		);

		this.textField.bind(
			"blur",
			function(e){
				if(me.idField!=null){
					if(me.checkSelected(me.textField.val())==false){
						me.textField.val("");
						me.idField.val("");
					}
				}

				if(me.hovered==false){
					me.hide();
				}
				else{
					me.hovered=false;
				}
			}
		);

		this.show=function(height){
			this.holder.css({
				"position":"absolute",
				"left":this.textField.position().left + "px",
				"top":this.textField.position().top + this.textField.height() + 5 + "px",
				"height":height + "px"
			});

			this.holder.css({
				"width":width + "px"
			});

			this.holder.find("." + suggestItem).css({
				"width":width + "px",
				"overflow":"hidden"
			});

			this.holder.show();
		}

		this.hide=function(){
			this.holder.hide();
		}

		this.unSelectAll=function(div){
			var id=$(div).attr("id");
			var rows=this.holder.find("." + suggestItem).get().length;

			for(i=1;i<=rows;i++){
				this.holder.find("#" + suggestRow + i).removeClass("selected");
			}

			currRow=parseInt(id.replace(suggestRow, ""));
			var rgx=/^[0-9]+$/;
			if(!rgx.test(currRow)){
				currRow=0;
			}
		}

		this.setWidth=function(w){
			width=w;
		}

		this.setMinChars=function(c){
			minChars=c;
		}

		this.preventEnter=function(){
			this.textField.keypress(
				function(e){
					if(e.keyCode==13){
						return false;
					}

					return true;
				}
			);
		}

		this.checkSelected=function(data){
			if(this.arrData!=null){
				for(var i=0;i<this.arrData.length;i++){
					if(this.arrData[i].data==data){
						return true;
					}
				}
			}

			return false;
		}

		function checkKey(e){
			if(me.holder.css("display")!="none"){
				var rows=me.holder.find("." + suggestItem).get().length;
				if(e.keyCode==40){
					currRow++;
					if(currRow<=rows){
						if(currRow>0){
							me.holder.find("#" + suggestRow + (currRow-1)).removeClass("selected");
						}

						var target=me.holder.find("#" + suggestRow + currRow);

						target.addClass("selected");
						me.textField.val(target.find(".suggestion_title").text());
						if(me.idField!=null){
							me.idField.val(target.attr("id_field"));
						}
					}
					else{
						currRow=rows;
					}
				}
				else if(e.keyCode==38){
					currRow--;
					if(currRow>0){
						if(currRow<rows){
							me.holder.find("#" + suggestRow + (currRow+1)).removeClass("selected");
						}

						var target=me.holder.find("#" + suggestRow + currRow);

						target.addClass("selected");
						me.textField.val(target.find(".suggestion_title").text());
						if(me.idField!=null){
							me.idField.val(target.attr("id_field"));
						}
					}
					else{
						currRow=1;
					}
				}
				else if(e.keyCode==13){
					if(me.idField!=null){
						if(me.checkSelected(me.textField.val())==false){
							me.textField.val("");
							me.idField.val("");
						}
					}

					// Callback function
					if(me.onSelected!=null){
						if(currRow>0){
							me.onSelected.call(this, me.arrData[currRow-1]);
						}
						else{
							me.onSelected.call(this, null);
						}
					}

					me.hide();
				}
			}
			else{
				// Callback function
				if(me.onSelected!=null){
					me.onSelected.call(this, null);
				}
			}

			return true;
		}
	}

	$.fn.coolautosuggest = function(options) {
		var settings = {
			width: null,
			minChars: null,
			idField: null,
			submitOnSelect: false,
			showThumbnail : false,
			showDescription : false,
			onSelected : null
		};
		$.extend(settings, options);

		return this.each(function() {
			var obj = new autosuggest(settings.url, $(this));

			if(settings.width!=null){
				obj.setWidth(settings.width);
			}

			if(settings.minChars!=null){
				obj.setMinChars(settings.minChars);
			}

			if(settings.idField!=null){
				obj.idField=settings.idField;
				obj.preventEnter();
			}

			if(settings.submitOnSelect==true){
				obj.submitOnSelect=true;
			}
			else{
				obj.preventEnter();
			}

			if(settings.showThumbnail==true){
				obj.thumbnail=settings.showThumbnail;
			}

			if(settings.showDescription==true){
				obj.description=settings.showDescription;
			}

			

			if($.isFunction(settings.onSelected)==true){
				obj.onSelected=settings.onSelected;
			}
		});
	}
})(jQuery);
var oneStepCheckout = {
    IsCheckout: false,
    customerLogin : '/onestepcheckout/common/customerlogin/',
    shippingAdsTB  : '/onestepcheckout/common/customerreg/',
    paymentMethods : '/onestepcheckout/common/paymentmethods/',
    couponAdd : '/onestepcheckout/common/couponadd/coupon/',
    couponRemove : '/onestepcheckout/common/couponremove/',
    creditVoucherAdd : '/onestepcheckout/common/creditVoucherAdd/creditvoucher/',
    creditVoucherRemove : '/onestepcheckout/common/creditVoucherRemove/',
    applyCreditPoints : '/onestepcheckout/common/applycreditpoints/credits/',
    applyLoyaltyPoints : '/onestepcheckout/common/applyloyaltypoint/loyaltypoints/',
    pmsummary : '/onestepcheckout/common/summary/paymentMethod/',
    pmtsummary : '/onestepcheckout/common/summary/pmt/',
    orderreview : '/onestepcheckout/common/orderreview/',
    rightSection : '/onestepcheckout/common/rightupdate/',
    removeItemFS : '/onestepcheckout/common/removeitemfs/sku/',
    removeItemCT : '/onestepcheckout/common/removeitemct/sku/',
    cartUrl : '/cart/index/',
    leftContnr :'onestepcheckout-container-left', 
    rightContnr :'onestepcheckout-container-right', 
    fbLUrl: '/onestepcheckout/index/fblogin/',
    gLUrl: '/onestepcheckout/index/glogin/',
    checkoutUrl: '/onestepcheckout/index/',
    checkInstantBankOfferStatusLink:"/onestepcheckout/common/checkInstantBankOffer",
    isCardvalidated:true,
    canValidateCard:false,
  
    
    init : function (){
        this.customerTypeChange();
        this.showHideFrgPwd();
        this.forgetPwdFrmSubmit();
        this.submitLoginFrm();
        this.submitRegDetailFrm();
        this.orderItemQtyUpdate();
        this.pincodeCheck();
        this.pincodeAutoComplete();
        this.firstNamelastNameCheck();
        this.pincodeCheckNewBillAddr();
        this.paymentSubTab();
        this.emiBankSelect();
        this.emiOptionSelect();
        this.paymentOptChange();
        this.paymentOptChangeWallet();
        this.paymentOptSelectWallet();
        this.paymentOptChangeEMI();
        this.paymentOptSelectPartPay();
        this.paymentOptSelectPartPayWallet();
        this.tabSel();
        this.paymentSubmitFrm();
        this.removeCartItem();
        this.changeAddress();
        this.userShippingAdress();
        this.userLogContinue();
        this.prePaidOptionSelect();
        this.partPayOptionSelect();
        this.webtrekPaymentMethods();
        this.isPmtNotEnable();
        this.paymentOptChange0EMI();
        this.BankSelect0Emi();
        this.OptionSelect0Emi();
	this.shippinBtnAlign();
        this.eidtcardDetails();
	this.netBankingOptionChange();
	this.shippingEditClick();
        this.slowShakeRemoval();
		this.hideCredentials();
        this.checkOrderSummery();
        this.ewalletGWValidation();
    },
	hideCredentials : function()
	{
		
		
if($('.orderCheckoutSummaryRt .total_savings_text').length==0)
{
$('.orderCheckoutSummaryRt .cards_block').addClass('cardsborder');
}
		
	},
    slowShakeRemoval : function()
    {
        $('input[type=radio][name=existingAddressId]').change(function() {
            $('.saved_address_list_area .invalidPincodeErr').removeClass('shake-slow');
            if($(this).parents('.saved_address_list_area').find('.invalidPincodeErr').length==0) 
                {
                    $('.saved_address_list_area .invalidPincodeErr').removeClass('shake-slow');
                }
        });
        
      },                
    eidtcardDetails : function()
	{
		$('.savedcards').unbind('change').on('change', function(){
                        $('.date_input .store_cards_cvv').removeClass('cvv_required');
			$('.radio_card .date_input').hide();
                        $(".discount-styleup-offer").hide();
                        $("#cc_number").val('');
			$(this).parents(".radio_card").find('.date_input').show();
                        $(this).parents(".radio_card").find('.date_input .store_cards_cvv').addClass('cvv_required');
		});
		
	},
    isMobile : function () {
	var is_mobile = false;
	var rid;
	var w = window,
		d = document,
		e = d.documentElement,
		g = d.getElementsByTagName('body')[0],
		x = w.innerWidth || e.clientWidth || g.clientWidth,
		y = w.innerHeight|| e.clientHeight|| g.clientHeight;
	
	if( x < 768) {
		is_mobile = true;
		return is_mobile;
	}
	},
    shippinBtnAlign: function ()
    {
        oneStepCheckout.shippingButtonDetach('shippingProceedBtn');
        oneStepCheckout.shippingButtonDetach('shippingProceedBtnOTP');
    },
    shippingButtonDetach: function(shippingButtonClass) {
        oneStepCheckout.slowShakeRemoval();       
        shippingButtonClass = '.'+shippingButtonClass;
        if($(shippingButtonClass).length > 0){
            var Probtn = $(shippingButtonClass).parent('div').html();
            if($(".rightsum "+shippingButtonClass).length > 0) {
                $('.rightsum '+shippingButtonClass).replaceWith(Probtn);
            }else{

                $('#cartSummary').after(Probtn);
            }
            $(".rightsum "+shippingButtonClass).show();
            if($('.shippingProceedBtn').length > 0) {                
                $(shippingButtonClass).unbind().on('click', function () {
					$("#ShippingAddressForm_postcode").blur();	
                    $('.saved_address_list_area .invalidPincodeErr').removeClass('shake-slow');
                    
                    if($('input[name="existingAddressId"]:checked').parents('.saved_address_list_area').find('.invalidPincodeErr').length==0){             
                        $("#form-shipping-address").submit();
                    }                   
                    else 
                    {
                        $('input[name="existingAddressId"]:checked').parents('.saved_address_list_area').find('.invalidPincodeErr').addClass('shake-slow');
                    }	
                });
            }
        }
    },
    isPmtNotEnable : function(tab){
        if('1' != $(tab).data('pmenable')){
            return true;
        }
        return false;
    },
    loadData : function (url,cntrId, clearMsg){
        if( typeof clearMsg === 'undefined' ){
              oneStepCheckout.cleanMsg();
        }
		var fancyselect={
		selectdesign:function(){
			//$(".chosen-select").chosen({disable_search_threshold: 10});
		}
		}
     //  $('#cc_number, #dc_number').mask('?9999  9999  9999  9999  9999', { placeholder: "" });
        $('.sel-checkout-send').attr('disabled','disabled');
        oneStepCheckout.showHideLoader(true);
        if($('#tabs-1 > div').hasClass('emailCheckLogin')){
            $('.checkout-back-container').addClass('disable');
        }else{
            $('.checkout-back-container').removeClass('disable');   
        }
        var token = $('input[name="YII_CSRF_TOKEN"]').val();      
        $.ajax({
            url: url,
            dataType:'json',
            data: {},
            success: function(data) {
                //$("html, body").animate({ scrollTop: 300 }, "slow");
                if($("#form-shipping-address").length==1){
                    if($("#form-shipping-address .error").length==0){
                       $("html, body").animate({ scrollTop: 0 }, "medium");
                    }
                }
                oneStepCheckout.parseResponse(data, cntrId);
                $("#boxchecked").click(function (){
                    if ($("#boxchecked").prop("checked")){
                        $("#hidden").show();
                    }else{
                     $("#hidden").hide();
                    }              
                });
                oneStepCheckout.stickySummaryBox();  
                alphabetkeypress.allowOnlyAlphabets('.checkoutFirstName[type=text]');
                alphabetkeypress.allowOnlyAlphabets('.checkoutLastName[type=text]');
                if(oneStepCheckout.isMobile()){
                //$('.default_shipping_address').insertBefore('.saved_ico_addition');
                }
                oneStepCheckout.eidtcardDetails();
                $('.scrollbox').enscroll('destroy').enscroll();
                if(!data.isLoadRightCart && ($('.shippingProceedBtn').length > 0 || $('.shippingProceedBtnOTP').length > 0)){
                    oneStepCheckout.shippinBtnAlign();
                }
                if(jQuery('#postcode .errorMessage').length >= 1){
                                        $('#postcode .errorMessage').addClass('shake-slow');
                }				
                oneStepCheckout.hideCredentials(); 
                if($(".showdefault .invalidPincodeErr").length !== 0){
                    $(".shippingProceedBtn").addClass("unactive");
                }else{
                    $(".shippingProceedBtn").removeClass("unactive");
                }
            },
            error: function(response, error){
                oneStepCheckout.redirect(oneStepCheckout.cartUrl);
            }
            
        }).done(function () {
            $('.sel-checkout-send').attr('disabled', null);
             var pmt = $(".payment_checkout ul.nav-tabs li.active a").attr('data-pmt');
            if(pmt != undefined && (pmt == 'UPI' || pmt =='TEZ')) {
                $('#checkout-complete-payment-btn').prop('disabled', true);
            } else {
                $('#checkout-complete-payment-btn').prop('disabled', false);
            }
            oneStepCheckout.showHideLoader(false) ;
                        
            validCardNumberId = false;
            if(pmt == 'DebitCard'){
                validCardNumberId = '#dc_number';
            }else if(pmt == 'CreditCard'){
                validCardNumberId = '#cc_number';
            }
            if(validCardNumberId){
                oneStepCheckout.validateCardNumber(validCardNumberId);
            }
            
            if ($('.js_osc_step_2,.js_osc_step_1').hasClass('tabsCon-active')) {
                $('.applycoupon').hide();
            }
            oneStepCheckout.paymentactivetab(); 
        });
        $('.address_new .reg_select_box').on('keydown', function(e){
            if([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                   e.preventDefault();
               }
        });
         
    },
    
    ajaxSubmit : function (postData) {
        var checkoutProcess = $('.js-checkout-steps-container').html();
        $('.checkout-border-bottom').html('');
        $('.checkout-border-bottom').append('<div class="wrapper checkout-steps-container">'+checkoutProcess+'</div>');
        $(".rightsum .shippingProceedBtn").remove();
        oneStepCheckout.cleanMsg();
         
        $('#checkout-shipping-address-btn').attr('disabled', null);
        oneStepCheckout.showHideLoader(true);
        $.ajax({                 
            type: postData.type ,
            url:  postData.url,
            data: postData.data,
            dataType: 'json',
            success: function(response) {
                oneStepCheckout.parseResponse(response, oneStepCheckout.leftContnr);
                $("#location-mask").hide();
				if(jQuery('#postcode .errorMessage').length == 1){
                        $('#postcode .errorMessage').addClass('shake-slow');
                }
            },

            error: function(response, status, err){ 
                oneStepCheckout.redirect(oneStepCheckout.cartUrl);
            } 
        }).done(function () {
            $('#checkout-shipping-address-btn').attr('disabled', null);
            oneStepCheckout.showHideLoader(false) ;
           oneStepCheckout.pincodeAutoComplete();
           $(".requiredfields.error, .requiredfields1.error").each(function(){
              $(this).parents('.shipping_form').prepend('<span class="checkout-error-msg">fields marked * are mandatory</span>') 
           });
        });		
    },
    
    showHideLoader: function (status){
        if(status) {
            var wHeight = $(window).height();
            var wDialog = $("#dialogProcessing .container").height();
            var marginTop = wHeight / 2 - (156 / 2); 
            $("#dialogProcessing .container").css( "margin-top", marginTop );
            $('#dialogProcessing').show();
            
        }else {
            $('#dialogProcessing').hide();
        }
    },
    showHideORLoader: function (status){
        if(status){
            $("#osc-or-ldr").show();
        }else {
            $("#osc-or-ldr").hide();
        }
    },
    showHidePCLoader: function (status){
        if(status){
            $("#osc-pc-ldr").show();
        }else {
            $("#osc-pc-ldr").hide();
        }
    },
    parseResponse : function (resObj,dataCntrId){

        if(resObj === null) {
            return false;
        }
        
        if(resObj.rUrl) {
            oneStepCheckout.redirect(resObj.rUrl);
            return false;
        }
        
        if(resObj.isCartRedirect){
            oneStepCheckout.redirect(oneStepCheckout.cartUrl);
            return false;
        }
        
        if(resObj.errorMessage && dataCntrId !== 'onestepcheckout-container-left'){
            oneStepCheckout.showErrorMsg(resObj.errorMessage);    
        }else{
            oneStepCheckout.showErrorMsgLeft(resObj.errorMessage);
        }
        
        if(resObj.successMessage){
            oneStepCheckout.showSuccessMsg(resObj.successMessage);
        }
            
        if(resObj.data){
            $("#"+dataCntrId).html(resObj.data) ;
        }
        
        if(resObj.isLoadRightCart && !isNaN(resObj.isLoadRightCart)){
            oneStepCheckout.loadRightSide(resObj.isLoadRightCart,resObj.cTab);
                if ($('body').hasClass('cartpage')) {
                document.cookie = "cTab='';path=/";
            } else {
                document.cookie = "cTab=" + resObj.cTab + ";path=/";
            }
        }
        
        if(resObj.cTab && !isNaN(resObj.cTab)){
            oneStepCheckout.tabConfig(resObj.cTab);
        }
        if(resObj.cTab && !isNaN(resObj.cTab)){
            oneStepCheckout.adobeTracking(resObj,resObj.cTab);
        }
        
        return true;
    },
    
    parseJSONTry : function (data) {
        try{
            return jQuery.parseJSON(data);
        }catch(err){
            oneStepCheckout.redirect(oneStepCheckout.cartUrl);
            return false;
        }      
        
    },
    tabConfig: function (ctab){
       
        var ttlTab = 4;
        
        if(isNaN(ctab) || ctab > ttlTab ){
            return false;
        }
        
        oneStepCheckout.sendToWebtrekk(ctab - 1 );
        
        var tabCotnr = null;
        $("ul#js_osc_main_tab li").removeClass('js_osc_tab_prev').removeClass('js_osc_tab_act').removeClass('tabsCon-active');
        
        for(var index =1; index <= ctab; index++ ){
            if (index < ctab ){
                tabCotnr = $(".js_osc_step_"+index);
                tabCotnr.addClass("js_osc_tab_prev");
            }else if(index == ctab ){
                tabCotnr = $(".js_osc_step_"+index);
                tabCotnr.addClass('js_osc_tab_act').addClass('tabsCon-active');
                oneStepCheckout.pincodeAutoComplete();
                
                if($('#onestepcheckout-container-left > div').hasClass('order-review-section')){
                    $('.checkout-back-container a').hide();
                    $('.checkout-heading, .js-delivery-back-btn').show();
                }else{
                    $('.checkout-heading').hide();
                }
                
                if($('#tabs-1 > div').hasClass('shippinggloblesignin_page')){
                    $('.checkout-back-container a').hide();
                   // $('.js-signin-back-btn').show();
                }
                
                if($('#tabs-4  div').hasClass('payment_checkout_top')){
                    $('.checkout-back-container a').hide();
                    //$('.js-review-back-btn').show();
                    $('.payment-heading').hide();
                    $('.checkout-tab').addClass('rmpadding'); 
                }
                else{
                     $('.payment-heading').hide();
                     $('.checkout-tab').removeClass('rmpadding');  
                }
                
                if(($('.master_login').css('display') == 'block') || ($('#checkout_signup_one').css('display') == 'block')){
                    $('.checkout-back-container a').hide();
                    //$('.js-shopping-back-btn').show();
                }else{
                   // $('.js-shopping-back-btn').hide();
                }
            }
        }
        return true
        
    },

    tabSel: function (){
        $("ul#js_osc_main_tab li.js_osc_tab_prev").live('click',function(){
            
            var step = $(this).data("oscstep");
           
            if(isNaN(step) || step<1 || step >4 ){
                return false;
            }
            
            var tabCon = [
                    {'url': oneStepCheckout.customerLogin},
                    {'url': oneStepCheckout.shippingAdsTB},
                    {'url': oneStepCheckout.orderreview},
                    {'url': oneStepCheckout.paymentMethods},
                ];
            oneStepCheckout.loadData(tabCon[step-1].url,oneStepCheckout.leftContnr);
            return true;
        });
        
    },
    
    loadRightSide: function (rtype,ctab){
        ctab = ctab || 0;
        if(rtype ==1 || rtype ==3){
            oneStepCheckout.showHideORLoader(true);
        }
        if(! rtype == 3){
            $('.onestickySummary .applycoupon').hide();
        }else{
            $('.onestickySummary .applycoupon').show();
        }
        oneStepCheckout.loadData(oneStepCheckout.rightSection+"rtype/"+rtype+"/ctab/"+ctab,oneStepCheckout.rightContnr, false);

        oneStepCheckout.showHideORLoader(false);
        return true;
    },
    customerTypeChange : function () {
        
        $(".js_customer_type_sel").live('click', function(){
            if($(this).attr("checked") && $(this).val() == 1 )
            {
                oneStepCheckout.showHidePwd(true);
            } else  {
                oneStepCheckout.showHidePwd(false);
            }
                
        });
    },
    
    showHidePwd: function (state){
        if(state) {
            $("#js_old_customer_pwd").show();
            $("#js_osc_fwd_pwd_main_cntr").show();
        }else {
            $("#js_old_customer_pwd").hide();
            $("#js_osc_fwd_pwd_main_cntr").hide();
        }
    },
    
    showHideFrgPwd : function (){
        $("#js_osc_fwd_pwd_lnk").live('click', function(){
            $("#js_osc_fwd_pwd_cntr").toggle();
            
            if($("#ForgotPasswordForm_email").length && $("#OSCLoginForm_email").length) { 
               $("#ForgotPasswordForm_email").val($("#OSCLoginForm_email").val());
            }
            
            
            
        });
    },
    
    forgetPwdFrmSubmit : function () {
        
        $("#osc-form-forgot-password").live('submit', function() { 
        
            var frgFrm = $(this);
        
            $.ajax({                 
                type: frgFrm.attr('method'),
                url: frgFrm.attr('action'),
                data: frgFrm.serialize(),
                success: function(response) {
                
                    var resData = oneStepCheckout.parseJSONTry(response);
                    if(resData.isError) {
                        $("#ForgotPasswordForm_error").html(resData.messages);  
                        $("#ForgotPasswordForm_error").show();
                        
                    } else {                        
                        $("#ForgotPasswordForm_error").hide();                         
                        
                        if(resData.confirmUrl && resData.confirmUrl != ""){
                            oneStepCheckout.redirect(resData.confirmUrl);
                        }
                        
                        oneStepCheckout.showSuccessMsg(resData.messages);
                        
                        $("#js_osc_fwd_pwd_cntr").hide();
                        $("#ForgotPasswordForm_email").val('');
                      
                    }
                },
                error: function(response, status, err){ 
                    oneStepCheckout.redirect(oneStepCheckout.cartUrl);
                } 
            }); 
            
            
            return false; 
        });
    },
    
    redirect : function (url){
        window.location = url ;
    },
    
    showSuccessMsg : function (msg) {
        $("#js_osc_success_msg_cntr").show();
        $("#js_osc_success_msg_cntr").html(msg);
    },
    
    showErrorMsg : function (msg) {
        $("#js_osc_error_msg_cntr").append(msg);
        $("#js_osc_error_msg_cntr").show();
      
    },
    showErrorMsgLeft : function (msg) {
        setTimeout(function(){
            var errMsgDiv = '<div class="box s-error mbs msgBox">';
            var errMsgCloseDiv = '</div>';
            if($('.js_payment_tab_CreditCard').is(":visible") && msg !== null) {
                 $(".js_payment_tab_CreditCard .input-carttype").before(errMsgDiv+msg+errMsgCloseDiv);
                 $("#js_osc_error_msg_cntr").hide();            
               
                
            }else if($('.js_payment_tab_DebitCard').is(":visible") && msg !== null) {
                 $(".js_payment_tab_DebitCard .input-carttype").before(errMsgDiv+msg+errMsgCloseDiv);
                 $("#js_osc_error_msg_cntr").hide();
               
                
            }            
            else{
                $("#js_osc_error_msg_cntr").append(msg);
                $("#js_osc_error_msg_cntr").show();
            }
        }, 500);
      
    },
    
    cleanMsg : function(){
        $("#js_osc_success_msg_cntr").html('');
        $("#js_osc_error_msg_cntr").html('');
        $("#alc-msg-cntr").html('');
        $("#js_osc_success_msg_cntr").hide();
        $("#js_osc_error_msg_cntr").hide();
        $("#alc-msg-cntr").hide();
    },
    
    submitLoginFrm  : function () {
		
        $('#OSCLoginForm_password').live('keypress' , function (e) {
            if (e.which == 13) {
                oneStepCheckout.submitLoginForm(); 
            }
          });

        $(".js_osc_sbmit_lgnfrm_btn").live('click', function () {
           oneStepCheckout.submitLoginForm();
        })
    },
    submitRegDetailFrm  : function () {
        
        $("#js_btn_reg_detail_sbmit").live('click', function () {
            
            var regFrm = $("#osc-form-reg-detail");
            var postData = {
                type: regFrm.attr('method'),
                url:  regFrm.attr('action'),
                data: regFrm.serialize()
            };
            
            oneStepCheckout.ajaxSubmit(postData);
            
            return false; 
        })
    },
    firstNamelastNameCheck : function () {
        $("#ShippingAddressForm_first_name,#ShippingAddressForm_last_name,#BillingAddressForm_first_name,#BillingAddressForm_last_name").live('keydown blur',function(){
        alphabetkeypress.allowOnlyAlphabets('.checkoutFirstName[type=text]');
        alphabetkeypress.allowOnlyAlphabets('.checkoutLastName[type=text]');
        alphabetkeypress.allowOnlyAlphabets('.checkoutFirstNameBilling[type=text]');
        alphabetkeypress.allowOnlyAlphabets('.checkoutLastNameBilling[type=text]');
    });
    },
    pincodeCheck: function() {
        $("#ShippingAddressForm_postcode").live('blur', function() {
            fetchCityState();
        });
    },
    pincodeCheckNewBillAddr : function () {
        
          $("#BillingAddressForm_postcode").live('blur',function(){
            var pincode = $(this).val();
            pincode = pincode.replace(/_/g, '',pincode);
            if(pincode.length != 6){
                $('#BillingAddressForm_fk_customer_address_region option:first').attr("selected", true);
                $("#BillingAddressForm_city").val('');
                return false;
            }
            oneStepCheckout.showHidePCLoader(true);
            $.get('/onestepcheckout/common/pincode/find/' + pincode+"/",function(data){
                if(data){
                   oneStepCheckout.showHidePCLoader(false);
                    var d = oneStepCheckout.parseJSONTry(data);
                    if(typeof d.data !== 'undefined' &&   d.data.msg !=''){  
                         $(".Deliverymsg").text(d.data.msg);
                    }
                    if (d.validation == true) {
                        $("#BillingAddressForm_city").val(d.data.city);
                        var stateObj = $('#BillingAddressForm_fk_customer_address_region option').filter(function () {
                                                return oneStepCheckout.ucwords($(this).text()) === d.data.state;
                                        });
                                        
                         if(stateObj.length){
                                stateObj.attr("selected", true);
                                $('#BillingAddressForm_fk_customer_address_region').trigger('chosen:updated');
                         }else {
                                $('#BillingAddressForm_fk_customer_address_region option:first').attr("selected", true);
                         }
                        
                        var errorMsgObj =  $("#BillingAddressForm_postcode").next("div.errorMessage");
                        if(errorMsgObj.length){
                            errorMsgObj.html("");
                        }
                        
                    }else {
                        var errorMsgObj =  $("#BillingAddressForm_postcode").next("div.errorMessage");
                        if(errorMsgObj.length){
                            errorMsgObj.html(d.error);
                        }else {
                            var errorEmnt = '<div class="errorMessage">'+d.error+'</div>';
                            $(errorEmnt).insertAfter($('#BillingAddressForm_postcode'));
                        }
                        $('#BillingAddressForm_fk_customer_address_region option:first').attr("selected", true);
                        $("#BillingAddressForm_city").val('');
                        
                        if (d.data && d.data.city){
                            $("#BillingAddressForm_city").val(d.data.city);
                        }
                        
                        var stateObj = {} 
                        
                        if (d.data && d.data.state ){
                            var stateObj = $('#BillingAddressForm_fk_customer_address_region option').filter(function () {
                                                    return oneStepCheckout.ucwords( $(this).text()) === d.data.state;
                                            });
                        }
                                        
                         if(stateObj.length){
                                stateObj.attr("selected", true);
                         }else {
                                $('#BillingAddressForm_fk_customer_address_region option:first').attr("selected", true);
                         }
                    }
                }
            });
            
        });
    },
    ucwords: function (str){
        str = str.toLowerCase();
        return (str + '').replace(/^([a-z])|\s+([a-z])/g, function ($1) {
            return $1.toUpperCase();
        });
    },
    
    orderItemQtyUpdate: function (){
      $("#js-osc-cart-update-form .js-ocs-item-qty").live('change',function(){
            var itemQtyFrm = $("#js-osc-cart-update-form");
        
            var postData = {
                type: itemQtyFrm.attr('method'),
                url:  itemQtyFrm.attr('action'),
                data: itemQtyFrm.serialize()
            };
            
            oneStepCheckout.ajaxSubmit(postData);
            
      }); 
    },
    stickySummaryBox:function()
    {
	if(!oneStepCheckout.isMobile()) {
		$('.oneStickySummary').theiaStickySidebar({ additionalTopMargin: 20 });
			
		}
     },
    showCoupon:function()
    {
	$('.popup-outer,#cartMask').show();
        $('.scrollbox').enscroll('destroy');
	$('.scrollbox').enscroll();
    }, 
    hideCoupon:function()
    {
	$('.popup-outer,#cartMask').hide();
    },
    hideExistAddress:function()
    {
	$('#address_exist').hide();
        $('#address_new').show();
        $('#select_frm_sv').show();
        $('#existingAddressId_0').prop('checked', true);
    },
    hideNewAddress:function()
    {
	$('#address_exist').show();
        $('#address_new').hide();
        $('#select_frm_sv').hide();
    },
    hideExistShippingAddress:function(){
        $('.saved_shipping_address_list_area_container, .js-saved-shipping-address, #address_exist').hide();
        $('#address_new, #select_frm_sv_shipping').show();
        $('#existingAddressId_0').prop('checked', true);
        $('#new_shipping_form').val('1');
    },
    hideNewShippingAddress:function(){
        $('.saved_shipping_address_list_area_container, .js-saved-shipping-address, #address_exist').show();
        $('#address_new, #select_frm_sv_shipping').hide();
        $('#new_shipping_form').val('0');
        $('.default_shipping_address .radio input[type="radio"]').trigger('click');
        },
    hideExistBillingAddress:function(){
        $('.saved_billing_address_list_area_container, .js-saved-billing-address, #address_exist_billing').hide();
        $('#address_new_billing, #select_frm_sv').show();
        $('.billing-address-radio-check').hide();
        $('#existingbillingAddressId_0').prop('checked', true);
        $('#new_billing_form').val('1');
        $('html,body').animate({scrollTop: $(".billing-address-content-container").offset().top},'slow')
        if( $(".cards_block").length > 1){ $(".cards_block").hide();}
        $(".cards_block:last").show();
    },
    hideNewBillingAddress:function(){
        var defaultBillingId = $('#defaultBillingId').val() ? $('#defaultBillingId').val() : 0;
        var existingbillingAddressId = 'existingbillingAddressId_'+defaultBillingId;
        if ($('#'+existingbillingAddressId).length){
            $('#'+existingbillingAddressId).prop("checked") == true;
        }
        $('.saved_billing_address_list_area_container, .js-saved-billing-address, #address_exist_billing').show();
        $('#address_new_billing, #select_frm_sv').hide();
        $('.billing-address-radio-check').show();
        $('#new_billing_form').val('0');
        $('.default_shipping_address .radio input[type="radio"]').trigger('click');
        $('.default_billing_address .radio input[type="radio"]').trigger('click');
    },
    showBillingAddress:function()
    {
	$('#new-billing-addr, #new-billing-addr-title').show();
    },
    hideBillingAddress:function()
    {
	$('#new-billing-addr, #new-billing-addr-title').hide();
    },
    addCoupon: function(){
        var couponCode  = $.trim($("#coupon_code").val());
        if(couponCode  == ""){
            $("#js_osc_coupon_error").html("Coupon must not be empty.");
            return false;
        }
        var couponUrl =oneStepCheckout.couponAdd+couponCode+"/";
        oneStepCheckout.loadData(couponUrl, oneStepCheckout.leftContnr);
        return false;
    },
    removeCoupon: function(){
        oneStepCheckout.loadData(oneStepCheckout.couponRemove, oneStepCheckout.leftContnr);
        return false;
    },
    addCreditVoucher: function(){
        var creditVoucher  = $.trim($("#credit_voucher").val());
        if(creditVoucher  == ""){
            $("#js_osc_credit_voucher_error").html("Credit Voucher must not be empty.");
            return false;
        }
        var creditVoucherUrl =oneStepCheckout.creditVoucherAdd+creditVoucher+"/";
        oneStepCheckout.loadData(creditVoucherUrl, oneStepCheckout.leftContnr);
        closeVoucherDialog(); // mentioned in catalog.js
        return false;
    },
    removeCreditVoucher: function(){
        oneStepCheckout.loadData(oneStepCheckout.creditVoucherRemove, oneStepCheckout.leftContnr);
        return false;
    },
    
    applyCredits: function(){
        var creditPoints  = $.trim($("#credit_points").val());
        if(creditPoints  == ""){
            $("#js_osc_voucher_error").html("Please Enter Valid Credit Points.");
            return false;
        }
        var couponUrl =oneStepCheckout.applyCreditPoints+creditPoints+"/";
        oneStepCheckout.loadData(couponUrl, oneStepCheckout.leftContnr);
        return false;
    },
    
    applyLoylatyPoints: function(){
        var loyaltyPoint  = $.trim($("#loyalty_points").val());
        if(loyaltyPoint  == ""){
            $("#js_osc_loyalty_error").html("Please Enter Valid Loyalty Points.");
            return false;
        }
        var loyaltyUrl =oneStepCheckout.applyLoyaltyPoints+loyaltyPoint+"/";
        oneStepCheckout.loadData(loyaltyUrl, oneStepCheckout.leftContnr);
        return false;
    },
        
    loadpaymentstep: function (rtype){
        if(rtype ==1 || rtype ==3){
            oneStepCheckout.showHideORLoader(true);
        }
        gaTracking.viewOrderPayment();
        //facebook pixel add to paymentinfo tracking
        facebookPixelTracking.callFbq('AddPaymentInfo');
        oneStepCheckout.loadData(oneStepCheckout.paymentMethods+"rtype/"+4+"/", oneStepCheckout.leftContnr, false);

        oneStepCheckout.showHideORLoader(false);
        return true;
    },
    paymentSubTab: function() {
        $(document).on('click',".payment_checkout ul.nav-tabs li a", function (e) {
            try {
            oneStepCheckout.getHidePaymentError();
            oneStepCheckout.clearPartPayOption();
            var pmt = $(this).data('pmt');

            // Hide the complete payment button and show the captcha box on payment tabs section
            $('#cod-captchaError').hide().html('');
            if(pmt == 'CashOnDelivery'){
                $('.cod-captchaBox').show();
                $('#checkout-complete-payment-btn').hide();
            } else {
                $('.cod-captchaBox').hide();
                $('#checkout-complete-payment-btn').show();
            }
            $('.payment_checkout ul li,.payment_checkout .tab-content .tab-pane').removeClass('active');
            // var pmEanble = $(this).data('pmenable');
            //  var pmSelected = $(this).data('pmselected');
              
            //  if($(".js_payment_tab_"+pm).length){
                  
              //   $(".js_payment_tab").hide();
            $(this).parent('li').addClass('active');
            $(".js_payment_tab_"+pmt).addClass('active');
            if(oneStepCheckout.isPmtNotEnable(this)){
                return false;
            }
            $("#tezvpa, #vpa").removeClass('failure success');
            } catch (e) {
                console.log('Error in Request :' + e);
                return false;
             }
        });
        $(document).on("click", ".tab-pane.active .tooltip-icon", function(){
            $(this).next('.tooltip').toggleClass("fadeIn");
        });
        $(document).on("mouseleave", ".tab-pane.active .tooltip.fadeIn", function(){
            $(this).removeClass("fadeIn");                    
                
              //};
          });
    },
	validateCardNumber: function(validCardNumberId) {
        $(validCardNumberId).validateCreditCard(function(result) {         
            $(this).siblings('.crdType,.errorPayment').removeClass(function (index, className) {
                return (className.match (/(^|\s)valid-\S+/g) || []).join(' ');
            });
            var cardTypeClass = result.card_type == null ? 'valid-no' : 'valid-'+result.card_type.name;
                       
            //Set CVV length specified card types
            var cardMaxLength = 3;									
            if(cardTypeClass == 'valid-amex') cardMaxLength = 4;			
            $('#cc_security_code, #dc_security_code').attr('maxlength', cardMaxLength);

            $(this).siblings('.crdType,.errorPayment').addClass(cardTypeClass);
            
            if (result.length_valid == true) {
                 if (oneStepCheckout.isCardvalidated == true) {
                  oneStepCheckout.canValidateCard=true;
                 }
             }
            
        });
    },
    clearPartPayOption: function() {
        //Removed radio checked from partpay method option
        $('.partPayRadioButton').prop('checked', false);
        $('.partPayNetBaningRadio').prop('checked', false);
        $('.partPayWalletOption').prop('checked', false);
        
        $('.js_payment_option_PartPay_SavedCard input.partpay_store_card_token').prop('checked', false);
        $('.js_payment_option_PartPay_SavedCard input.cvv_no').attr('disabled', 'disabled');
        $('.js_payment_option_PartPay_SavedCard input.cvv_no').css('display', 'none');
        
        //Hide all partpay option div
        $('.js_payment_option_PartPay').hide(); 
        $('.partPayNetBaningSelectBox').val('');

        //Emi 
        $('.js-osc-emi-bankname-opt').attr('checked', false);
        $('#emiMonthsForEveryBank').hide();
        //0% EMI
        $(".js_payment_tab_0Emi input.bankNameOption").attr("checked",false);
        $('#emi0MonthsForEveryBank').hide();
        //Wallet
        $(".js_payment_tab_Wallet input[name=wallet]").attr("checked",false);
        //NetBanking
        $('.selectBank').attr('checked',false);
        $('#netBankingList').val('');
        
    },
    netBankingOptionChange : function()
    {
	$("#netBankingList").live('change',function() {
		
		$(".selectBank").prop("checked",false);
	});
    },
    emiBankSelect: function() {
       $(".js-osc-emi-bankname-opt").live('change', function(){
           
            var bankName    = $(this).val();
            var emiFirstOpt = $(this).data('firstemi');
            var emiOptCnt   = $("#emi_opt_table_option_"+bankName);
            var pm          = $(this).data('pm');
            var pmt          = $(this).data('pmt');
           if(emiOptCnt.length){
               $(".emi-opt-table").hide();
               emiOptCnt.show();
               $('#emiMonthsForEveryBank').show();
               $("#PaymentMethodForm_parameter_emi_months_"+bankName+"_"+emiFirstOpt).attr('checked', true);
               var emiVal = $(this).data('emival');
                $('#selected_payment_method').val(pm);
                $('#selected_payment_method_type').val(pmt);
               oneStepCheckout.loadData (oneStepCheckout.pmsummary +pm+"/"+"pmt/"+emiVal , oneStepCheckout.rightContnr);
               $('#checkoutBtn').attr('disabled', null);
           }
       });
    }, 
    emiOptionSelect: function() {
       $(".js_osc_emi_opt_rbt").live('change', function(){
            var emiVal = $(this).data('emival');
            var pm     = $(this).data('pm');
            oneStepCheckout.loadData (oneStepCheckout.pmsummary+pm+"/"+"pmt/"+emiVal, oneStepCheckout.rightContnr);
       });
    },
    prePaidOptionSelect: function(){
        $(".js-osc-prepaid-gateway-opt").live('change', function(){
            oneStepCheckout.loadData (oneStepCheckout.pmsummary +$(this).val(), oneStepCheckout.rightContnr);
        });
    },
    partPayOptionSelect: function(){
        $(".js-osc-partpay-gateway-opt").live('change', function(){
            oneStepCheckout.loadData (oneStepCheckout.pmsummary +$(this).val(), oneStepCheckout.rightContnr);
        });
    },
    paymentOptChange: function() {
        $(document).on('click',".payment_checkout ul.nav-tabs li a", function() {
            $("#vpasuccess,#vpacontent,#vpaerror,#tezvpaerror,#tezvpasuccess,#tezvpacontent").html("");
            $(".payment-check-icon,#tez-msg, #upi-msg").hide();
            $('#payment-form')[0].reset();
            $("#upisubmit").show();
            $("#tezsubmit").show();
            if (oneStepCheckout.isPmtNotEnable(this)) {
                return false;
            }    
            $('.payment_checkout ul li,.payment_checkout .tab-content .tab-pane').removeClass('active');
            oneStepCheckout.getHidePaymentError();
            oneStepCheckout.clearPartPayOption();
            var pm = $(this).attr('data-pm');
            var pmt = $(this).attr('data-pmt');
            $('#selected_payment_method').val(pm);
            if(pmt == 'PHONEPE' || pmt == 'TEZ') {
                $('#selected_payment_method_type').val('UPI');  
            } else {
                $('#selected_payment_method_type').val(pmt);
            }

            $(this).parent('li').addClass('active');
            $(".js_payment_tab_"+pmt).addClass('active');
           
            // INDFUR 1805: Webtrekk implementation on payment mode page
            if(typeof wt !== 'undefined'){  
                var paymentMethod = (pm == "Innoviti")? "EMI":pm;
                wt.sendinfo ({linkId: "OneStepCheckout_" + paymentMethod});
            }  
            

                 
            if (!$(this).is(':disabled')) {
                $('.payment_checkout ul li').removeClass('active');
                $(this).parent('li').addClass('active');
 
                if(pmt === 'PartPay'){
                    oneStepCheckout.paymentOptionPartPay(pmt);
                }else{
                    oneStepCheckout.paymentOptionCommon(pm,pmt);
                }
           }
           
        });        
    },
    paymentactivetab: function () {
        var token = $('input[name="YII_CSRF_TOKEN"]').val();
            $(".input-carttype .discount-styleup-offer").hide();
        if ($('#tabs-4  div').hasClass('payment_checkout_top')) {
            if ($(".js_payment_tab_DebitCard").hasClass("active")) {
                $(".payment_checkout ul.nav-tabs li.CcDcactive").addClass("active");
                $(".js_payment_tab_DebitCard").find(".payment-debit-card").prop("checked", true);
                if ($(".saved-card-main input[type='radio']").is(":visible")) {
                    $('.js_payment_tab_DebitCard .radio_saved_card:first input').trigger('click');
                }
                else {
                    oneStepCheckout.checkInstantBankOfferStatus('', token, '', '');
                }
            } else if ($(".js_payment_tab_CreditCard").hasClass("active")) {
                $(".payment_checkout ul.nav-tabs li.CcDcactive").addClass("active");
                $(".js_payment_tab_CreditCard").find(".payment-credit-card").prop("checked", true);
                if ($(".saved-card-main input[type='radio']").is(":visible")) {
                    $('.js_payment_tab_CreditCard .radio_saved_card:first input').trigger('click');
                }
                else {
                    oneStepCheckout.checkInstantBankOfferStatus('', token, '', '');
                }
            }
            if ($('.js_payment_tab_UPI').hasClass('active')) {
                $(".payment-upi").closest("li").addClass("active");
                $('.js_payment_tab_UPI input[value="UPI"]').prop('checked', true);
                oneStepCheckout.checkInstantBankOfferStatus('', token, '', '','');
            }
            if ($('.js_payment_tab_TEZ').hasClass('active')) {
                $(".payment-upi").closest("li").addClass("active");
                $('.js_payment_tab_TEZ input[value="TEZ"]').prop('checked', true);
                oneStepCheckout.checkInstantBankOfferStatus('', token, '', '','');
            }
            if ($('.js_payment_tab_CashOnDelivery').hasClass('active') || $('.js_payment_tab_eWalletGW').hasClass('active') ||  $('.js_payment_tab_NetBanking').hasClass('active') ) {
                oneStepCheckout.checkInstantBankOfferStatus('', token, '', '','','');
            }
        
        var payment_method_type = $('#selected_payment_method_type').val();
        var payment_method      = $('#selected_payment_method').val();
        if(payment_method_type == 'eWalletGW' && payment_method == 'PayPal') {
            $(".payment_checkout ul.nav-tabs li.CcDcactive").removeClass("active");
            $(".js_payment_tab_PayPal").addClass('active');
            $(".js_payment_tab_eWalletGW").removeClass('active');
            $(".errorEwallet").hide();
            
        }
        else {
            $(".js_payment_tab_PayPal").removeClass('active');
           
        }

            if (payment_method_type == 'CashOnDelivery' && payment_method == 'CashOnDelivery') {
                $('.cod-captchaBox').show();
                $('#checkout-complete-payment-btn').hide();
            }
        }
    },
    paymentOptChangeWallet: function(){
        $(".js_osc_pm_opt_wallet").live('click', function(){
            
            if(oneStepCheckout.isPmtNotEnable(this)){
                return false;      
            }
            oneStepCheckout.getHidePaymentError();
            var pmt = $(this).attr('data-pmt');
            $('#selected_payment_method_type').val(pmt);
            $(".js_payment_tab").hide();
            $(".js_payment_tab_"+pmt).show();
            oneStepCheckout.paymentOptionCommon(pmt,pmt);
        });
    },
    paymentOptSelectWallet: function(){
        $(".js_payment_tab_Wallet input[name=wallet]").live('click', function(){
            var pm  = $(this).val();
            var pmt = $('.js_osc_pm_opt_wallet').attr('data-pmt');

            oneStepCheckout.getHidePaymentError();
            $('#selected_payment_method').val(pm);
            $('#selected_payment_method_type').val(pmt);
            
            // INDFUR 1805: Webtrekk implementation on payment mode page
            if(typeof wt !== 'undefined'){  
                var paymentMethod = (pm == "Innoviti")? "EMI":pm;
                wt.sendinfo ({linkId: "OneStepCheckout_" + paymentMethod});
            }  
           
            oneStepCheckout.paymentOptionCommon(pm,pmt);
         
        });
    },
    paymentOptSelectPartPayWallet: function(){
        $(".js_payment_option_PartPay_Wallet input[name=partpay_wallet]").live('click', function(){
            var pm  = $(this).val();
            var pmt = $('.js_osc_pm_opt_partpay').attr('data-pmt');
            
            $('#selected_payment_method').val(pm);
            $('#selected_payment_method_type').val(pmt);
            
            // INDFUR 1805: Webtrekk implementation on payment mode page
            if(typeof wt !== 'undefined'){  
                var paymentMethod = (pm == "Innoviti")? "EMI":pm;
                wt.sendinfo ({linkId: "OneStepCheckout_" + paymentMethod});
            }  
           
            oneStepCheckout.paymentOptionCommon(pm,pmt);
         
        });
    },
    paymentOptChangeEMI: function(){
        $(".js_osc_pm_opt_emi").live('click', function(){
            if(oneStepCheckout.isPmtNotEnable(this)){
                return false;        
            }    
            oneStepCheckout.getHidePaymentError();
            var pmt = $(this).attr('data-pmt');
            $('#selected_payment_method_type').val(pmt);
            $(".js_payment_tab").hide();
            $(".js_payment_tab_"+pmt).show();
            oneStepCheckout.paymentOptionCommon(pmt,pmt);
        });
    },
    paymentOptChange0EMI: function(){
        $(".js_osc_pm_opt_0emi").live('click', function(){
            
            if(oneStepCheckout.isPmtNotEnable(this)){
                return false;      
            }
            oneStepCheckout.getHidePaymentError();
            var pmt = $(this).attr('data-pmt');
            $('#selected_payment_method_type').val(pmt);
            $(".js_payment_tab").hide();
            $(".js_payment_tab_"+pmt).show();
            oneStepCheckout.paymentOptionPartPay(pmt);
        });
    },
       
    BankSelect0Emi: function() {
       $(".js-osc-0emi-bankname-opt").live('change', function(){
           
            var bankName    = $(this).val();
            var emiOptCnt   = $("#opt_emi0_table_option_"+bankName);
            var pm          = $(this).data('pm');
            var pmt          = $(this).data('pmt');
            $(".opt-emi0-table").hide();
            oneStepCheckout.getHidePaymentError();
           if(emiOptCnt.length){
                emiOptCnt.show();
                $('#emi0MonthsForEveryBank').show();
                $('#selected_payment_method').val(pm);
                $('#selected_payment_method_type').val(pmt);
                $('.js_osc_emi0_opt_rbt').attr('checked', false);
                var emioption = $('#PaymentMethodForm_parameter_emi0_percent_months_'+bankName).val();
               oneStepCheckout.loadData (oneStepCheckout.pmsummary +pm+"/"+"pmt/"+pmt+'/emi0PercentOption/'+emioption, oneStepCheckout.rightContnr);
               $('#checkoutBtn').attr('disabled', null);
           }
       });
    }, 
    OptionSelect0Emi: function() {
       $(".js_osc_emi0_opt_rbt").live('change', function(){
            var emioption = $(this).data('emioption');
            var pm     = $(this).data('pm');
            oneStepCheckout.getHidePaymentError();
            oneStepCheckout.loadData (oneStepCheckout.pmsummary+pm+"/"+"pmt/"+emioption, oneStepCheckout.rightContnr);
       });
    },
    paymentOptSelectPartPay: function(){ 
        $(".js_payment_opt_PartPay input.partPayPaymentMethodType").live('click', function(){
            var pm  = $(this).attr('data-pm');
            var pmt = $(this).attr('data-pmt');
            var partPayPmt = $(this).val();
            
            $('#selected_payment_method').val(pm);
            $('#selected_payment_method_type').val(pmt);
            
            $(".js_payment_option_PartPay").find("input,select").attr("disabled", "disabled");
            $(".js_payment_option_PartPay_"+partPayPmt).find("input,select").attr("disabled", null);
            
            if(!$(".js_payment_option_PartPay_SavedCard input.partpay_store_card_token").is(":checked")){
                $(".js_payment_option_PartPay_SavedCard input.cvv_no").attr("disabled", "disabled");
            }
            
            $(".js_payment_option_PartPay").css("display", "none");
            $(".js_payment_option_PartPay_"+partPayPmt).css("display", "block");
            
            // INDFUR 1805: Webtrekk implementation on payment mode page
            if(typeof wt !== 'undefined'){  
                var paymentMethod = (pm == "Innoviti")? "EMI":pm;
                wt.sendinfo ({linkId: "OneStepCheckout_" + paymentMethod});
            }  
            if(partPayPmt !== 'Wallet'){
                oneStepCheckout.paymentOptionCommon(pm,pmt);
            }
         
        });
    },
    paymentOptionCommon: function(pm,pmt,ctab){
         ctab = ctab || 4;
        oneStepCheckout.loadData (oneStepCheckout.pmsummary +pm+"/"+"pmt/"+pmt+"/ctab/"+ctab, oneStepCheckout.rightContnr);        
    },
    paymentOptionPartPay: function(pmt){
        oneStepCheckout.loadData (oneStepCheckout.pmtsummary+pmt, oneStepCheckout.rightContnr); 
                
    },
    paymentSubmitFrm : function () {
        $("#payment-form").live('submit', function(){

            if(!oneStepCheckout.validatePaymentForm()){
                oneStepCheckout.setPlaceHolder();
                return false;
            }
                        
            var paymentFrm = $(this);
            var pm = $(".js_osc_pm_opt:checked").val();
           
            var formData = paymentFrm.serializeArray();
            if(pm == 'Prepaid'){
                for (index = 0; index < formData.length; ++index) {
                    if (formData[index].name == "PaymentMethodForm[prepaid][payment_method]") {
                        removeIndex = index;
                    }else if(formData[index].name == 'PaymentMethodForm[payment_method]'){
                        addIndex = index;
                    }
                }                
                formData[addIndex].value = formData[removeIndex].value
                formData.splice(removeIndex, 1);
            }
            
            if(pm == 'PartPay'){
                for (index = 0; index < formData.length; ++index) {
                    if (formData[index].name == "PaymentMethodForm[partpayment][payment_method]") {
                        removeIndex = index;
                    }else if(formData[index].name == 'PaymentMethodForm[payment_method]'){
                        addIndex = index;
                    }
                }                            
                formData[addIndex].value = formData[removeIndex].value
                formData.splice(removeIndex, 1);
            }
            
            var postData = {
                type: paymentFrm.attr('method'),
                url:  paymentFrm.attr('action'),
                data: $.param(formData)
            };
             
            var pmt = $('#selected_payment_method_type').val();
            gaTracking.completePayment(pmt);
            oneStepCheckout.ajaxSubmit(postData);
           
            return false; 
        });
    },
    
    validatePaymentForm : function () {
        try {
        var id    = [];
        var error = false;
        var pm         =  $('#selected_payment_method').val();
        var pmt        =  $('#selected_payment_method_type').val();
        var isSeamless =  $('#selected_is_seamless').val();
        if(pmt == 'UPI') {
            pmt = $(".payment_checkout li input:checked").val();
        }
        oneStepCheckout.getHidePaymentError();
        $('#payment-form input,#payment-form select').removeClass('input-error');
        switch(pmt) {
            case 'SavedCard':
                if($('.js_payment_tab_SavedCard input.cvv_no').is(':enabled')){
                    var ccvv = $('.js_payment_tab_SavedCard input.cvv_no:enabled').val();
                    if(ccvv == '' || isNaN(ccvv)){
                        $('.js_payment_tab_SavedCard input.cvv_no:enabled').parent().parent().next('.errorPayment').css('visibility', 'visible');
                        return false;
                    }
                }else{
                    $('.js_payment_tab_SavedCard .errorExpressCheckout').css('visibility', 'visible');
                    return false;
                }
                
            break;
            case 'CreditCard':    
                if(pm == 'Payu' && isSeamless == 1){
                    var ccNumber       = $('#cc_number').val();
                    var ccHolder       = $('#cc_holder').val();
                    var ccExpMonth     = $('#cc_exp_month').val();
                    var ccExpYear      = $('#cc_exp_year').val();
                    var ccSecurityCode = $('#cc_security_code').val();
                    var storeCVVValue  = $('.store_cards_cvv.cvv_required');
                    var ccCvvlength    = $('#cc_security_code').attr("maxlength");
                    var storeCVVlength = $('.store_cards_cvv.cvv_required').attr("maxlength");
                    $('.errorForPayment .errorPayment').html('').hide();
                    if($('.js_payment_tab_CreditCard .savedcards').length && $('.js_payment_tab_CreditCard .savedcards:checked').val() != 0){
                        if(storeCVVValue.length > 0) {
                            var ccStoredCardSecurityCode = storeCVVValue.val();
                            if(ccStoredCardSecurityCode.length != storeCVVlength) {
                                storeCVVValue.next('.errorPayment').html('CVV Required.');
                                id.push('.store_cards_cvv.cvv_required');
                                error = true;
                            }
                        }else if(!$('.js_payment_tab_CreditCard .savedcards').is(':checked')) {
                            $('.errorForPayment .errorPayment').html('Card is not selected').css({'visibility':'visible','display':'block'});
                            return false;
                        }
                    }else{
                        var ccNumberId = '#cc_number';
                        if(ccNumber == '' || isNaN(ccNumber)){
                            id.push(ccNumberId);
                            $(ccNumberId).next('.errorPayment').html('Card number required');
                            error = true;
                        }else if(jQuery(ccNumberId).next('.errorPayment.valid-no').length !== 0 && jQuery(ccNumberId).val().length > 0){
                            jQuery(ccNumberId).next('.errorPayment').html('Sorry! we are currently not accepting this card. Use a visa / master card / Amex').css({visibility:'visible'});
                            error = true;
                        }else{
                            jQuery(ccNumberId).siblings('.errorPayment').html('Card number required').css({visibility:'hidden'});
                        }

                        if(ccHolder == ''){
                            id.push('#cc_holder');
                            error = true; 
                        }

                        if(ccExpMonth == ''){
                            id.push('#cc_exp_month');
                            error = true; 
                        }

                        if(ccExpYear == ''){
                            id.push('#cc_exp_year');
                            $('#cc_exp_year').next('.errorPayment').html('Expiry date required.');
                            error = true; 
                        }

                        if(ccExpMonth && ccExpYear){
                            monthYearValidation = this.isDateGreaterThanToday(ccExpMonth+"/"+ccExpYear);
                            if(monthYearValidation) {
                                $('#cc_exp_year').next('.errorPayment').html('Year and Month should be greater than current.');
                                id.push('#cc_exp_year');
                                error = true; 
                            }
                        }
                        
                        if(ccSecurityCode == ''){
                            id.push('#cc_security_code');
                            error = true; 
                            $('#cc_security_code').next('.errorPayment').html('CVV required').css({'display': 'block','visibility': 'visible'});
                        }else if(ccSecurityCode.length != ccCvvlength){
                            $('#cc_security_code').next('.errorPayment').html('CVV code should be '+ccCvvlength+' digits.');
                            id.push('#cc_security_code');
                            error = true;
                        }
                    }

                    if(error){
                        id = id.join(',');
                        $(id).addClass('input-error');
                        $(id).siblings('.errorPayment').css('display', 'block');
                        $(id).siblings('.errorPayment').css('visibility', 'visible');
                        return false;
                    }
                }    
            break;
            case 'DebitCard': 
                if(pm == 'Payu' && isSeamless == 1){
                    var dcNumber       = $('#dc_number').val();
                    var dcHolder       = $('#dc_holder').val();
                    var dcExpMonth     = $('#dc_exp_month').val();
                    var dcExpYear      = $('#dc_exp_year').val();
                    var dcSecurityCode = $('#dc_security_code').val();
                    var storeCVVValue  = $('.store_cards_cvv.cvv_required');
                    var dcCvvlength    = $('#dc_security_code').attr("maxlength");
                    var storeCVVlength = $('.store_cards_cvv.cvv_required').attr("maxlength");
                    $('.errorForPayment .errorPayment').html('').hide();
                    if($('.js_payment_tab_DebitCard .savedcards').length && $('.js_payment_tab_DebitCard .savedcards:checked').val() != 0){
                        if(storeCVVValue.length > 0) {
                            var ccStoredCardSecurityCode = storeCVVValue.val();
                            if(ccStoredCardSecurityCode.length != storeCVVlength) {
                                storeCVVValue.next('.errorPayment').html('CVV Required.');
                                id.push('.store_cards_cvv.cvv_required');
                                error = true;
                            }
                        }else if(!$('.js_payment_tab_DebitCard .savedcards').is(':checked')) {
                            $('.errorForPayment .errorPayment').html('Card is not selected').css({'visibility':'visible','display':'block'});
                            return false;
                        }
                    }else{
                        var dcNumberId = '#dc_number';
                        if(dcNumber == '' || isNaN(dcNumber)){
                            id.push(dcNumberId);
                            $(dcNumberId).next('.errorPayment').html('Card number required');
                            error = true;
                        }else if(jQuery(dcNumberId).next('.errorPayment.valid-no').length !== 0 && jQuery(dcNumberId).val().length > 0){
                            jQuery(dcNumberId).next('.errorPayment').html('Sorry! we are currently not accepting this card. Use a visa / master card / Amex').css({visibility:'visible'});
                            error = true;
                        }else{
                            jQuery(dcNumberId).siblings('.errorPayment').html('Card number required').css({visibility:'hidden'});
                        }

                        if(dcHolder == ''){
                            id.push('#dc_holder');
                            error = true; 
                        }

                        if(dcExpMonth == ''){
                            id.push('#dc_exp_month');
                            error = true; 
                        }

                        if(dcExpYear == ''){
                            id.push('#dc_exp_year');
                            $('#dc_exp_year').next('.errorPayment').html('Expiry date required ');
                            error = true; 
                        }
                        if(dcExpMonth && dcExpYear){
                            monthYearValidation = this.isDateGreaterThanToday(dcExpMonth+"/"+dcExpYear);
                            if(monthYearValidation) {
                                $('#dc_exp_year').next('.errorPayment').html('Year and Month should be greater than current.');
                                id.push('#dc_exp_year');
                                error = true; 
                            }
                        }

                        if(dcSecurityCode == ''){
                            id.push('#dc_security_code');
                            error = true; 
                            $('#dc_security_code').next('.errorPayment').html('CVV required').css({'display': 'block','visibility': 'visible'});
                        }else if(dcSecurityCode.length != dcCvvlength){
                            $('#dc_security_code').next('.errorPayment').html('CVV code should be '+dcCvvlength+' digits.');
                            id.push('#dc_security_code');
                            error = true;
                        }

                        if($('#debit_card_type').is(':enabled')){
                            var debitCardType = $('#debit_card_type').val();
                            if(debitCardType == ''){
                                id.push( '#debit_card_type');
                                error = true;
                            }
                        }
                    }
                    if(error){
                        id = id.join(',');
                        $(id).addClass('input-error');
                        $(id).siblings('.errorPayment').css('display', 'block');
                        $(id).siblings('.errorPayment').css('visibility', 'visible');
                        return false;
                    }
                }
            break;
            case 'NetBanking':
               
                if(((pm == 'NetBanking') || (pm == "1")) || ($('#netBankingList').val() == '')){
                    $('#errorNetbanking').css('visibility', 'visible');
                    return false;
                }
            break;
            case 'Wallet':
                if(!$(".js_payment_tab_Wallet input[name=wallet]").is(":checked")){
                    $('#errorWallet').css('visibility', 'visible');
                    return false;
                }
            break;     
            case 'Emi':
                if(!$(".js-osc-emi-bankname-opt").is(":checked")){
                    $('#errorEmi').css('visibility', 'visible');
                    return false;
                }
            break;
            case '0Emi':
                if(!$(".js-osc-0emi-bankname-opt").is(":checked")){
                    $('#error0Emi').css('visibility', 'visible');
                    return false;
                }
//                if(!$(".js_osc_emi0_opt_rbt").is(":checked")){
//                    $('#error0EmiMont').css('visibility', 'visible');
//                    $('#error0Emi').css('visibility', 'hidden');
//                    return false;
//                }                
            break;            
            case 'PartPay':  
                if(!$(".partPayPaymentMethodType").is(":checked")){
                    $('.errorPartPay').css('visibility', 'visible');
                    return false;
                }
                var partPayPaymentMethodType = $('.partPayPaymentMethodType:checked').val();
                if(partPayPaymentMethodType == 'SavedCard'){
                    if($('.js_payment_option_PartPay_SavedCard input.cvv_no').is(':enabled')){
                        var ccvv = $('.js_payment_option_PartPay_SavedCard input.cvv_no:enabled').val();
                        if(ccvv == '' || isNaN(ccvv)){
                            $('.js_payment_option_PartPay_SavedCard input.cvv_no:enabled').parent().parent().next('.errorPayment').css('visibility', 'visible');
                            return false;
                        }
                    }else{
                        $('.js_payment_option_PartPay_SavedCard .errorPartPayExpressCheckout').css('visibility', 'visible');
                        return false;
                    }
                }else if(partPayPaymentMethodType == 'NetBanking'){
                    var netBankingName = $('#partpayNetBankingList').val();
                    if(netBankingName == ''){
                        $('#partpayNetBankingList').next('.errorPayment').css('visibility', 'visible');
                        return false;
                    }
                }else if(partPayPaymentMethodType == 'CreditCard'){
                    if(pm == 'PartPay' && isSeamless == 1){
                        var partPayCcNumber       = $('#partpay_cc_number').val();
                        var partPayCcHolder       = $('#partpay_cc_holder').val();
                        var partPayCcExpMonth     = $('#partpay_cc_exp_month').val();
                        var partPayCcExpYear      = $('#partpay_cc_exp_year').val();
                        var partPayCcSecurityCode = $('#partpay_cc_security_code').val();

                        if(partPayCcNumber == '' || isNaN(partPayCcNumber)){
                            id += '#partpay_cc_number,';
                            error = true;
                        }

                        if(partPayCcHolder == ''){
                            id += '#partpay_cc_holder,';
                            error = true; 
                        }

                        if(partPayCcExpMonth == ''){
                            id += '#partpay_cc_exp_month,';
                            error = true; 
                        }

                        if(partPayCcExpYear == ''){
                            id += '#partpay_cc_exp_year,';
                            error = true; 
                        }

                        if(partPayCcSecurityCode == ''){
                            id += '#partpay_cc_security_code,';
                            error = true; 
                        }

                        if(error){
                            id = id.substring(0, id.length, -1);
                            $(id).next('.errorPayment').css('visibility', 'visible');
                            return false;
                        }
                    }
                }else if(partPayPaymentMethodType == 'DebitCard'){
                    if(pm == 'PartPay' && isSeamless == 1){
                        var partPayDcNumber       = $('#partpay_dc_number').val();
                        var partPayDcHolder       = $('#partpay_dc_holder').val();
                        var partPayDcExpMonth     = $('#partpay_dc_exp_month').val();
                        var partPayDcExpYear      = $('#partpay_dc_exp_year').val();
                        var partPayDcSecurityCode = $('#partpay_dc_security_code').val();

                        if(partPayDcNumber == '' || isNaN(partPayDcNumber)){
                            id += '#partpay_dc_number,';
                            error = true;
                        }

                        if(partPayDcHolder == ''){
                            id += '#partpay_dc_holder,';
                            error = true; 
                        }

                        if(partPayDcExpMonth == ''){
                            id += '#partpay_dc_exp_month,';
                            error = true; 
                        }

                        if(partPayDcExpYear == ''){
                            id += '#partpay_dc_exp_year,';
                            error = true; 
                        }

                        if(partPayDcSecurityCode == ''){
                            id += '#partpay_dc_security_code,';
                            error = true; 
                        }

                        if(error){
                            id = id.substring(0, id.length, -1);
                            $(id).next('.errorPayment').css('visibility', 'visible');
                            return false;
                        }
                    }
                }else if(partPayPaymentMethodType == 'Wallet'){
                    if(!$('input[name=partpay_wallet]').is(':checked')){
                        $('.errorPartPayWallet').css('visibility', 'visible');
                        return false;
                    }
                }

                break;
            case 'eWalletGW':
                
                if (($('#selected_payment_method_type').val() == 'eWalletGW') && $("#ewalletBankcodeValue").val() == '0' && $('#selected_payment_method').val() == 'Payu') {
                    $('#errorEwallet').css('visibility', 'visible');
                    return false;
                }

                break;
                case 'UPI':
                var vpaInput =  $("#vpa").val();
                if(vpaInput == '' || $("#vpastatus").val() == 0){
                    $("#vpasuccess").html("");
                    $("#vpaerror").html('Please enter valid VPA');
                    $("#vpa").removeClass("success").addClass('failure');
                    $(".js_payment_tab_UPI .payment-check-icon").show();
                    return false;
                } else if($("#vpaerror").html().length > 0) {
                    return false;
                }
                break;
                case 'TEZ':
                var vpaInput =  $("#tezvpa").val();
                if(vpaInput == '' || $("#tezvpastatus").val() == 0){
                    $("#tezvpasuccess").html("");
                    $("#tezvpaerror").html('Please enter valid VPA');
                    $("#tezvpa").removeClass("success").addClass('failure')
                    $(".js_payment_tab_TEZ .payment-check-icon").show();
                    return false;
                } else if($("#tezvpaerror").html().length > 0) {
                    return false;
                }

                break;

            default:
        }
        return true;
    } catch (e) {
        console.log('validatePaymentForm' + e);
    }
},
    
   removeCartItem: function (){
   
     $(".removeCartItem").live('click', function (){
        
        var item = $(this).data('sku');

        if($.trim(item) == "" ) {
          alert("Invaid item.");
          return false; ;
        }
        
        oneStepCheckout.loadData (oneStepCheckout.removeItemFS +item+"/", oneStepCheckout.leftContnr, false);

    }) ;
    
    $(".osc-cart-product-actions-remove").live('click', function (){
        
        var item = $(this).data('sku');

        if($.trim(item) == "" ) {
            alert("Invaid item.");
            return false; ;
        }
        
        oneStepCheckout.loadData (oneStepCheckout.removeItemCT +item+"/", oneStepCheckout.leftContnr);

    }) ;
    
    
   },
   
   changeAddress : function ()  {
       $("#js_osc_change_ads").live('click', function(){
           var userType = $(this).data('utype');
        
            switch(userType) {
                case 'guest':
                    oneStepCheckout.loadData(oneStepCheckout.shippingAdsTB,oneStepCheckout.leftContnr);
                    break; 
                case 'user':
                    break;
                default:
                    break;
            }
            return false;
       });
       
   },
   
   userShippingAdress : function() {
        
        $(".js_osc_usr_addrs_rbt").live('click',function () {
            var shpAdsId =  $(this).val();
            
            if(shpAdsId ==0){
                $("#osc-new-shippingads").show();
            }else {
                $("#osc-new-shippingads").hide();
           }
       });
        
        
        $("#form-shipping-address").live('submit',function() {
           
            if(!$(".js_osc_usr_addrs_rbt:checked").length){
                alert("Please select address ");
                return false;
            }
            
            var adsFrm = $(this);
            
            var postData = {
                type: adsFrm.attr('method'),
                url:  adsFrm.attr('action'),
                data: adsFrm.serialize()
            };
            
            gaTracking.viewOrderReview();
            oneStepCheckout.ajaxSubmit(postData);
          
            
            return false; 
        });
   },
   
   userLogContinue : function () {
       $(".js_osc_usr_cont_btn").live('click',function(){
            oneStepCheckout.loadData(oneStepCheckout.shippingAdsTB,oneStepCheckout.leftContnr);
          
            return false;
       });
   },
   
   reload: function() {
       
     
       location.reload();
   },
           
   fbLogin: function (loginType) {
        var wTop = ($(window).height()-400)/2;
        wTop = (wTop<0)?0:wTop;
        var wLeft = ($(window).width()-800)/2;
        wLeft = (wLeft<0)?0:wLeft; 
        var wishListUrl = oneStepCheckout.getParameterByName('wishlistUrl');
        var clinet =window.open(oneStepCheckout.fbLUrl+"?loginType="+loginType+"&wishListUrl="+wishListUrl,"_blank","left= "+wLeft+",  top="+wTop+ ", toolbar=no, location=no, directories=no, status=no, menubar=no,  resizable=yes, copyhistory=yes, width=1024, height=600");
        clinet.moveTo(wLeft, wTop);
        if(oneStepCheckout.IsCheckout){
            gaTracking.authCheckout('facebook');
        }
        //facebook pixel add to compleregistration and form submit tracking
        facebookPixelTracking.callFbq('CompleteRegistration');
        facebookPixelTracking.callFbq('Lead');
   } ,
   
   gLogin: function(loginType) {
        var wTop = ($(window).height()-400)/2;
        wTop = (wTop<0)?0:wTop;
        var wLeft = ($(window).width()-800)/2;
        wLeft = (wLeft<0)?0:wLeft; 
        var wishListUrl = oneStepCheckout.getParameterByName('wishlistUrl');
        var clinet =window.open(oneStepCheckout.gLUrl+"?loginType="+loginType+"&wishListUrl="+wishListUrl,"_blank","left= "+wLeft+",  top="+wTop+", toolbar=no, location=no, directories=no, status=no, menubar=no,  resizable=yes, copyhistory=yes, width=1024, height=600");
        clinet.moveTo(wLeft, wTop);
        if(oneStepCheckout.IsCheckout){
            gaTracking.authCheckout('gmail');
        }
        //facebook pixel add to compleregistration and form submit tracking
        facebookPixelTracking.callFbq('CompleteRegistration');
        facebookPixelTracking.callFbq('Lead');
   },
           
   getWebtrekkContentId : function(id){
        var ContentIds = [
                            'shop.pc.onestepcheckout-index',
                            'shop.pc.onestepcheckout-shipping-address',
                            'shop.pc.onestepcheckout-order-review',
                            'shop.pc.onestepcheckout-payment',
                        ];
        
        if(id < 0 || id > 3) {
            return false; 
        } 
        
        return ContentIds[id];
        
   },
   getParameterByName : function(name) {
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
                var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                results = regex.exec(location.search);
                return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
                },        
   sendToWebtrekk: function(contentId){
        if(typeof wt !== 'object'){
            return false;
        }

        wt.contentId = oneStepCheckout.getWebtrekkContentId(contentId);
        wt.sendinfo();
   },
   submitLoginForm: function(){
       var frgFrm = $("#osc-customer-loginfrm");
        var postData = {
            type: frgFrm.attr('method'),
            url:  frgFrm.attr('action'),
            data: frgFrm.serialize()
        };
        oneStepCheckout.ajaxSubmit(postData);
        return false;
   },
   
   adobeTracking : function (resObj,sessId){
        ctab = resObj.cTab;
        var ttlTab = 4;       
        if(isNaN(ctab) || ctab > ttlTab ){
            return false;
        }        
        oneStepCheckout.sendToAdobe(ctab - 1,resObj.session_id);    
    },
    getAdobeContentId : function(id){
        var ContentIds = [
                            'ev_loginpageviews',
                            'ev_shippingpageviews',
                            'ev_orderreview',
                            'ev_payment',
                        ];
        
        if(id < 0 || id > 3) {
            return false; 
        } 
        
        return ContentIds[id];
        
   },
    sendToAdobe: function(contentId,transId){
        var pageEvent = oneStepCheckout.getAdobeContentId(contentId);
        dataLayer.push({'imgSrc':"//pixel.everesttech.net/px2/3113?px_evt=t&"+pageEvent+"=1&ev_transid="+transId,'event': 'adobeEvent'});
   },
   // INDFUR 1805: Webtrekk implementation on payment mode page
   webtrekPaymentMethods:function(){
       var thisObject = this;
       var actionName = new Array();
       // Prepaid Click
       jQuery(document).on("click", "input[name='PaymentMethodForm[prepaid][payment_method]']", function(){
           actionName = ["OneStepCheckout"];
           actionName.push("Prepaid");
           var paymentMethodName = jQuery(this).val();
           actionName.push(paymentMethodName);
           if(typeof wt !== 'undefined'){
               wt.sendinfo ({linkId: actionName.join("_")});
           }           
       });
       
       // Part Payment click
       jQuery(document).on("click", "input[name='PaymentMethodForm[partpayment][payment_method]']", function(){
           actionName = ["OneStepCheckout"];
           actionName.push("Partpay");
           var paymentMethodName = jQuery(this).val();
           switch(paymentMethodName){
                case "PartPay":
                   actionName.push("Payu"); 
                   break;
                case "PartPaytm":
                   actionName.push("Paytm"); 
                   break;
                default:
                   actionName.push("Default");
                   break;
           } 
           if(typeof wt !== 'undefined'){
               wt.sendinfo ({linkId: actionName.join("_")});
           }
       });
       
       // Emi Click
       jQuery(document).on("click", "input[name='PaymentMethodForm[parameter][bank_name]']", function(){
            actionName = ["OneStepCheckout"];
            actionName.push("EMI");
            var paymentMethodName = jQuery(this).attr("id");
            var assignedName = thisObject.getBankWebtrekName(paymentMethodName);                     
            actionName.push(assignedName);
            if(typeof wt !== 'undefined'){
               wt.sendinfo ({linkId: actionName.join("_")});
            }
       });      
   },
   getBankWebtrekName:function(paymentMethodName){
       var assignedName = "";
        switch(paymentMethodName){
            case "js_osc_emi_bankname_Hdfc":
                assignedName = "HDFC BANK"; 
                break;
            case "js_osc_emi_bankname_icici":
                assignedName = "ICICI BANK";                
                break;
            case "js_osc_emi_bankname_sbi":
                assignedName = "STATE BANK OF INDIA";                
                break;
            case "js_osc_emi_bankname_scb":
                assignedName = "STANDARD CHARTERED BANK";                 
                break;
            case "js_osc_emi_bankname_hsbc":
                assignedName = "HSBC BANK";
                break;
            case "js_osc_emi_bankname_axis":
                assignedName = "AXIS BANK";
                break;
            case "js_osc_emi_bankname_kotak":
                assignedName = "KOTAK BANK";
                break;
            case "js_osc_emi_bankname_citibank":
                assignedName = "CITIBANK";                
                break;                   
            default:
                assignedName = "DEFAULT BANK";
                break;
        }
        assignedName = assignedName.replace(/\s/g, '_');
        return assignedName;
       },
    getHidePaymentError : function(){
        $('.errorPayment').css('display','none');
    },
    setPlaceHolder : function(){
        if($.browser.msie && parseFloat($.browser.version)<=8){
            $('[placeholder]').focus(function() {
                var input = $(this);
                if (input.val() == input.attr('placeholder')) {
                    input.val('');
                    input.removeClass('placeholder');
                }
            }).blur(function() {
                var input = $(this);
                if (input.val() == '' || input.val() == input.attr('placeholder')) {
                    input.addClass('placeholder');
                    input.val(input.attr('placeholder'));
                }
            }).blur();
        }   
    },
    isDateGreaterThanToday: function(b) {
        var dS = b.split("/");
        var d1 = new Date(dS[1], (+dS[0] - 1));
        var today = new Date();
        if (d1 >= today) {
            return false;
        } else {
            return true;
        }
    },
    shippingEditClick: function() {
        $('.shipping_address_edit_icon').unbind().live('click',function(){
            var step = 2;

            if(isNaN(step) || step<1 || step >4 ){
                return false;
            }

            var tabCon = [
                    {'url': oneStepCheckout.customerLogin},
                    {'url': oneStepCheckout.shippingAdsTB},
                    {'url': oneStepCheckout.orderreview},
                    {'url': oneStepCheckout.paymentMethods},
                ];

            oneStepCheckout.loadData(tabCon[step-1].url,oneStepCheckout.leftContnr);
            return true;
        });
    },
    
    validateVpa: function (vpa, vpaType) {
        try {
            var token = $('input[name="YII_CSRF_TOKEN"]').val();
            $.ajax({
                url: "/onestepcheckout/common/validateVpa",
                dataType: "json",
                type: "POST",
                data: { 'vpa': vpa, YII_CSRF_TOKEN: token },
                success: function (result) {
                    if (typeof result === 'object' && result !== null && result.status == 'SUCCESS' && result.isVPAValid == 1) {
                        var payerName = result.payerAccountName;
                        if (vpaType == 'UPI') {
                            $("#vpaerror").html("");
                            $(".payment-ajax-loader").hide();
                            $("#vpastatus").val(1);
                            $("#checkout-complete-payment-btn").prop("disabled",false);
                            $("#vpa").addClass("success").removeClass('failure');
                            $(".js_payment_tab_UPI .payment-check-icon").show();
                            if (payerName !== null || payerName !== 'NA') {
                                $("#vpasuccess").html(payerName);
                            } else {
                                $("#vpasuccess").html("Your VPA is valid");
                            }
                            $("#upi-msg").show();
                            $("#upisubmit").hide();
                        } else if (vpaType == 'TEZ') {
                            $("#tezvpaerror").html("");
                            $(".payment-ajax-loader").hide();
                            $("#tezvpastatus").val(1);
                            $("#checkout-complete-payment-btn").prop("disabled",false);
                            $("#tezvpa").addClass("success").removeClass('failure');
                            $(".js_payment_tab_TEZ .payment-check-icon").show();
                            if (payerName !== null || payerName !== 'NA') {
                                $("#tezvpasuccess").html(payerName);
                            } else { 
                                $("#tezvpasuccess").html("Your VPA is valid");
                            }
                            $("#tez-msg").show();
                            $("#tezsubmit").hide();
                        }
                    } else {
                        $("#vpasuccess,#vpacontent,#tezvpasuccess,#tezvpacontent").html("");
                        $("#tez-msg,#upi-msg").hide();
                        if (vpaType == 'UPI') {
                            $("#vpaerror").html("Your VPA is invalid");
                            $("#vpastatus").val(0);
                            $("#vpa").removeClass("success").addClass('failure');
                            $(".js_payment_tab_UPI .payment-check-icon").show();
                            $(".payment-ajax-loader").hide();
                        } else if (vpaType == "TEZ") {
                            $(".payment-ajax-loader").hide();
                            $("#tezvpaerror").html("Your VPA is invalid");
                            $("#tezvpastatus").val(0);
                            $("#tezvpa").removeClass("success").addClass('failure');
                            $(".js_payment_tab_TEZ .payment-check-icon").show();
                        }
                    }
                }
            });
        } catch (error) {
            console.log('vpa : ' + error);
        }
    },
    


    ewalletGWValidation: function () {
        
        try {
            $(document).on('click',".ewalletClass", function () {
                $('#errorEwallet').css('visibility', 'hidden');
                $("#ewalletBankcodeValue").val(this.value);
            });
        } catch (e) {
            console.log('Error in Request :' + e);
            return false;
        }
    },


        pincodeAutoComplete: function () {
        $("#ShippingAddressForm_postcode, #BillingAddressForm_postcode").bind('keyup', function(evt){
            var textid = $(this);
            var textAttr = textid.attr("id");
            textid.next('.checkout-suggest').hide();
            if(textAttr === 'BillingAddressForm_postcode'){
            var pincode =  $("#BillingAddressForm_postcode").val();
            }
            else if(textAttr === 'ShippingAddressForm_postcode'){
                var pincode =  $("#ShippingAddressForm_postcode").val();
            }
            if (pincode.length == 0) {
                textid.parent('div').find('.checkout-suggest').hide();
            }
             else if(pincode.length != 0){
            textid.parent('div').find('.checkout-suggest').show();

            }
            if (typeof pincode != 'undefined') {
                pincode = pincode.replace(/[(?=+*'? ]/g, '');
                trimmedSearchInput = $.trim(pincode);
                var url = '/search/locationcheckout?q=' + encodeURIComponent(trimmedSearchInput);
                $(".checkout-suggest").html('');
                $.ajax({
                    url: url,
                    minChars:3,
                    type: 'GET',
                    success: function (result) {
                        var resultset = JSON.parse(result);
                        var objectList = "<ul>";
                        for (var i = 0; i < resultset.length - 1; i++) {
                             if(resultset.length > 1){
                              textid.next('.checkout-suggest').show();
                          }
                            objectList += "<li onclick=\"selectPincode('" + resultset[i].data + "', '" + textAttr + "')\">" + resultset[i].data + "</li>";
                        }
                        objectList += "</ul>";
                        if(textAttr == BillingAddressForm_postcode){
                            textid.parent('div').find('.checkout-suggest').append(objectList);
                        }
                        else{
                             textid.parent('div').find('.checkout-suggest').append(objectList);
                        }
                    },
                });

            }
        });
    }, 
    checkOrderSummery:function(){
       var checkWidth = $('.onestickySummary').width();
       
       if(checkWidth == null){
           $('.checkout-tab').addClass('checkout_signup_container');
       }
       
   },
        
       checkInstantBankOfferStatus:function(cardInfo,dTkn,pType,reqType,cardbin){
        var chkOfferInput;
        var finalAmount=null;
        chkOfferInput = [{"name":"YII_CSRF_TOKEN","value":dTkn},
                        {"name":"cardInfo","value":cardInfo},
                        {"name":"pmntType","value":pType},
                        {"name":"reqType","value":reqType}];
        $.ajax({
                type: "POST",
                url: oneStepCheckout.checkInstantBankOfferStatusLink,
                data: $.param(chkOfferInput),
                dataType: 'json',
                success: function (apiResp) {
                    if(reqType == 'SC'){
                        $('.render_index_sc').text('');
                    }
                     $(".discount-styleup-offer,.discount-styleup-offer p").hide();
                    if(apiResp.status == 1){
                        $(".radio_saved_card .discount-styleup-offer,.discount-styleup-offer").hide();
                        if(reqType == 'NC'){
                            
                            $("#"+pType+"_offer_msg").text(apiResp.message);
                            $(".discount-styleup-offer").show();
                            $(".discount-styleup-offer #"+pType+"_offer_msg").show();
                            //$(".input-carttype .discount-styleup-offer").show();
                        }else if(reqType == 'SC'){
                            $(".discount-styleup-offer").show();
                            $("#SC"+cardbin+pType).text(apiResp.message);
                            $(".discount-styleup-offer #SC"+cardbin+pType).show();
                           
                        }
                        
                    }   
                        if(apiResp.html){
                         $('.orderdetails').html(apiResp.html);   
                            var payment_method_type = $('#selected_payment_method_type').val();
                            var payment_method = $('#selected_payment_method').val();
                            if (payment_method_type == 'CashOnDelivery' && payment_method == 'CashOnDelivery') {
                                $('.cod-captchaBox').show();
                                $('#checkout-complete-payment-btn').hide();
                            }
                        }
                         finalAmount=   $(".order-total td:nth-child(2)").text();
                         $('.fntsizOrderReview').text(finalAmount);
                         oneStepCheckout.isCardvalidated =true;
                         oneStepCheckout.canValidateCard =false;
                }
        });
      
    },
    
    updateOrderReviewPayBtn: function() {
      
       try {
            var isOrderReviewPayBtnDisabled = $('input[name="hBtn_isOrderReviewPay"]').val();
            if(isOrderReviewPayBtnDisabled === '0') {
               $('#checkout-payment-btn').removeClass('buttonDisableOnOrderReview').attr('onclick','oneStepCheckout.loadpaymentstep()');
            }
        } catch (e) {
            console.log('Error:' + e);
        }
    },
}

function selectPincode(val, textAttr) {
    $('.checkout-suggest').hide();
    if(textAttr === 'BillingAddressForm_postcode'){
        $("#BillingAddressForm_postcode").val(val);
        fetchCityStateBilling();  
    } else if(textAttr === 'ShippingAddressForm_postcode'){
        $("#ShippingAddressForm_postcode").val(val);
        fetchCityState(); 
    }
    $(".checkout-suggest").html('');
}

function fetchCityState(){

    var pincode = $("#ShippingAddressForm_postcode").val();
            pincode = pincode.replace(/_/g, '', pincode);
            if (pincode.length != 6) {
                $('#ShippingAddressForm_fk_customer_address_region option:first').attr("selected", true);
                $("#ShippingAddressForm_city").val('');
                return false;
            }
            oneStepCheckout.showHidePCLoader(true);
            $.get('/onestepcheckout/common/pincode/find/' + pincode + "/", function(data) {
                if (data) {
                     $('.checkout-suggest').hide();
                    $(".checkout-suggest").html('');
                    oneStepCheckout.showHidePCLoader(false);
                    var d = oneStepCheckout.parseJSONTry(data);
                    if (typeof d.data !== 'undefined' && d.data.msg != '') {
                          $('#ShippingAddressForm_postcode').parent('div').find('.Deliverymsg').text(d.data.msg);
                    }
                    if (d.validation == true) {
                        $("#ShippingAddressForm_city").val(d.data.city);
                        var stateObj = $('#ShippingAddressForm_fk_customer_address_region option').filter(function() {
                            return oneStepCheckout.ucwords($(this).text()) === d.data.state;
                        });

                        if (stateObj.length) {
                            stateObj.attr("selected", true);
                            $('#ShippingAddressForm_fk_customer_address_region').trigger('chosen:updated');
                        } else {
                            $('#ShippingAddressForm_fk_customer_address_region option:first').attr("selected", true);
                        }

                        var errorMsgObj = $("#ShippingAddressForm_postcode").next("div.errorMessage");
                        if (errorMsgObj.length) {
                            errorMsgObj.html("");
                        }

                    } else {
                        var errorMsgObj = $("#ShippingAddressForm_postcode").next("div.errorMessage");
                        if (errorMsgObj.length) {
                            errorMsgObj.html(d.error);
                        } else {
                            var errorEmnt = '<div class="errorMessage">' + d.error + '</div>';
                            $(errorEmnt).insertAfter($('#ShippingAddressForm_postcode'));
                        }
                        $('#ShippingAddressForm_fk_customer_address_region option:first').attr("selected", true);
                        $("#ShippingAddressForm_city").val('');

                        if (d.data && d.data.city) {
                            $("#ShippingAddressForm_city").val(d.data.city);
                            
                        }

                        var stateObj = {}

                        if (d.data && d.data.state) {
                            var stateObj = $('#ShippingAddressForm_fk_customer_address_region option').filter(function() {
                                return oneStepCheckout.ucwords($(this).text()) === d.data.state;
                                 
                            });
                        }

                        if (stateObj.length) {
                           
                            stateObj.attr("selected", true);
                           
                        } else {
                            $('#ShippingAddressForm_fk_customer_address_region option:first').attr("selected", true);
                        }
                    }
                   $("#checkout-suggest").html('');
                }
            });
}
function fetchCityStateBilling(){
            var pincode = $("#BillingAddressForm_postcode").val();
            pincode = pincode.replace(/_/g, '', pincode);
            if (pincode.length != 6) {
                $('#BillingAddressForm_fk_customer_address_region option:first').attr("selected", true);
                $("#BillingAddressForm_city").val('');
                return false;
            }
            oneStepCheckout.showHidePCLoader(true);
            $.get('/onestepcheckout/common/pincode/find/' + pincode + "/", function(data) {
                if (data) {
                    $('.checkout-suggest').hide();
                    $(".checkout-suggest").html('');
                    oneStepCheckout.showHidePCLoader(false);
                    var d = oneStepCheckout.parseJSONTry(data);
                    if (typeof d.data !== 'undefined' && d.data.msg != '') {
                       $('#BillingAddressForm_postcode').parent('div').find('.Deliverymsg').text(d.data.msg);
                    }
                    if (d.validation == true) {
                        $("#BillingAddressForm_city").val(d.data.city);
                        var stateObj = $('#BillingAddressForm_fk_customer_address_region option').filter(function() {
                            return oneStepCheckout.ucwords($(this).text()) === d.data.state;
                        });

                        if (stateObj.length) {
                            stateObj.attr("selected", true);
                            $('#BillingAddressForm_fk_customer_address_region').trigger('chosen:updated');
                        } else {
                            $('#BillingAddressForm_fk_customer_address_region option:first').attr("selected", true);
                        }

                        var errorMsgObj = $("#BillingAddressForm_postcode").next("div.errorMessage");
                        if (errorMsgObj.length) {
                            errorMsgObj.html("");
                        }

                    } else {
                        var errorMsgObj = $("#BillingAddressForm_postcode").next("div.errorMessage");
                        if (errorMsgObj.length) {
                            errorMsgObj.html(d.error);
                        } else {
                            var errorEmnt = '<div class="errorMessage">' + d.error + '</div>';
                            $(errorEmnt).insertAfter($('#BillingAddressForm_postcode'));
                        }
                        $('#BillingAddressForm_fk_customer_address_region option:first').attr("selected", true);
                        $("#BillingAddressForm_city").val('');

                        if (d.data && d.data.city) {
                            $("#BillingAddressForm_city").val(d.data.city);
                        }

                        var stateObj = {}

                        if (d.data && d.data.state) {
                            var stateObj = $('#BillingAddressForm_fk_customer_address_region option').filter(function() {
                                return oneStepCheckout.ucwords($(this).text()) === d.data.state;
                            });
                        }

                        if (stateObj.length) {
                            stateObj.attr("selected", true);
                        } else {
                            $('#BillingAddressForm_fk_customer_address_region option:first').attr("selected", true);
                        }
                    }
                }
            });
            }
            
            
$(function(){
    $(".couponcodeNewBox").hide();
    $( ".couponcodeNew" ).change(function() {
        $(this).parent().parent().children('.couponcodeNewBox').slideToggle('slow');
    });
})

$(function (){
    oneStepCheckout.stickySummaryBox();
    oneStepCheckout.init();
});

$(document).ready(function () {
   
    $(document).on("keydown", "#tezvpa", function (e) {
        if (e.keyCode === 13) {
            $("#tezsubmit").click();
        } else if (e.keyCode === 32) {
            return false;
        }
    });
    $(document).on('input','#tezvpa', function() {
        $("#tezvpasuccess,#tezvpacontent,#tezvpaerror").html("");
        $(".js_payment_tab_TEZ .payment-check-icon, #tez-msg").hide();
        $("#tezvpastatus").val(0);
        $('#checkout-complete-payment-btn').prop('disabled', true);
        $("#tezsubmit").show();
    });
    $(document).on("keydown","#vpa", function(e) {
        if (e.keyCode === 32) {
            return false;
        }
    });
    $(document).on('input','#vpa', function() {
        $("#vpasuccess,#vpacontent,#vpaerror").html("");
        $(".js_payment_tab_UPI .payment-check-icon, #upi-msg").hide();
        $("#vpastatus").val(0);
        $('#checkout-complete-payment-btn').prop('disabled', true);
        $("#upisubmit").show();
    });
    
    
    $(document).on('click', "#upisubmit", function (e) {
        e.preventDefault();
        var vpaInput = $("#vpa").val();   
        var pmt = $(".payment_checkout ul.nav-tabs li.active a.payment-upi").attr('data-pmt');
        if (pmt == 'UPI' && (vpaInput == undefined || vpaInput == '')) {
            $("#vpaerror").html('Please enter valid VPA');
            $("#vpa").removeClass("success").addClass('failure');
            $(".js_payment_tab_UPI .payment-check-icon").show();
            $("#checkout-complete-payment-btn").prop("disabled", true);
            return false;
        } else if (pmt == 'UPI') {
            $(".payment-ajax-loader").show();
            oneStepCheckout.validateVpa(vpaInput, 'UPI');
            $("#checkout-complete-payment-btn").prop("disabled", false);
        }
    });
    
    $(document).on('click', "#tezsubmit", function (e) {
        e.preventDefault();
        var vpaInput = $("#tezvpa").val();
        var pmt = $(".payment_checkout ul.nav-tabs li.active a.payment-tez").attr('data-pmt');
        if (pmt == 'TEZ' && (vpaInput == undefined || vpaInput == '')) {
            $("#tezvpaerror").html('Please enter valid VPA');
            $("#tezvpa").removeClass("success").addClass('failure');
            $(".payment-check-icon").show();
            $("#checkout-complete-payment-btn").prop("disabled", true);
        } else if (pmt == 'TEZ') {
            $(".payment-ajax-loader").show();
            oneStepCheckout.validateVpa(vpaInput, 'TEZ');
            $("#checkout-complete-payment-btn").prop("disabled", false);
        }
    }); 
    $(document).on('change', ".saved-card-main input[type='radio']", function (e) {
        if ($(this).is(':checked')) {
            if ($("input[name='is_instant_offer']").val()) {
                var cardInfo = ($(this).attr('card_no'));
                var cardbin = ($(this).attr('card_bin'));
                var dTkn = ($('#cc_number').attr('data-token'));
                var pType = ($(this).attr('card-type'));
                oneStepCheckout.checkInstantBankOfferStatus(cardInfo, dTkn, pType, 'SC',cardbin);
            }
        }
    });
    $(document).on('blur', '#cc_number,#dc_number', function () {
        if (oneStepCheckout.canValidateCard == true) {
            var pmt = $(".payment-radio-sec ul.nav-tabs li.active a").attr('data-pmt');
            validCardNumberId = (pmt == 'DebitCard') ? '#dc_number' : ((pmt == 'CreditCard') ? '#cc_number' : false);
            oneStepCheckout.isCardvalidated = false;
            oneStepCheckout.checkInstantBankOfferStatus($(validCardNumberId).val().replace(/\s/g, ""), $(validCardNumberId).attr('data-token'), validCardNumberId.substring(1, 3), 'NC', '');
        }

    });
    
     $(document).on("click", "#checkout-complete-payment-btn", function(){
        $("#payment-form").submit();
     });
    
});

var facebookPixelTracking= {
    
    
    isFacebookPixelEnabled: function() {
        var result=0;
        try {
            if(typeof hostDetails !='undefined') {
                result=(hostDetails.enablefacebookpixel!='')?hostDetails.enablefacebookpixel:0;
            }
            return result;
        } catch(err) {
            console.log('Exception: '+err);
            return 0;
        }
    },
    
    getFacebookPixelId: function() {
        var result=0;
        try {
            if(typeof hostDetails !='undefined') {
                result=(hostDetails.facebookPixelid!='')?hostDetails.facebookPixelid:0;
            }
            return result;
        } catch(err) {
            console.log('Exception: '+err);
            return 0;
        }
    },
    
    
    makepurchase:  function(total) {
        this.callFbq('Purchase', {value: total, currency: 'INR'});
    },
   
    
     callFbq:  function(trackText, extraValue) {
        var fbId = this.getFacebookPixelId();
        if(this.isFacebookPixelEnabled()==1 && typeof fbq === 'function') {
            !function(f,b,e,v,n,t,s) 
            {if(f.fbq)return;n=f.fbq=function(){n.callMethod? 
            n.callMethod.apply(n,arguments):n.queue.push(arguments)}; 
            if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0'; 
            n.queue=[];t=b.createElement(e);t.async=!0; 
            t.src=v;s=b.getElementsByTagName(e)[0]; 
            s.parentNode.insertBefore(t,s)}(window,document,'script', 
            'https://connect.facebook.net/en_US/fbevents.js'); 
            fbq('init', fbId); 
             if(typeof extraValue !== 'undefined') {
              fbq('track', trackText, extraValue);
             }
            else{
              fbq('track', trackText);
            }
        }
    },
};


if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.7",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a("#"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.7",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c).prop(c,!0)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c).prop(c,!1))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target).closest(".btn");b.call(d,"toggle"),a(c.target).is('input[type="radio"], input[type="checkbox"]')||(c.preventDefault(),d.is("input,button")?d.trigger("focus"):d.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1||a<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){if(!this.sliding)return this.slide("next")},c.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.7",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);if(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),!c.isInStateTrue())return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);if(this.$element.trigger(g),!g.isDefaultPrevented())return f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.7",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.7",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){
this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return e<c&&"top";if("bottom"==this.affixed)return null!=c?!(e+this.unpin<=f.top)&&"bottom":!(e+g<=a-d)&&"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&e<=c?"top":null!=d&&i+j>=a-d&&"bottom"},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);

!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof module&&module.exports?module.exports=b(require("jquery")):b(a.jQuery)}(this,function(a){!function(a){"use strict";function b(b){var c=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];return a.each(c,function(){b=b?b.replace(this.re,this.ch):""}),b}function c(b){var c=arguments,d=b;[].shift.apply(c);var e,f=this.each(function(){var b=a(this);if(b.is("select")){var f=b.data("selectpicker"),g="object"==typeof d&&d;if(f){if(g)for(var h in g)g.hasOwnProperty(h)&&(f.options[h]=g[h])}else{var i=a.extend({},l.DEFAULTS,a.fn.selectpicker.defaults||{},b.data(),g);i.template=a.extend({},l.DEFAULTS.template,a.fn.selectpicker.defaults?a.fn.selectpicker.defaults.template:{},b.data().template,g.template),b.data("selectpicker",f=new l(this,i))}"string"==typeof d&&(e=f[d]instanceof Function?f[d].apply(f,c):f.options[d])}});return"undefined"!=typeof e?e:f}String.prototype.includes||!function(){var a={}.toString,b=function(){try{var a={},b=Object.defineProperty,c=b(a,a,a)&&b}catch(a){}return c}(),c="".indexOf,d=function(b){if(null==this)throw new TypeError;var d=String(this);if(b&&"[object RegExp]"==a.call(b))throw new TypeError;var e=d.length,f=String(b),g=f.length,h=arguments.length>1?arguments[1]:void 0,i=h?Number(h):0;i!=i&&(i=0);var j=Math.min(Math.max(i,0),e);return!(g+j>e)&&c.call(d,f,i)!=-1};b?b(String.prototype,"includes",{value:d,configurable:!0,writable:!0}):String.prototype.includes=d}(),String.prototype.startsWith||!function(){var a=function(){try{var a={},b=Object.defineProperty,c=b(a,a,a)&&b}catch(a){}return c}(),b={}.toString,c=function(a){if(null==this)throw new TypeError;var c=String(this);if(a&&"[object RegExp]"==b.call(a))throw new TypeError;var d=c.length,e=String(a),f=e.length,g=arguments.length>1?arguments[1]:void 0,h=g?Number(g):0;h!=h&&(h=0);var i=Math.min(Math.max(h,0),d);if(f+i>d)return!1;for(var j=-1;++j<f;)if(c.charCodeAt(i+j)!=e.charCodeAt(j))return!1;return!0};a?a(String.prototype,"startsWith",{value:c,configurable:!0,writable:!0}):String.prototype.startsWith=c}(),Object.keys||(Object.keys=function(a,b,c){c=[];for(b in a)c.hasOwnProperty.call(a,b)&&c.push(b);return c});var d={useDefault:!1,_set:a.valHooks.select.set};a.valHooks.select.set=function(b,c){return c&&!d.useDefault&&a(b).data("selected",!0),d._set.apply(this,arguments)};var e=null,f=function(){try{return new Event("change"),!0}catch(a){return!1}}();a.fn.triggerNative=function(a){var b,c=this[0];c.dispatchEvent?(f?b=new Event(a,{bubbles:!0}):(b=document.createEvent("Event"),b.initEvent(a,!0,!1)),c.dispatchEvent(b)):c.fireEvent?(b=document.createEventObject(),b.eventType=a,c.fireEvent("on"+a,b)):this.trigger(a)},a.expr.pseudos.icontains=function(b,c,d){var e=a(b).find("a"),f=(e.data("tokens")||e.text()).toString().toUpperCase();return f.includes(d[3].toUpperCase())},a.expr.pseudos.ibegins=function(b,c,d){var e=a(b).find("a"),f=(e.data("tokens")||e.text()).toString().toUpperCase();return f.startsWith(d[3].toUpperCase())},a.expr.pseudos.aicontains=function(b,c,d){var e=a(b).find("a"),f=(e.data("tokens")||e.data("normalizedText")||e.text()).toString().toUpperCase();return f.includes(d[3].toUpperCase())},a.expr.pseudos.aibegins=function(b,c,d){var e=a(b).find("a"),f=(e.data("tokens")||e.data("normalizedText")||e.text()).toString().toUpperCase();return f.startsWith(d[3].toUpperCase())};var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},h={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#x60;":"`"},i=function(a){var b=function(b){return a[b]},c="(?:"+Object.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}},j=i(g),k=i(h),l=function(b,c){d.useDefault||(a.valHooks.select.set=d._set,d.useDefault=!0),this.$element=a(b),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=c,null===this.options.title&&(this.options.title=this.$element.attr("title"));var e=this.options.windowPadding;"number"==typeof e&&(this.options.windowPadding=[e,e,e,e]),this.val=l.prototype.val,this.render=l.prototype.render,this.refresh=l.prototype.refresh,this.setStyle=l.prototype.setStyle,this.selectAll=l.prototype.selectAll,this.deselectAll=l.prototype.deselectAll,this.destroy=l.prototype.destroy,this.remove=l.prototype.remove,this.show=l.prototype.show,this.hide=l.prototype.hide,this.init()};l.VERSION="1.12.4",l.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(a,b){return 1==a?"{0} item selected":"{0} items selected"},maxOptionsText:function(a,b){return[1==a?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==b?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0},l.prototype={constructor:l,init:function(){var b=this,c=this.$element.attr("id");this.$element.addClass("bs-select-hidden"),this.liObj={},this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement).appendTo(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(".dropdown-menu"),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.$element.removeClass("bs-select-hidden"),this.options.dropdownAlignRight===!0&&this.$menu.addClass("dropdown-menu-right"),"undefined"!=typeof c&&(this.$button.attr("data-id",c),a('label[for="'+c+'"]').click(function(a){a.preventDefault(),b.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(a){b.$menuInner.attr("aria-expanded",!1),b.$element.trigger("hide.bs.select",a)},"hidden.bs.dropdown":function(a){b.$element.trigger("hidden.bs.select",a)},"show.bs.dropdown":function(a){b.$menuInner.attr("aria-expanded",!0),b.$element.trigger("show.bs.select",a)},"shown.bs.dropdown":function(a){b.$element.trigger("shown.bs.select",a)}}),b.$element[0].hasAttribute("required")&&this.$element.on("invalid",function(){b.$button.addClass("bs-invalid"),b.$element.on({"focus.bs.select":function(){b.$button.focus(),b.$element.off("focus.bs.select")},"shown.bs.select":function(){b.$element.val(b.$element.val()).off("shown.bs.select")},"rendered.bs.select":function(){this.validity.valid&&b.$button.removeClass("bs-invalid"),b.$element.off("rendered.bs.select")}}),b.$button.on("blur.bs.select",function(){b.$element.focus().blur(),b.$button.off("blur.bs.select")})}),setTimeout(function(){b.$element.trigger("loaded.bs.select")})},createDropdown:function(){var b=this.multiple||this.options.showTick?" show-tick":"",c=this.$element.parent().hasClass("input-group")?" input-group-btn":"",d=this.autofocus?" autofocus":"",e=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",f=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+j(this.options.liveSearchPlaceholder)+'"')+' role="textbox" aria-label="Search"></div>':"",g=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+"</button></div></div>":"",h=this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button></div></div>":"",i='<div class="btn-group bootstrap-select'+b+c+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" data-toggle="dropdown"'+d+' role="button"><span class="filter-option pull-left"></span>&nbsp;<span class="bs-caret">'+this.options.template.caret+'</span></button><div class="dropdown-menu open" role="combobox">'+e+f+g+'<ul class="dropdown-menu inner" role="listbox" aria-expanded="false"></ul>'+h+"</div></div>";return a(i)},createView:function(){var a=this.createDropdown(),b=this.createLi();return a.find("ul")[0].innerHTML=b,a},reloadLi:function(){var a=this.createLi();this.$menuInner[0].innerHTML=a},createLi:function(){var c=this,d=[],e=0,f=document.createElement("option"),g=-1,h=function(a,b,c,d){return"<li"+("undefined"!=typeof c&&""!==c?' class="'+c+'"':"")+("undefined"!=typeof b&&null!==b?' data-original-index="'+b+'"':"")+("undefined"!=typeof d&&null!==d?'data-optgroup="'+d+'"':"")+">"+a+"</li>"},i=function(d,e,f,g){return'<a tabindex="0"'+("undefined"!=typeof e?' class="'+e+'"':"")+(f?' style="'+f+'"':"")+(c.options.liveSearchNormalize?' data-normalized-text="'+b(j(a(d).html()))+'"':"")+("undefined"!=typeof g||null!==g?' data-tokens="'+g+'"':"")+' role="option">'+d+'<span class="'+c.options.iconBase+" "+c.options.tickIcon+' check-mark"></span></a>'};if(this.options.title&&!this.multiple&&(g--,!this.$element.find(".bs-title-option").length)){var k=this.$element[0];f.className="bs-title-option",f.innerHTML=this.options.title,f.value="",k.insertBefore(f,k.firstChild);var l=a(k.options[k.selectedIndex]);void 0===l.attr("selected")&&void 0===this.$element.data("selected")&&(f.selected=!0)}var m=this.$element.find("option");return m.each(function(b){var f=a(this);if(g++,!f.hasClass("bs-title-option")){var k,l=this.className||"",n=j(this.style.cssText),o=f.data("content")?f.data("content"):f.html(),p=f.data("tokens")?f.data("tokens"):null,q="undefined"!=typeof f.data("subtext")?'<small class="text-muted">'+f.data("subtext")+"</small>":"",r="undefined"!=typeof f.data("icon")?'<span class="'+c.options.iconBase+" "+f.data("icon")+'"></span> ':"",s=f.parent(),t="OPTGROUP"===s[0].tagName,u=t&&s[0].disabled,v=this.disabled||u;if(""!==r&&v&&(r="<span>"+r+"</span>"),c.options.hideDisabled&&(v&&!t||u))return k=f.data("prevHiddenIndex"),f.next().data("prevHiddenIndex",void 0!==k?k:b),void g--;if(f.data("content")||(o=r+'<span class="text">'+o+q+"</span>"),t&&f.data("divider")!==!0){if(c.options.hideDisabled&&v){if(void 0===s.data("allOptionsDisabled")){var w=s.children();s.data("allOptionsDisabled",w.filter(":disabled").length===w.length)}if(s.data("allOptionsDisabled"))return void g--}var x=" "+s[0].className||"";if(0===f.index()){e+=1;var y=s[0].label,z="undefined"!=typeof s.data("subtext")?'<small class="text-muted">'+s.data("subtext")+"</small>":"",A=s.data("icon")?'<span class="'+c.options.iconBase+" "+s.data("icon")+'"></span> ':"";y=A+'<span class="text">'+j(y)+z+"</span>",0!==b&&d.length>0&&(g++,d.push(h("",null,"divider",e+"div"))),g++,d.push(h(y,null,"dropdown-header"+x,e))}if(c.options.hideDisabled&&v)return void g--;d.push(h(i(o,"opt "+l+x,n,p),b,"",e))}else if(f.data("divider")===!0)d.push(h("",b,"divider"));else if(f.data("hidden")===!0)k=f.data("prevHiddenIndex"),f.next().data("prevHiddenIndex",void 0!==k?k:b),d.push(h(i(o,l,n,p),b,"hidden is-hidden"));else{var B=this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName;if(!B&&c.options.hideDisabled&&(k=f.data("prevHiddenIndex"),void 0!==k)){var C=m.eq(k)[0].previousElementSibling;C&&"OPTGROUP"===C.tagName&&!C.disabled&&(B=!0)}B&&(g++,d.push(h("",null,"divider",e+"div"))),d.push(h(i(o,l,n,p),b))}c.liObj[b]=g}}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),d.join("")},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(b){var c,d=this,e=this.$element.find("option");b!==!1&&e.each(function(a){var b=d.findLis().eq(d.liObj[a]);d.setDisabled(a,this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled,b),d.setSelected(a,this.selected,b)}),this.togglePlaceholder(),this.tabIndex();var f=e.map(function(){if(this.selected){if(d.options.hideDisabled&&(this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled))return;var b,c=a(this),e=c.data("icon")&&d.options.showIcon?'<i class="'+d.options.iconBase+" "+c.data("icon")+'"></i> ':"";return b=d.options.showSubtext&&c.data("subtext")&&!d.multiple?' <small class="text-muted">'+c.data("subtext")+"</small>":"","undefined"!=typeof c.attr("title")?c.attr("title"):c.data("content")&&d.options.showContent?c.data("content").toString():e+c.html()+b}}).toArray(),g=this.multiple?f.join(this.options.multipleSeparator):f[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var h=this.options.selectedTextFormat.split(">");if(h.length>1&&f.length>h[1]||1==h.length&&f.length>=2){c=this.options.hideDisabled?", [disabled]":"";var i=e.not('[data-divider="true"], [data-hidden="true"]'+c).length,j="function"==typeof this.options.countSelectedText?this.options.countSelectedText(f.length,i):this.options.countSelectedText;g=j.replace("{0}",f.length.toString()).replace("{1}",i.toString())}}void 0==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(g=this.options.title),g||(g="undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",k(a.trim(g.replace(/<[^>]*>?/g,"")))),this.$button.children(".filter-option").html(g),this.$element.trigger("rendered.bs.select")},setStyle:function(a,b){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var c=a?a:this.options.style;"add"==b?this.$button.addClass(c):"remove"==b?this.$button.removeClass(c):(this.$button.removeClass(this.options.style),this.$button.addClass(c))},liHeight:function(b){if(b||this.options.size!==!1&&!this.sizeInfo){var c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("ul"),f=document.createElement("li"),g=document.createElement("li"),h=document.createElement("a"),i=document.createElement("span"),j=this.options.header&&this.$menu.find(".popover-title").length>0?this.$menu.find(".popover-title")[0].cloneNode(!0):null,k=this.options.liveSearch?document.createElement("div"):null,l=this.options.actionsBox&&this.multiple&&this.$menu.find(".bs-actionsbox").length>0?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,m=this.options.doneButton&&this.multiple&&this.$menu.find(".bs-donebutton").length>0?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null;if(i.className="text",c.className=this.$menu[0].parentNode.className+" open",d.className="dropdown-menu open",e.className="dropdown-menu inner",f.className="divider",i.appendChild(document.createTextNode("Inner text")),h.appendChild(i),g.appendChild(h),e.appendChild(g),e.appendChild(f),j&&d.appendChild(j),k){var n=document.createElement("input");k.className="bs-searchbox",n.className="form-control",k.appendChild(n),d.appendChild(k)}l&&d.appendChild(l),d.appendChild(e),m&&d.appendChild(m),c.appendChild(d),document.body.appendChild(c);var o=h.offsetHeight,p=j?j.offsetHeight:0,q=k?k.offsetHeight:0,r=l?l.offsetHeight:0,s=m?m.offsetHeight:0,t=a(f).outerHeight(!0),u="function"==typeof getComputedStyle&&getComputedStyle(d),v=u?null:a(d),w={vert:parseInt(u?u.paddingTop:v.css("paddingTop"))+parseInt(u?u.paddingBottom:v.css("paddingBottom"))+parseInt(u?u.borderTopWidth:v.css("borderTopWidth"))+parseInt(u?u.borderBottomWidth:v.css("borderBottomWidth")),horiz:parseInt(u?u.paddingLeft:v.css("paddingLeft"))+parseInt(u?u.paddingRight:v.css("paddingRight"))+parseInt(u?u.borderLeftWidth:v.css("borderLeftWidth"))+parseInt(u?u.borderRightWidth:v.css("borderRightWidth"))},x={vert:w.vert+parseInt(u?u.marginTop:v.css("marginTop"))+parseInt(u?u.marginBottom:v.css("marginBottom"))+2,horiz:w.horiz+parseInt(u?u.marginLeft:v.css("marginLeft"))+parseInt(u?u.marginRight:v.css("marginRight"))+2};document.body.removeChild(c),this.sizeInfo={liHeight:o,headerHeight:p,searchHeight:q,actionsHeight:r,doneButtonHeight:s,dividerHeight:t,menuPadding:w,menuExtras:x}}},setSize:function(){if(this.findLis(),this.liHeight(),this.options.header&&this.$menu.css("padding-top",0),this.options.size!==!1){var b,c,d,e,f,g,h,i,j=this,k=this.$menu,l=this.$menuInner,m=a(window),n=this.$newElement[0].offsetHeight,o=this.$newElement[0].offsetWidth,p=this.sizeInfo.liHeight,q=this.sizeInfo.headerHeight,r=this.sizeInfo.searchHeight,s=this.sizeInfo.actionsHeight,t=this.sizeInfo.doneButtonHeight,u=this.sizeInfo.dividerHeight,v=this.sizeInfo.menuPadding,w=this.sizeInfo.menuExtras,x=this.options.hideDisabled?".disabled":"",y=function(){var b,c=j.$newElement.offset(),d=a(j.options.container);j.options.container&&!d.is("body")?(b=d.offset(),b.top+=parseInt(d.css("borderTopWidth")),b.left+=parseInt(d.css("borderLeftWidth"))):b={top:0,left:0};var e=j.options.windowPadding;f=c.top-b.top-m.scrollTop(),g=m.height()-f-n-b.top-e[2],h=c.left-b.left-m.scrollLeft(),i=m.width()-h-o-b.left-e[1],f-=e[0],h-=e[3]};if(y(),"auto"===this.options.size){var z=function(){var m,n=function(b,c){return function(d){return c?d.classList?d.classList.contains(b):a(d).hasClass(b):!(d.classList?d.classList.contains(b):a(d).hasClass(b))}},u=j.$menuInner[0].getElementsByTagName("li"),x=Array.prototype.filter?Array.prototype.filter.call(u,n("hidden",!1)):j.$lis.not(".hidden"),z=Array.prototype.filter?Array.prototype.filter.call(x,n("dropdown-header",!0)):x.filter(".dropdown-header");y(),b=g-w.vert,c=i-w.horiz,j.options.container?(k.data("height")||k.data("height",k.height()),d=k.data("height"),k.data("width")||k.data("width",k.width()),e=k.data("width")):(d=k.height(),e=k.width()),j.options.dropupAuto&&j.$newElement.toggleClass("dropup",f>g&&b-w.vert<d),j.$newElement.hasClass("dropup")&&(b=f-w.vert),"auto"===j.options.dropdownAlignRight&&k.toggleClass("dropdown-menu-right",h>i&&c-w.horiz<e-o),m=x.length+z.length>3?3*p+w.vert-2:0,k.css({"max-height":b+"px",overflow:"hidden","min-height":m+q+r+s+t+"px"}),l.css({"max-height":b-q-r-s-t-v.vert+"px","overflow-y":"auto","min-height":Math.max(m-v.vert,0)+"px"})};z(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",z),m.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",z)}else if(this.options.size&&"auto"!=this.options.size&&this.$lis.not(x).length>this.options.size){var A=this.$lis.not(".divider").not(x).children().slice(0,this.options.size).last().parent().index(),B=this.$lis.slice(0,A+1).filter(".divider").length;b=p*this.options.size+B*u+v.vert,j.options.container?(k.data("height")||k.data("height",k.height()),d=k.data("height")):d=k.height(),j.options.dropupAuto&&this.$newElement.toggleClass("dropup",f>g&&b-w.vert<d),k.css({"max-height":b+q+r+s+t+"px",overflow:"hidden","min-height":""}),l.css({"max-height":b-v.vert+"px","overflow-y":"auto","min-height":""})}}},setWidth:function(){if("auto"===this.options.width){this.$menu.css("min-width","0");var a=this.$menu.parent().clone().appendTo("body"),b=this.options.container?this.$newElement.clone().appendTo("body"):a,c=a.children(".dropdown-menu").outerWidth(),d=b.css("width","auto").children("button").outerWidth();a.remove(),b.remove(),this.$newElement.css("width",Math.max(c,d)+"px")}else"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){this.$bsContainer=a('<div class="bs-container" />');var b,c,d,e=this,f=a(this.options.container),g=function(a){e.$bsContainer.addClass(a.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",a.hasClass("dropup")),b=a.offset(),f.is("body")?c={top:0,left:0}:(c=f.offset(),c.top+=parseInt(f.css("borderTopWidth"))-f.scrollTop(),c.left+=parseInt(f.css("borderLeftWidth"))-f.scrollLeft()),d=a.hasClass("dropup")?0:a[0].offsetHeight,e.$bsContainer.css({top:b.top-c.top+d,left:b.left-c.left,width:a[0].offsetWidth})};this.$button.on("click",function(){var b=a(this);e.isDisabled()||(g(e.$newElement),e.$bsContainer.appendTo(e.options.container).toggleClass("open",!b.hasClass("open")).append(e.$menu))}),a(window).on("resize scroll",function(){g(e.$newElement)}),this.$element.on("hide.bs.select",function(){e.$menu.data("height",e.$menu.height()),e.$bsContainer.detach()})},setSelected:function(a,b,c){c||(this.togglePlaceholder(),c=this.findLis().eq(this.liObj[a])),c.toggleClass("selected",b).find("a").attr("aria-selected",b)},setDisabled:function(a,b,c){c||(c=this.findLis().eq(this.liObj[a])),b?c.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1).attr("aria-disabled",!0):c.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0).attr("aria-disabled",!1)},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var a=this;this.isDisabled()?(this.$newElement.addClass("disabled"),this.$button.addClass("disabled").attr("tabindex",-1).attr("aria-disabled",!0)):(this.$button.hasClass("disabled")&&(this.$newElement.removeClass("disabled"),this.$button.removeClass("disabled").attr("aria-disabled",!1)),this.$button.attr("tabindex")!=-1||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click(function(){return!a.isDisabled()})},togglePlaceholder:function(){var a=this.$element.val();this.$button.toggleClass("bs-placeholder",null===a||""===a||a.constructor===Array&&0===a.length)},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&this.$element.attr("tabindex")!==-98&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex"))),this.$element.attr("tabindex",-98)},clickListener:function(){var b=this,c=a(document);c.data("spaceSelect",!1),this.$button.on("keyup",function(a){/(32)/.test(a.keyCode.toString(10))&&c.data("spaceSelect")&&(a.preventDefault(),c.data("spaceSelect",!1))}),this.$button.on("click",function(){b.setSize()}),this.$element.on("shown.bs.select",function(){if(b.options.liveSearch||b.multiple){if(!b.multiple){var a=b.liObj[b.$element[0].selectedIndex];if("number"!=typeof a||b.options.size===!1)return;var c=b.$lis.eq(a)[0].offsetTop-b.$menuInner[0].offsetTop;c=c-b.$menuInner[0].offsetHeight/2+b.sizeInfo.liHeight/2,b.$menuInner[0].scrollTop=c}}else b.$menuInner.find(".selected a").focus()}),this.$menuInner.on("click","li a",function(c){var d=a(this),f=d.parent().data("originalIndex"),g=b.$element.val(),h=b.$element.prop("selectedIndex"),i=!0;if(b.multiple&&1!==b.options.maxOptions&&c.stopPropagation(),c.preventDefault(),!b.isDisabled()&&!d.parent().hasClass("disabled")){var j=b.$element.find("option"),k=j.eq(f),l=k.prop("selected"),m=k.parent("optgroup"),n=b.options.maxOptions,o=m.data("maxOptions")||!1;if(b.multiple){if(k.prop("selected",!l),b.setSelected(f,!l),d.blur(),n!==!1||o!==!1){var p=n<j.filter(":selected").length,q=o<m.find("option:selected").length;if(n&&p||o&&q)if(n&&1==n)j.prop("selected",!1),k.prop("selected",!0),b.$menuInner.find(".selected").removeClass("selected"),b.setSelected(f,!0);else if(o&&1==o){m.find("option:selected").prop("selected",!1),k.prop("selected",!0);var r=d.parent().data("optgroup");b.$menuInner.find('[data-optgroup="'+r+'"]').removeClass("selected"),b.setSelected(f,!0)}else{var s="string"==typeof b.options.maxOptionsText?[b.options.maxOptionsText,b.options.maxOptionsText]:b.options.maxOptionsText,t="function"==typeof s?s(n,o):s,u=t[0].replace("{n}",n),v=t[1].replace("{n}",o),w=a('<div class="notify"></div>');t[2]&&(u=u.replace("{var}",t[2][n>1?0:1]),v=v.replace("{var}",t[2][o>1?0:1])),k.prop("selected",!1),b.$menu.append(w),n&&p&&(w.append(a("<div>"+u+"</div>")),i=!1,b.$element.trigger("maxReached.bs.select")),o&&q&&(w.append(a("<div>"+v+"</div>")),i=!1,b.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){b.setSelected(f,!1)},10),w.delay(750).fadeOut(300,function(){a(this).remove()})}}}else j.prop("selected",!1),k.prop("selected",!0),b.$menuInner.find(".selected").removeClass("selected").find("a").attr("aria-selected",!1),b.setSelected(f,!0);!b.multiple||b.multiple&&1===b.options.maxOptions?b.$button.focus():b.options.liveSearch&&b.$searchbox.focus(),i&&(g!=b.$element.val()&&b.multiple||h!=b.$element.prop("selectedIndex")&&!b.multiple)&&(e=[f,k.prop("selected"),l],b.$element.triggerNative("change"))}}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(c){c.currentTarget==this&&(c.preventDefault(),c.stopPropagation(),b.options.liveSearch&&!a(c.target).hasClass("close")?b.$searchbox.focus():b.$button.focus())}),this.$menuInner.on("click",".divider, .dropdown-header",function(a){a.preventDefault(),a.stopPropagation(),b.options.liveSearch?b.$searchbox.focus():b.$button.focus()}),this.$menu.on("click",".popover-title .close",function(){b.$button.click()}),this.$searchbox.on("click",function(a){a.stopPropagation()}),this.$menu.on("click",".actions-btn",function(c){b.options.liveSearch?b.$searchbox.focus():b.$button.focus(),c.preventDefault(),c.stopPropagation(),a(this).hasClass("bs-select-all")?b.selectAll():b.deselectAll()}),this.$element.change(function(){b.render(!1),b.$element.trigger("changed.bs.select",e),e=null})},liveSearchListener:function(){var c=this,d=a('<li class="no-results"></li>');this.$button.on("click.dropdown.data-api",function(){c.$menuInner.find(".active").removeClass("active"),c.$searchbox.val()&&(c.$searchbox.val(""),c.$lis.not(".is-hidden").removeClass("hidden"),d.parent().length&&d.remove()),c.multiple||c.$menuInner.find(".selected").addClass("active"),setTimeout(function(){c.$searchbox.focus()},10)}),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(a){a.stopPropagation()}),this.$searchbox.on("input propertychange",function(){if(c.$lis.not(".is-hidden").removeClass("hidden"),c.$lis.filter(".active").removeClass("active"),d.remove(),c.$searchbox.val()){var e,f=c.$lis.not(".is-hidden, .divider, .dropdown-header");if(e=c.options.liveSearchNormalize?f.not(":a"+c._searchStyle()+'("'+b(c.$searchbox.val())+'")'):f.not(":"+c._searchStyle()+'("'+c.$searchbox.val()+'")'),e.length===f.length)d.html(c.options.noneResultsText.replace("{0}",'"'+j(c.$searchbox.val())+'"')),c.$menuInner.append(d),c.$lis.addClass("hidden");else{e.addClass("hidden");var g,h=c.$lis.not(".hidden");h.each(function(b){var c=a(this);c.hasClass("divider")?void 0===g?c.addClass("hidden"):(g&&g.addClass("hidden"),g=c):c.hasClass("dropdown-header")&&h.eq(b+1).data("optgroup")!==c.data("optgroup")?c.addClass("hidden"):g=null}),g&&g.addClass("hidden"),f.not(".hidden").first().addClass("active"),c.$menuInner.scrollTop(0)}}})},_searchStyle:function(){var a={begins:"ibegins",startsWith:"ibegins"};return a[this.options.liveSearchStyle]||"icontains"},val:function(a){return"undefined"!=typeof a?(this.$element.val(a),this.render(),this.$element):this.$element.val()},changeAll:function(b){if(this.multiple){"undefined"==typeof b&&(b=!0),this.findLis();var c=this.$element.find("option"),d=this.$lis.not(".divider, .dropdown-header, .disabled, .hidden"),e=d.length,f=[];if(b){if(d.filter(".selected").length===d.length)return}else if(0===d.filter(".selected").length)return;d.toggleClass("selected",b);for(var g=0;g<e;g++){var h=d[g].getAttribute("data-original-index");f[f.length]=c.eq(h)[0]}a(f).prop("selected",b),this.render(!1),this.togglePlaceholder(),this.$element.triggerNative("change")}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(a){a=a||window.event,a&&a.stopPropagation(),this.$button.trigger("click")},keydown:function(b){var c,d,e,f,g=a(this),h=g.is("input")?g.parent().parent():g.parent(),i=h.data("this"),j=":not(.disabled, .hidden, .dropdown-header, .divider)",k={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(f=i.$newElement.hasClass("open"),!f&&(b.keyCode>=48&&b.keyCode<=57||b.keyCode>=96&&b.keyCode<=105||b.keyCode>=65&&b.keyCode<=90))return i.options.container?i.$button.trigger("click"):(i.setSize(),i.$menu.parent().addClass("open"),f=!0),void i.$searchbox.focus();if(i.options.liveSearch&&/(^9$|27)/.test(b.keyCode.toString(10))&&f&&(b.preventDefault(),b.stopPropagation(),i.$menuInner.click(),i.$button.focus()),/(38|40)/.test(b.keyCode.toString(10))){if(c=i.$lis.filter(j),!c.length)return;d=i.options.liveSearch?c.index(c.filter(".active")):c.index(c.find("a").filter(":focus").parent()),e=i.$menuInner.data("prevIndex"),38==b.keyCode?(!i.options.liveSearch&&d!=e||d==-1||d--,d<0&&(d+=c.length)):40==b.keyCode&&((i.options.liveSearch||d==e)&&d++,d%=c.length),i.$menuInner.data("prevIndex",d),i.options.liveSearch?(b.preventDefault(),g.hasClass("dropdown-toggle")||(c.removeClass("active").eq(d).addClass("active").children("a").focus(),g.focus())):c.eq(d).children("a").focus()}else if(!g.is("input")){var l,m,n=[];c=i.$lis.filter(j),c.each(function(c){a.trim(a(this).children("a").text().toLowerCase()).substring(0,1)==k[b.keyCode]&&n.push(c)}),l=a(document).data("keycount"),l++,a(document).data("keycount",l),m=a.trim(a(":focus").text().toLowerCase()).substring(0,1),m!=k[b.keyCode]?(l=1,a(document).data("keycount",l)):l>=n.length&&(a(document).data("keycount",0),l>n.length&&(l=1)),c.eq(n[l-1]).children("a").focus()}if((/(13|32)/.test(b.keyCode.toString(10))||/(^9$)/.test(b.keyCode.toString(10))&&i.options.selectOnTab)&&f){if(/(32)/.test(b.keyCode.toString(10))||b.preventDefault(),i.options.liveSearch)/(32)/.test(b.keyCode.toString(10))||(i.$menuInner.find(".active a").click(),g.focus());else{var o=a(":focus");o.click(),o.focus(),b.preventDefault(),a(document).data("spaceSelect",!0)}a(document).data("keycount",0)}(/(^9$|27)/.test(b.keyCode.toString(10))&&f&&(i.multiple||i.options.liveSearch)||/(27)/.test(b.keyCode.toString(10))&&!f)&&(i.$menu.parent().removeClass("open"),i.options.container&&i.$newElement.removeClass("open"),i.$button.focus())},mobile:function(){this.$element.addClass("mobile-device")},refresh:function(){this.$lis=null,this.liObj={},this.reloadLi(),this.render(),this.checkDisabled(),this.liHeight(!0),this.setStyle(),
this.setWidth(),this.$lis&&this.$searchbox.trigger("propertychange"),this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(".bs.select").removeData("selectpicker").removeClass("bs-select-hidden selectpicker")}};var m=a.fn.selectpicker;a.fn.selectpicker=c,a.fn.selectpicker.Constructor=l,a.fn.selectpicker.noConflict=function(){return a.fn.selectpicker=m,this},a(document).data("keycount",0).on("keydown.bs.select",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="listbox"], .bs-searchbox input',l.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="listbox"], .bs-searchbox input',function(a){a.stopPropagation()}),a(window).on("load.bs.select.data-api",function(){a(".selectpicker").each(function(){var b=a(this);c.call(b,b.data())})})}(a)});
//# sourceMappingURL=bootstrap-select.js.map

;(function($){
	$.fn.zoom = function(){
		var $ul = $(this);              
		if($ul.is("ul") && $ul.children("li").length){
			var $li = $ul.children("li").addClass("bzoom_thumb");
			$li.first().addClass("bzoom_thumb_active");
			$('.product-zoom .detail_img a').attr("href", $li.first().data('zoom_full'));	
			
			$('.cloud-zoom-big').css("background-image",'url('+$('.product-zoom .detail_img a').attr("href")+')');		
			$('.single-image').attr('data-width', $('.single-image').outerWidth());
			$('.single-image .detail_img').css({"width":$('.single-image').innerWidth()});		
			$ul.delegate("li", "mouseover", function(event){
			changeLi($(this).index());
			});
			$ul.find('li').on("click", function(event){
			changeLi($(this).index());
			});
		}
		

		function changeLi(index){
			$ul.find('.bzoom_thumb_active').removeClass('bzoom_thumb_active');
			$li.eq(index).addClass('bzoom_thumb_active');
			$('.product-zoom .detail_img a').attr("href", $li.eq(index).data('zoom_full'));	
			$('.product-zoom .main-image').attr("src", $li.eq(index).data('image_full'));
			if($('.single-image').hasClass('open'))
			{
			//$('.single-image').find('.mousetrap, .cloud-zoom-big, .cloud-zoom-lens').remove();	
			//$('.cloud-zoom, .cloud-zoom-gallery').CloudZoom();
			$('#zoom').data('zoom').destroy();
		           //$('#zoom').attr('href', a.data.attr('href'));
		            //$('#' + b.useZoom + ' img').attr('src', a.data.data('relOpts').smallImage);
		        $('#zoom').CloudZoom();
			}
		}
		$('.tarImg').mouseleave(function(){
			if($('.cloud-zoom-big').length==0) {					   
				$('.single-image').animate({'width':$('.single-image').data('width')}, 300, function(){
				$('.single-image').css({"border":"1px solid transparent"}).removeClass('open');
				$('.single-image').find('.mousetrap, .cloud-zoom-big, .cloud-zoom-lens').remove();				$('.close').remove();	
			});
			}
		});		
		$('.detail_img .tarImg').unbind("hover").hover(function(e){
			
			if($('.single-image').hasClass('open'))
			{	
				$('.single-image').find('.close').remove();	   
				$('.single-image').animate({'width':$('.single-image').data('width')}, 300, function(){
					$('.single-image').css({"border":"1px solid transparent"}).removeClass('open');
					$('.single-image').find('.mousetrap, .cloud-zoom-big, .cloud-zoom-lens').remove();
					$('.single-image').css({"position":"relative"});
				});
			}
			else 
			{
								
				var width=$('.wrapper').width()-($('.wrapper').width()*15/100);
                                var img_width=$('.main-image').width();
				$('.main-image').css({"width":img_width});
				$('.single-image').css({ "z-index":8}).addClass('open');
				$('.single-image .detail_img').find('a').addClass('cloud-zoom');
				$('.cloud-zoom').CloudZoom();
				$('.single-image').animate({'width':width}, 300, function(){
				//$('.single-image').append('<a href="#" class="close" onclick="closePopup(); return false"></a>');
					//$('.mousetrap').css({"left":e.clientX,"top":e.clientY);
					//$('.mousetrap').trigger('mouseenter');
					//document.addEventListener('mouseenter', onMouseUpdate, false);
				});
                               // $('.single-image').css({"border":"1px solid rgb(204,204,204)"})
								
			} 
			e.preventDefault();
		});
				
	}
})(jQuery);
$(window).on('resize', function(){
	getWidth();
});
function getWidth()
{
setTimeout(function() {
	if($('.single-image').hasClass('open'))
	{
		
	}
	else {	
          $('.single-image').attr('data-width', $('.single-image').outerWidth());
	  $('.single-image .detail_img').css({"width":$('.single-image').innerWidth()});	
	}
}, 500);
}
function navControls(tar)
{
  if(tar=='next' && $(".bzoom_thumb_active").is('#product_zoom li:last-child'))  { 
	$('#product_zoom li:first-child').click();	
  } else if(tar=='next' && !$(".bzoom_thumb_active").is('#product_zoom li:last-child'))  { 
	$(".bzoom_thumb_active").next().click(); 
  }
  if(tar=='prev' && $(".bzoom_thumb_active").is('#product_zoom li:first-child'))  { 
	$('#product_zoom li:last-child').click();	
  } else if(tar=='prev' && !$(".bzoom_thumb_active").is('#product_zoom li:first-child'))  { 
	$(".bzoom_thumb_active").prev().click(); 
  }
  //else { $(".bzoom_thumb_active").prev().click(); }
}
function closePopup()
{
 	$('.single-image').find('.close').remove();	   
	$('.single-image').animate({'width':$('.single-image').data('width')}, 300, function(){
		$('.single-image').css({"border":"1px solid transparent"}).removeClass('open');
		$('.single-image').find('.mousetrap, .cloud-zoom-big, .cloud-zoom-lens').remove();
					
	});
}


(function (global, factory) {
    if (typeof define === "function" && define.amd) {
        define(['exports'], factory);
    } else if (typeof exports !== "undefined") {
        factory(exports);
    } else {
        var mod = {
            exports: {}
        };
        factory(mod.exports);
        global.PinchZoom = mod.exports;
    }
})(this, function (exports) {
    'use strict';

    Object.defineProperty(exports, "__esModule", {
        value: true
    });
    

    // polyfills
    if (typeof Object.assign != 'function') {
        // Must be writable: true, enumerable: false, configurable: true
        Object.defineProperty(Object, "assign", {
            value: function assign(target, varArgs) {
                // .length of function is 2
                if (target == null) {
                    // TypeError if undefined or null
                    throw new TypeError('Cannot convert undefined or null to object');
                }

                var to = Object(target);

                for (var index = 1; index < arguments.length; index++) {
                    var nextSource = arguments[index];

                    if (nextSource != null) {
                        // Skip over if undefined or null
                        for (var nextKey in nextSource) {
                            // Avoid bugs when hasOwnProperty is shadowed
                            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
                                to[nextKey] = nextSource[nextKey];
                            }
                        }
                    }
                }
                return to;
            },
            writable: true,
            configurable: true
        });
    }

    if (typeof Array.from != 'function') {
        Array.from = function (object) {
            return [].slice.call(object);
        };
    }

    // utils
    var buildElement = function buildElement(str) {
        // empty string as title argument required by IE and Edge
        var tmp = document.implementation.createHTMLDocument('');
        tmp.body.innerHTML = str;
        return Array.from(tmp.body.children)[0];
    };

    var triggerEvent = function triggerEvent(el, name) {
        var event = document.createEvent('HTMLEvents');
        event.initEvent(name, true, false);
        el.dispatchEvent(event);
    };

    var definePinchZoom = function definePinchZoom() {

        
        var PinchZoom = function PinchZoom(el, options) {
            this.el = el;
            this.zoomFactor = 1;
            this.lastScale = 1;
            this.offset = {
                x: 0,
                y: 0
            };
            this.initialOffset = {
                x: 0,
                y: 0
            };
            this.options = Object.assign({}, this.defaults, options);
            this.setupMarkup();
            this.bindEvents();
            this.update();

            // The image may already be loaded when PinchZoom is initialized,
            // and then the load event (which trigger update) will never fire.
            if (this.isImageLoaded(this.el)) {
                this.updateAspectRatio();
                this.setupOffsets();
            }

            this.enable();
        },
            sum = function sum(a, b) {
            return a + b;
        },
            isCloseTo = function isCloseTo(value, expected) {
            return value > expected - 0.01 && value < expected + 0.01;
        };

        PinchZoom.prototype = {

            defaults: {
                tapZoomFactor: 2,
                zoomOutFactor: 1.3,
                animationDuration: 300,
                maxZoom: 4,
                minZoom: 0.5,
                draggableUnzoomed: true,
                lockDragAxis: false,
                setOffsetsOnce: false,
                use2d: true,
                zoomStartEventName: 'pz_zoomstart',
                zoomUpdateEventName: 'pz_zoomupdate',
                zoomEndEventName: 'pz_zoomend',
                dragStartEventName: 'pz_dragstart',
                dragUpdateEventName: 'pz_dragupdate',
                dragEndEventName: 'pz_dragend',
                doubleTapEventName: 'pz_doubletap',
                verticalPadding: 0,
                horizontalPadding: 0
            },

            
            handleDragStart: function handleDragStart(event) {
                triggerEvent(this.el, this.options.dragStartEventName);
                this.stopAnimation();
                this.lastDragPosition = false;
                this.hasInteraction = true;
                this.handleDrag(event);
            },

            
            handleDrag: function handleDrag(event) {
                var touch = this.getTouches(event)[0];
                this.drag(touch, this.lastDragPosition);
                this.offset = this.sanitizeOffset(this.offset);
                this.lastDragPosition = touch;
            },

            handleDragEnd: function handleDragEnd() {
                triggerEvent(this.el, this.options.dragEndEventName);
                this.end();
            },

            
            handleZoomStart: function handleZoomStart(event) {
                triggerEvent(this.el, this.options.zoomStartEventName);
                this.stopAnimation();
                this.lastScale = 1;
                this.nthZoom = 0;
                this.lastZoomCenter = false;
                this.hasInteraction = true;
            },

            
            handleZoom: function handleZoom(event, newScale) {
                // a relative scale factor is used
                var touchCenter = this.getTouchCenter(this.getTouches(event)),
                    scale = newScale / this.lastScale;
                this.lastScale = newScale;

                // the first touch events are thrown away since they are not precise
                this.nthZoom += 1;
                if (this.nthZoom > 3) {

                    this.scale(scale, touchCenter);
                    this.drag(touchCenter, this.lastZoomCenter);
                }
                this.lastZoomCenter = touchCenter;
            },

            handleZoomEnd: function handleZoomEnd() {
                triggerEvent(this.el, this.options.zoomEndEventName);
                this.end();
            },

            
            handleDoubleTap: function handleDoubleTap(event) {
                var center = this.getTouches(event)[0],
                    zoomFactor = this.zoomFactor > 1 ? 1 : this.options.tapZoomFactor,
                    startZoomFactor = this.zoomFactor,
                    updateProgress = function (progress) {
                    this.scaleTo(startZoomFactor + progress * (zoomFactor - startZoomFactor), center);
                }.bind(this);

                if (this.hasInteraction) {
                    return;
                }

                this.isDoubleTap = true;

                if (startZoomFactor > zoomFactor) {
                    center = this.getCurrentZoomCenter();
                }

                this.animate(this.options.animationDuration, updateProgress, this.swing);
                triggerEvent(this.el, this.options.doubleTapEventName);
            },

            
            computeInitialOffset: function computeInitialOffset() {
                this.initialOffset = {
                    x: -Math.abs(this.el.offsetWidth * this.getInitialZoomFactor() - this.container.offsetWidth) / 2,
                    y: -Math.abs(this.el.offsetHeight * this.getInitialZoomFactor() - this.container.offsetHeight) / 2
                };
            },

            
            resetOffset: function resetOffset() {
                this.offset.x = this.initialOffset.x;
                this.offset.y = this.initialOffset.y;
            },

            
            isImageLoaded: function isImageLoaded(el) {
                if (el.nodeName === 'IMG') {
                    return el.complete && el.naturalHeight !== 0;
                } else {
                    return Array.from(el.querySelectorAll('img')).every(this.isImageLoaded);
                }
            },

            setupOffsets: function setupOffsets() {
                if (this.options.setOffsetsOnce && this._isOffsetsSet) {
                    return;
                }

                this._isOffsetsSet = true;

                this.computeInitialOffset();
                this.resetOffset();
            },

            
            sanitizeOffset: function sanitizeOffset(offset) {
                var elWidth = this.el.offsetWidth * this.getInitialZoomFactor() * this.zoomFactor;
                var elHeight = this.el.offsetHeight * this.getInitialZoomFactor() * this.zoomFactor;
                var maxX = elWidth - this.getContainerX() + this.options.horizontalPadding,
                    maxY = elHeight - this.getContainerY() + this.options.verticalPadding,
                    maxOffsetX = Math.max(maxX, 0),
                    maxOffsetY = Math.max(maxY, 0),
                    minOffsetX = Math.min(maxX, 0) - this.options.horizontalPadding,
                    minOffsetY = Math.min(maxY, 0) - this.options.verticalPadding;

                return {
                    x: Math.min(Math.max(offset.x, minOffsetX), maxOffsetX),
                    y: Math.min(Math.max(offset.y, minOffsetY), maxOffsetY)
                };
            },

            
            scaleTo: function scaleTo(zoomFactor, center) {
                this.scale(zoomFactor / this.zoomFactor, center);
            },

            
            scale: function scale(_scale, center) {
                _scale = this.scaleZoomFactor(_scale);
                this.addOffset({
                    x: (_scale - 1) * (center.x + this.offset.x),
                    y: (_scale - 1) * (center.y + this.offset.y)
                });
                triggerEvent(this.el, this.options.zoomUpdateEventName);
            },

            
            scaleZoomFactor: function scaleZoomFactor(scale) {
                var originalZoomFactor = this.zoomFactor;
                this.zoomFactor *= scale;
                this.zoomFactor = Math.min(this.options.maxZoom, Math.max(this.zoomFactor, this.options.minZoom));
                return this.zoomFactor / originalZoomFactor;
            },

            
            canDrag: function canDrag() {
                return this.options.draggableUnzoomed || !isCloseTo(this.zoomFactor, 1);
            },

            
            drag: function drag(center, lastCenter) {
                if (lastCenter) {
                    if (this.options.lockDragAxis) {
                        // lock scroll to position that was changed the most
                        if (Math.abs(center.x - lastCenter.x) > Math.abs(center.y - lastCenter.y)) {
                            this.addOffset({
                                x: -(center.x - lastCenter.x),
                                y: 0
                            });
                        } else {
                            this.addOffset({
                                y: -(center.y - lastCenter.y),
                                x: 0
                            });
                        }
                    } else {
                        this.addOffset({
                            y: -(center.y - lastCenter.y),
                            x: -(center.x - lastCenter.x)
                        });
                    }
                    triggerEvent(this.el, this.options.dragUpdateEventName);
                }
            },

            
            getTouchCenter: function getTouchCenter(touches) {
                return this.getVectorAvg(touches);
            },

            
            getVectorAvg: function getVectorAvg(vectors) {
                return {
                    x: vectors.map(function (v) {
                        return v.x;
                    }).reduce(sum) / vectors.length,
                    y: vectors.map(function (v) {
                        return v.y;
                    }).reduce(sum) / vectors.length
                };
            },

            
            addOffset: function addOffset(offset) {
                this.offset = {
                    x: this.offset.x + offset.x,
                    y: this.offset.y + offset.y
                };
            },

            sanitize: function sanitize() {
                if (this.zoomFactor < this.options.zoomOutFactor) {
                    this.zoomOutAnimation();
                } else if (this.isInsaneOffset(this.offset)) {
                    this.sanitizeOffsetAnimation();
                }
            },

            
            isInsaneOffset: function isInsaneOffset(offset) {
                var sanitizedOffset = this.sanitizeOffset(offset);
                return sanitizedOffset.x !== offset.x || sanitizedOffset.y !== offset.y;
            },

            
            sanitizeOffsetAnimation: function sanitizeOffsetAnimation() {
                var targetOffset = this.sanitizeOffset(this.offset),
                    startOffset = {
                    x: this.offset.x,
                    y: this.offset.y
                },
                    updateProgress = function (progress) {
                    this.offset.x = startOffset.x + progress * (targetOffset.x - startOffset.x);
                    this.offset.y = startOffset.y + progress * (targetOffset.y - startOffset.y);
                    this.update();
                }.bind(this);

                this.animate(this.options.animationDuration, updateProgress, this.swing);
            },

            
            zoomOutAnimation: function zoomOutAnimation() {
                if (this.zoomFactor === 1) {
                    return;
                }

                var startZoomFactor = this.zoomFactor,
                    zoomFactor = 1,
                    center = this.getCurrentZoomCenter(),
                    updateProgress = function (progress) {
                    this.scaleTo(startZoomFactor + progress * (zoomFactor - startZoomFactor), center);
                }.bind(this);

                this.animate(this.options.animationDuration, updateProgress, this.swing);
            },

            
            updateAspectRatio: function updateAspectRatio() {
                this.unsetContainerY();		
                this.setContainerY(this.container.parentElement.offsetHeight);
            },

            
            getInitialZoomFactor: function getInitialZoomFactor() {
                var xZoomFactor = this.container.offsetWidth / this.el.offsetWidth;
                var yZoomFactor = this.container.offsetHeight / this.el.offsetHeight;

                return Math.min(xZoomFactor, yZoomFactor);
            },

            
            getAspectRatio: function getAspectRatio() {
                return this.el.offsetWidth / this.el.offsetHeight;
            },

            
            getCurrentZoomCenter: function getCurrentZoomCenter() {
                var offsetLeft = this.offset.x - this.initialOffset.x;
                var centerX = -1 * this.offset.x - offsetLeft / (1 / this.zoomFactor - 1);

                var offsetTop = this.offset.y - this.initialOffset.y;
                var centerY = -1 * this.offset.y - offsetTop / (1 / this.zoomFactor - 1);

                return {
                    x: centerX,
                    y: centerY
                };
            },

            
            getTouches: function getTouches(event) {
                var rect = this.container.getBoundingClientRect();
                var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
                var scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft;
                var posTop = rect.top + scrollTop;
                var posLeft = rect.left + scrollLeft;

                return Array.prototype.slice.call(event.touches).map(function (touch) {
                    return {
                        x: touch.pageX - posLeft,
                        y: touch.pageY - posTop
                    };
                });
            },

            
            animate: function animate(duration, framefn, timefn, callback) {
                var startTime = new Date().getTime(),
                    renderFrame = function () {
                    if (!this.inAnimation) {
                        return;
                    }
                    var frameTime = new Date().getTime() - startTime,
                        progress = frameTime / duration;
                    if (frameTime >= duration) {
                        framefn(1);
                        if (callback) {
                            callback();
                        }
                        this.update();
                        this.stopAnimation();
                        this.update();
                    } else {
                        if (timefn) {
                            progress = timefn(progress);
                        }
                        framefn(progress);
                        this.update();
                        requestAnimationFrame(renderFrame);
                    }
                }.bind(this);
                this.inAnimation = true;
                requestAnimationFrame(renderFrame);
            },

            
            stopAnimation: function stopAnimation() {
                this.inAnimation = false;
            },

            
            swing: function swing(p) {
                return -Math.cos(p * Math.PI) / 2 + 0.5;
            },

            getContainerX: function getContainerX() {
                return this.container.offsetWidth;
            },

            getContainerY: function getContainerY() {
                return this.container.offsetHeight;
            },

            setContainerY: function setContainerY(y) {
                return this.container.style.height = y + 'px';
            },

            unsetContainerY: function unsetContainerY() {
                this.container.style.height = null;
            },

            
            setupMarkup: function setupMarkup() {
                this.container = buildElement('<div class="pinch-zoom-container"></div>');
                this.el.parentNode.insertBefore(this.container, this.el);
                this.container.appendChild(this.el);

                this.container.style.overflow = 'hidden';
                this.container.style.position = 'relative';

                this.el.style.webkitTransformOrigin = '0% 0%';
                this.el.style.mozTransformOrigin = '0% 0%';
                this.el.style.msTransformOrigin = '0% 0%';
                this.el.style.oTransformOrigin = '0% 0%';
                this.el.style.transformOrigin = '0% 0%';

                this.el.style.position = 'absolute';
            },

            end: function end() {
                this.hasInteraction = false;
                this.sanitize();
                this.update();
            },

            
            bindEvents: function bindEvents() {
                var self = this;
                detectGestures(this.container, this);

                window.addEventListener('resize', this.update.bind(this));
                Array.from(this.el.querySelectorAll('img')).forEach(function (imgEl) {
                    imgEl.addEventListener('load', self.update.bind(self));
                });

                if (this.el.nodeName === 'IMG') {
                    this.el.addEventListener('load', this.update.bind(this));
                }
            },

            
            update: function update(event) {
                if (this.updatePlaned) {
                    return;
                }
                this.updatePlaned = true;

                window.setTimeout(function () {
                    this.updatePlaned = false;

                    if (event && event.type === 'resize') {
                        this.updateAspectRatio();
                        this.setupOffsets();
                    }

                    if (event && event.type === 'load') {
                        this.updateAspectRatio();
                        this.setupOffsets();
                    }

                    var zoomFactor = this.getInitialZoomFactor() * this.zoomFactor,
                        offsetX = -this.offset.x / zoomFactor,
                        offsetY = -this.offset.y / zoomFactor,			
                        transform3d = 'scale3d(' + zoomFactor + ', ' + zoomFactor + ',1) ' + 'translate3d(' + offsetX + 'px,' + offsetY + 'px,0px)',
                        transform2d = 'scale(' + zoomFactor + ', ' + zoomFactor + ') ' + 'translate(' + offsetX + 'px,' + offsetY + 'px)',
                        removeClone = function () {
                        if (this.clone) {
                            this.clone.parentNode.removeChild(this.clone);
                            delete this.clone;
                        }
                    }.bind(this);

                    // Scale 3d and translate3d are faster (at least on ios)
                    // but they also reduce the quality.
                    // PinchZoom uses the 3d transformations during interactions
                    // after interactions it falls back to 2d transformations
                    if (!this.options.use2d || this.hasInteraction || this.inAnimation) {
                        this.is3d = true;
                        removeClone();

                        this.el.style.webkitTransform = transform3d;
                        this.el.style.mozTransform = transform2d;
                        this.el.style.msTransform = transform2d;
                        this.el.style.oTransform = transform2d;
                        this.el.style.transform = transform3d;
                    } else {
                        // When changing from 3d to 2d transform webkit has some glitches.
                        // To avoid this, a copy of the 3d transformed element is displayed in the
                        // foreground while the element is converted from 3d to 2d transform
                        if (this.is3d) {
                            this.clone = this.el.cloneNode(true);
                            this.clone.style.pointerEvents = 'none';
                            this.container.appendChild(this.clone);
                            window.setTimeout(removeClone, 200);
                        }

                        this.el.style.webkitTransform = transform2d;
                        this.el.style.mozTransform = transform2d;
                        this.el.style.msTransform = transform2d;
                        this.el.style.oTransform = transform2d;
                        this.el.style.transform = transform2d;

                        this.is3d = false;
                    }
                }.bind(this), 0);
            },

            
            enable: function enable() {
                this.enabled = true;
            },

            
            disable: function disable() {
                this.enabled = false;
            }
        };

        var detectGestures = function detectGestures(el, target) {
            var interaction = null,
                fingers = 0,
                lastTouchStart = null,
                startTouches = null,
                setInteraction = function setInteraction(newInteraction, event) {
                if (interaction !== newInteraction) {

                    if (interaction && !newInteraction) {
                        switch (interaction) {
                            case "zoom":
                                target.handleZoomEnd(event);
                                break;
                            case 'drag':
                                target.handleDragEnd(event);
                                break;
                        }
                    }

                    switch (newInteraction) {
                        case 'zoom':
                            target.handleZoomStart(event);
                            break;
                        case 'drag':
                            target.handleDragStart(event);
                            break;
                    }
                }
                interaction = newInteraction;
            },
                updateInteraction = function updateInteraction(event) {
                if (fingers === 2) {
                    setInteraction('zoom');
                } else if (fingers === 1 && target.canDrag()) {
                    setInteraction('drag', event);
                } else {
                    setInteraction(null, event);
                }
            },
                targetTouches = function targetTouches(touches) {
                return Array.from(touches).map(function (touch) {
                    return {
                        x: touch.pageX,
                        y: touch.pageY
                    };
                });
            },
                getDistance = function getDistance(a, b) {
                var x, y;
                x = a.x - b.x;
                y = a.y - b.y;
                return Math.sqrt(x * x + y * y);
            },
                calculateScale = function calculateScale(startTouches, endTouches) {
                var startDistance = getDistance(startTouches[0], startTouches[1]),
                    endDistance = getDistance(endTouches[0], endTouches[1]);
                return endDistance / startDistance;
            },
                cancelEvent = function cancelEvent(event) {
                event.stopPropagation();
                event.preventDefault();
            },
                detectDoubleTap = function detectDoubleTap(event) {
                var time = new Date().getTime();

                if (fingers > 1) {
                    lastTouchStart = null;
                }

                if (time - lastTouchStart < 300) {
                    cancelEvent(event);

                    target.handleDoubleTap(event);
                    switch (interaction) {
                        case "zoom":
                            target.handleZoomEnd(event);
                            break;
                        case 'drag':
                            target.handleDragEnd(event);
                            break;
                    }
                } else {
                    target.isDoubleTap = false;
                }

                if (fingers === 1) {
                    lastTouchStart = time;
                }
            },
                firstMove = true;

            el.addEventListener('touchstart', function (event) {
                if (target.enabled) {
                    firstMove = true;
                    fingers = event.touches.length;
                    detectDoubleTap(event);
                }
            });

            el.addEventListener('touchmove', function (event) {
                if (target.enabled && !target.isDoubleTap) {
                    if (firstMove) {
                        updateInteraction(event);
                        if (interaction) {
                            cancelEvent(event);
                        }
                        startTouches = targetTouches(event.touches);
                    } else {
                        switch (interaction) {
                            case 'zoom':
                                target.handleZoom(event, calculateScale(startTouches, targetTouches(event.touches)));
                                break;
                            case 'drag':
                                target.handleDrag(event);
                                break;
                        }
                        if (interaction) {
                            cancelEvent(event);
                            target.update();
                        }
                    }

                    firstMove = false;
                }
            });

            el.addEventListener('touchend', function (event) {
                if (target.enabled) {
                    fingers = event.touches.length;
                    updateInteraction(event);
                }
            });
        };

        return PinchZoom;
    };

    var PinchZoom = definePinchZoom();

    exports.default = PinchZoom;
});

(function($){
    "use strict"; // Start of use strict
    
 
    
    function scrollCompensate(){
        var inner = document.createElement('p');
        inner.style.width = "100%";
        inner.style.height = "200px";
        var outer = document.createElement('div');
        outer.style.position = "absolute";
        outer.style.top = "0px";
        outer.style.left = "0px";
        outer.style.visibility = "hidden";
        outer.style.width = "200px";
        outer.style.height = "150px";
        outer.style.overflow = "hidden";
        outer.appendChild(inner);
        document.body.appendChild(outer);
        var w1 = parseInt(inner.offsetWidth);
        outer.style.overflow = 'scroll';
        var w2 = parseInt(inner.offsetWidth);
        if (w1 == w2) w2 = outer.clientWidth;
        document.body.removeChild(outer);
        return (w1 - w2);
    }
    
    function init_popup(){
        if($(window).width() + scrollCompensate() >= 768){
            if($('body').hasClass('home')){
                //Open directly via API
                $.magnificPopup.open({
                  items: {
                    src: '<div class="white-popup"><div class="leka-popup"><div class="popup-title"><h3>Newsletter Popup</h3><p class="notice">Sign up to our email newsletter to be the first to hear about great offers & more</p></div><form class="form-subscribe"><input placeholder="SIGN UP YOUR EMAIL..." type="text" /><button class="button">SUBSCRIBE</button></form><div class="checkbox"><label><input type="checkbox" value="">DON’T SHOW THIS POPUP AGAIN</label></div></div></div>',  //can be a HTML string, jQuery object, or CSS selector
                    type: 'inline'
                  }
                });
            }
        }
    }
    
    
    function js_height_full(){
	
        (function($){
            var heightSlide = $(window).outerHeight();
            $(".full-height").css("height",heightSlide);
	   if(!oneStepCheckout.isMobile()){		 
		 $(".mainBgbanner").css("height",heightSlide);
		}
        })(jQuery);
	
    }
    
    function positionFootersidebar(){
          var height2 = $('.sidebar-menu .footer-sidebar').outerHeight(),
              heightWin = $(window).height(),
              height1 = heightWin - height2 - 85 - 85 -100;
         $('.sidebar-menu .header-sidebar ').css('min-height',height1+'px')
    }
    
    
    

    function Scrollbar_header_sidebar(){
      //  Scrollbar
      if($('.sidebar-menu').length >0 ){
          $(".sidebar-menu").mCustomScrollbar();
      }
    }
    
     
     function stick_header(){
	if($('.header').length >0){
		    var h = $(window).scrollTop();
		    var width = $(window).width();
                    var attr =  $('.group-banner').attr('id');
                   if (typeof attr !== typeof undefined && attr !== false) {
                        var main_menu_offset = $('.group-banner').offset().top;
                    }else{
                        var main_menu_offset = $('.header').offset().top;
                    }
		    if(width > 991){
		        if((h >= main_menu_offset -1) && h !=0){
                            var headerClone = $('.header-promotional-container').clone();
		            $('.header').addClass('stick');
                            if($('.header .header-promotional-container').length === 0){
                                $('.header.stick').prepend(headerClone);
                            }
		        }else{
		            $('.header').removeClass('stick');
                            $('.header').find('.header-promotional-container').remove();
		        }
		    }
		    else if($('.mobileHClass').length>0)
		   	{
			       var main_menu_offset = $('.group-banner').offset().top;
			       if((h >= main_menu_offset -1) && h !=0){
				    $('.mobileHClass').addClass('stick');
				}else{
				    $('.mobileHClass').removeClass('stick');
				}
			}
		    else {
		        $('.header, .header-promotional-container').removeClass('stick');
		    }
	}
        
     }
    
    $(window).load(function() {
       
        // Vertical menu width
        //auto_width_vertical();
        // Init popup
        init_popup();
        Scrollbar_header_sidebar();
        stick_header();
        //MANSORY LOOKBOOK
        $('.grid-mansory').each(function(){
            var $layoutMode = $(this).attr('data-layoutmode');
            var $gutter = $(this).data('gutter');
            $(this).isotope({
              resizable: false, 
              itemSelector : '.grid',
              layoutMode: $layoutMode,
              transitionDuration: '0.6s',
              packery: {
                 gutter: $gutter
              },
            }).isotope( 'layout' );
        });
          
        //COLUMNS PORTFOLIO
		
        // filter items on button click
       
        
    });
    
    $(window).resize(function(){
        pdpZoom();      
        // Vertical menu width
        //auto_width_vertical();
        Scrollbar_header_sidebar();
        stick_header();
    });
    
    $(window).scroll(function(){
        // Vertical menu width
        //auto_width_vertical();
        stick_header()
        // Show hide scrolltop button
	
        if( $(window).scrollTop() == 0 ) {
            $('.scroll_top').stop(false,true).fadeOut(600);
        }else{
            $('.scroll_top').stop(false,true).fadeIn(600);
        }
		
        Scrollbar_header_sidebar();
        
        //plp videos pause for 768 resolution
        if($('.video-product').length>0){            
            if($(window).width()>767){
                if($(this).scrollTop() > 300) { 
                        $('.video-product video').each(function(){
                            if(!$(this).get(0).paused){ 
                                try{$(this).get(0).pause();}catch(err){}
                              } 
                        });
                 }else{ 
                          $('.video-product video').each(function(){
                            if($(this).get(0).paused){                        
                                try{
                                    var video = $(this).get(0);
                                    customJsObj.actionVideoPlay(video);
                                }catch(err){}  
                              }                            
                            });                    
                    }
                }else{
                    customJsObj.checkVideoScroll();
                }
            }
    });
    
    $(document).ready(function() {
	if($('.total_savings_text').length==0)
	{
		$('.cards_block').addClass('cardsborder');
	}
	if($('.empty_saved_item_text').length>0)
	{
		$('.saveditem').hide();
	}		
			
		$('.subMenuSecShow .widget ul').each(function(){
			if($.trim($(this).html())=='')
			{
				$(this).parents('.widget').remove();
			}
		});
						
		var heightSlide = $(window).outerHeight();
		$(".mainBgbanner").css("height",heightSlide);
	
     
        // Vertical menu width
        //auto_width_vertical();
        Scrollbar_header_sidebar();
        stick_header();
        stickyBox();
	MobtoggleFooter();
	
        // bg-parallax
        if($('.bg-parallax').length >0){
            var w = $( window ).width();
            if( w > 911 ){
              $('.bg-parallax').each(function(){
                  $(this).parallax("50%",0.5);
              }) 
			  
			  
            }
			
			
             
        }
		
		 if($('.bg-parallax').length >0){
            var w = $( window ).width();
            if( w < 500 ){
              $('.bg-parallax').each(function(){
                  $(this).parallax("20%",0.5);
				  $(this).parallax("bottom","200px;");
			
              }) 
			  
			  
            }
			
			
             
        }     
	$(document).on('click','.topSearchInput ,#search_submit_btn',function(){          
            var searchLength = $("#searchInput").val().length;
            var searchTerm = $('#searchInput').val();
            searchTerm = searchTerm.replace(/[(?=+*?]/g, '');
            trimmedSearchInput = $.trim(searchTerm);
            if(searchLength !=0 && trimmedSearchInput != ''){
                var catalog = $("#fk-search-select").val();
                if(catalog == '') catalog = 'catalog';
                var catalog_root = "/" + catalog + '/';
                var catalog_url = catalog_root + '?q=' + encodeURIComponent(searchTerm);
                window.location.href = window.location.origin+catalog_url;
                return false;
            }else{
                $('.topSearchInput').addClass('searchBoxActive');
                $('.icon-search-prod .btn-search').addClass("active");
                $('.topSearchInput').attr({"placeholder":""});
            }
        });
	$('#searchInput').keyup(function(e){
	    if(e.keyCode == 13)
            {
		$(this).trigger('click');
	    }
	});
    
	$(document).mouseup(function (e)
	{
		var Searchcontainer = $(".mob-search-header-sec");
		if (!Searchcontainer.is(e.target) && Searchcontainer.has(e.target).length === 0) 
		{
			Searchcontainer.hide();
			$('.main-header .logo-section, .main-header .main-menu-wapper, .main-header .header_icons').show();
		}
		//var savesigninpopup = $(".mini-cart-content3.active-minicart");
                var savesigninpopup = $(".mini-cart-content3.active-minicart, .mini-cart-content.active-minicart");
		if (!savesigninpopup.is(e.target) && savesigninpopup.has(e.target).length === 0) 
		{
			savesigninpopup.removeClass('active-minicart');
		}
		var Pincontainer = $(".pincode-box");
		if (!Pincontainer.is(e.target) && Pincontainer.has(e.target).length === 0) 
		{
			$('.pin-num, .pincode-bottom, .pin-edit').show();
            $('.pincodentry, .pin-check').css('display', 'none');
			if($(window).width()<768) {
			$('.append-button').show();
			}
		}
                var StorePincodeEntry = $(".Store-Pincode-Entry");
		if (!StorePincodeEntry.is(e.target) && StorePincodeEntry.has(e.target).length === 0) 
		{
		  $('.Store-Pincode-Entry .storePinSaved,.Store-Pincode-Entry .editIcon').show(); 
                   $('.Store-Pincode-Entry .storePin,.Store-Pincode-Entry .StorePincodeCheck').hide(); 
		}
	});	
	$(document).on('click touch',function(e){		
				if($(e.target).attr('class')){
					var arr = $(e.target).attr('class').split(' ');
					var checkInArray = jQuery.inArray("addtocartbutton-pdp", arr);
					var checkanotherInArray = jQuery.inArray("wishlistCheck", arr);
					if((checkInArray !== -1) || (checkanotherInArray !== -1))
					return false;
				}
				var searchText = 'Search';
				if(oneStepCheckout.isMobile()){
					 searchText = 'Search';
				}
				var container = $(".topSearchInput");
				var icon = $('.icon-search-prod .btn-search');
				if (!container.is(e.target) && container.has(e.target).length === 0 && !icon.is(e.target) && icon.has(e.target).length === 0 ){			$(".topSearchInput").removeClass('searchBoxActive');
					$('.icon-search-prod .btn-search').removeClass("active");
                                        var parentNode = $(e.target).parent();
                                        var parentId = parentNode.attr('id');
                                        if(parentId !== 'searchSuggestResult') {
                                           $('.topSearchInput').attr({"placeholder":searchText,"value":""});
                                           $("#searchSuggestResult").html('').fadeOut(200);
                                           $('.search-loc-close').hide();
                                        } 
                                }			
              
	    });
		
        // Category product
        $(document).on('click','.widget_product_categories a, .widget_categories a',function(){
        var paerent = $(this).closest('li');
        var t = $(this);
        if(paerent.children('ul').length > 0){
            $(this).closest('li').children('ul').slideToggle();
            return false;
        }
        });
	$(".pick-panzoom").on('click touch', function(){
            
            var zoomImg =  $(this).find('.zoomImg').data('image');
            $('.product-zoom').addClass('nopadding');
            var imageHeight=$(this).find('.zoomImg img').height();
            $('.pan-zoom').height(imageHeight);
            //console.log(zoomImg);
            var zoomBody = $(window).height();               
            $('body').css({'height':zoomBody, 'overflow':'hidden'});
            $('.pan-zoom').find('img').attr('src',zoomImg);
		//$('.pan-zoom').attr('href',zoomImg);
		 
		//$('.cloud-zoom').CloudZoom();
		
                var imageHtml= '<div class="pinch-zoom"><img src="'+zoomImg+'" style="width:auto;height:'+imageHeight+'px"/></div>';
                $('.pan-zoom').html(imageHtml);
		setTimeout(function () {	
                    	var el = document.querySelector('div.pinch-zoom');
	    		new PinchZoom.default(el,{});	
                }, 500);

            $('.panzoom-outer').show();
            $('.zoom-control').hide();
            $('.panzoom-inner .owl-dots').remove();
            var owldots=$('.product-deatilzoom .owl-dots').html();	
            owldots='<div class="owl-dots">'+owldots+'</div>';
            $('.panzoom-inner').append(owldots);  
	});	
        $('.panzoom-outer .clos').on('click touch', function(){
            $('.panzoom-outer').hide();
            $('.product-zoom').removeClass('nopadding');
            $('body').removeAttr("style");
	});  
	$('.panzoom-outer .zoom-prev').on('click touch', function(event){
                if($('#product_zoom li:first').hasClass('active')){
                    $(this).addClass('disabled');
                    return false;
                }else{
                    $(this).removeClass('disabled');
                    $('.panzoom-outer .zoom-next').removeClass('disabled');
                }
		$('.product-deatilzoom .owl-prev').click();
		changeZoomImg();
                $('.pan-zoom img').css('transform','none');
                $( "#product_zoom .active" ).prev().click();
                var zoomImg = $( "#product_zoom .active" ).data('image_full');	
                $('.pan-zoom').find('img').attr('src',zoomImg);
	}); 
	$('.panzoom-outer .zoom-next').on('click touch', function(event){
                if($('#product_zoom li:last').hasClass('active')){
                    $(this).addClass('disabled');
                    return false;
                }else{
                    $(this).removeClass('disabled');
                    $('.panzoom-outer .zoom-prev').removeClass('disabled');
                }
		$('.product-deatilzoom .owl-next').click();
		changeZoomImg();
                $('.pan-zoom img').css('transform','none');
                $( "#product_zoom .active" ).next().click();
                var zoomImg = $( "#product_zoom .active" ).data('image_full');	
                $('.pan-zoom').find('img').attr('src',zoomImg);
       });
	$('.mobileSignPopup .clos').on('click touch',function(e){	
                       $('.mobileSignPopup').removeClass('active');
			$('body').removeClass('overHiddenHeader');
			$('.mob_overlay').removeClass('displySignblock');
	}); 
	$('.closeConfirm, .keepSame').on('click touch', function(){
		if($(window).width()>768)
		{
			$("#location-mask").hide();
		}
		$(".signOutConf").hide();
		return false;
	});
	$('.sel-menu-myaccount-logout, .sel-logout ').on('click touch',function(e){		
		if($(window).width()>768)
		{
			$("#location-mask").show();
		}
		if($('#main-menu').hasClass('menuOpen') && $(window).width()<768) 
		{ 	
			$('#main-menu').toggle();
	    	$(".mob_overlay").toggle();
			$('#main-menu').removeClass('menuOpen');
			$('body').removeClass('overHiddenHeader');		
	   }		
		$(".signOutConf").show();	        
		return false;		
	});

	  
	function changeZoomImg()
	{
$('.panzoom').panzoom("reset");            
            var zoomImg = $('.main-slider .slick-active').find('.zoomImg').data('image');
	    var imageHeight=$('.main-slider .slick-active').find('.zoomImg').height();
	     $('.pan-zoom').height(imageHeight);
            if(typeof zoomImg !== "undefined"){
                $('.pan-zoom').show();
                $('.pan-video').html('').hide();
                //$('.pan-zoom').find('img').attr('src', zoomImg);
		
                var imageHtml= '<div class="pinch-zoom"><img src="'+zoomImg+'" style="width:auto; height:'+imageHeight+'px"/></div>';
	        $('.pan-zoom').html(imageHtml);
		setTimeout(function () {
                    	var el = document.querySelector('div.pinch-zoom');
	    		new PinchZoom.default(el,{});	
                }, 500);
			
                
            }
                $('.zoom-control').hide();
                $('.panzoom-inner .owl-dots').remove();
		var owldots=$('.product-deatilzoom .owl-dots').html();	
		owldots='<div class="owl-dots">'+owldots+'</div>';
		$('.panzoom-inner').append(owldots);
	}
        // CATEGORY FILTER 
        $('.slider-range-price').each(function(){
            var min             = $(this).data('min');
            var max             = $(this).data('max');
            var unit            = $(this).data('unit');
            var value_min       = $(this).data('value-min');
            var value_max       = $(this).data('value-max');
            var label_reasult   = $(this).data('label-reasult');
            var t               = $(this);
            $( this ).slider({
              range: true,
              min: min,
              max: max,
              values: [ value_min, value_max ],
              slide: function( event, ui ) {
                var result = label_reasult +" "+ unit + ui.values[ 0 ] +' - '+ unit +ui.values[ 1 ];
                t.closest('.price_slider_wrapper').find('.amount-range-price').html(result);
              }
            });
        })
        
        // Select single product
        $(document).on('click','.single-product-thumbnails span',function(){
            $(this).closest('.single-product-thumbnails').find('span').each(function(){
                $(this).removeClass('selected');
            });
            $(this).addClass('selected');
            var image_full = $(this).data('image_full');
            $(this).closest('.single-images').find('.main-image').attr('src',image_full);
            $(this).closest('.single-images').find('.popup-image').attr('href',image_full);
            
            return false;
        })
        // popup image
        if($('.popup-image').length >0 ){
            $('.popup-image').magnificPopup({type:'image'});
        }
        //SELECT CHOSEN
        LeftFilterAjax.selectChoosen();
        
        // ACCORDION
        $( ".leka-accordion" ).accordion();
        // Popup add to cart
        $(document).on('click','.button-add-to-cart',function(){
            var result ='';
            result += '<div class="popup-add-to-cart">';
            result +='       <div class="message">';
            result +='          <i class="fa fa-check-circle-o"></i>';
            result +='          <p>YOU HAVE ADDED TO SHOPPING CART</p>';
            result +='      </div>';
            result +='      <div class="popup-product">';
            result +='          <a href="#"><img src="images/products/popup-product.png" alt="" /></a>';
            result +='          <h3 class="product-name"><a href="#">LONG Tube Dress</a></h3>';
            result +='          <a href="cart.html" class="button button-view-cart">VIEW SHOPPING CART</a>';
            result +='          <a href="" class="button button-continue-shop">CONTINUE SHOPPING</a>';
            result +='      </div>';
            result +='</div>';
            $.magnificPopup.open({
                  items: {
                    src: result, // can be a HTML string, jQuery object, or CSS selector
                    type: 'inline'
                  }
            });
            return false;
        });
        
        // Open form search
        
        
        
        
        //MENU RESPONSIVE
        var kt_is_mobile = (Modernizr.touch) ? true : false;
        if(kt_is_mobile === true){
        	$(document).on('click', '.main-menu .menu-item-has-children > a,.vertical-menu .menu-item-has-children > a', function(e){
        		var licurrent = $(this).closest('li');
        		var liItem = $('.main-menu .menu-item-has-children,.vertical-menu .menu-item-has-children');
        		if ( !licurrent.hasClass('show-submenu') ) {
  		            liItem.removeClass('show-submenu');
      		        licurrent.parents().each(function (){
      		            if($(this).hasClass('menu-item-has-children')){
      		             $(this).addClass('show-submenu');   
      		            }
                        if($(this).hasClass('main-menu') || $(this).hasClass('vertical-menu')){
                            return false;
                        }
      		        })
      		        
        			licurrent.addClass('show-submenu');
        
                    // Close all child submenu if parent submenu is closed
                    if ( !licurrent.hasClass('show-submenu') ) {
                        licurrent.find('li').removeClass('show-submenu');
                    }
                    return false;
                    //e.preventDefault();
        		}else{
        			var href = $this.attr('href');
                    if ( $.trim( href ) == '' || $.trim( href ) == '#' ) {
                        licurrent.toggleClass('show-submenu');
                    }
                    else{
                        window.location = href;
                    } 
        		}
        		// Close all child submenu if parent submenu is closed
                if ( !licurrent.hasClass('show-submenu') ) {
                    //licurrent.find('li').removeClass('show-submenu');
                }
                e.stopPropagation();
       	});
        
    	$(document).on('click', function(e){
            var target = $( e.target );
            
            if ( !target.closest('.show-submenu').length || !target.closest('.navigation').length ) {
                $('.show-submenu').removeClass('show-submenu');
            }
        }); 
        // On Desktop
        }else{
            $(document).on('mousemove','.main-menu .menu-item-has-children,.vertical-menu .menu-item-has-children',function(){
                $(this).addClass('show-submenu');
            })
            $(document).on('mouseout','.main-menu .menu-item-has-children,.vertical-menu .menu-item-has-children',function(){
                $(this).removeClass('show-submenu');
            })
        }
        // Open main menu on mobile
        $(document).on('click touch','.mobile-navigation',function(){
	   if($('#main-menu').hasClass('menuOpen')) 
	   { 	
		$('#main-menu').toggle();
	    	$(".mob_overlay").toggle();
		$('#main-menu').removeClass('menuOpen');
		$('body').removeClass('overHiddenHeader');		
	   } else 
	   {	
		$('#main-menu').toggle();
	    	$(".mob_overlay").toggle();
		$('#main-menu').addClass('menuOpen');
		$('body').addClass('overHiddenHeader');
	   }
           return false;
        });
	$(document).on('click touch','.mob-sort-button',function(){           
	   if($('.mob-sort-overlay').hasClass('popUPOpenState')) 
	   { 	
		$('.mob-sort-overlay').removeClass('popUPOpenState');
		$('body').removeClass('OverHiddenSort');
	   } else 
	   {	
		$('.mob-sort-overlay').addClass('popUPOpenState');
		$('body').addClass('OverHiddenSort');
	   }
           return false;
        });
	$(document).on('click','.navigateToFooter',function(){
		$('#main-menu').toggle();
	    $(".mob_overlay").toggle();
		$('#main-menu').removeClass('menuOpen');
		$('body').removeClass('overHiddenHeader');
		if($('.mobileHClass').length>0){
		$('.contact_footer').click();
		$('body,html').animate({scrollTop:$('.footer').offset().top},400);
		return false;}		
	});	
	$(document).mouseup(function (e)
        {
	    var container = $(".mobile-menu");
	    if (!container.is(e.target) // if the target of the click isn't the container...
		&& container.has(e.target).length === 0) // ... nor a descendant of the container
	    {
		container.hide();
		$(".mob_overlay").hide();
		$('#main-menu').removeClass('menuOpen');
		$('body').removeClass('overHiddenHeader');
		$('.mobile-location').find('.pinCodeNotServiceable, .pinCodeServiceable').remove();
		$('.mobile-location').find('.pin_box_checkIco').hide();
		$('.mobile-location').find('.pin_box_editIco').show();	
		var PrevPin=$(this).find("#presentPin").val();
		$('.mobile-location').find('.pincode').val(PrevPin).attr('disabled','disabled');
	    }
	    var mobshortpopup = $(".mob-short-popup");
	    if (!mobshortpopup.is(e.target) // if the target of the click isn't the container...
		&& mobshortpopup.has(e.target).length === 0) // ... nor a descendant of the container
	    {
		$(".mob-sort-overlay").removeClass('popUPOpenState');
		$('body').removeClass('OverHiddenSort');
	    }
	    var mobileSignPopup = $(".mobileSignPopup");
	    if (!mobileSignPopup.is(e.target) // if the target of the click isn't the container...
		&& mobileSignPopup.has(e.target).length === 0) // ... nor a descendant of the container
	    {
		mobileSignPopup.removeClass('active');
		$('.mob_overlay').removeClass('displySignblock');
		$('body').removeClass('overHiddenHeader');
	    }	
	});
		
        //Image product zoom
         $('.product-feture').each(function(){
            // Instantiate EasyZoom instances
            var $imageBig = $(this).find('.product-image img');
            // Setup thumbnails example
            $(this).find('.product-thumbnails').on('click', 'a', function(e) {
                $(this).parent().find('a').removeClass('selected');
                $(this).addClass('selected');

                var $this = $(this);
                e.preventDefault();

                var imgLink = $this.attr('href');
                $imageBig.attr('src',imgLink);
                

            });

          });

          //CLIENT SAY
            $('.leka-testimonial-2').each(function(){
              var owl = $(this).find('.client-carousel');
              owl.owlCarousel(
                {
                    margin:20,
                    autoplay:true,
                    dots:false,
                    loop:true,
                    items:3,
                    nav:false,
                    smartSpeed:1000,
                    navText:['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>']
                }
              );
              owl.trigger('next.owl.carousel');
              owl.on('changed.owl.carousel', function(event) {
                  owl.find('.owl-item.active').removeClass('item-center');
                  var caption=owl.find('.owl-item.active').first().next().find('.client-quote').html();
                  owl.closest('.leka-testimonial-2').find('.leka-client-quote').html(caption).addClass('zoomIn animated').one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){
                           $(this).removeClass('zoomIn animated');
                  });;
                  setTimeout(function(){
                      owl.find('.owl-item.active').first().next().addClass('item-center');
                  }, 100);
              })

            });
            
          //SLIDE FULL SCREEN
          
          //Full height
          js_height_full();
          $(window).resize(function(){
	      $('body').removeAttr("style");
            js_height_full();
          });

          //Background Cat
          $('.leka-list-cat .item-cat').each(function(){
              var imgBg = $(this).attr('data-background');
              $(this).css('background-image','url('+imgBg+')');
          })

          //Menu siderbar
          $('.sidebar-menu .main-menu li.dropdown > a').on('click',function(){
            $(this).toggleClass('active');
            $(this).parent().children('.dropdown-menu').slideToggle();

          })

          //SIDEBAR TEMP
          positionFootersidebar();
          $(document).resize(function(){
              positionFootersidebar();
          });

          $('.mobile-sidebar').on('click',function(){
              $('body').toggleClass('sidebar-active');
          });
          
          
          // PORTFOLIO IMMAGES POPUP
		  
          // VETICAL MENU
          $(document).on('click','.header .vertical-menu .vertical-navigation',function(){
            $('.header .vertical-menu').find('.vertical-content').toggle();
          })
          
          // Scroll top 
          $(document).on('click','.scroll_top',function(){
            $('body,html').animate({scrollTop:0},400);
            return false;
          });
		  $(document).on('click','#coupon_works',function(){
            $('body,html').animate({scrollTop:$('#coupon').offset().top},400)
            return false;
          });
          // Scroll top 
          $(document).on('click','.scroll_below',function(){
             $(".topSearchInput").removeClass('searchBoxActive');
            $('.icon-search-prod .btn-search').removeClass("active");
            $('.topSearchInput').attr({"placeholder":"Search","value":""});
         //   $('.search-loc-close').hide();
            $('body,html').animate({scrollTop:$("#group-Banner-first").offset().top},1000);
            return false;
          });

          // Open vertical menu
          $(document).on('click','.vertical-navigation',function(){
            $('#vertical-menu').fadeToggle();
          })

        
        $(document).on('click','#btn-send-contact',function(){
                var email   = $('#email').val(),
                name = $('#name').val(),
                content = $('#content').val(),
                subject = $('#subject').val(),
                website = $('#website').val();
            var data = {
                email:email,
                content:content,
                name:name,
                subject:subject,
                website:website
            }

            $(this).html('Loading...');
            var t = $(this);
            $.post('ajax_contact.php',data,function(result){
                if(result.trim()=="done"){
                    $('#email').val('');
                    $('#content').val('');
                    $('#name').val('');
                    $('#subject').val('');
                    $('#website').val('');
                    $('#message-box-conact').html('<div class="alert alert-info">Your message was sent successfully. Thanks</div>');
                }else{
                    $('#message-box-conact').html(result);
                }
                t.html('SEND MESSAGE');
            })
        })
    });
})(jQuery); 
var owl = $('.slide-home');
$('.shotNavPrev').on('click', function(){
	owl.trigger('stop.owl.autoplay');
});

$('body').tooltip({
    selector: '[data-toggle="tooltip"]'
});

function pdpZoom(){    
   
if ((navigator.userAgent.match(/Tablet/i) ||
        navigator.userAgent.match(/iPad/i) ||
        navigator.userAgent.match(/Kindle/i) ||
        navigator.userAgent.match(/Playbook/i) ||
        navigator.userAgent.match(/Nexus/i) ||
        navigator.userAgent.match(/Xoom/i) ||
        navigator.userAgent.match(/SM-N900T/i) || //Samsung Note 3
        navigator.userAgent.match(/GT-N7100/i) || //Samsung Note 2
        navigator.userAgent.match(/SAMSUNG-SGH-I717/i) || //Samsung Note
        navigator.userAgent.match(/SM-T330NU/i) //Samsung Tab 4
        ))
{
     
    	
    $('.product-deatilzoom').hide();
    }
    else {
 $('.product-zoom').removeClass('nopadding');
    $("#bzoom").zoom();
    $("#product_zoom").zoom({
        zoom_area_width: 600,
        autoplay_interval :3000,
        small_thumbs : 4
    }); 
    $('.panzoom-outer, .product-deatilzoom').hide();
}
}
$(document).ready(function(){
    pdpZoom();
    if($('.applycoupon').length>0)
    {
        $('#orderSummaryContent').addClass('topBorder');
    }
if(window.location.hash) {
  var hashValue = window.location.hash.substr(1);
  if(hashValue=='contact')
  {
	  if(!$('.contact_footer').parents('.widget_nav_menu').hasClass('expanded'))
	  {
	  $('.contact_footer').click();
	  }
  }
}
 if($('.bxslider').find('li').length===6)
  {
	$('.bx-wrapper .bx-controls-direction a').css('display', 'block');
  }
    
    
  
 });
// End of use strict
 


$(window).on('load', function(){
    if($('.carouselimgHeight').length>0){
        var g_bannerImgHeight = $('.carouselimgHeight').height();
        $('.carouselimgHeight').remove();
        setTimeout(customJsObj.bannerVideoCall(g_bannerImgHeight), 2000);
    }
});

//ajax sign in login

 $(function (jQuery) {
    if($("#popup_login").length > 0) {
    jQuery("#popup_login").validate({
        
        rules: {
          name: {required: true},
          pass: {required: true}
      },
    messages: {
        name: {
                required: "Please enter email or phone number",
            },
        pass: {
            required: "Please enter password",
        },          

    }, 
       submitHandler: function(form)
    {
        
        //form.submit();
       var datastring = $(form).serialize();
       var base_url = window.location.origin;

       jQuery.ajax({
            url:base_url+"/customer/account/validate",
            type:"post",
            dataType: 'json',
            data: datastring,
            success: function (data) {
                
                if (data.success === true) {
                location.reload();
                } else {
                someFunction( data );
                }
                
              
               
            }
        });
        function someFunction(data)
        {
            
        if(data.hasOwnProperty('errMsg')){
            if((data.errMsg.hasOwnProperty('password')) !== "")
                {
                   jQuery('.errormsgpass').empty();
                }
                  if(data.errMsg.hasOwnProperty('password')){
                   
                    var designString = '<div style="display: block;font-weight:bold;font-size: 1rem;color:red; padding-left: 5px;text-transform: none;">' + data.errMsg.password +'</div>';
                    jQuery('.errormsgpass').empty().append(designString);
                }
                if((data.errMsg.hasOwnProperty('email')) !== "")
                {
                   jQuery('.errormsgemail').empty();
                }
                if(data.errMsg.hasOwnProperty('email')) {
                     var designEmail = '<div style="display: block;font-weight:bold;font-size: 1rem;color:red; padding-left: 5px;text-transform: none;">' + data.errMsg.email +'</div>';
                jQuery('.errormsgemail').empty().append(designEmail);
                
                }
              }
          }
        return false;
    }
     });
    }
  });

//ajax sign in login end

//checkout sign in login

 $(function (jQuery) {
    jQuery("#checkout_login").validate({
        
        rules: {
          name: {required: true},
          pass: {required: true}
      },
    messages: {
        name: {
                required: "Please enter email or phone number",
            },
        pass: {
            required: "Please enter password",
        },          

    }, 
       submitHandler: function(form)
    {
        
        //form.submit();
       var datastring = $(form).serialize();
       var base_url = window.location.origin;

       
       jQuery.ajax({
            url:base_url+"/customer/account/validate",
            type:"post",
            dataType: 'json',
            data: datastring,
            success: function (data) {
                
                if (data.success === true) {
                location.reload();
                } else {
                someFunction( data );
                }
                

               
            }
        });
        function someFunction(data)
        {
            
        if(data.hasOwnProperty('errMsg')){
            if((data.errMsg.hasOwnProperty('password')) !== "")
                {
                   jQuery('.errormsgpass').empty();
                }
                  if(data.errMsg.hasOwnProperty('password')){
                     var designString = '<div style="display: block;font-weight:bold;font-size: 1rem;color:red; padding-left: 5px;text-transform: none;">' + data.errMsg.password +'</div>';
                    jQuery('.errormsgpass').empty().append(designString);
                }
                if((data.errMsg.hasOwnProperty('email')) !== "")
                {
                   jQuery('.errormsgemail').empty();
                }
                if(data.errMsg.hasOwnProperty('email')) {
                    var designEmail = '<div style="display: block;font-weight:bold;font-size: 1rem;color:red; padding-left: 5px;text-transform: none;">' + data.errMsg.email +'</div>';
                jQuery('.errormsgemail').empty().append(designEmail);
                
                }
              }
          }
        return false;
    }
     });
     customClass.setHashClick('savedlist','.nav-tab li:last-child a');
     $('#cartItemCount a').live('click',function(){
         if($('.productsavedrow').length == 0){
             customClass.wishlistLayoutChange();
         }else{
            customClass.cartLayoutChange();
        }
        document.title = 'Your Bag';
     });
     $('#wishlistItemCount a').live('click',function(){
        customClass.wishlistLayoutChange();
     });
    $(window).on("hashchange", function(e) {
     var hash = window.location.hash.slice(1);
	if( hash && hash === 'savedlist')
	{
	   customClass.setHashClick('savedlist','.nav-tab li:last-child a');
	}
   	else if(hash && hash === 'cartlist')
	{
	    customClass.setHashClick('cartlist','.nav-tab li:first-child a');	
	}	
       });
  });
  


//checkout sign in login end

$(document).on("click",".cat_expand",function(){
		if(!$(this).hasClass("opened"))
		{
	       	   $('.sub-menu').slideUp('fast');
		   $('.cat_expand').addClass("closed").removeClass("opened");
		}
	       var isClosed = $(this).hasClass("closed");
	       if (isClosed) {
		   $(this).parent().find('.sub-menu').slideToggle('slow');
		   $(this).removeClass("closed").addClass("opened");
		} else { 
		    $(this).addClass("closed").removeClass("opened");
		    $(this).parent().find('.sub-menu').slideToggle('slow');	
		}            
 });
$('.change_pin_mob').on('click', function () {
            $('.pop').slideFadeToggle();
            $("#location-mask").css("display", "block");
            $("#loc_close").css("display", "block");
        });

//mobile view footer 
function MobtoggleFooter()
{

$(document).on('click','.widget-title',function(){
	$(this).closest('.widget').each(function(){
	   if($(this).hasClass('expanded'))
	   	{
			$(this).removeClass('expanded');
	  	 }
	   else 
		{
                	$(this).addClass('expanded');
		}
         });
});

}

//show hide password
function ShowHidePassword(ID) {
		if (document.getElementById($("#" + ID).prev().attr('id')).type === "password") {
		$("#" + ID).attr("data-hint", "Hide");
		$("#" + ID).find("i").removeClass("icon-eye").addClass("icon-eye-slash");
		document.getElementById($("#" + ID).prev().attr('id')).type = "text";
				}
		else {
		$("#" + ID).attr("data-hint", "Show");
		$("#" + ID).find("i").removeClass("icon-eye-slash").addClass("icon-eye");
		document.getElementById($("#" + ID).prev().attr('id')).type = "password";
				}
			}
                        
                        
//show hide password end
function stickyBox()
{	
		if(!oneStepCheckout.isMobile()){
		

		  

		  }
		  else{
		  
		  }
}

//social share login 
jQuery("#shareicon").click(function()
{
  if($(window).width() < 767){
	  jQuery("#location-mask").show();
	  jQuery(".subshareicon").show();
  }else {
  jQuery(".subshareicon").slideToggle();
  }
  return false;  
});
jQuery('.close_share_btn').click(function()
{
  if($(window).width() < 767){
	jQuery("#location-mask").hide();
	jQuery(".subshareicon").hide();
  }else {
  jQuery(".subshareicon").slideToggle();  }
});



function StickyDetailCartButton()
{
	if ($(window).width() < 767 && $('.catalogdetailpage').length > 0) {
        if ($(window).scrollTop() + $(window).height() >($('.description').offset().top+50)) {
            if ($(".addtocartbutton-pdp").hasClass('cart-fixed-button')) {
                $(".addtocartbutton-pdp").removeClass('cart-fixed-button');
            }
        } else {
            if ($(".addtocartbutton-pdp").hasClass('cart-relative-button')) {
                $(".addtocartbutton-pdp").removeClass('cart-relative-button');
            }
            $(".addtocartbutton-pdp").addClass('cart-fixed-button');
        }

    }
}



//social share login end

var customClass = {
    setHashClick: function(hasValue,triggerValue) {
        var url=window.location.href;
        var arr=url.split('#')[1];
        if(typeof arr!=='undefined') {
            if(arr == hasValue) {
                $(triggerValue).trigger('click');
                if(hasValue == 'savedlist'){
                    customClass.wishlistLayoutChange();
                }else{
                    customClass.cartLayoutChange();
                }
            }   
        }
    },
    cartLayoutChange: function() {
        document.title = 'Your Bag';
        $('#left-cart-container').removeClass().addClass('col-sm-7 col-lg-8 col-md-8 col-xs-12');
        $('#cartSummary').show();
		if($(window).width()>767)
		{
		jQuery('.order-summary-right').theiaStickySidebar({ additionalTopMargin: 0, contentSelector: '.cart-page-items', footerThreshold: 100 });
		}
    },
    wishlistLayoutChange: function() {
        //document.title = 'My Wishlist';
	if($(".empty_summary_box").length==0)
	{
	   $('#left-cart-container').removeClass().addClass('col-sm-12 col-lg-12 col-md-12 col-xs-12');		   	 
	} else {
	        $(".stickySummary").removeAttr('style');
	}
	//if(!$("#global_cart").hasClass('emptyCartIemPage') && $("#tab1").html()=='') 
	//{
        
	//}
	$('#cartSummary').hide();
        
    }
}


function isMobile()	{
	var is_mobile = false;
	var rid;
	var w = window,
		d = document,
		e = d.documentElement,
		g = d.getElementsByTagName('body')[0],
		x = w.innerWidth || e.clientWidth || g.clientWidth,
		y = w.innerHeight|| e.clientHeight|| g.clientHeight;
	
	if( x < 768) {
		is_mobile = true;
		return is_mobile;
	}else 
	{
	
	}	
}
var fadeInCallback = function () {
        if (typeof scrollStopped != 'undefined') {
            clearInterval(scrollStopped);
        }

        scrollStopped = setTimeout(function () {
            $('#fixed-filer').animate({ opacity: 1 }, "fast");
        }, 300);
}


var iScrollPos = 0;
$(window).on('scroll',function () {
		if(oneStepCheckout.isMobile())
		{
		var iCurScrollPos = $(this).scrollTop();
		if($('.mob-sortfilter-sec').length>0) {
		if (iCurScrollPos > iScrollPos) {
				//Scrolling Down
				//$('.mob-sortfilter-sec').removeClass('filterAreaSticky');
                                if(iScrollPos >= $('.ProNcatalog').offset().top-1) {
					$('.mob-sortfilter-sec').addClass('filterAreaSticky');
                                        $('.mob-sortfilter-sec').addClass('filterAreaStickyOnly');
                                        $('.header').hide();
				}
				else { 
                                    $('.mob-sortfilter-sec').removeClass('filterAreaSticky');
                                    $('.mob-sortfilter-sec').removeClass('filterAreaStickyOnly');
                                    $('.header').show();
                                }	
                } 
		else { 
				//Scrolling Up
				if(iScrollPos >= $('.ProNcatalog').offset().top-1) {
					$('.mob-sortfilter-sec').addClass('filterAreaSticky');	
				}
				else { $('.mob-sortfilter-sec').removeClass('filterAreaSticky'); }
                                 $('.header').show();
                                 $('.mob-sortfilter-sec').removeClass('filterAreaStickyOnly');
		}
		}
		iScrollPos = iCurScrollPos; 
		}
	 	
	StickyDetailCartButton();
});




function checkOffset(checkoutbutton, footer){	
	if($(checkoutbutton).length!=0){
    if($(checkoutbutton).offset().top + $(checkoutbutton).height() >= $(footer).offset().top - 10)
        $(checkoutbutton).removeClass('scrollfixed');
		
    else if($(document).scrollTop() + window.innerHeight < $(footer).offset().top)       
	$(checkoutbutton).addClass('scrollfixed');
}	
}

$(document).scroll(function() {
    if($('#checkoutfixedbutton').length !== 0 && $('.footer').length !== 0)
    checkOffset('#checkoutfixedbutton', '.footer');

     
        if ($(this).scrollTop() > 150) {
            if($('.homepageSlider').length>0){
                try{$('.owl-item.active video').get(0).pause();}catch(err){}
            }
        } else {
            if($('.homepageSlider').length>0 && $('.owl-item.active video').length>0){
                if($('.owl-item.active video').get(0).paused ){ 
                    try{
                        var video = $('.owl-item.active video').get(0);
                        customJsObj.actionVideoPlay(video);
                    }catch(err){}
                }
            }
        }
        //plp videos pause for 768 resolution
        if($('.video-product').length>0){            
            if($(window).width()>767){
                if($(this).scrollTop() > 300) { 
                        $('.video-product video').each(function(){
                            if(!$(this).get(0).paused){ 
                                try{$(this).get(0).pause();}catch(err){}
                              } 
                        });
                 }else{ 
                          $('.video-product video').each(function(){
                            if($(this).get(0).paused){                        
                                try{
                                    var video = $(this).get(0);
                                    customJsObj.actionVideoPlay(video);
                                }catch(err){}  
                              }                            
                            });                    
                    }
                }else{
                    customJsObj.checkVideoScroll();
                }
            }
});
$(document).ready(function(){ 
   
      
    if($('.catalogdetailpage').length>0){
            if($(window).width()>767){
                if( $(window).scrollTop() >= 350 ){
                   $('.shotNavPrev,.shotNavNext').addClass('hidden');
                }
                else{
                   $('.shotNavPrev,.shotNavNext').removeClass('hidden');
                }
                
                
                
            }            
            else
            {   
                
                if ($(this).scrollTop() > 150) {
                     try{$('.product-deatilzoom .owl-item video').get(0).pause();}catch(err){}
                }
                else{
                        try{
                            var video = $('.product-deatilzoom .owl-item.active video').get(0);
                            customJsObj.actionVideoPlay(video);
                        }catch(err){}
                   
                }
            }
        }
        
        
        if ($(this).scrollTop() > 150) {
            if($('.homepageSlider').length>0){
                try{$('.owl-item.active video').get(0).pause();}catch(err){}
            }
        } else {
            if($('.homepageSlider').length>0 && $('.owl-item.active video').length>0){
                if($('.owl-item.active video').get(0).paused ){ 
                    try{
                        var video = $('.owl-item.active video').get(0);
                        customJsObj.actionVideoPlay(video);
                    }catch(err){}
                }
            }
        }
         if($('.video-product').length>0){
            var imageloaded = false;
            customJsObj.videoproduct();
            $('.video-product img').one('load',function(){
                if(!imageloaded){
                    customJsObj.videoproduct();
                    imageloaded = true;
                }           
            })      
        }
         if($('#detailZoomImg').length>0){
            var pdp_video_width = $('#detailZoomImg .detail_img .tarImg').width();
            var pdp_video_height = $('#detailZoomImg .detail_img .tarImg').height();
            $('#detailVideo').data('pdp_video_width',pdp_video_width);
            $('#detailVideo').data('pdp_video_height',pdp_video_height);
            $('#detailVideo').css('width',pdp_video_width+'px');
            $('#detailVideo').css('height',pdp_video_height+'px');
        }
        // var owl = $('.homepageSlider');
        // if($(window).width()>768) {
        //        owl.owlCarousel({
        //                loop: true,
        //                margin: 0,
        //                nav: false,
        //                dots: true,
        //                autoplay:true,
        //                autoplaySpeed: 3000, 
        //                autoplayTimeout: 7000,      
        //                responsive: {
        //                    0: {
        //                        items: 1
        //                    }
        //                }
        //        });
        // }
    
    
    $('.shotNavNext').on('click',function(){
            $('.homepageSlider').trigger('stop.owl.autoplay');
    });
   
if($(window).width() > 768){	
jQuery(".icon-location" ).hover(
  function() {
    $(this).find('.lBox_location').addClass('active-location');
  }, function() {
    $(this).find('.lBox_location').removeClass('active-location');
	$(this).find('.pinCodeNotServiceable, .pinCodeServiceable').remove();
	$(this).find('.pin_box_checkIco').hide();
	$(this).find('.pin_box_editIco').show();	
	var PrevPin=$(this).find("#presentPin").val();
	$(this).find('.pincode').val(PrevPin).attr('disabled','disabled');
  }
);	
}
jQuery("#mobilesearch_icon").on('click touch',function(e)
{ 
	$('.main-header .logo-section, .main-header .main-menu-wapper, .main-header .header_icons').hide();
	$('.main-header .mob-search-header-sec').show();
});
jQuery(".mobile-prev-header").on('click touch',function()
{
	$('.main-header .logo-section, .main-header .main-menu-wapper, .main-header .header_icons').show();
	$('.main-header .mob-search-header-sec').hide();
});
jQuery(".close_msearch_btn").on('click touch',function()
{
	$('.mob-inputs').val('');
});

	
$('.promoPoints li').on('click', function() {
	$('.promoPoints li').removeClass('active');
        $('.feedSelectErrbacknetpromoter').hide();
	var proInput = $(this).data('proinput');
	if(proInput==0 || proInput==1 ||  proInput==2 || proInput==3)
	{
		var smilyTxt='<img src="../images/clarks/sad_smiley.png" alt="Least likely" > <span class="smilytitle">Least Likely</span>';
		smilyTxt+="<p class='smileMsg'>We are sorry to hear that we could not delight you. Can you help us understand what can we do to improve your experience?</p>";
		//smilyTxt+="<p>Your suggestions will help us please you.</p>";		
	} else if(proInput==4 || proInput==5 ||  proInput==6)
	{
		var smilyTxt='<img src="../images/clarks/normal_smiley.png" alt="Likely" > <span class="smilytitle">Likely</span>';
		smilyTxt+="<p class='smileMsg'>We are sorry to hear that we could not delight you. Can you help us understand what can we do to improve your experience?</p>";
		//smilyTxt+="<p>Your suggestions will help us please you.</p>";		
	} else if(proInput==7 || proInput==8)
	{
		var smilyTxt='<img src="../images/clarks/better_smiley.png" alt="Most likely" > <span class="smilytitle">Most Likely</span>';
		smilyTxt+="<p class='smileMsg'>Thank you for your feedback. We promise to take your suggestions and observations to continuously improve our services</p>";
		//smilyTxt+="<p>We'd love suggestions to help to improve</p>";	
	}
	  else if(proInput==9 || proInput==10)
	{
		var smilyTxt='<img src="../images/clarks/super_smiley.png" alt="Extremely likely" > <span class="smilytitle">Extremely Likely</span>';
		smilyTxt+="<p class='smileMsg'>It feels great to know that we have delighted you. Would you mind sharing one change that you would want us to bring in our brand?</p>";
		//smilyTxt+="<p>We'd love suggestions to delight you further</p>";		
	}
	$('.smilyPos').html(smilyTxt);
	if($(window).width()<768)
	{		
	$('.SuccessPromoSubmit, .detailPromoInput, .smilyPos').show();
	$('body,html').animate({scrollTop:$(".promoter-inputBlk").offset().top},1000);
	}
	$(this).addClass('active');
        
        $('#NetpromoterForm_netpromoter_array').val(proInput);        
});

	
if($(window).width()>767)
{
jQuery('.stickyleftSidebar, .product-list-container').theiaStickySidebar({ additionalTopMargin: 20 });
jQuery('.stickySummary').theiaStickySidebar({ additionalTopMargin: 0, contentSelector: '.product-tabs', footerThreshold: 100 });
}





});



$(document).ready(function(){
    
    $("#mainSearchBox").keyup(function(){
        if($(this).val()==''){
                $(".storelocationposcont nav").hide();
         } else 
         {
              $(".storelocationposcont nav").show();
         }
        if($(this).val().match(/^[0-9]*$/)) {
            if($(this).val().length < 7){
                $(this).attr('maxlength',6);
            }
        }else{
            $(this).attr('maxlength','');
        }
        // Retrieve the input field text and reset the count to zero
        $(".searchCity").hide();
        var filter = $(this).val(), count = 0;
        $("nav .searchCity").show();
        if(!oneStepCheckout.isMobile()){
        $("nav .searchCity").css("max-height","120px");
        } else {
        $("nav .searchCity").css("max-height","100px");
        }
        $("nav .searchCity").css("overflow","hidden");
        $("nav .searchCity").css("list-style-type","none");
        // Loop through the comment list
        $("nav .searchCity li").each(function(){
            if ($(this).text().search(new RegExp("\\b"+filter, "i")) < 0) {
                $(this).fadeOut();
            } else {
                $(this).show();
                count++;
            }
});
        $("nav .searchCity li").on('click', function () {
                   var currentCity = $(this).text();
                   $('#mainSearchBox').val(currentCity);
                   $(".searchCity").hide();
                });
    });
        $("#mainSearchBox6").keyup(function(){
             if($(this).val()==''){
                $(".storelocationposcont nav").hide();
         } else 
         {
              $(".storelocationposcont nav").show();
         }
            if($(this).val().match(/^[0-9]*$/)) {
                
            if($(this).val().length < 7){
                $(this).attr('maxlength',6);
            }
        }else{
            $(this).attr('maxlength','');
        }
        // Retrieve the input field text and reset the count to zero
        $(".searchCity").hide();
        var filter = $(this).val(), count = 0;
        $("nav .searchCity").show();
         if(!oneStepCheckout.isMobile()){
        $("nav .searchCity").css("max-height","120px");
        } else {
        $("nav .searchCity").css("max-height","100px");
        }
        $("nav .searchCity").css("overflow","hidden");
        $("nav .searchCity").css("list-style-type","none");
        // Loop through the comment list
        $("nav .searchCity li").each(function(){
            if ($(this).text().search(new RegExp("\\b"+filter, "i")) < 0) {
                $(this).fadeOut();
            } else {
                $(this).show();
                count++;
            }
        });
        $("nav .searchCity li").on('click', function () {
                   var currentCity = $(this).text();
                   $('#mainSearchBox6').val(currentCity);
                   $(".searchCity").hide();
                });
    });
    
});
$(".link_line").on("click",function(e){
    localStorage.setItem("referral", "promo_offer");
});



var customJsObj = {
    
    
    getEmbedVideoTag: function (videosrc,videoformat, videoposter,videoWidth, videoHeight ,videoloop){
        return '<video playsinline muted= "false" '+videoloop+'  onclick="this.paused ? this.play() : this.pause();" class="video" width="'+videoWidth+'" height="'+videoHeight+'" poster="'+videoposter+'" width="100%"><source src="'+videosrc+'" type="video/'+videoformat+'"></video>';
    },
    actionVideoPlay: function(video){
        try {
           if(video.readyState===4 || video.currentTime>0) {
               video.play();
           }
        } catch (err){ }
    },
    
    
    bannerVideoCall: function(g_bannerImgHeight){
        if(g_bannerImgHeight==0){
            g_bannerImgHeight = 200;
        }
        var owlBanner = $('.homepageSlider');
        if($('.homepageSlider').length>0){
           
            $('.homepageSlider .owl-item .item').each(function(){
            var attr = $(this).attr('data-videosrc');
             if (typeof attr !== typeof undefined && attr !== false) {
               var videosrc = $(this).attr('data-videosrc');
               var videoformat = $(this).attr('data-videoformat');
                       var posterImgsrc = '';
                       if(videosrc.length>10){
                        var posterImgsrc = $(this).find('img').attr('src');
                        $(this).find('img').remove();                                        
                       } 
                       //g_video_carousel_count++;
                      
               $(this).prepend(customJsObj.getEmbedVideoTag(videosrc,videoformat, posterImgsrc,'100%', g_bannerImgHeight,''));
             }
           });
           
                owlBanner.on('translate.owl.carousel',function(e){
                    $('.homepageSlider .owl-item video').each(function(){
                      $(this).get(0).pause();
                    });
                  });
                owlBanner.on('translated.owl.carousel',function(e){
                  try{    
                        owlBanner.trigger('stop.owl.autoplay');
                        var video = $('.homepageSlider .owl-item.active video').get(0)
                        customJsObj.actionVideoPlay(video);
                            var videoSelector = $('.homepageSlider .owl-item.active video').get(0);
                            videoSelector.onended = function(e) {
                                owlBanner.trigger('play.owl.autoplay',[1000]);
                                owlBanner.trigger('next.owl.carousel',[3000]);
                            }
                    }
                    catch(err)
                    {
                     owlBanner.trigger('play.owl.autoplay',[1000]);
                    }
              })
           try {
               var videoSelector = $('.homepageSlider .owl-item.active video').get(0);
               if(typeof videoSelector!=='undefined') {
                    owlBanner.trigger('stop.owl.autoplay');
                    $('.homepageSlider .owl-item.active video').attr('autoplay',true);
                    videoSelector.onended = function(e) {
                        owlBanner.trigger('play.owl.autoplay',[1000]);
                        owlBanner.trigger('next.owl.carousel',[3000]);                        
                    }
               }
            }
            catch(err){ }
       }
    },


    videoproduct : function(){
    var product_img_wth = $('.video-product').width();
    var product_img_hth = $('.video-product').height();
    
    $('.video-product').each(function(){
        var product_videosrc = $(this).attr('data-videosrc');
        var product_videoformat = $(this).attr('data-videoformat');
        var product_videoposter = $(this).attr('data-poster');         
        $(this).html(customJsObj.getEmbedVideoTag(product_videosrc,product_videoformat, product_videoposter,product_img_wth, product_img_hth,'loop'));
    })  
    
    
    $('.video_expander').on('click',function(event){
        event.stopImmediatePropagation();
        var video_id = $(this).attr('data-videoid');
        var vid = $('#'+video_id+' video')[0];
        if (vid.requestFullscreen) {
              vid.requestFullscreen();
            } else if (vid.mozRequestFullScreen) {
              vid.mozRequestFullScreen();
            } else if (vid.webkitEnterFullscreen) {
              vid.webkitEnterFullscreen();
            }
        
    })
},
checkVideoScroll : function() {
   var scrollTop = $(document).scrollTop();
    $('.video-product video').each(function(index){
            var el = $(this);
            var top_of_object = el.offset().top-250;
            var bottom_of_object = el.offset().top + el.outerHeight()-250;
            if(scrollTop>top_of_object && scrollTop<bottom_of_object){
                if($(this).get(0).paused){                        
                    try{                        
                        var video = $(this).get(0);
                        customJsObj.actionVideoPlay(video);                        
                    }catch(err){}                                                              
                }
            }
            else{
                if(!$(this).get(0).paused){                        
                    try{$(this).get(0).pause();}catch(err){}                                                            
                }
           }
    });   
  
}

};
 
  

(function(a){a.fn.addBack=a.fn.addBack||a.fn.andSelf;
a.fn.extend({actual:function(b,l){if(!this[b]){throw'$.actual => The jQuery method "'+b+'" you called does not exist';}var f={absolute:false,clone:false,includeMargin:false};
var i=a.extend(f,l);var e=this.eq(0);var h,j;if(i.clone===true){h=function(){var m="position: absolute !important; top: -1000 !important; ";e=e.clone().attr("style",m).appendTo("body");
};j=function(){e.remove();};}else{var g=[];var d="";var c;h=function(){c=e.parents().addBack().filter(":hidden");d+="visibility: hidden !important; display: block !important; ";
if(i.absolute===true){d+="position: absolute !important; ";}c.each(function(){var m=a(this);var n=m.attr("style");g.push(n);m.attr("style",n?n+";"+d:d);
});};j=function(){c.each(function(m){var o=a(this);var n=g[m];if(n===undefined){o.removeAttr("style");}else{o.attr("style",n);}});};}h();var k=/(outer)/.test(b)?e[b](i.includeMargin):e[b]();
j();return k;}});})(jQuery);


(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function t(t,s){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(o=e("img[usemap='#"+a+"']")[0],!!o&&i(o)):!1):(/^(input|select|textarea|button|object)$/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function s(e){for(var t,i;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=a(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",o)}function o(){e.datepicker._isDisabledDatepicker(v.inline?v.dpDiv.parent()[0]:v.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function r(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}function h(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&t(i,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,n=e(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i,s){var n,a=e.plugins[t];if(a&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}};var l=0,u=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,n,a;for(a=0;null!=(n=i[a]);a++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,a,o,r,h={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}(),void 0):(h[t]=s,void 0)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,n=u.call(arguments,1),a=0,o=n.length;o>a;a++)for(i in n[a])s=n[a][i],n[a].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(n){var a="string"==typeof n,o=u.call(arguments,1),r=this;return a?this.each(function(){var i,a=e.data(this,s);return"instance"===n?(r=a,!1):a?e.isFunction(a[n])&&"_"!==n.charAt(0)?(i=a[n].apply(a,o),i!==a&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+n+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+n+"'")}):(o.length&&(n=e.widget.extend.apply(null,[n].concat(o))),this.each(function(){var t=e.data(this,s);t?(t.option(n||{}),t._init&&t._init()):e.data(this,s,new i(n,this))})),r}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}}),e.widget;var d=!1;e(document).mouseup(function(){d=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!d){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,n="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),d=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),d=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==n)return n;var t,i,s=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return e("body").append(s),t=a.offsetWidth,s.css("overflow","scroll"),i=a.offsetWidth,t===i&&(i=s[0].clientWidth),s.remove(),n=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,a="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s||n?i.width():i.outerWidth(),height:s||n?i.height():i.outerHeight()}}},e.fn.position=function(n){if(!n||!n.of)return f.apply(this,arguments);n=e.extend({},n);var p,m,g,v,y,b,_=e(n.of),x=e.position.getWithinInfo(n.within),w=e.position.getScrollInfo(x),k=(n.collision||"flip").split(" "),T={};return b=s(_),_[0].preventDefault&&(n.at="left top"),m=b.width,g=b.height,v=b.offset,y=e.extend({},v),e.each(["my","at"],function(){var e,t,i=(n[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),T[this]=[e?e[0]:0,t?t[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===n.at[0]?y.left+=m:"center"===n.at[0]&&(y.left+=m/2),"bottom"===n.at[1]?y.top+=g:"center"===n.at[1]&&(y.top+=g/2),p=t(T.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var s,l,u=e(this),d=u.outerWidth(),c=u.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),D=d+f+i(this,"marginRight")+w.width,S=c+b+i(this,"marginBottom")+w.height,M=e.extend({},y),C=t(T.my,u.outerWidth(),u.outerHeight());"right"===n.my[0]?M.left-=d:"center"===n.my[0]&&(M.left-=d/2),"bottom"===n.my[1]?M.top-=c:"center"===n.my[1]&&(M.top-=c/2),M.left+=C[0],M.top+=C[1],a||(M.left=h(M.left),M.top=h(M.top)),s={marginLeft:f,marginTop:b},e.each(["left","top"],function(t,i){e.ui.position[k[t]]&&e.ui.position[k[t]][i](M,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:c,collisionPosition:s,collisionWidth:D,collisionHeight:S,offset:[p[0]+C[0],p[1]+C[1]],my:n.my,at:n.at,within:x,elem:u})}),n.using&&(l=function(e){var t=v.left-M.left,i=t+m-d,s=v.top-M.top,a=s+g-c,h={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:M.left,top:M.top,width:d,height:c},horizontal:0>i?"left":t>0?"right":"center",vertical:0>a?"top":s>0?"bottom":"middle"};d>m&&m>r(t+i)&&(h.horizontal="center"),c>g&&g>r(s+a)&&(h.vertical="middle"),h.important=o(r(t),r(i))>o(r(s),r(a))?"horizontal":"vertical",n.using.call(this,e,h)}),u.offset(e.extend(M,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=e.left-t.collisionPosition.marginLeft,h=n-r,l=r+t.collisionWidth-a-n;t.collisionWidth>a?h>0&&0>=l?(i=e.left+h+t.collisionWidth-a-n,e.left+=h-i):e.left=l>0&&0>=h?n:h>l?n+a-t.collisionWidth:n:h>0?e.left+=h:l>0?e.left-=l:e.left=o(e.left-r,e.left)},top:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollTop:s.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,h=n-r,l=r+t.collisionHeight-a-n;t.collisionHeight>a?h>0&&0>=l?(i=e.top+h+t.collisionHeight-a-n,e.top+=h-i):e.top=l>0&&0>=h?n:h>l?n+a-t.collisionHeight:n:h>0?e.top+=h:l>0?e.top-=l:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,s,n=t.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,d=l+t.collisionWidth-o-h,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+c+p+f+t.collisionWidth-o-a,(0>i||r(u)>i)&&(e.left+=c+p+f)):d>0&&(s=e.left-t.collisionPosition.marginLeft+c+p+f-h,(s>0||d>r(s))&&(e.left+=c+p+f))},top:function(e,t){var i,s,n=t.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,d=l+t.collisionHeight-o-h,c="top"===t.my[1],p=c?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(s=e.top+p+f+m+t.collisionHeight-o-a,(0>s||r(u)>s)&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-h,(i>0||d>r(i))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,n,o,r=document.getElementsByTagName("body")[0],h=document.createElement("div");t=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)t.style[o]=s[o];t.appendChild(h),i=r||document.documentElement,i.insertBefore(t,i.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",n=e(h).offset().left,a=n>10&&11>n,t.innerHTML="",i.removeChild(t)}()}(),e.ui.position,e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(s){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper),n=s?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options,a=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),s=i[0],s&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,s,n,a,o=this.options,r=this._isRootNode(this.scrollParent[0]),h=e.pageX,l=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,h=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a),"y"===o.axis&&(h=this.originalPageX),"x"===o.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}
},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,s){var n=e.extend({},i,{item:s.element});s.sortables=[],e(s.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,n))})},stop:function(t,i,s){var n=e.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,e.each(s.sortables,function(){var e=this;e.isOver?(e.isOver=0,s.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,n))})},drag:function(t,i,s){e.each(s.sortables,function(){var n=!1,a=this;a.positionAbs=s.positionAbs,a.helperProportions=s.helperProportions,a.offset.click=s.offset.click,a._intersectsWith(a.containerCache)&&(n=!0,e.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&e.contains(a.element[0],this.element[0])&&(n=!1),n})),n?(a.isOver||(a.isOver=1,s._parent=i.helper.parent(),a.currentItem=i.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return i.helper[0]},t.target=a.currentItem[0],a._mouseCapture(t,!0),a._mouseStart(t,!0,!0),a.offset.click.top=s.offset.click.top,a.offset.click.left=s.offset.click.left,a.offset.parent.left-=s.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=s.offset.parent.top-a.offset.parent.top,s._trigger("toSortable",t),s.dropped=a.element,e.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,a.fromOutside=s),a.currentItem&&(a._mouseDrag(t),i.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",t,a._uiHash(a)),a._mouseStop(t,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(t),i.position=s._generatePosition(t,!0),s._trigger("fromSortable",t),s.dropped=!1,e.each(s.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,s){var n=e("body"),a=s.options;n.css("cursor")&&(a._cursor=n.css("cursor")),n.css("cursor",a.cursor)},stop:function(t,i,s){var n=s.options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity)},stop:function(t,i,s){var n=s.options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,s){var n=s.options,a=!1,o=s.scrollParentNotHidden[0],r=s.document[0];o!==r&&"HTML"!==o.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+o.offsetHeight-t.pageY<n.scrollSensitivity?o.scrollTop=a=o.scrollTop+n.scrollSpeed:t.pageY-s.overflowOffset.top<n.scrollSensitivity&&(o.scrollTop=a=o.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+o.offsetWidth-t.pageX<n.scrollSensitivity?o.scrollLeft=a=o.scrollLeft+n.scrollSpeed:t.pageX-s.overflowOffset.left<n.scrollSensitivity&&(o.scrollLeft=a=o.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(r).scrollTop()<n.scrollSensitivity?a=e(r).scrollTop(e(r).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<n.scrollSensitivity&&(a=e(r).scrollTop(e(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(r).scrollLeft()<n.scrollSensitivity?a=e(r).scrollLeft(e(r).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<n.scrollSensitivity&&(a=e(r).scrollLeft(e(r).scrollLeft()+n.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(s,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,s){var n=s.options;s.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=e(this),i=t.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,s){var n,a,o,r,h,l,u,d,c,p,f=s.options,m=f.snapTolerance,g=i.offset.left,v=g+s.helperProportions.width,y=i.offset.top,b=y+s.helperProportions.height;for(c=s.snapElements.length-1;c>=0;c--)h=s.snapElements[c].left-s.margins.left,l=h+s.snapElements[c].width,u=s.snapElements[c].top-s.margins.top,d=u+s.snapElements[c].height,h-m>v||g>l+m||u-m>b||y>d+m||!e.contains(s.snapElements[c].item.ownerDocument,s.snapElements[c].item)?(s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(n=m>=Math.abs(u-b),a=m>=Math.abs(d-y),o=m>=Math.abs(h-v),r=m>=Math.abs(l-g),n&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left)),p=n||a||o||r,"outer"!==f.snapMode&&(n=m>=Math.abs(u-y),a=m>=Math.abs(d-b),o=m>=Math.abs(h-g),r=m>=Math.abs(l-v),n&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d-s.helperProportions.height,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[c].snapping&&(n||a||o||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=n||a||o||r||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,s){var n,a=s.options,o=e.makeArray(e(a.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});o.length&&(n=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",n+t)}),this.css("zIndex",n+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex)},stop:function(t,i,s){var n=s.options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}}),e.ui.draggable,e.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i)};else if("scope"===t){var s=e.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=e(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t)?(n=!0,!1):void 0}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,i){return e>=t&&t+i>e}return function(t,i,s,n){if(!i.offset)return!1;var a=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,r=a+t.helperProportions.width,h=o+t.helperProportions.height,l=i.offset.left,u=i.offset.top,d=l+i.proportions().width,c=u+i.proportions().height;switch(s){case"fit":return a>=l&&d>=r&&o>=u&&c>=h;case"intersect":return a+t.helperProportions.width/2>l&&d>r-t.helperProportions.width/2&&o+t.helperProportions.height/2>u&&c>h-t.helperProportions.height/2;case"pointer":return e(n.pageY,u,i.proportions().height)&&e(n.pageX,l,i.proportions().width);case"touch":return(o>=u&&c>=o||h>=u&&c>=h||u>o&&h>c)&&(a>=l&&d>=a||r>=l&&d>=r||l>a&&r>d);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;a.length>s;s++)if(!(a[s].options.disabled||t&&!a[s].accept.call(a[s].element[0],t.currentItem||t.element))){for(n=0;r.length>n;n++)if(r[n]===a[s].element[0]){a[s].proportions().height=0;continue e}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions({width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight}))}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=e.ui.intersect(t,this,this.options.tolerance,i),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===n}),a.length&&(s=e(a[0]).droppable("instance"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},e.ui.droppable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[s]>0?!0:(t[s]=1,n=t[s]>0,t[s]=0,n)},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var i,s,n,a=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,s+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===n?this.axis+"-resize":n),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,s,n=this.originalMousePosition,a=this.axis,o=t.pageX-n.left||0,r=t.pageY-n.top||0,h=this._change[a];return this._updatePrevProperties(),h?(i=h.apply(this,[t,o,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,a=s?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-n},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(o,{top:h,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,s,n,a,o=this.options;a={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,s=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,n=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),s>a.minHeight&&(a.minHeight=s),a.maxWidth>i&&(a.maxWidth=i),a.maxHeight>n&&(a.maxHeight=n)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,l=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),o&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight),a&&l&&(e.left=r-t.minWidth),s&&l&&(e.left=r-t.maxWidth),o&&u&&(e.top=h-t.minHeight),n&&u&&(e.top=h-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],n=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)i[t]=parseInt(s[t],10)||0,i[t]+=parseInt(n[t],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,s,n,a,o,r,h=e(this).resizable("instance"),l=h.options,u=h.element,d=l.containment,c=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;c&&(h.containerElement=e(c),/document/.test(d)||d===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(c),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){i[e]=h._num(t.css("padding"+s))}),h.containerOffset=t.offset(),h.containerPosition=t.position(),h.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},s=h.containerOffset,n=h.containerSize.height,a=h.containerSize.width,o=h._hasScroll(c,"left")?c.scrollWidth:a,r=h._hasScroll(c)?c.scrollHeight:n,h.parentData={element:c,left:s.left,top:s.top,width:o,height:r}))},resize:function(t){var i,s,n,a,o=e(this).resizable("instance"),r=o.options,h=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,d={top:0,left:0},c=o.containerElement,p=!0;c[0]!==document&&/static/.test(c.css("position"))&&(d=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-h.left:o.position.left-d.left),u&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?h.top:0),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-h.left)),s=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-h.top)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,u&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),h=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,i){var s=e(this).resizable("instance"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0};e(n.alsoResize).each(function(){var t=e(this),s=e(this).data("ui-resizable-alsoresize"),n={},a=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var i=(s[t]||0)+(r[t]||0);i&&i>=0&&(n[t]=i||null)}),t.css(n)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),s=i.options,n=i.size,a=i.originalSize,o=i.originalPosition,r=i.axis,h="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=h[0]||1,u=h[1]||1,d=Math.round((n.width-a.width)/l)*l,c=Math.round((n.height-a.height)/u)*u,p=a.width+d,f=a.height+c,m=s.maxWidth&&p>s.maxWidth,g=s.maxHeight&&f>s.maxHeight,v=s.minWidth&&s.minWidth>p,y=s.minHeight&&s.minHeight>f;s.grid=h,v&&(p+=l),y&&(f+=u),m&&(p-=l),g&&(f-=u),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=o.top-c):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=o.left-d):((0>=f-u||0>=p-l)&&(t=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=o.top-c):(f=u-t.height,i.size.height=f,i.position.top=o.top+a.height-f),p-l>0?(i.size.width=p,i.position.left=o.left-d):(p=l-t.width,i.size.width=p,i.position.left=o.left+a.width-p))}}),e.ui.resizable,e.widget("ui.selectable",e.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;
this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,s=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||t.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",t,{unselecting:s.element}))}),e(t.target).parents().addBack().each(function(){var s,n=e.data(this,"selectable-item");return n?(s=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,a=this.opos[0],o=this.opos[1],r=t.pageX,h=t.pageY;return a>r&&(i=r,r=a,a=i),o>h&&(i=h,h=o,o=i),this.helper.css({left:a,top:o,width:r-a,height:h-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?l=!(i.left>r||a>i.right||i.top>h||o>i.bottom):"fit"===n.tolerance&&(l=i.left>a&&r>i.right&&i.top>o&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",t,{unselected:s.element})}),e(".ui-selecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",t,{selected:s.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var s=null,n=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,a.widgetName+"-item")===a?(s=e(this),!1):void 0}),e.data(t.target,a.widgetName+"-item")===a&&(s=e(t.target)),s?!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==n&&!e.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],n):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=e.left,o=a+e.width,r=e.top,h=r+e.height,l=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||s+l>r&&h>s+l,c="y"===this.options.axis||t+u>a&&o>t+u,p=d&&c;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&i,n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return s?this.floating?a&&"right"===a||"down"===n?2:1:n&&("down"===n?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){r.push(this)}var s,n,a,o,r=[],h=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(a=e(l[s],this.document[0]),n=a.length-1;n>=0;n--)o=e.data(a[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&h.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(h.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,n,a,o,r,h,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(i=c.length-1;i>=0;i--)for(n=e(c[i],this.document[0]),s=n.length-1;s>=0;s--)a=e.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=d.length-1;i>=0;i--)for(o=d[i][1],r=d[i][0],s=0,l=r.length;l>s;s++)h=e(r[s]),h.data(this.widgetName+"-item",o),u.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===s?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(n)):"tr"===s?t._createTrPlaceholder(t.currentItem,n):"img"===s&&n.attr("src",t.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(e,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var s=this;t.children().each(function(){e("<td>&#160;</td>",s.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){var i,s,n,a,o,r,h,l,u,d,c=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(c&&e.contains(this.containers[i].element[0],c.element[0]))continue;c=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,a=null,u=c.floating||this._isFloating(this.currentItem),o=u?"left":"top",r=u?"width":"height",d=u?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[o],l=!1,t[d]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(t[d]-h)&&(n=Math.abs(t[d]-h),a=this.items[s],this.direction=l?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],i=e(n.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(t){var i,s,n=this.options,a=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function i(e,t,i){return function(s){i._trigger(e,s,t._uiHash(t))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(s=0;n.length>s;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,s=this.headers.length,n=this.headers.index(t.target),a=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:a=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[s-1]}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))
},_refresh:function(){var t,i=this.options,s=i.heightStyle,n=this.element.parent();this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),i=t.uniqueId().attr("id"),s=t.next(),n=s.uniqueId().attr("id");t.attr("aria-controls",n),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===s?(t=n.height(),this.element.siblings(":visible").each(function(){var i=e(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n[0]===s[0],o=a&&i.collapsible,r=o?e():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:o?e():n,newPanel:r};t.preventDefault(),a&&!i.collapsible||this._trigger("beforeActivate",t,l)===!1||(i.active=o?!1:this.headers.index(n),this.active=a?e():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,s=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,t):(s.hide(),i.show(),this._toggleComplete(t)),s.attr({"aria-hidden":"true"}),s.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===parseInt(e(this).attr("tabIndex"),10)}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,i){var s,n,a,o=this,r=0,h=e.css("box-sizing"),l=e.length&&(!t.length||e.index()<t.index()),u=this.options.animate||{},d=l&&u.down||u,c=function(){o._toggleComplete(i)};return"number"==typeof d&&(a=d),"string"==typeof d&&(n=d),n=n||d.easing||u.easing,a=a||d.duration||u.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(this.hideProps,{duration:a,easing:n,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(this.showProps,{duration:a,easing:n,complete:c,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?"content-box"===h&&(r+=i.now):"content"!==o.options.heightStyle&&(i.now=Math.round(s-t.outerHeight()-r),r=0)}}),void 0):t.animate(this.hideProps,a,n,c):e.animate(this.showProps,a,n,c)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=e(t.currentTarget);i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var i,s,n,a,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,s=this.previousFilter||"",n=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),n===s?a=!0:n=s+n,i=this._filterMenuItems(n),i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(n=String.fromCharCode(t.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(t,i),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,i,s=this,n=this.options.icons.submenu,a=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),a.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.parent(),s=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",i.attr("id"))}),t=a.add(this.element),i=t.find(this.options.items),i.not(".ui-menu-item").each(function(){var t=e(this);s._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var i,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=t.outerHeight(),0>n?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[t]()),this.focus(i,s)},nextPage:function(t){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-s-n}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s+n>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return s.test(e.trim(e(this).text()))})}}),e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;this.isMultiLine=a?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,i=!0,void 0;t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case a.UP:t=!0,this._keyEvent("previous",n);break;case a.DOWN:t=!0,this._keyEvent("next",n);break;case a.ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),void 0;if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){var s,n;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0):(n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),s=i.item.attr("aria-label")||n.value,s&&e.trim(s).length&&(this.liveRegion.children().hide(),e("<div>").text(s).appendTo(this.liveRegion)),void 0)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!i&&!s)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").text(i.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}}),e.ui.autocomplete;var c,p="ui-button ui-widget ui-state-default ui-corner-all",f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",m=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},g=function(t){var i=t.name,s=t.form,n=e([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?e(s).find("[name='"+i+"'][type=radio]"):e("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),n};e.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,m),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,s="checkbox"===this.type||"radio"===this.type,n=s?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===c&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||e(this).removeClass(n)}).bind("click"+this.eventNamespace,function(e){i.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),s&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return i.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var s=t.element[0];g(s).not(s).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return i.disabled?!1:(e(this).addClass("ui-state-active"),c=this,t.document.one("mouseup",function(){c=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return i.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return i.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+" ui-state-active "+f).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?g(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(f),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),s=i.filter(":ui-button");i.not(":ui-button").button(),s.button("refresh"),this.buttons=i.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),e.ui.button,e.extend(e.ui,{datepicker:{version:"1.11.4"}});var v;e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var s,n,a;s=t.nodeName.toLowerCase(),n="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),n),a.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,a):n&&this._inlineDatepicker(t,a)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var s,n,a,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&t.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:n,title:n}):n)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,n,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,s=0,n=0;e.length>n;n++)e[n].length>i&&(i=e[n].length,s=n);return s},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,s,n,a){var o,h,l,u,d,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},e.data(this._dialogInput[0],"datepicker",c)),r(c.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(c,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,l/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",c),this
},_destroyDatepicker:function(t){var i,s=e(t),n=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty(),v===n&&(v=null))},_enableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,s){var n,a,o,h,l=this._getInst(t);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):l?"all"===i?e.extend({},l.settings):this._get(l,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),a=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),r(l.settings,n),null!==o&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,o)),null!==h&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),"disabled"in n&&(n.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,a),this._updateAlternate(l),this._updateDatepicker(l)),void 0)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,s,n,a=e.datepicker._getInst(t.target),o=!0,r=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return n=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv),n[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,n[0]),i=e.datepicker._get(a,"onSelect"),i?(s=e.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,s,n=e.datepicker._getInst(t.target);return e.datepicker._get(n,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(t){var i,s=e.datepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.datepicker._getFormatConfig(s)),i&&(e.datepicker._setDateFromField(s),e.datepicker._updateAlternate(s),e.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,a,o,h,l,u;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),a=n?n.apply(t,[t,i]):{},a!==!1&&(r(i.settings,a),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),h={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),h=e.datepicker._checkOffset(i,h,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),u=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",s(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,v=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,s=this._getNumberOfMonths(t),n=s[1],a=17,r=t.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,s){var n=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?n-o:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+r):0),i},_findPos:function(t){for(var i,s=this._getInst(t),n=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,s,n,a,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),s=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==s)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,s){var n=e(t),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(t){var i,s=e(t),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(t,i,s){var n=e(t),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(t,i,s,n){var a,o=e(t);e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var s,n=e(t),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,s,n,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t)),e(a).each(function(){e(this).val(n)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,s){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,a,o,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,c=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,_=function(e){var i=t.length>n+1&&t.charAt(n+1)===e;return i&&n++,i},x=function(e){var t=_(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n="y"===e?s:1,a=RegExp("^\\d{"+n+","+s+"}"),o=i.substring(h).match(a);if(!o)throw"Missing number at position "+h;return h+=o[0].length,parseInt(o[0],10)},w=function(t,s,n){var a=-1,o=e.map(_(t)?n:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var s=t[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(a=t[0],h+=s.length,!1):void 0}),-1!==a)return a+1;throw"Unknown name at position "+h},k=function(){if(i.charAt(h)!==t.charAt(n))throw"Unexpected literal at position "+h;h++};for(n=0;t.length>n;n++)if(b)"'"!==t.charAt(n)||_("'")?k():b=!1;else switch(t.charAt(n)){case"d":v=x("d");break;case"D":w("D",d,c);break;case"o":y=x("o");break;case"m":g=x("m");break;case"M":g=w("M",p,f);break;case"y":m=x("y");break;case"@":r=new Date(x("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((x("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":_("'")?k():b=!0;break;default:k()}if(i.length>h&&(o=i.substr(h),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;;){if(a=this._getDaysInMonth(m,g-1),a>=v)break;g++,v-=a}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i},l=function(e,t,i){var s=""+t;if(h(e))for(;i>s.length;)s="0"+s;return s},u=function(e,t,i,s){return h(e)?s[t]:i[t]},d="",c=!1;if(t)for(s=0;e.length>s;s++)if(c)"'"!==e.charAt(s)||h("'")?d+=e.charAt(s):c=!1;else switch(e.charAt(s)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),n,a);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),o,r);break;case"y":d+=h("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":h("'")?d+="'":c=!0;break;default:d+=e.charAt(s)}return d},_possibleChars:function(e){var t,i="",s=!1,n=function(i){var s=e.length>t+1&&e.charAt(t+1)===i;return s&&t++,s};for(t=0;e.length>t;t++)if(s)"'"!==e.charAt(t)||n("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),a=n,o=this._getFormatConfig(e);try{a=this.parseDate(i,s,o)||n}catch(r){s=t?"":s}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=s?a.getDate():0,e.currentMonth=s?a.getMonth():0,e.currentYear=s?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,s){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,a=n.getFullYear(),o=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o));break;case"y":case"Y":a+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o))}l=h.exec(i)}return new Date(a,o,r)},o=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,n=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),n===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-i,"M")},next:function(){e.datepicker._adjustDate(s,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(s)},selectDay:function(){return e.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,s,n,a,o,r,h,l,u,d,c,p,f,m,g,v,y,b,_,x,w,k,T,D,S,M,C,N,A,P,I,H,z,F,E,O,j,W,L=new Date,R=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),Y=this._get(e,"isRTL"),B=this._get(e,"showButtonPanel"),J=this._get(e,"hideIfNoPrevNext"),q=this._get(e,"navigationAsDateFormat"),K=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),U=this._get(e,"stepMonths"),Q=1!==K[0]||1!==K[1],G=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(e,"min"),$=this._getMinMaxDate(e,"max"),Z=e.drawMonth-V,et=e.drawYear;if(0>Z&&(Z+=12,et--),$)for(t=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-K[0]*K[1]+1,$.getDate())),t=X&&X>t?X:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=q?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-U,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":J?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(e,"nextText"),n=q?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z+U,1)),this._getFormatConfig(e)):n,a=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":J?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?G:R,o=q?this.formatDate(o,r,this._getFormatConfig(e)):o,h=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(Y?"":h)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),c=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",w=0;K[0]>w;w++){for(k="",this.maxRows=4,T=0;K[1]>T;T++){if(D=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),S=" ui-corner-all",M="",Q){if(M+="<div class='ui-datepicker-group",K[1]>1)switch(T){case 0:M+=" ui-datepicker-group-first",S=" ui-corner-"+(Y?"right":"left");break;case K[1]-1:M+=" ui-datepicker-group-last",S=" ui-corner-"+(Y?"left":"right");break;default:M+=" ui-datepicker-group-middle",S=""}M+="'>"}for(M+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===w?Y?a:s:"")+(/all|right/.test(S)&&0===w?Y?s:a:"")+this._generateMonthYearHeader(e,Z,et,X,$,w>0||T>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",C=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)N=(x+u)%7,C+="<th scope='col'"+((x+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+c[N]+"'>"+p[N]+"</span></th>";for(M+=C+"</tr></thead><tbody>",A=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,A)),P=(this._getFirstDayOfMonth(et,Z)-u+7)%7,I=Math.ceil((P+A)/7),H=Q?this.maxRows>I?this.maxRows:I:I,this.maxRows=H,z=this._daylightSavingAdjust(new Date(et,Z,1-P)),F=0;H>F;F++){for(M+="<tr>",E=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(z)+"</td>":"",x=0;7>x;x++)O=g?g.apply(e.input?e.input[0]:null,[z]):[!0,""],j=z.getMonth()!==Z,W=j&&!y||!O[0]||X&&X>z||$&&z>$,E+="<td class='"+((x+u+6)%7>=5?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(z.getTime()===D.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===z.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(W?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!v?"":" "+O[1]+(z.getTime()===G.getTime()?" "+this._currentClass:"")+(z.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(j&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(W?"":" data-handler='selectDay' data-event='click' data-month='"+z.getMonth()+"' data-year='"+z.getFullYear()+"'")+">"+(j&&!v?"&#xa0;":W?"<span class='ui-state-default'>"+z.getDate()+"</span>":"<a class='ui-state-default"+(z.getTime()===R.getTime()?" ui-state-highlight":"")+(z.getTime()===G.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#'>"+z.getDate()+"</a>")+"</td>",z.setDate(z.getDate()+1),z=this._daylightSavingAdjust(z);M+=E+"</tr>"}Z++,Z>11&&(Z=0,et++),M+="</tbody></table>"+(Q?"</div>"+(K[0]>0&&T===K[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=M}_+=k}return _+=l,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,s,n,a,o,r){var h,l,u,d,c,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(a||!g)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!h||u>=s.getMonth())&&(!l||n.getMonth()>=u)&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+r[u]+"</option>");_+="</select>"}if(y||(b+=_+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),c=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?c+parseInt(e,10):parseInt(e,10);return isNaN(t)?c:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!a&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),n=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(s,n))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,n,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),n=i&&i>t?i:t;return s&&n>s?s:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var n=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,s+(0>t?t:n[0]*n[1]),1));return 0>t&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i,s,n=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,r=null,h=this._get(e,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||t.getTime()>=n.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.4",e.datepicker,e.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,s=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(n){}this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var s=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),a=Math.max.apply(null,n);return a>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",a+1),s=!0),s&&!i&&this._trigger("focus",t),s},open:function(){var t=this;
return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==s[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){n.focus()}),t.preventDefault()):(this._delay(function(){s.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(i,function(i,s){var n,a;s=e.isFunction(s)?{click:s,text:i}:s,s=e.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(t.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,e("<button></button>",s).button(a).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,t(n))},drag:function(e,s){i._trigger("drag",e,t(s))},stop:function(n,a){var o=a.offset.left-i.document.scrollLeft(),r=a.offset.top-i.document.scrollTop();s.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" "+"top"+(r>=0?"+":"")+r,of:i.window},e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,t(a))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,t(n))},resize:function(e,s){i._trigger("resize",e,t(s))},stop:function(n,a){var o=i.uiDialog.offset(),r=o.left-i.document.scrollLeft(),h=o.top-i.document.scrollTop();s.height=i.uiDialog.height(),s.width=i.uiDialog.width(),s.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" "+"top"+(h>=0?"+":"")+h,of:i.window},e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,t(a))}}).css("position",a)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);-1!==i&&t.splice(i,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,n={};e.each(t,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(s=!0),e in i.resizableRelatedOptions&&(n[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(e,t){var i,s,n=this.uiDialog;"dialogClass"===e&&n.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=n.is(":data(ui-draggable)"),i&&!t&&n.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(s=n.is(":data(ui-resizable)"),s&&!t&&n.resizable("destroy"),s&&"string"==typeof t&&n.resizable("option","handles",t),s||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),t=Math.max(0,s.minHeight-e),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-e):"none","auto"===s.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),e.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),void 0)},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var t=this;this.label=e("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),e("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=e("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t.menuItems||t._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(e,i){e.preventDefault(),t._setSelection(),t._select(i.item.data("ui-selectmenu-item"),e)},focus:function(e,i){var s=i.item.data("ui-selectmenu-item");null!=t.focusIndex&&s.index!==t.focusIndex&&(t._trigger("focus",e,{item:s}),t.isOpen||t._select(s,e)),t.focusIndex=s.index,t.button.attr("aria-activedescendant",t.menuItems.eq(s.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var e,t=this.element.find("option");t.length&&(this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(t,i){var s=this,n="";e.each(i,function(i,a){a.optgroup!==n&&(e("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(a.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:a.optgroup}).appendTo(t),n=a.optgroup),s._renderItemData(t,a)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var s=e("<li>");return i.disabled&&s.addClass("ui-state-disabled"),this._setText(s,i.label),s.appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var i,s,n=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex):(i=this.menuItems.eq(this.element[0].selectedIndex),n+=":not(.ui-state-disabled)"),s="first"===e||"last"===e?i["first"===e?"prevAll":"nextAll"](n).eq(-1):i[e+"All"](n).eq(0),s.length&&this.menuInstance.focus(t,s)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?(e=window.getSelection(),e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var i=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),i=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),i=!1}i&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this._setText(this.buttonText,e.label),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==i&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){"icons"===e&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button),this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"disabled"===e&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===e&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;e||(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(t){var i=[];t.each(function(t,s){var n=e(s),a=n.parent("optgroup");i.push({element:n,index:t,value:n.val(),label:n.text(),optgroup:a.attr("label")||"",disabled:a.prop("disabled")||n.prop("disabled")})}),this.items=i},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),e.widget("ui.slider",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),t=n.length;i>t;t++)o.push(a);this.handles=n.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,s,n,a,o,r,h,l,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(s-u.values(t));(n>i||n===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(n=i,a=e(this),o=t)}),r=this._start(t,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),h=a.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-h.left-a.width()/2,top:t.pageY-h.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,n,a;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>s||1===t&&s>i)&&(i=s),i!==this.values(t)&&(n=this.values(),n[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:n}),s=this.values(t?0:1),a!==!1&&this.values(t,i))):i!==this.value()&&(a=this._trigger("slide",e,{handle:this.handles[t],value:i}),a!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var s,n,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length>a;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,i){var s,n=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(n=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!i),this._super(t,i),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step,s=Math.floor(+(e-t).toFixed(this._precision())/i)*i;e=s+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,i,s,n,a,o=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[l?"animate":"css"](u,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)/(a-n)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(t){var i,s,n,a,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),i=this._start(t,o),i===!1))return}switch(a=this.options.step,s=n=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-a)}this._slide(t,o,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}}),e.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,s){var n=i.attr(s);void 0!==n&&n.length&&(t[s]=n)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()
},_keydown:function(t){var i=this.options,s=e.ui.keyCode;switch(t.keyCode){case s.UP:return this._repeat(null,1,t),!0;case s.DOWN:return this._repeat(null,-1,t),!0;case s.PAGE_UP:return this._repeat(null,i.page,t),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,s=this.options;return t=null!==s.min?s.min:0,i=e-t,i=Math.round(i/s.step)*s.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==s.max&&e>s.max?s.max:null!==s.min&&s.min>e?s.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(i)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:h(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null===e?!1:e===this._adjustValue(e)},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:h(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:h(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:h(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:h(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(h(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,s;t=t.cloneNode(!1),i=t.href.replace(e,""),s=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(n){}try{s=decodeURIComponent(s)}catch(n){}return t.hash.length>1&&i===s}}(),_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);return null===t&&(s&&this.tabs.each(function(i,n){return e(n).attr("aria-controls")===s?(t=i,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),s=this.tabs.index(i),n=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:s++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:n=!1,s--;break;case e.ui.keyCode.END:s=this.anchors.length-1;break;case e.ui.keyCode.HOME:s=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(s),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(s===this.options.active?!1:s),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,n),t.ctrlKey||t.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function s(){return t>n&&(t=0),0>t&&(t=n),t}for(var n=this.tabs.length-1;-1!==e.inArray(s(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,i=this.tabs,s=this.anchors,n=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,s){var n,a,o,r=e(s).uniqueId().attr("id"),h=e(s).closest("li"),l=h.attr("aria-controls");t._isLocal(s)?(n=s.hash,o=n.substring(1),a=t.element.find(t._sanitizeSelector(n))):(o=h.attr("aria-controls")||e({}).uniqueId()[0].id,n="#"+o,a=t.element.find(n),a.length||(a=t._createPanel(o),a.insertAfter(t.panels[i-1]||t.tablist)),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),l&&h.data("ui-tabs-aria-controls",l),h.attr({"aria-controls":o,"aria-labelledby":r}),a.attr("aria-labelledby",r)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),i&&(this._off(i.not(this.tabs)),this._off(s.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,s=0;i=this.tabs[s];s++)t===!0||-1!==e.inArray(s,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,s=this.element.parent();"fill"===t?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),s=t.css("position");"absolute"!==s&&"fixed"!==s&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,h=r?e():this._getPanelForTab(a),l=s.length?this._getPanelForTab(s):e(),u={oldTab:s,oldPanel:l,newTab:r?e():a,newPanel:h};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",t,u)===!1||(i.active=r?!1:this.tabs.index(a),this.active=o?e():a,this.xhr&&this.xhr.abort(),l.length||h.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(a),t),this._toggle(t,u))},_toggle:function(t,i){function s(){a.running=!1,a._trigger("activate",t,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,s):(o.show(),s())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,s=this._findActive(t);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;i!==!1&&(void 0===t?i=!1:(t=this._getIndex(t),i=e.isArray(i)?e.map(i,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,i){return i!==t?i:null})),this._setupDisabled(i))},disable:function(t){var i=this.options.disabled;if(i!==!0){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var s=this,n=this.tabs.eq(t),a=n.find(".ui-tabs-anchor"),o=this._getPanelForTab(n),r={tab:n,panel:o},h=function(e,t){"abort"===t&&s.panels.stop(!1,!0),n.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr};this._isLocal(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(n.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done(function(e,t,n){setTimeout(function(){o.html(e),s._trigger("load",i,r),h(n,t)},1)}).fail(function(e,t){setTimeout(function(){h(e,t)},1)})))},_ajaxSettings:function(t,i,s){var n=this;return{url:t.attr("href"),beforeSend:function(t,a){return n._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},s))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),e.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var s=(t.attr("aria-describedby")||"").split(/\s+/);s.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(s.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),s=(t.attr("aria-describedby")||"").split(/\s+/),n=e.inArray(i,s);-1!==n&&s.splice(n,1),t.removeData("ui-tooltip-id"),s=e.trim(s.join(" ")),s?t.attr("aria-describedby",s):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,i){var s=this;return"disabled"===t?(this[i?"_disable":"_enable"](),this.options[t]=i,void 0):(this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){s._updateContent(t.element)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur");n.target=n.currentTarget=s.element[0],t.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,s=e(t?t.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&s.parents().each(function(){var t,s=e(this);s.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._registerCloseHandlers(t,s),this._updateContent(s,t))},_updateContent:function(e,t){var i,s=this.options.content,n=this,a=t?t.type:null;return"string"==typeof s?this._open(t,e,s):(i=s.call(e[0],function(i){n._delay(function(){e.data("ui-tooltip-open")&&(t&&(t.type=a),this._open(t,e,i))})}),i&&this._open(t,e,i),void 0)},_open:function(t,i,s){function n(e){l.of=e,o.is(":hidden")||o.position(l)}var a,o,r,h,l=e.extend({},this.options.position);if(s){if(a=this._find(i))return a.tooltip.find(".ui-tooltip-content").html(s),void 0;i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),a=this._tooltip(i),o=a.tooltip,this._addDescribedBy(i,o.attr("id")),o.find(".ui-tooltip-content").html(s),this.liveRegion.children().hide(),s.clone?(h=s.clone(),h.removeAttr("id").find("[id]").removeAttr("id")):h=s,e("<div>").html(h).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:n}),n(t)):o.position(e.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){o.is(":visible")&&(n(l.of),clearInterval(r))},e.fx.interval)),this._trigger("open",t,{tooltip:o})}},_registerCloseHandlers:function(t,i){var s={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var s=e.Event(t);s.currentTarget=i[0],this.close(s,!0)}}};i[0]!==this.element[0]&&(s.remove=function(){this._removeTooltip(this._find(i).tooltip)}),t&&"mouseover"!==t.type||(s.mouseleave="close"),t&&"focusin"!==t.type||(s.focusout="close"),this._on(!0,i,s)},close:function(t){var i,s=this,n=e(t?t.currentTarget:this.element),a=this._find(n);return a?(i=a.tooltip,a.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),a.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){s._removeTooltip(e(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete s.parents[t]}),a.closing=!0,this._trigger("close",t,{tooltip:i}),a.hiding||(a.closing=!1)),void 0):(n.removeData("ui-tooltip-open"),void 0)},_tooltip:function(t){var i=e("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),s=i.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[s]={element:t,tooltip:i}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur"),a=s.element;n.target=n.currentTarget=a[0],t.close(n,!0),e("#"+i).remove(),a.data("ui-tooltip-title")&&(a.attr("title")||a.attr("title",a.data("ui-tooltip-title")),a.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}});var y="ui-effects-",b=e;e.effects={effect:{}},function(e,t){function i(e,t,i){var s=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=s.floor?~~e:parseFloat(e),isNaN(e)?t.def:s.mod?(e+s.mod)%s.mod:0>e?0:e>s.max?s.max:e)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(e,a){var o,r=a.re.exec(i),h=r&&a.parse(r),l=a.space||"rgba";return h?(o=s[l](h),s[u[l].cache]=o[u[l].cache],n=s._rgba=o._rgba,!1):t}),n.length?("0,0,0,0"===n.join()&&e.extend(n,a.transparent),s):a[i]}function n(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,s,n){return new e.Color.fn.parse(t,i,s,n)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=l.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(n,o,r,h){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(o),o=t);var d=this,c=e.type(n),p=this._rgba=[];return o!==t&&(n=[n,o,r,h],c="array"),"string"===c?this.parse(s(n)||a._default):"array"===c?(f(u.rgba.props,function(e,t){p[t.idx]=i(n[t.idx],t)}),this):"object"===c?(n instanceof l?f(u,function(e,t){n[t.cache]&&(d[t.cache]=n[t.cache].slice())}):f(u,function(t,s){var a=s.cache;f(s.props,function(e,t){if(!d[a]&&s.to){if("alpha"===e||null==n[e])return;d[a]=s.to(d._rgba)}d[a][t.idx]=i(n[e],t,!0)}),d[a]&&0>e.inArray(null,d[a].slice(0,3))&&(d[a][3]=1,s.from&&(d._rgba=s.from(d[a])))}),this):t},is:function(e){var i=l(e),s=!0,n=this;return f(u,function(e,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(e,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:t})),s}),s},_space:function(){var e=[],t=this;return f(u,function(i,s){t[s.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var s=l(e),n=s._space(),a=u[n],o=0===this.alpha()?l("transparent"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(e,n){var a=n.idx,o=r[a],l=s[a],u=d[n.type]||{};null!==l&&(null===o?h[a]=l:(u.mod&&(l-o>u.mod/2?o+=u.mod:o-l>u.mod/2&&(o-=u.mod)),h[a]=i((l-o)*t+o,n)))}),this[n](h)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(t)._rgba;return l(e.map(i,function(e,t){return(1-s)*n[t]+s*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,s=e[0]/255,n=e[1]/255,a=e[2]/255,o=e[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,u=r+h,d=.5*u;return t=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,i,d,null==o?1:o]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],s=e[2],a=e[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,t+1/3)),Math.round(255*n(r,o,t)),Math.round(255*n(r,o,t-1/3)),a]},f(u,function(s,n){var a=n.props,o=n.cache,h=n.to,u=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===t)return this[o].slice();var n,r=e.type(s),d="array"===r||"object"===r?s:arguments,c=this[o].slice();return f(a,function(e,t){var s=d["object"===r?e:t.idx];null==s&&(s=c[t.idx]),c[t.idx]=i(s,t)}),u?(n=l(u(c)),n[o]=c,n):l(c)},f(a,function(t,i){l.fn[t]||(l.fn[t]=function(n){var a,o=e.type(n),h="alpha"===t?this._hsla?"hsla":"rgba":s,l=this[h](),u=l[i.idx];return"undefined"===o?u:("function"===o&&(n=n.call(this,u),o=e.type(n)),null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=u+parseFloat(a[2])*("+"===a[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,n){var a,o,r="";if("transparent"!==n&&("string"!==e.type(n)||(a=s(n)))){if(n=l(a||n),!c.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&o&&o.style;)try{r=e.css(o,"backgroundColor"),o=o.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{t.style[i]=n}catch(h){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,s){t["border"+s+"Color"]=e}),t}},a=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(b),function(){function t(t){var i,s,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[e.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function i(t,i){var s,a,o={};for(s in i)a=i[s],t[s]!==a&&(n[s]||(e.fx.step[s]||!isNaN(parseFloat(a)))&&(o[s]=a));return o}var s=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(b.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(n,a,o,r){var h=e.speed(a,o,r);return this.queue(function(){var a,o=e(this),r=o.attr("class")||"",l=h.children?o.find("*").addBack():o;l=l.map(function(){var i=e(this);return{el:i,start:t(this)}}),a=function(){e.each(s,function(e,t){n[t]&&o[t+"Class"](n[t])})},a(),l=l.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),o.attr("class",r),l=l.map(function(){var t=this,i=e.Deferred(),s=e.extend({},h,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,s),i.promise()}),e.when.apply(e,l.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),h.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(i,s,n,a){return s?e.effects.animateClass.call(this,{add:i},s,n,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,s,n,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},s,n,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,s,n,a,o){return"boolean"==typeof s||void 0===s?n?e.effects.animateClass.call(this,s?{add:i}:{remove:i},n,a,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},s,n,a)}}(e.fn.toggleClass),switchClass:function(t,i,s,n,a){return e.effects.animateClass.call(this,{add:i,remove:t},s,n,a)}})}(),function(){function t(t,i,s,n){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(n=s,s=i,i={}),e.isFunction(s)&&(n=s,s=null),i&&e.extend(t,i),s=s||i.duration,t.duration=e.fx.off?0:"number"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,t.complete=n||i.complete,t}function i(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.4",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(y+t[i],e[0].style[t[i]])},restore:function(e,t){var i,s;for(s=0;t.length>s;s++)null!==t[s]&&(i=e.data(y+t[s]),void 0===i&&(i=""),e.css(t[s],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,s;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=e[1]/t.width}return{x:s,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},s=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return t.wrap(s),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),s=t.parent(),"static"===t.css("position")?(s.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,s){i[s]=t.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(n),s.css(i).show()},removeWrapper:function(t){var i=document.activeElement;
return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,s,n){return n=n||{},e.each(i,function(e,i){var a=t.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(a)&&a.call(n[0]),e.isFunction(t)&&t()}var n=e(this),a=s.complete,r=s.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),i()):o.call(n[0],s,i)}var s=t.apply(this,arguments),n=s.mode,a=s.queue,o=e.effects.effect[s.effect];return e.fx.off||!o?n?this[n](s.duration,s.complete):this.each(function(){s.complete&&s.complete.call(this)}):a===!1?this.each(i):this.queue(a||"fx",i)},show:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(s){if(i(s)||"boolean"==typeof s)return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),s=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(s=[parseFloat(i),t])}),s}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}(),e.effects,e.effects.effect.blind=function(t,i){var s,n,a,o=e(this),r=/up|down|vertical/,h=/up|left|vertical|horizontal/,l=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(o,t.mode||"hide"),d=t.direction||"up",c=r.test(d),p=c?"height":"width",f=c?"top":"left",m=h.test(d),g={},v="show"===u;o.parent().is(".ui-effects-wrapper")?e.effects.save(o.parent(),l):e.effects.save(o,l),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n=s[p](),a=parseFloat(s.css(f))||0,g[p]=v?n:0,m||(o.css(c?"bottom":"right",0).css(c?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:n+a),v&&(s.css(p,0),m||s.css(f,a+n)),s.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===u&&o.hide(),e.effects.restore(o,l),e.effects.removeWrapper(o),i()}})},e.effects.effect.bounce=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"effect"),l="hide"===h,u="show"===h,d=t.direction||"up",c=t.distance,p=t.times||5,f=2*p+(u||l?1:0),m=t.duration/f,g=t.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,b=o.queue(),_=b.length;for((u||l)&&r.push("opacity"),e.effects.save(o,r),o.show(),e.effects.createWrapper(o),c||(c=o["top"===v?"outerHeight":"outerWidth"]()/3),u&&(a={opacity:1},a[v]=0,o.css("opacity",0).css(v,y?2*-c:2*c).animate(a,m,g)),l&&(c/=Math.pow(2,p-1)),a={},a[v]=0,s=0;p>s;s++)n={},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g).animate(a,m,g),c=l?2*c:c/2;l&&(n={opacity:0},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g)),o.queue(function(){l&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,f+1))),o.dequeue()},e.effects.effect.clip=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"hide"),l="show"===h,u=t.direction||"vertical",d="vertical"===u,c=d?"height":"width",p=d?"top":"left",f={};e.effects.save(o,r),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n="IMG"===o[0].tagName?s:o,a=n[c](),l&&(n.css(c,0),n.css(p,a/2)),f[c]=l?a:0,f[p]=l?0:a/2,n.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})},e.effects.effect.drop=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(n,t.mode||"hide"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h?"pos":"neg",d={opacity:r?1:0};e.effects.save(n,a),n.show(),e.effects.createWrapper(n),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(l,"pos"===u?-s:s),d[l]=(r?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.explode=function(t,i){function s(){b.push(this),b.length===d*c&&n()}function n(){p.css({visibility:"visible"}),e(b).remove(),m||p.hide(),i()}var a,o,r,h,l,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=d,p=e(this),f=e.effects.setMode(p,t.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/c),y=Math.ceil(p.outerHeight()/d),b=[];for(a=0;d>a;a++)for(h=g.top+a*y,u=a-(d-1)/2,o=0;c>o;o++)r=g.left+o*v,l=o-(c-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-a*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:r+(m?l*v:0),top:h+(m?u*y:0),opacity:m?0:1}).animate({left:r+(m?0:l*v),top:h+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,s)},e.effects.effect.fade=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.easing,complete:i})},e.effects.effect.fold=function(t,i){var s,n,a=e(this),o=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(a,t.mode||"hide"),h="show"===r,l="hide"===r,u=t.size||15,d=/([0-9]+)%/.exec(u),c=!!t.horizFirst,p=h!==c,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(a,o),a.show(),s=e.effects.createWrapper(a).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],d&&(u=parseInt(d[1],10)/100*n[l?0:1]),h&&s.css(c?{height:0,width:u}:{height:u,width:0}),g[f[0]]=h?n[0]:u,v[f[1]]=h?n[1]:0,s.animate(g,m,t.easing).animate(v,m,t.easing,function(){l&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()})},e.effects.effect.highlight=function(t,i){var s=e(this),n=["backgroundImage","backgroundColor","opacity"],a=e.effects.setMode(s,t.mode||"show"),o={backgroundColor:s.css("backgroundColor")};"hide"===a&&(o.opacity=0),e.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&s.hide(),e.effects.restore(s,n),i()}})},e.effects.effect.size=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],h=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],u=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),f=t.restore||"effect"!==p,m=t.scale||"both",g=t.origin||["middle","center"],v=o.css("position"),y=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===p?(o.from=t.to||b,o.to=t.from||s):(o.from=t.from||("show"===p?b:s),o.to=t.to||("hide"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},("box"===m||"both"===m)&&(a.from.y!==a.to.y&&(y=y.concat(d),o.from=e.effects.setTransition(o,d,a.from.y,o.from),o.to=e.effects.setTransition(o,d,a.to.y,o.to)),a.from.x!==a.to.x&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,a.from.x,o.from),o.to=e.effects.setTransition(o,c,a.to.x,o.to))),("content"===m||"both"===m)&&a.from.y!==a.to.y&&(y=y.concat(u).concat(l),o.from=e.effects.setTransition(o,u,a.from.y,o.from),o.to=e.effects.setTransition(o,u,a.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(n=e.effects.getBaseline(g,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),("content"===m||"both"===m)&&(d=d.concat(["marginTop","marginBottom"]).concat(u),c=c.concat(["marginLeft","marginRight"]),l=r.concat(d).concat(c),o.find("*[width]").each(function(){var i=e(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&e.effects.save(i,l),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=e.effects.setTransition(i,d,a.from.y,i.from),i.to=e.effects.setTransition(i,d,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=e.effects.setTransition(i,c,a.from.x,i.from),i.to=e.effects.setTransition(i,c,a.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,l)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),e.effects.restore(o,y),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,i){var s=parseInt(i,10),n=e?o.to.left:o.to.top;return"auto"===i?n+"px":s+n+"px"})})),e.effects.removeWrapper(o),i()}})},e.effects.effect.scale=function(t,i){var s=e(this),n=e.extend(!0,{},t),a=e.effects.setMode(s,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===a?0:100),r=t.direction||"both",h=t.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},u={y:"horizontal"!==r?o/100:1,x:"vertical"!==r?o/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==a&&(n.origin=h||["middle","center"],n.restore=!0),n.from=t.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*u.y,width:l.width*u.x,outerHeight:l.outerHeight*u.y,outerWidth:l.outerWidth*u.x},n.fade&&("show"===a&&(n.from.opacity=0,n.to.opacity=1),"hide"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},e.effects.effect.puff=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"hide"),a="hide"===n,o=parseInt(t.percent,10)||150,r=o/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(t)},e.effects.effect.pulsate=function(t,i){var s,n=e(this),a=e.effects.setMode(n,t.mode||"show"),o="show"===a,r="hide"===a,h=o||"hide"===a,l=2*(t.times||5)+(h?1:0),u=t.duration/l,d=0,c=n.queue(),p=c.length;for((o||!n.is(":visible"))&&(n.css("opacity",0).show(),d=1),s=1;l>s;s++)n.animate({opacity:d},u,t.easing),d=1-d;n.animate({opacity:d},u,t.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&c.splice.apply(c,[1,0].concat(c.splice(p,l+1))),n.dequeue()},e.effects.effect.shake=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(n,t.mode||"effect"),r=t.direction||"left",h=t.distance||20,l=t.times||3,u=2*l+1,d=Math.round(t.duration/u),c="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},m={},g={},v=n.queue(),y=v.length;for(e.effects.save(n,a),n.show(),e.effects.createWrapper(n),f[c]=(p?"-=":"+=")+h,m[c]=(p?"+=":"-=")+2*h,g[c]=(p?"-=":"+=")+2*h,n.animate(f,d,t.easing),s=1;l>s;s++)n.animate(m,d,t.easing).animate(g,d,t.easing);n.animate(m,d,t.easing).animate(f,d/2,t.easing).queue(function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),n.dequeue()},e.effects.effect.slide=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(n,t.mode||"show"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h,d={};e.effects.save(n,a),n.show(),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,u?isNaN(s)?"-"+s:-s:s),d[l]=(r?u?"+=":"-=":u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.transfer=function(t,i){var s=e(this),n=e(t.to),a="fixed"===n.css("position"),o=e("body"),r=a?o.scrollTop():0,h=a?o.scrollLeft():0,l=n.offset(),u={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},d=s.offset(),c=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-r,left:d.left-h,height:s.innerHeight(),width:s.innerWidth(),position:a?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){c.remove(),i()})}});


;(function($, window, document, undefined) {

	
	function Owl(element, options) {

		
		this.settings = null;

		
		this.options = $.extend({}, Owl.Defaults, options);

		
		this.$element = $(element);

		
		this._handlers = {};

		
		this._plugins = {};

		
		this._supress = {};

		
		this._current = null;

		
		this._speed = null;

		
		this._coordinates = [];

		
		this._breakpoint = null;

		
		this._width = null;

		
		this._items = [];

		
		this._clones = [];

		
		this._mergers = [];

		
		this._widths = [];

		
		this._invalidated = {};

		
		this._pipe = [];

		
		this._drag = {
			time: null,
			target: null,
			pointer: null,
			stage: {
				start: null,
				current: null
			},
			direction: null
		};

		
		this._states = {
			current: {},
			tags: {
				'initializing': [ 'busy' ],
				'animating': [ 'busy' ],
				'dragging': [ 'interacting' ]
			}
		};

		$.each([ 'onResize', 'onThrottledResize' ], $.proxy(function(i, handler) {
			this._handlers[handler] = $.proxy(this[handler], this);
		}, this));

		$.each(Owl.Plugins, $.proxy(function(key, plugin) {
			this._plugins[key.charAt(0).toLowerCase() + key.slice(1)]
				= new plugin(this);
		}, this));

		$.each(Owl.Workers, $.proxy(function(priority, worker) {
			this._pipe.push({
				'filter': worker.filter,
				'run': $.proxy(worker.run, this)
			});
		}, this));

		this.setup();
		this.initialize();
	}

	
	Owl.Defaults = {
		items: 3,
		loop: false,
		center: false,
		rewind: false,

		mouseDrag: true,
		touchDrag: true,
		pullDrag: true,
		freeDrag: false,

		margin: 0,
		stagePadding: 0,

		merge: false,
		mergeFit: true,
		autoWidth: false,

		startPosition: 0,
		rtl: false,

		smartSpeed: 250,
		fluidSpeed: false,
		dragEndSpeed: false,

		responsive: {},
		responsiveRefreshRate: 200,
		responsiveBaseElement: window,

		fallbackEasing: 'swing',

		info: false,

		nestedItemSelector: false,
		itemElement: 'div',
		stageElement: 'div',

		refreshClass: 'owl-refresh',
		loadedClass: 'owl-loaded',
		loadingClass: 'owl-loading',
		rtlClass: 'owl-rtl',
		responsiveClass: 'owl-responsive',
		dragClass: 'owl-drag',
		itemClass: 'owl-item',
		stageClass: 'owl-stage',
		stageOuterClass: 'owl-stage-outer',
		grabClass: 'owl-grab',
		triggerPStop:false
	};

	
	Owl.Width = {
		Default: 'default',
		Inner: 'inner',
		Outer: 'outer'
	};

	
	Owl.Type = {
		Event: 'event',
		State: 'state'
	};

	
	Owl.Plugins = {};

	
	Owl.Workers = [ {
		filter: [ 'width', 'settings' ],
		run: function() {
			this._width = this.$element.width();
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			cache.current = this._items && this._items[this.relative(this._current)];
		}
	}, {
		filter: [ 'items', 'settings' ],
		run: function() {
			this.$stage.children('.cloned').remove();
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			var margin = this.settings.margin || '',
				grid = !this.settings.autoWidth,
				rtl = this.settings.rtl,
				css = {
					'width': 'auto',
					'margin-left': rtl ? margin : '',
					'margin-right': rtl ? '' : margin
				};

			!grid && this.$stage.children().css(css);

			cache.css = css;
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			var width = (this.width() / this.settings.items).toFixed(3) - this.settings.margin,
				merge = null,
				iterator = this._items.length,
				grid = !this.settings.autoWidth,
				widths = [];

			cache.items = {
				merge: false,
				width: width
			};

			while (iterator--) {
				merge = this._mergers[iterator];
				merge = this.settings.mergeFit && Math.min(merge, this.settings.items) || merge;

				cache.items.merge = merge > 1 || cache.items.merge;

				widths[iterator] = !grid ? this._items[iterator].width() : width * merge;
			}

			this._widths = widths;
		}
	}, {
		filter: [ 'items', 'settings' ],
		run: function() {
			var clones = [],
				items = this._items,
				settings = this.settings,
				// TODO: Should be computed from number of min width items in stage
				view = Math.max(settings.items * 2, 4),
				size = Math.ceil(items.length / 2) * 2,
				repeat = settings.loop && items.length ? settings.rewind ? view : Math.max(view, size) : 0,
				append = '',
				prepend = '';

			repeat /= 2;

			while (repeat--) {
				// Switch to only using appended clones
				clones.push(this.normalize(clones.length / 2, true));
				append = append + items[clones[clones.length - 1]][0].outerHTML;
				clones.push(this.normalize(items.length - 1 - (clones.length - 1) / 2, true));
				prepend = items[clones[clones.length - 1]][0].outerHTML + prepend;
			}

			this._clones = clones;

			$(append).addClass('cloned').appendTo(this.$stage);
			$(prepend).addClass('cloned').prependTo(this.$stage);
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function() {
			var rtl = this.settings.rtl ? 1 : -1,
				size = this._clones.length + this._items.length,
				iterator = -1,
				previous = 0,
				current = 0,
				coordinates = [];

			while (++iterator < size) {
				previous = coordinates[iterator - 1] || 0;
				current = this._widths[this.relative(iterator)] + this.settings.margin;
				coordinates.push(previous + current * rtl);
			}

			this._coordinates = coordinates;
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function() {
			var padding = this.settings.stagePadding,
				coordinates = this._coordinates,
				css = {
					'width': Math.ceil(Math.abs(coordinates[coordinates.length - 1])) + padding * 2,
					'padding-left': padding || '',
					'padding-right': padding || ''
				};

			this.$stage.css(css);
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			var iterator = this._coordinates.length,
				grid = !this.settings.autoWidth,
				items = this.$stage.children();

			if (grid && cache.items.merge) {
				while (iterator--) {
					cache.css.width = this._widths[this.relative(iterator)];
					items.eq(iterator).css(cache.css);
				}
			} else if (grid) {
				cache.css.width = cache.items.width;
				items.css(cache.css);
			}
		}
	}, {
		filter: [ 'items' ],
		run: function() {
			this._coordinates.length < 1 && this.$stage.removeAttr('style');
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			cache.current = cache.current ? this.$stage.children().index(cache.current) : 0;
			cache.current = Math.max(this.minimum(), Math.min(this.maximum(), cache.current));
			this.reset(cache.current);
		}
	}, {
		filter: [ 'position' ],
		run: function() {
			this.animate(this.coordinates(this._current));
		}
	}, {
		filter: [ 'width', 'position', 'items', 'settings' ],
		run: function() {
			var rtl = this.settings.rtl ? 1 : -1,
				padding = this.settings.stagePadding * 2,
				begin = this.coordinates(this.current()) + padding,
				end = begin + this.width() * rtl,
				inner, outer, matches = [], i, n;

			for (i = 0, n = this._coordinates.length; i < n; i++) {
				inner = this._coordinates[i - 1] || 0;
				outer = Math.abs(this._coordinates[i]) + padding * rtl;

				if ((this.op(inner, '<=', begin) && (this.op(inner, '>', end)))
					|| (this.op(outer, '<', begin) && this.op(outer, '>', end))) {
					matches.push(i);
				}
			}

			this.$stage.children('.active').removeClass('active');
			this.$stage.children(':eq(' + matches.join('), :eq(') + ')').addClass('active');

			if (this.settings.center) {
				this.$stage.children('.center').removeClass('center');
				this.$stage.children().eq(this.current()).addClass('center');
			}
		}
	} ];

	
	Owl.prototype.initialize = function() {
		this.enter('initializing');
		this.trigger('initialize');

		this.$element.toggleClass(this.settings.rtlClass, this.settings.rtl);

		if (this.settings.autoWidth && !this.is('pre-loading')) {
			var imgs, nestedSelector, width;
			imgs = this.$element.find('img');
			nestedSelector = this.settings.nestedItemSelector ? '.' + this.settings.nestedItemSelector : undefined;
			width = this.$element.children(nestedSelector).width();

			if (imgs.length && width <= 0) {
				this.preloadAutoWidthImages(imgs);
			}
		}

		this.$element.addClass(this.options.loadingClass);

		// create stage
		this.$stage = $('<' + this.settings.stageElement + ' class="' + this.settings.stageClass + '"/>')
			.wrap('<div class="' + this.settings.stageOuterClass + '"/>');

		// append stage
		this.$element.append(this.$stage.parent());

		// append content
		this.replace(this.$element.children().not(this.$stage.parent()));

		// check visibility
		if (this.$element.is(':visible')) {
			// update view
			this.refresh();
		} else {
			// invalidate width
			this.invalidate('width');
		}

		this.$element
			.removeClass(this.options.loadingClass)
			.addClass(this.options.loadedClass);

		// register event handlers
		this.registerEventHandlers();

		this.leave('initializing');
		this.trigger('initialized');
	};

	
	Owl.prototype.setup = function() {
		var viewport = this.viewport(),
			overwrites = this.options.responsive,
			match = -1,
			settings = null;

		if (!overwrites) {
			settings = $.extend({}, this.options);
		} else {
			$.each(overwrites, function(breakpoint) {
				if (breakpoint <= viewport && breakpoint > match) {
					match = Number(breakpoint);
				}
			});

			settings = $.extend({}, this.options, overwrites[match]);
			if (typeof settings.stagePadding === 'function') {
				settings.stagePadding = settings.stagePadding();
			}
			delete settings.responsive;

			// responsive class
			if (settings.responsiveClass) {
				this.$element.attr('class',
					this.$element.attr('class').replace(new RegExp('(' + this.options.responsiveClass + '-)\\S+\\s', 'g'), '$1' + match)
				);
			}
		}

		this.trigger('change', { property: { name: 'settings', value: settings } });
		this._breakpoint = match;
		this.settings = settings;
		this.invalidate('settings');
		this.trigger('changed', { property: { name: 'settings', value: this.settings } });
	};

	
	Owl.prototype.optionsLogic = function() {
		if (this.settings.autoWidth) {
			this.settings.stagePadding = false;
			this.settings.merge = false;
		}
	};

	
	Owl.prototype.prepare = function(item) {
		var event = this.trigger('prepare', { content: item });

		if (!event.data) {
			event.data = $('<' + this.settings.itemElement + '/>')
				.addClass(this.options.itemClass).append(item)
		}

		this.trigger('prepared', { content: event.data });

		return event.data;
	};

	
	Owl.prototype.update = function() {
		var i = 0,
			n = this._pipe.length,
			filter = $.proxy(function(p) { return this[p] }, this._invalidated),
			cache = {};

		while (i < n) {
			if (this._invalidated.all || $.grep(this._pipe[i].filter, filter).length > 0) {
				this._pipe[i].run(cache);
			}
			i++;
		}

		this._invalidated = {};

		!this.is('valid') && this.enter('valid');
	};

	
	Owl.prototype.width = function(dimension) {
		dimension = dimension || Owl.Width.Default;
		switch (dimension) {
			case Owl.Width.Inner:
			case Owl.Width.Outer:
				return this._width;
			default:
				return this._width - this.settings.stagePadding * 2 + this.settings.margin;
		}
	};

	
	Owl.prototype.refresh = function() {
		this.enter('refreshing');
		this.trigger('refresh');

		this.setup();

		this.optionsLogic();

		this.$element.addClass(this.options.refreshClass);

		this.update();

		this.$element.removeClass(this.options.refreshClass);

		this.leave('refreshing');
		this.trigger('refreshed');
	};

	
	Owl.prototype.onThrottledResize = function() {
		window.clearTimeout(this.resizeTimer);
		this.resizeTimer = window.setTimeout(this._handlers.onResize, this.settings.responsiveRefreshRate);
	};

	
	Owl.prototype.onResize = function() {
		if (!this._items.length) {
			return false;
		}

		if (this._width === this.$element.width()) {
			return false;
		}

		if (!this.$element.is(':visible')) {
			return false;
		}

		this.enter('resizing');

		if (this.trigger('resize').isDefaultPrevented()) {
			this.leave('resizing');
			return false;
		}

		this.invalidate('width');

		this.refresh();

		this.leave('resizing');
		this.trigger('resized');
	};

	
	Owl.prototype.registerEventHandlers = function() {
		if ($.support.transition) {
			this.$stage.on($.support.transition.end + '.owl.core', $.proxy(this.onTransitionEnd, this));
		}

		if (this.settings.responsive !== false) {
			this.on(window, 'resize', this._handlers.onThrottledResize);
		}

		if (this.settings.mouseDrag) {
			this.$element.addClass(this.options.dragClass);
			this.$stage.on('mousedown.owl.core', $.proxy(this.onDragStart, this));
			this.$stage.on('dragstart.owl.core selectstart.owl.core', function() { return false });
		}

		if (this.settings.touchDrag){
			this.$stage.on('touchstart.owl.core', $.proxy(this.onDragStart, this));
			this.$stage.on('touchcancel.owl.core', $.proxy(this.onDragEnd, this));
		}
	};

	
	Owl.prototype.onDragStart = function(event) {
		var stage = null;

		if (event.which === 3) {
			return;
		}

		if ($.support.transform) {
			stage = this.$stage.css('transform').replace(/.*\(|\)| /g, '').split(',');
			stage = {
				x: stage[stage.length === 16 ? 12 : 4],
				y: stage[stage.length === 16 ? 13 : 5]
			};
		} else {
			stage = this.$stage.position();
			stage = {
				x: this.settings.rtl ?
					stage.left + this.$stage.width() - this.width() + this.settings.margin :
					stage.left,
				y: stage.top
			};
		}

		if (this.is('animating')) {
			$.support.transform ? this.animate(stage.x) : this.$stage.stop()
			this.invalidate('position');
		}

		this.$element.toggleClass(this.options.grabClass, event.type === 'mousedown');

		this.speed(0);

		this._drag.time = new Date().getTime();
		this._drag.target = $(event.target);
		this._drag.stage.start = stage;
		this._drag.stage.current = stage;
		this._drag.pointer = this.pointer(event);

		$(document).on('mouseup.owl.core touchend.owl.core', $.proxy(this.onDragEnd, this));

		$(document).one('mousemove.owl.core touchmove.owl.core', $.proxy(function(event) {
			var delta = this.difference(this._drag.pointer, this.pointer(event));

			$(document).on('mousemove.owl.core touchmove.owl.core', $.proxy(this.onDragMove, this));

			if (Math.abs(delta.x) < Math.abs(delta.y) && this.is('valid')) {
				return;
			}

			event.preventDefault();

			this.enter('dragging');
			this.trigger('drag');
		}, this));
	};

	
	Owl.prototype.onDragMove = function(event) {
		var minimum = null,
			maximum = null,
			pull = null,
			delta = this.difference(this._drag.pointer, this.pointer(event)),
			stage = this.difference(this._drag.stage.start, delta);

		if (!this.is('dragging')) {
			return;
		}

		event.preventDefault();

		if (this.settings.loop) {
			minimum = this.coordinates(this.minimum());
			maximum = this.coordinates(this.maximum() + 1) - minimum;
			stage.x = (((stage.x - minimum) % maximum + maximum) % maximum) + minimum;
		} else {
			minimum = this.settings.rtl ? this.coordinates(this.maximum()) : this.coordinates(this.minimum());
			maximum = this.settings.rtl ? this.coordinates(this.minimum()) : this.coordinates(this.maximum());
			pull = this.settings.pullDrag ? -1 * delta.x / 5 : 0;
			stage.x = Math.max(Math.min(stage.x, minimum + pull), maximum + pull);
		}

		this._drag.stage.current = stage;

		this.animate(stage.x);
	};

	
	Owl.prototype.onDragEnd = function(event) {
		var delta = this.difference(this._drag.pointer, this.pointer(event)),
			stage = this._drag.stage.current,
			direction = delta.x > 0 ^ this.settings.rtl ? 'left' : 'right';

		$(document).off('.owl.core');

		this.$element.removeClass(this.options.grabClass);

		if (delta.x !== 0 && this.is('dragging') || !this.is('valid')) {
			this.speed(this.settings.dragEndSpeed || this.settings.smartSpeed);
			this.current(this.closest(stage.x, delta.x !== 0 ? direction : this._drag.direction));
			this.invalidate('position');
			this.update();

			this._drag.direction = direction;

			if (Math.abs(delta.x) > 3 || new Date().getTime() - this._drag.time > 300) {
				this._drag.target.one('click.owl.core', function() { return false; });
			}
		}

		if (!this.is('dragging')) {
			return;
		}

		this.leave('dragging');
		this.trigger('dragged');
	};

	
	Owl.prototype.closest = function(coordinate, direction) {
		var position = -1,
			pull = 30,
			width = this.width(),
			coordinates = this.coordinates();

		if (!this.settings.freeDrag) {
			// check closest item
			$.each(coordinates, $.proxy(function(index, value) {
				// on a left pull, check on current index
				if (direction === 'left' && coordinate > value - pull && coordinate < value + pull) {
					position = index;
				// on a right pull, check on previous index
				// to do so, subtract width from value and set position = index + 1
				} else if (direction === 'right' && coordinate > value - width - pull && coordinate < value - width + pull) {
					position = index + 1;
				} else if (this.op(coordinate, '<', value)
					&& this.op(coordinate, '>', coordinates[index + 1] || value - width)) {
					position = direction === 'left' ? index + 1 : index;
				}
				return position === -1;
			}, this));
		}

		if (!this.settings.loop) {
			// non loop boundries
			if (this.op(coordinate, '>', coordinates[this.minimum()])) {
				position = coordinate = this.minimum();
			} else if (this.op(coordinate, '<', coordinates[this.maximum()])) {
				position = coordinate = this.maximum();
			}
		}

		return position;
	};

	
	Owl.prototype.animate = function(coordinate) {
		var animate = this.speed() > 0;

		this.is('animating') && this.onTransitionEnd();

		if (animate) {
			this.enter('animating');
			this.trigger('translate');
		}

		if ($.support.transform3d && $.support.transition) {
			this.$stage.css({
				transform: 'translate3d(' + coordinate + 'px,0px,0px)',
				transition: (this.speed() / 1000) + 's'
			});
		} else if (animate) {
			this.$stage.animate({
				left: coordinate + 'px'
			}, this.speed(), this.settings.fallbackEasing, $.proxy(this.onTransitionEnd, this));
		} else {
			this.$stage.css({
				left: coordinate + 'px'
			});
		}
	};

	
	Owl.prototype.is = function(state) {
		return this._states.current[state] && this._states.current[state] > 0;
	};

	
	Owl.prototype.current = function(position) {
		if (position === undefined) {
			return this._current;
		}

		if (this._items.length === 0) {
			return undefined;
		}

		position = this.normalize(position);

		if (this._current !== position) {
			var event = this.trigger('change', { property: { name: 'position', value: position } });

			if (event.data !== undefined) {
				position = this.normalize(event.data);
			}

			this._current = position;

			this.invalidate('position');

			this.trigger('changed', { property: { name: 'position', value: this._current } });
		}

		return this._current;
	};

	
	Owl.prototype.invalidate = function(part) {
		if ($.type(part) === 'string') {
			this._invalidated[part] = true;
			this.is('valid') && this.leave('valid');
		}
		return $.map(this._invalidated, function(v, i) { return i });
	};

	
	Owl.prototype.reset = function(position) {
		position = this.normalize(position);

		if (position === undefined) {
			return;
		}

		this._speed = 0;
		this._current = position;

		this.suppress([ 'translate', 'translated' ]);

		this.animate(this.coordinates(position));

		this.release([ 'translate', 'translated' ]);
	};

	
	Owl.prototype.normalize = function(position, relative) {
		var n = this._items.length,
			m = relative ? 0 : this._clones.length;

		if (!this.isNumeric(position) || n < 1) {
			position = undefined;
		} else if (position < 0 || position >= n + m) {
			position = ((position - m / 2) % n + n) % n + m / 2;
		}

		return position;
	};

	
	Owl.prototype.relative = function(position) {
		position -= this._clones.length / 2;
		return this.normalize(position, true);
	};

	
	Owl.prototype.maximum = function(relative) {
		var settings = this.settings,
			maximum = this._coordinates.length,
			iterator,
			reciprocalItemsWidth,
			elementWidth;

		if (settings.loop) {
			maximum = this._clones.length / 2 + this._items.length - 1;
		} else if (settings.autoWidth || settings.merge) {
			iterator = this._items.length;
			reciprocalItemsWidth = this._items[--iterator].width();
			elementWidth = this.$element.width();
			while (iterator--) {
				reciprocalItemsWidth += this._items[iterator].width() + this.settings.margin;
				if (reciprocalItemsWidth > elementWidth) {
					break;
				}
			}
			maximum = iterator + 1;
		} else if (settings.center) {
			maximum = this._items.length - 1;
		} else {
			maximum = this._items.length - settings.items;
		}

		if (relative) {
			maximum -= this._clones.length / 2;
		}

		return Math.max(maximum, 0);
	};

	
	Owl.prototype.minimum = function(relative) {
		return relative ? 0 : this._clones.length / 2;
	};

	
	Owl.prototype.items = function(position) {
		if (position === undefined) {
			return this._items.slice();
		}

		position = this.normalize(position, true);
		return this._items[position];
	};

	
	Owl.prototype.mergers = function(position) {
		if (position === undefined) {
			return this._mergers.slice();
		}

		position = this.normalize(position, true);
		return this._mergers[position];
	};

	
	Owl.prototype.clones = function(position) {
		var odd = this._clones.length / 2,
			even = odd + this._items.length,
			map = function(index) { return index % 2 === 0 ? even + index / 2 : odd - (index + 1) / 2 };

		if (position === undefined) {
			return $.map(this._clones, function(v, i) { return map(i) });
		}

		return $.map(this._clones, function(v, i) { return v === position ? map(i) : null });
	};

	
	Owl.prototype.speed = function(speed) {
		if (speed !== undefined) {
			this._speed = speed;
		}

		return this._speed;
	};

	
	Owl.prototype.coordinates = function(position) {
		var multiplier = 1,
			newPosition = position - 1,
			coordinate;

		if (position === undefined) {
			return $.map(this._coordinates, $.proxy(function(coordinate, index) {
				return this.coordinates(index);
			}, this));
		}

		if (this.settings.center) {
			if (this.settings.rtl) {
				multiplier = -1;
				newPosition = position + 1;
			}

			coordinate = this._coordinates[position];
			coordinate += (this.width() - coordinate + (this._coordinates[newPosition] || 0)) / 2 * multiplier;
		} else {
			coordinate = this._coordinates[newPosition] || 0;
		}

		coordinate = Math.ceil(coordinate);

		return coordinate;
	};

	
	Owl.prototype.duration = function(from, to, factor) {
		if (factor === 0) {
			return 0;
		}

		return Math.min(Math.max(Math.abs(to - from), 1), 6) * Math.abs((factor || this.settings.smartSpeed));
	};

	
	Owl.prototype.to = function(position, speed) {
		var current = this.current(),
			revert = null,
			distance = position - this.relative(current),
			direction = (distance > 0) - (distance < 0),
			items = this._items.length,
			minimum = this.minimum(),
			maximum = this.maximum();

		if (this.settings.loop) {
			if (!this.settings.rewind && Math.abs(distance) > items / 2) {
				distance += direction * -1 * items;
			}

			position = current + distance;
			revert = ((position - minimum) % items + items) % items + minimum;

			if (revert !== position && revert - distance <= maximum && revert - distance > 0) {
				current = revert - distance;
				position = revert;
				this.reset(current);
			}
		} else if (this.settings.rewind) {
			maximum += 1;
			position = (position % maximum + maximum) % maximum;
		} else {
			position = Math.max(minimum, Math.min(maximum, position));
		}

		this.speed(this.duration(current, position, speed));
		this.current(position);

		if (this.$element.is(':visible')) {
			this.update();
		}
	};

	
	Owl.prototype.next = function(speed) {
		speed = speed || false;
		this.to(this.relative(this.current()) + 1, speed);
	};

	
	Owl.prototype.prev = function(speed) {
		speed = speed || false;
		this.to(this.relative(this.current()) - 1, speed);
	};

	
	Owl.prototype.onTransitionEnd = function(event) {

		// if css2 animation then event object is undefined
		if (event !== undefined) {
			event.stopPropagation();

			// Catch only owl-stage transitionEnd event
			if ((event.target || event.srcElement || event.originalTarget) !== this.$stage.get(0)) {
				return false;
			}
		}

		this.leave('animating');
		this.trigger('translated');
	};

	
	Owl.prototype.viewport = function() {
		var width;
		if (this.options.responsiveBaseElement !== window) {
			width = $(this.options.responsiveBaseElement).width();
		} else if (window.innerWidth) {
			width = window.innerWidth;
		} else if (document.documentElement && document.documentElement.clientWidth) {
			width = document.documentElement.clientWidth;
		} else {
			console.warn('Can not detect viewport width.');
		}
		return width;
	};

	
	Owl.prototype.replace = function(content) {
		this.$stage.empty();
		this._items = [];

		if (content) {
			content = (content instanceof jQuery) ? content : $(content);
		}

		if (this.settings.nestedItemSelector) {
			content = content.find('.' + this.settings.nestedItemSelector);
		}

		content.filter(function() {
			return this.nodeType === 1;
		}).each($.proxy(function(index, item) {
			item = this.prepare(item);
			this.$stage.append(item);
			this._items.push(item);
			this._mergers.push(item.find('[data-merge]').addBack('[data-merge]').attr('data-merge') * 1 || 1);
		}, this));

		this.reset(this.isNumeric(this.settings.startPosition) ? this.settings.startPosition : 0);

		this.invalidate('items');
	};

	
	Owl.prototype.add = function(content, position) {
		var current = this.relative(this._current);

		position = position === undefined ? this._items.length : this.normalize(position, true);
		content = content instanceof jQuery ? content : $(content);

		this.trigger('add', { content: content, position: position });

		content = this.prepare(content);

		if (this._items.length === 0 || position === this._items.length) {
			this._items.length === 0 && this.$stage.append(content);
			this._items.length !== 0 && this._items[position - 1].after(content);
			this._items.push(content);
			this._mergers.push(content.find('[data-merge]').addBack('[data-merge]').attr('data-merge') * 1 || 1);
		} else {
			this._items[position].before(content);
			this._items.splice(position, 0, content);
			this._mergers.splice(position, 0, content.find('[data-merge]').addBack('[data-merge]').attr('data-merge') * 1 || 1);
		}

		this._items[current] && this.reset(this._items[current].index());

		this.invalidate('items');

		this.trigger('added', { content: content, position: position });
	};

	
	Owl.prototype.remove = function(position) {
		position = this.normalize(position, true);

		if (position === undefined) {
			return;
		}

		this.trigger('remove', { content: this._items[position], position: position });

		this._items[position].remove();
		this._items.splice(position, 1);
		this._mergers.splice(position, 1);

		this.invalidate('items');

		this.trigger('removed', { content: null, position: position });
	};

	
	Owl.prototype.preloadAutoWidthImages = function(images) {
		images.each($.proxy(function(i, element) {
			this.enter('pre-loading');
			element = $(element);
			$(new Image()).one('load', $.proxy(function(e) {
				element.attr('src', e.target.src);
				element.css('opacity', 1);
				this.leave('pre-loading');
				!this.is('pre-loading') && !this.is('initializing') && this.refresh();
			}, this)).attr('src', element.attr('src') || element.attr('data-src') || element.attr('data-src-retina'));
		}, this));
	};

	
	Owl.prototype.destroy = function() {

		this.$element.off('.owl.core');
		this.$stage.off('.owl.core');
		$(document).off('.owl.core');

		if (this.settings.responsive !== false) {
			window.clearTimeout(this.resizeTimer);
			this.off(window, 'resize', this._handlers.onThrottledResize);
		}

		for (var i in this._plugins) {
			this._plugins[i].destroy();
		}

		this.$stage.children('.cloned').remove();

		this.$stage.unwrap();
		this.$stage.children().contents().unwrap();
		this.$stage.children().unwrap();

		this.$element
			.removeClass(this.options.refreshClass)
			.removeClass(this.options.loadingClass)
			.removeClass(this.options.loadedClass)
			.removeClass(this.options.rtlClass)
			.removeClass(this.options.dragClass)
			.removeClass(this.options.grabClass)
			.attr('class', this.$element.attr('class').replace(new RegExp(this.options.responsiveClass + '-\\S+\\s', 'g'), ''))
			.removeData('owl.carousel');
	};

	
	Owl.prototype.op = function(a, o, b) {
		var rtl = this.settings.rtl;
		switch (o) {
			case '<':
				return rtl ? a > b : a < b;
			case '>':
				return rtl ? a < b : a > b;
			case '>=':
				return rtl ? a <= b : a >= b;
			case '<=':
				return rtl ? a >= b : a <= b;
			default:
				break;
		}
	};

	
	Owl.prototype.on = function(element, event, listener, capture) {
		if (element.addEventListener) {
			element.addEventListener(event, listener, capture);
		} else if (element.attachEvent) {
			element.attachEvent('on' + event, listener);
		}
	};

	
	Owl.prototype.off = function(element, event, listener, capture) {
		if (element.removeEventListener) {
			element.removeEventListener(event, listener, capture);
		} else if (element.detachEvent) {
			element.detachEvent('on' + event, listener);
		}
	};

	
	Owl.prototype.trigger = function(name, data, namespace, state, enter) {
		var status = {
			item: { count: this._items.length, index: this.current() }
		}, handler = $.camelCase(
			$.grep([ 'on', name, namespace ], function(v) { return v })
				.join('-').toLowerCase()
		), event = $.Event(
			[ name, 'owl', namespace || 'carousel' ].join('.').toLowerCase(),
			$.extend({ relatedTarget: this }, status, data)
		);

		if (!this._supress[name]) {
			$.each(this._plugins, function(name, plugin) {
				if (plugin.onTrigger) {
					plugin.onTrigger(event);
				}
			});

			this.register({ type: Owl.Type.Event, name: name });
			this.$element.trigger(event);

			if (this.settings && typeof this.settings[handler] === 'function') {
				this.settings[handler].call(this, event);
			}
		}

		return event;
	};

	
	Owl.prototype.enter = function(name) {
		$.each([ name ].concat(this._states.tags[name] || []), $.proxy(function(i, name) {
			if (this._states.current[name] === undefined) {
				this._states.current[name] = 0;
			}

			this._states.current[name]++;
		}, this));
	};

	
	Owl.prototype.leave = function(name) {
		$.each([ name ].concat(this._states.tags[name] || []), $.proxy(function(i, name) {
			this._states.current[name]--;
		}, this));
	};

	
	Owl.prototype.register = function(object) {
		if (object.type === Owl.Type.Event) {
			if (!$.event.special[object.name]) {
				$.event.special[object.name] = {};
			}

			if (!$.event.special[object.name].owl) {
				var _default = $.event.special[object.name]._default;
				$.event.special[object.name]._default = function(e) {
					if (_default && _default.apply && (!e.namespace || e.namespace.indexOf('owl') === -1)) {
						return _default.apply(this, arguments);
					}
					return e.namespace && e.namespace.indexOf('owl') > -1;
				};
				$.event.special[object.name].owl = true;
			}
		} else if (object.type === Owl.Type.State) {
			if (!this._states.tags[object.name]) {
				this._states.tags[object.name] = object.tags;
			} else {
				this._states.tags[object.name] = this._states.tags[object.name].concat(object.tags);
			}

			this._states.tags[object.name] = $.grep(this._states.tags[object.name], $.proxy(function(tag, i) {
				return $.inArray(tag, this._states.tags[object.name]) === i;
			}, this));
		}
	};

	
	Owl.prototype.suppress = function(events) {
		$.each(events, $.proxy(function(index, event) {
			this._supress[event] = true;
		}, this));
	};

	
	Owl.prototype.release = function(events) {
		$.each(events, $.proxy(function(index, event) {
			delete this._supress[event];
		}, this));
	};

	
	Owl.prototype.pointer = function(event) {
		var result = { x: null, y: null };

		event = event.originalEvent || event || window.event;

		event = event.touches && event.touches.length ?
			event.touches[0] : event.changedTouches && event.changedTouches.length ?
				event.changedTouches[0] : event;

		if (event.pageX) {
			result.x = event.pageX;
			result.y = event.pageY;
		} else {
			result.x = event.clientX;
			result.y = event.clientY;
		}

		return result;
	};

	
	Owl.prototype.isNumeric = function(number) {
		return !isNaN(parseFloat(number));
	};

	
	Owl.prototype.difference = function(first, second) {
		return {
			x: first.x - second.x,
			y: first.y - second.y
		};
	};

	
	$.fn.owlCarousel = function(option) {
		var args = Array.prototype.slice.call(arguments, 1);

		return this.each(function() {
			var $this = $(this),
				data = $this.data('owl.carousel');

			if (!data) {
				data = new Owl(this, typeof option == 'object' && option);
				$this.data('owl.carousel', data);

				$.each([
					'next', 'prev', 'to', 'destroy', 'refresh', 'replace', 'add', 'remove'
				], function(i, event) {
					data.register({ type: Owl.Type.Event, name: event });
					data.$element.on(event + '.owl.carousel.core', $.proxy(function(e) {
						if (e.namespace && e.relatedTarget !== this) {
							this.suppress([ event ]);
							data[event].apply(this, [].slice.call(arguments, 1));
							this.release([ event ]);
						}
					}, data));
				});
			}

			if (typeof option == 'string' && option.charAt(0) !== '_') {
				data[option].apply(data, args);
			}
		});
	};

	
	$.fn.owlCarousel.Constructor = Owl;

})(window.Zepto || window.jQuery, window, document);


;(function($, window, document, undefined) {

	
	var AutoRefresh = function(carousel) {
		
		this._core = carousel;

		
		this._interval = null;

		
		this._visible = null;

		
		this._handlers = {
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoRefresh) {
					this.watch();
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, AutoRefresh.Defaults, this._core.options);

		// register event handlers
		this._core.$element.on(this._handlers);
	};

	
	AutoRefresh.Defaults = {
		autoRefresh: true,
		autoRefreshInterval: 500
	};

	
	AutoRefresh.prototype.watch = function() {
		if (this._interval) {
			return;
		}

		this._visible = this._core.$element.is(':visible');
		this._interval = window.setInterval($.proxy(this.refresh, this), this._core.settings.autoRefreshInterval);
	};

	
	AutoRefresh.prototype.refresh = function() {
		if (this._core.$element.is(':visible') === this._visible) {
			return;
		}

		this._visible = !this._visible;

		this._core.$element.toggleClass('owl-hidden', !this._visible);

		this._visible && (this._core.invalidate('width') && this._core.refresh());
	};

	
	AutoRefresh.prototype.destroy = function() {
		var handler, property;

		window.clearInterval(this._interval);

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.AutoRefresh = AutoRefresh;

})(window.Zepto || window.jQuery, window, document);


;(function($, window, document, undefined) {

	
	var Lazy = function(carousel) {

		
		this._core = carousel;

		
		this._loaded = [];

		
		this._handlers = {
			'initialized.owl.carousel change.owl.carousel resized.owl.carousel': $.proxy(function(e) {
				if (!e.namespace) {
					return;
				}

				if (!this._core.settings || !this._core.settings.lazyLoad) {
					return;
				}

				if ((e.property && e.property.name == 'position') || e.type == 'initialized') {
					var settings = this._core.settings,
						n = (settings.center && Math.ceil(settings.items / 2) || settings.items),
						i = ((settings.center && n * -1) || 0),
						position = (e.property && e.property.value !== undefined ? e.property.value : this._core.current()) + i,
						clones = this._core.clones().length,
						load = $.proxy(function(i, v) { this.load(v) }, this);

					while (i++ < n) {
						this.load(clones / 2 + this._core.relative(position));
						clones && $.each(this._core.clones(this._core.relative(position)), load);
						position++;
					}
				}
			}, this)
		};

		// set the default options
		this._core.options = $.extend({}, Lazy.Defaults, this._core.options);

		// register event handler
		this._core.$element.on(this._handlers);
	};

	
	Lazy.Defaults = {
		lazyLoad: false
	};

	
	Lazy.prototype.load = function(position) {
		var $item = this._core.$stage.children().eq(position),
			$elements = $item && $item.find('.owl-lazy');

		if (!$elements || $.inArray($item.get(0), this._loaded) > -1) {
			return;
		}

		$elements.each($.proxy(function(index, element) {
			var $element = $(element), image,
				url = (window.devicePixelRatio > 1 && $element.attr('data-src-retina')) || $element.attr('data-src');

			this._core.trigger('load', { element: $element, url: url }, 'lazy');

			if ($element.is('img')) {
				$element.one('load.owl.lazy', $.proxy(function() {
					$element.css('opacity', 1);
					this._core.trigger('loaded', { element: $element, url: url }, 'lazy');
				}, this)).attr('src', url);
			} else {
				image = new Image();
				image.onload = $.proxy(function() {
					$element.css({
						'background-image': 'url("' + url + '")',
						'opacity': '1'
					});
					this._core.trigger('loaded', { element: $element, url: url }, 'lazy');
				}, this);
				image.src = url;
			}
		}, this));

		this._loaded.push($item.get(0));
	};

	
	Lazy.prototype.destroy = function() {
		var handler, property;

		for (handler in this.handlers) {
			this._core.$element.off(handler, this.handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Lazy = Lazy;

})(window.Zepto || window.jQuery, window, document);


;(function($, window, document, undefined) {

	
	var AutoHeight = function(carousel) {
		
		this._core = carousel;

		
		this._handlers = {
			'initialized.owl.carousel refreshed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoHeight) {
					this.update();
				}
			}, this),
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoHeight && e.property.name == 'position'){
					this.update();
				}
			}, this),
			'loaded.owl.lazy': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoHeight
					&& e.element.closest('.' + this._core.settings.itemClass).index() === this._core.current()) {
					this.update();
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, AutoHeight.Defaults, this._core.options);

		// register event handlers
		this._core.$element.on(this._handlers);
	};

	
	AutoHeight.Defaults = {
		autoHeight: false,
		autoHeightClass: 'owl-height'
	};

	
	AutoHeight.prototype.update = function() {
		var start = this._core._current,
			end = start + this._core.settings.items,
			visible = this._core.$stage.children().toArray().slice(start, end),
			heights = [],
			maxheight = 0;

		$.each(visible, function(index, item) {
			heights.push($(item).height());
		});

		maxheight = Math.max.apply(null, heights);

		this._core.$stage.parent()
			.height(maxheight)
			.addClass(this._core.settings.autoHeightClass);
	};

	AutoHeight.prototype.destroy = function() {
		var handler, property;

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.AutoHeight = AutoHeight;

})(window.Zepto || window.jQuery, window, document);


;(function($, window, document, undefined) {

	
	var Video = function(carousel) {
		
		this._core = carousel;

		
		this._videos = {};

		
		this._playing = null;

		
		this._handlers = {
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace) {
					this._core.register({ type: 'state', name: 'playing', tags: [ 'interacting' ] });
				}
			}, this),
			'resize.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.video && this.isInFullScreen()) {
					e.preventDefault();
				}
			}, this),
			'refreshed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.is('resizing')) {
					this._core.$stage.find('.cloned .owl-video-frame').remove();
				}
			}, this),
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name === 'position' && this._playing) {
					this.stop();
				}
			}, this),
			'prepared.owl.carousel': $.proxy(function(e) {
				if (!e.namespace) {
					return;
				}

				var $element = $(e.content).find('.owl-video');

				if ($element.length) {
					$element.css('display', 'none');
					this.fetch($element, $(e.content));
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, Video.Defaults, this._core.options);

		// register event handlers
		this._core.$element.on(this._handlers);

		this._core.$element.on('click.owl.video', '.owl-video-play-icon', $.proxy(function(e) {
			this.play(e);
		}, this));
	};

	
	Video.Defaults = {
		video: false,
		videoHeight: false,
		videoWidth: false
	};

	
	Video.prototype.fetch = function(target, item) {
			var type = (function() {
					if (target.attr('data-vimeo-id')) {
						return 'vimeo';
					} else if (target.attr('data-vzaar-id')) {
						return 'vzaar'
					} else {
						return 'youtube';
					}
				})(),
				id = target.attr('data-vimeo-id') || target.attr('data-youtube-id') || target.attr('data-vzaar-id'),
				width = target.attr('data-width') || this._core.settings.videoWidth,
				height = target.attr('data-height') || this._core.settings.videoHeight,
				url = target.attr('href');

		if (url) {

			

			id = url.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/);

			if (id[3].indexOf('youtu') > -1) {
				type = 'youtube';
			} else if (id[3].indexOf('vimeo') > -1) {
				type = 'vimeo';
			} else if (id[3].indexOf('vzaar') > -1) {
				type = 'vzaar';
			} else {
				throw new Error('Video URL not supported.');
			}
			id = id[6];
		} else {
			throw new Error('Missing video URL.');
		}

		this._videos[url] = {
			type: type,
			id: id,
			width: width,
			height: height
		};

		item.attr('data-video', url);

		this.thumbnail(target, this._videos[url]);
	};

	
	Video.prototype.thumbnail = function(target, video) {
		var tnLink,
			icon,
			path,
			dimensions = video.width && video.height ? 'style="width:' + video.width + 'px;height:' + video.height + 'px;"' : '',
			customTn = target.find('img'),
			srcType = 'src',
			lazyClass = '',
			settings = this._core.settings,
			create = function(path) {
				icon = '<div class="owl-video-play-icon"></div>';

				if (settings.lazyLoad) {
					tnLink = '<div class="owl-video-tn ' + lazyClass + '" ' + srcType + '="' + path + '"></div>';
				} else {
					tnLink = '<div class="owl-video-tn" style="opacity:1;background-image:url(' + path + ')"></div>';
				}
				target.after(tnLink);
				target.after(icon);
			};

		// wrap video content into owl-video-wrapper div
		target.wrap('<div class="owl-video-wrapper"' + dimensions + '></div>');

		if (this._core.settings.lazyLoad) {
			srcType = 'data-src';
			lazyClass = 'owl-lazy';
		}

		// custom thumbnail
		if (customTn.length) {
			create(customTn.attr(srcType));
			customTn.remove();
			return false;
		}

		if (video.type === 'youtube') {
			path = "//img.youtube.com/vi/" + video.id + "/hqdefault.jpg";
			create(path);
		} else if (video.type === 'vimeo') {
			$.ajax({
				type: 'GET',
				url: '//vimeo.com/api/v2/video/' + video.id + '.json',
				jsonp: 'callback',
				dataType: 'jsonp',
				success: function(data) {
					path = data[0].thumbnail_large;
					create(path);
				}
			});
		} else if (video.type === 'vzaar') {
			$.ajax({
				type: 'GET',
				url: '//vzaar.com/api/videos/' + video.id + '.json',
				jsonp: 'callback',
				dataType: 'jsonp',
				success: function(data) {
					path = data.framegrab_url;
					create(path);
				}
			});
		}
	};

	
	Video.prototype.stop = function() {
		this._core.trigger('stop', null, 'video');
		this._playing.find('.owl-video-frame').remove();
		this._playing.removeClass('owl-video-playing');
		this._playing = null;
		this._core.leave('playing');
		this._core.trigger('stopped', null, 'video');
	};

	
	Video.prototype.play = function(event) {
		var target = $(event.target),
			item = target.closest('.' + this._core.settings.itemClass),
			video = this._videos[item.attr('data-video')],
			width = video.width || '100%',
			height = video.height || this._core.$stage.height(),
			html;

		if (this._playing) {
			return;
		}

		this._core.enter('playing');
		this._core.trigger('play', null, 'video');

		item = this._core.items(this._core.relative(item.index()));

		this._core.reset(item.index());

		if (video.type === 'youtube') {
			html = '<iframe width="' + width + '" height="' + height + '" src="//www.youtube.com/embed/' +
				video.id + '?autoplay=1&rel=0&v=' + video.id + '" frameborder="0" allowfullscreen></iframe>';
		} else if (video.type === 'vimeo') {
			html = '<iframe src="//player.vimeo.com/video/' + video.id +
				'?autoplay=1" width="' + width + '" height="' + height +
				'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';
		} else if (video.type === 'vzaar') {
			html = '<iframe frameborder="0"' + 'height="' + height + '"' + 'width="' + width +
				'" allowfullscreen mozallowfullscreen webkitAllowFullScreen ' +
				'src="//view.vzaar.com/' + video.id + '/player?autoplay=true"></iframe>';
		}

		$('<div class="owl-video-frame">' + html + '</div>').insertAfter(item.find('.owl-video'));

		this._playing = item.addClass('owl-video-playing');
	};

	
	Video.prototype.isInFullScreen = function() {
		var element = document.fullscreenElement || document.mozFullScreenElement ||
				document.webkitFullscreenElement;

		return element && $(element).parent().hasClass('owl-video-frame');
	};

	
	Video.prototype.destroy = function() {
		var handler, property;

		this._core.$element.off('click.owl.video');

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Video = Video;

})(window.Zepto || window.jQuery, window, document);


;(function($, window, document, undefined) {

	
	var Animate = function(scope) {
		this.core = scope;
		this.core.options = $.extend({}, Animate.Defaults, this.core.options);
		this.swapping = true;
		this.previous = undefined;
		this.next = undefined;

		this.handlers = {
			'change.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name == 'position') {
					this.previous = this.core.current();
					this.next = e.property.value;
				}
			}, this),
			'drag.owl.carousel dragged.owl.carousel translated.owl.carousel': $.proxy(function(e) {
				if (e.namespace) {
					this.swapping = e.type == 'translated';
				}
			}, this),
			'translate.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this.swapping && (this.core.options.animateOut || this.core.options.animateIn)) {
					this.swap();
				}
			}, this)
		};

		this.core.$element.on(this.handlers);
	};

	
	Animate.Defaults = {
		animateOut: false,
		animateIn: false
	};

	
	Animate.prototype.swap = function() {

		if (this.core.settings.items !== 1) {
			return;
		}

		if (!$.support.animation || !$.support.transition) {
			return;
		}

		this.core.speed(0);

		var left,
			clear = $.proxy(this.clear, this),
			previous = this.core.$stage.children().eq(this.previous),
			next = this.core.$stage.children().eq(this.next),
			incoming = this.core.settings.animateIn,
			outgoing = this.core.settings.animateOut;

		if (this.core.current() === this.previous) {
			return;
		}

		if (outgoing) {
			left = this.core.coordinates(this.previous) - this.core.coordinates(this.next);
			previous.one($.support.animation.end, clear)
				.css( { 'left': left + 'px' } )
				.addClass('animated owl-animated-out')
				.addClass(outgoing);
		}

		if (incoming) {
			next.one($.support.animation.end, clear)
				.addClass('animated owl-animated-in')
				.addClass(incoming);
		}
	};

	Animate.prototype.clear = function(e) {
		$(e.target).css( { 'left': '' } )
			.removeClass('animated owl-animated-out owl-animated-in')
			.removeClass(this.core.settings.animateIn)
			.removeClass(this.core.settings.animateOut);
		this.core.onTransitionEnd();
	};

	
	Animate.prototype.destroy = function() {
		var handler, property;

		for (handler in this.handlers) {
			this.core.$element.off(handler, this.handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Animate = Animate;

})(window.Zepto || window.jQuery, window, document);


;(function($, window, document, undefined) {

	
	var Autoplay = function(carousel) {
		
		this._core = carousel;

		
		this._timeout = null;

		
		this._paused = false;

		
		this._handlers = {
			'changed.owl.carousel': $.proxy(function(e) {
				if(typeof(this.stopValue)!='undefined')
				{
					this.stop();
				} else {
				if (e.namespace && e.property.name === 'settings') {
					if (this._core.settings.autoplay) {
						
					} else {
						this.stop();
					}
				} else if (e.namespace && e.property.name === 'position') {
					//console.log('play?', e);
					if (this._core.settings.autoplay) {
					this._setAutoPlayInterval();
					}
				}
				}
			}, this),
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoplay) {
					this.play();
				}
			}, this),
			'play.owl.autoplay': $.proxy(function(e, t, s) {
				if (e.namespace) {
					this.play(t, s);
				}
			}, this),
			'stop.owl.autoplay': $.proxy(function(e, mytrigger) {
				this.stopValue=mytrigger;
				
				if (e.namespace) {
					this.stop();
				}
			}, this),
			'mouseover.owl.autoplay': $.proxy(function() {
				if (this._core.settings.autoplayHoverPause && this._core.is('rotating')) {
					this.pause();
				}
			}, this),
			'mouseleave.owl.autoplay': $.proxy(function() {
				if (this._core.settings.autoplayHoverPause && this._core.is('rotating')) {
					this.play();
				}
			}, this),
			'touchstart.owl.core': $.proxy(function() {
				if (this._core.settings.autoplayHoverPause && this._core.is('rotating')) {
					this.pause();
				}
			}, this),
			'touchend.owl.core': $.proxy(function() {
				if (this._core.settings.autoplayHoverPause) {
					this.play();
				}
			}, this)
		};

		// register event handlers
		this._core.$element.on(this._handlers);

		// set default options
		this._core.options = $.extend({}, Autoplay.Defaults, this._core.options);
	};

	
	Autoplay.Defaults = {
		autoplay: false,
		autoplayTimeout: 5000,
		autoplayHoverPause: false,
		autoplaySpeed: false
	};

	
	Autoplay.prototype.play = function(timeout, speed) {
		this._paused = false;

		if (this._core.is('rotating')) {
			return;
		}

		this._core.enter('rotating');

		this._setAutoPlayInterval();
	};

	
	Autoplay.prototype._getNextTimeout = function(timeout, speed) {
		if ( this._timeout ) {
			window.clearTimeout(this._timeout);
		}
		return window.setTimeout($.proxy(function() {
			if (this._paused || this._core.is('busy') || this._core.is('interacting') || document.hidden) {
				return;
			}
			this._core.next(speed || this._core.settings.autoplaySpeed);
		}, this), timeout || this._core.settings.autoplayTimeout);
	};

	
	Autoplay.prototype._setAutoPlayInterval = function() {
		this._timeout = this._getNextTimeout();
	};

	
	Autoplay.prototype.stop = function() {
		if (!this._core.is('rotating')) {
			return;
		}

		window.clearTimeout(this._timeout);
		this._core.leave('rotating');
	};

	
	Autoplay.prototype.pause = function() {
		if (!this._core.is('rotating')) {
			return;
		}

		this._paused = true;
	};

	
	Autoplay.prototype.destroy = function() {
		var handler, property;

		this.stop();

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.autoplay = Autoplay;

})(window.Zepto || window.jQuery, window, document);


;(function($, window, document, undefined) {
	'use strict';

	
	var Navigation = function(carousel) {
		
		this._core = carousel;

		
		this._initialized = false;

		
		this._pages = [];

		
		this._controls = {};

		
		this._templates = [];

		
		this.$element = this._core.$element;

		
		this._overrides = {
			next: this._core.next,
			prev: this._core.prev,
			to: this._core.to
		};

		
		this._handlers = {
			'prepared.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.dotsData) {
					this._templates.push('<div class="' + this._core.settings.dotClass + '">' +
						$(e.content).find('[data-dot]').addBack('[data-dot]').attr('data-dot') + '</div>');
				}
			}, this),
			'added.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.dotsData) {
					this._templates.splice(e.position, 0, this._templates.pop());
				}
			}, this),
			'remove.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.dotsData) {
					this._templates.splice(e.position, 1);
				}
			}, this),
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name == 'position') {
					this.draw();
				}
			}, this),
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace && !this._initialized) {
					this._core.trigger('initialize', null, 'navigation');
					this.initialize();
					this.update();
					this.draw();
					this._initialized = true;
					this._core.trigger('initialized', null, 'navigation');
				}
			}, this),
			'refreshed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._initialized) {
					this._core.trigger('refresh', null, 'navigation');
					this.update();
					this.draw();
					this._core.trigger('refreshed', null, 'navigation');
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, Navigation.Defaults, this._core.options);

		// register event handlers
		this.$element.on(this._handlers);
	};

	
	Navigation.Defaults = {
		nav: false,
		navText: [ 'prev', 'next' ],
		navSpeed: false,
		navElement: 'div',
		navContainer: false,
		navContainerClass: 'owl-nav',
		navClass: [ 'owl-prev', 'owl-next' ],
		slideBy: 1,
		dotClass: 'owl-dot',
		dotsClass: 'owl-dots',
		dots: true,
		dotsEach: false,
		dotsData: false,
		dotsSpeed: false,
		dotsContainer: false
	};

	
	Navigation.prototype.initialize = function() {
		var override,
			settings = this._core.settings;

		// create DOM structure for relative navigation
		this._controls.$relative = (settings.navContainer ? $(settings.navContainer)
			: $('<div>').addClass(settings.navContainerClass).appendTo(this.$element)).addClass('disabled');

		this._controls.$previous = $('<' + settings.navElement + '>')
			.addClass(settings.navClass[0])
			.html(settings.navText[0])
			.prependTo(this._controls.$relative)
			.on('click', $.proxy(function(e) {
				this.prev(settings.navSpeed);
			}, this));
		this._controls.$next = $('<' + settings.navElement + '>')
			.addClass(settings.navClass[1])
			.html(settings.navText[1])
			.appendTo(this._controls.$relative)
			.on('click', $.proxy(function(e) {
				this.next(settings.navSpeed);
			}, this));

		// create DOM structure for absolute navigation
		if (!settings.dotsData) {
			this._templates = [ $('<div>')
				.addClass(settings.dotClass)
				.append($('<span>'))
				.prop('outerHTML') ];
		}

		this._controls.$absolute = (settings.dotsContainer ? $(settings.dotsContainer)
			: $('<div>').addClass(settings.dotsClass).appendTo(this.$element)).addClass('disabled');

		this._controls.$absolute.on('click', 'div', $.proxy(function(e) {
			var index = $(e.target).parent().is(this._controls.$absolute)
				? $(e.target).index() : $(e.target).parent().index();

			e.preventDefault();

			this.to(index, settings.dotsSpeed);
		}, this));

		// override public methods of the carousel
		for (override in this._overrides) {
			this._core[override] = $.proxy(this[override], this);
		}
	};

	
	Navigation.prototype.destroy = function() {
		var handler, control, property, override;

		for (handler in this._handlers) {
			this.$element.off(handler, this._handlers[handler]);
		}
		for (control in this._controls) {
			this._controls[control].remove();
		}
		for (override in this.overides) {
			this._core[override] = this._overrides[override];
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	
	Navigation.prototype.update = function() {
		var i, j, k,
			lower = this._core.clones().length / 2,
			upper = lower + this._core.items().length,
			maximum = this._core.maximum(true),
			settings = this._core.settings,
			size = settings.center || settings.autoWidth || settings.dotsData
				? 1 : settings.dotsEach || settings.items;

		if (settings.slideBy !== 'page') {
			settings.slideBy = Math.min(settings.slideBy, settings.items);
		}

		if (settings.dots || settings.slideBy == 'page') {
			this._pages = [];

			for (i = lower, j = 0, k = 0; i < upper; i++) {
				if (j >= size || j === 0) {
					this._pages.push({
						start: Math.min(maximum, i - lower),
						end: i - lower + size - 1
					});
					if (Math.min(maximum, i - lower) === maximum) {
						break;
					}
					j = 0, ++k;
				}
				j += this._core.mergers(this._core.relative(i));
			}
		}
	};

	
	Navigation.prototype.draw = function() {
		var difference,
			settings = this._core.settings,
			disabled = this._core.items().length <= settings.items,
			index = this._core.relative(this._core.current()),
			loop = settings.loop || settings.rewind;

		this._controls.$relative.toggleClass('disabled', !settings.nav || disabled);

		if (settings.nav) {
			this._controls.$previous.toggleClass('disabled', !loop && index <= this._core.minimum(true));
			this._controls.$next.toggleClass('disabled', !loop && index >= this._core.maximum(true));
		}

		this._controls.$absolute.toggleClass('disabled', !settings.dots || disabled);

		if (settings.dots) {
			difference = this._pages.length - this._controls.$absolute.children().length;

			if (settings.dotsData && difference !== 0) {
				this._controls.$absolute.html(this._templates.join(''));
			} else if (difference > 0) {
				this._controls.$absolute.append(new Array(difference + 1).join(this._templates[0]));
			} else if (difference < 0) {
				this._controls.$absolute.children().slice(difference).remove();
			}

			this._controls.$absolute.find('.active').removeClass('active');
			this._controls.$absolute.children().eq($.inArray(this.current(), this._pages)).addClass('active');
		}
	};

	
	Navigation.prototype.onTrigger = function(event) {
		var settings = this._core.settings;

		event.page = {
			index: $.inArray(this.current(), this._pages),
			count: this._pages.length,
			size: settings && (settings.center || settings.autoWidth || settings.dotsData
				? 1 : settings.dotsEach || settings.items)
		};
	};

	
	Navigation.prototype.current = function() {
		var current = this._core.relative(this._core.current());
		return $.grep(this._pages, $.proxy(function(page, index) {
			return page.start <= current && page.end >= current;
		}, this)).pop();
	};

	
	Navigation.prototype.getPosition = function(successor) {
		var position, length,
			settings = this._core.settings;

		if (settings.slideBy == 'page') {
			position = $.inArray(this.current(), this._pages);
			length = this._pages.length;
			successor ? ++position : --position;
			position = this._pages[((position % length) + length) % length].start;
		} else {
			position = this._core.relative(this._core.current());
			length = this._core.items().length;
			successor ? position += settings.slideBy : position -= settings.slideBy;
		}

		return position;
	};

	
	Navigation.prototype.next = function(speed) {
		$.proxy(this._overrides.to, this._core)(this.getPosition(true), speed);
	};

	
	Navigation.prototype.prev = function(speed) {
		$.proxy(this._overrides.to, this._core)(this.getPosition(false), speed);
	};

	
	Navigation.prototype.to = function(position, speed, standard) {
		var length;

		if (!standard && this._pages.length) {
			length = this._pages.length;
			$.proxy(this._overrides.to, this._core)(this._pages[((position % length) + length) % length].start, speed);
		} else {
			$.proxy(this._overrides.to, this._core)(position, speed);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Navigation = Navigation;

})(window.Zepto || window.jQuery, window, document);


;(function($, window, document, undefined) {
	'use strict';

	
	var Hash = function(carousel) {
		
		this._core = carousel;

		
		this._hashes = {};

		
		this.$element = this._core.$element;

		
		this._handlers = {
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.startPosition === 'URLHash') {
					$(window).trigger('hashchange.owl.navigation');
				}
			}, this),
			'prepared.owl.carousel': $.proxy(function(e) {
				if (e.namespace) {
					var hash = $(e.content).find('[data-hash]').addBack('[data-hash]').attr('data-hash');

					if (!hash) {
						return;
					}

					this._hashes[hash] = e.content;
				}
			}, this),
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name === 'position') {
					var current = this._core.items(this._core.relative(this._core.current())),
						hash = $.map(this._hashes, function(item, hash) {
							return item === current ? hash : null;
						}).join();

					if (!hash || window.location.hash.slice(1) === hash) {
						return;
					}

					window.location.hash = hash;
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, Hash.Defaults, this._core.options);

		// register the event handlers
		this.$element.on(this._handlers);

		// register event listener for hash navigation
		$(window).on('hashchange.owl.navigation', $.proxy(function(e) {
			var hash = window.location.hash.substring(1),
				items = this._core.$stage.children(),
				position = this._hashes[hash] && items.index(this._hashes[hash]);

			if (position === undefined || position === this._core.current()) {
				return;
			}

			this._core.to(this._core.relative(position), false, true);
		}, this));
	};

	
	Hash.Defaults = {
		URLhashListener: false
	};

	
	Hash.prototype.destroy = function() {
		var handler, property;

		$(window).off('hashchange.owl.navigation');

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Hash = Hash;

})(window.Zepto || window.jQuery, window, document);


;(function($, window, document, undefined) {

	var style = $('<support>').get(0).style,
		prefixes = 'Webkit Moz O ms'.split(' '),
		events = {
			transition: {
				end: {
					WebkitTransition: 'webkitTransitionEnd',
					MozTransition: 'transitionend',
					OTransition: 'oTransitionEnd',
					transition: 'transitionend'
				}
			},
			animation: {
				end: {
					WebkitAnimation: 'webkitAnimationEnd',
					MozAnimation: 'animationend',
					OAnimation: 'oAnimationEnd',
					animation: 'animationend'
				}
			}
		},
		tests = {
			csstransforms: function() {
				return !!test('transform');
			},
			csstransforms3d: function() {
				return !!test('perspective');
			},
			csstransitions: function() {
				return !!test('transition');
			},
			cssanimations: function() {
				return !!test('animation');
			}
		};

	function test(property, prefixed) {
		var result = false,
			upper = property.charAt(0).toUpperCase() + property.slice(1);

		$.each((property + ' ' + prefixes.join(upper + ' ') + upper).split(' '), function(i, property) {
			if (style[property] !== undefined) {
				result = prefixed ? property : true;
				return false;
			}
		});

		return result;
	}

	function prefixed(property) {
		return test(property, true);
	}

	if (tests.csstransitions()) {
		
		$.support.transition = new String(prefixed('transition'))
		$.support.transition.end = events.transition.end[ $.support.transition ];
	}

	if (tests.cssanimations()) {
		
		$.support.animation = new String(prefixed('animation'))
		$.support.animation.end = events.animation.end[ $.support.animation ];
	}

	if (tests.csstransforms()) {
		
		$.support.transform = new String(prefixed('transform'));
		$.support.transform3d = tests.csstransforms3d();
	}

})(window.Zepto || window.jQuery, window, document);


!function(a,b,c,d){"use strict";var e=function(b){this.owl=b,this._thumbcontent=[],this._identifier=0,this.owl_currentitem=this.owl.options.startPosition,this.$element=this.owl.$element,this._handlers={"prepared.owl.carousel":a.proxy(function(b){if(!b.namespace||!this.owl.options.thumbs||this.owl.options.thumbImage||this.owl.options.thumbsPrerendered||this.owl.options.thumbImage){if(b.namespace&&this.owl.options.thumbs&&this.owl.options.thumbImage){var c=a(b.content).find("img");this._thumbcontent.push(c)}}else a(b.content).find("[data-thumb]").attr("data-thumb")!==d&&this._thumbcontent.push(a(b.content).find("[data-thumb]").attr("data-thumb"))},this),"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this.owl.options.thumbs&&(this.render(),this.listen(),this._identifier=this.owl.$element.data("slider-id"),this.setActive())},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&"position"===a.property.name&&this.owl.options.thumbs&&(this._identifier=this.owl.$element.data("slider-id"),this.setActive())},this)},this.owl.options=a.extend({},e.Defaults,this.owl.options),this.owl.$element.on(this._handlers)};e.Defaults={thumbs:!0,thumbImage:!1,thumbContainerClass:"owl-thumbs",thumbItemClass:"owl-thumb-item",moveThumbsInside:!1},e.prototype.listen=function(){var b=this.owl.options;b.thumbsPrerendered&&(this._thumbcontent._thumbcontainer=a("."+b.thumbContainerClass)),a(this._thumbcontent._thumbcontainer).on("click",this._thumbcontent._thumbcontainer.children(),a.proxy(function(c){this._identifier=a(c.target).closest("."+b.thumbContainerClass).data("slider-id");var d=a(c.target).parent().is(this._thumbcontent._thumbcontainer)?a(c.target).index():a(c.target).closest("."+b.thumbItemClass).index();b.thumbsPrerendered?a("[data-slider-id="+this._identifier+"]").trigger("to.owl.carousel",[d,b.dotsSpeed,!0]):this.owl.to(d,b.dotsSpeed),c.preventDefault()},this))},e.prototype.render=function(){var b=this.owl.options;b.thumbsPrerendered?(this._thumbcontent._thumbcontainer=a("."+b.thumbContainerClass),b.moveThumbsInside&&this._thumbcontent._thumbcontainer.appendTo(this.$element)):this._thumbcontent._thumbcontainer=a("<div>").addClass(b.thumbContainerClass).appendTo(this.$element);var c;if(b.thumbImage)for(c=0;c<this._thumbcontent.length;++c)this._thumbcontent._thumbcontainer.append("<button class="+b.thumbItemClass+'><img src="'+this._thumbcontent[c].attr("src")+'" alt="'+this._thumbcontent[c].attr("alt")+'" /></button>');else for(c=0;c<this._thumbcontent.length;++c)this._thumbcontent._thumbcontainer.append("<button class="+b.thumbItemClass+">"+this._thumbcontent[c]+"</button>")},e.prototype.setActive=function(){this.owl_currentitem=this.owl._current-this.owl._clones.length/2,this.owl_currentitem===this.owl._items.length&&(this.owl_currentitem=0);var b=this.owl.options,c=b.thumbsPrerendered?a("."+b.thumbContainerClass+'[data-slider-id="'+this._identifier+'"]'):this._thumbcontent._thumbcontainer;c.children().filter(".active").removeClass("active"),c.children().eq(this.owl_currentitem).addClass("active")},e.prototype.destroy=function(){var a,b;for(a in this._handlers)this.owl.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Thumbs=e}(window.Zepto||window.jQuery,window,document);
//////////////////////////////////////////////////////////////////////////////////
// Cloud Zoom V1.0.1
// (c) 2010 by R Cecco. <http://www.professorcloud.com>
// MIT License
//
// Please retain this copyright header in all versions of the software
//////////////////////////////////////////////////////////////////////////////////
(function($) {
    $(document).ready(function() {
        $('.cloud-zoom, .cloud-zoom-gallery').CloudZoom()
    });

    function format(a) {
        for (var i = 1; i < arguments.length; i++) {
            a = a.replace('%' + (i - 1), arguments[i])
        }
        return a
    }

    function CloudZoom(g, i) {
        var j = $('img', g);
        var k;
        var l;
        var m = null;
        var n = null;
        var o = null;
        var p = null;
        var q = null;
        var r = null;
        var s;
        var t = 0;
        var u, ch;
        var v = 0;
        var z = 0;
        var A = 0;
        var B = 0;
        var C = 0;
        var D, my;
        var E = this,
            zw;
        setTimeout(function() {
            if (n === null) {
                var w = g.width();
                g.parent().append(format('<div style="width:%0px;position:absolute;top:75%;left:%1px;text-align:center" class="cloud-zoom-loading" >Loading...</div>', w / 3, (w / 2) - (w / 6))).find(':last').css('opacity', 0.5)
            }
        }, 200);
        var F = function() {
            if (r !== null) {
                r.remove();
                r = null
            }
        };
        this.removeBits = function() {
            if (o) {
                o.remove();
                o = null
            }
            if (p) {
                p.remove();
                p = null
            }
            if (q) {
                q.remove();
                q = null
            }
            F();
            $('.cloud-zoom-loading', g.parent()).remove()
        };
        this.destroy = function() {
            g.data('zoom', null);
            if (n) {
                n.unbind();
              //  n.remove();
                n = null
            }
            if (m) {
               // m.remove();
                m = null
            }
            this.removeBits()
        };
        this.fadedOut = function() {
            if (m) {
                m.remove();
                m = null
            }
            this.removeBits()
        };
        this.controlLoop = function() {
            if (o) {
                var x = (D - j.offset().left - (u * 0.5)) >> 0;
                var y = (my - j.offset().top - (ch * 0.5)) >> 0;
                if (x < 0) {
                    x = 0
                } else if (x > (j.outerWidth() - u)) {
                    x = (j.outerWidth() - u)
                }
                if (y < 0) {
                    y = 0
                } else if (y > (j.outerHeight() - ch)) {
                    y = (j.outerHeight() - ch)
                }
                o.css({
                    left: x,
                    top: y
                });
                o.css('background-position', (-x) + 'px ' + (-y) + 'px');
                v = (((x) / j.outerWidth()) * s.width) >> 0;
                z = (((y) / j.outerHeight()) * s.height) >> 0;
                B += (v - B) / i.smoothMove;
                A += (z - A) / i.smoothMove;
                m.css('background-position', (-(B >> 0) + 'px ') + (-(A >> 0) + 'px'))
            }
            t = setTimeout(function() {
                E.controlLoop()
            }, 30)
        };
        this.init2 = function(a, b) {
            C++;
            if (b === 1) {
                s = a
            }
            if (C === 2) {
                this.init()
            }
        };
        this.init = function() {
            $('.cloud-zoom-loading', g.parent()).remove();
            n = g.parent().append(format("<div class='mousetrap' style='background-image:url(\".\");z-index:999;position:absolute;width:%0px;height:%1px;left:%2px;top:%3px;\'></div>", j.outerWidth(), j.outerHeight(), 0, 0)).find(':last');
            n.bind('mousemove mouseup', this, function(a) {
                D = a.pageX;
                my = a.pageY
            });
	   if($(window).width()>767)
		{
            
		}
		else 
		{
			n.bind('mouseleave', this, function() {
                clearTimeout(t);
                if (o) {
                    o.fadeOut(299)
                }
                if (p) {
                    p.fadeOut(299)
                }
                if (q) {
                    q.fadeOut(299)
                }
                m.fadeOut(300, function() {
                    E.fadedOut()
                });
                return false
            });
		}
            n.bind('mouseenter', this, function(a) {
                D = a.pageX;
                my = a.pageY;
                zw = a.data;
                if (m) {
                    m.stop(true, false);
                    m.remove()
                }
                var b = i.adjustX,
                    yPos = i.adjustY;
                var c = j.outerWidth();
                var d = j.outerHeight();
		var w = i.zoomWidth;
                var h = i.zoomHeight;	
              // alert(c);
		if(c==468)
		{
			w = 580;
		}
		else if(c==395)
		{
			w = 490;
		}
		else if(c==376)
		{
			w = 465;
		}
		else if(c==301)
		{
			w = 380;
		}
		else if(c==288)
		{
			w = 360;
		}
		else
		{
		    w = 580;
		}	
                
                if (i.zoomHeight == 'auto') {
                    h = d
                }
                var e = g.parent();
                switch (i.position) {
                    case 'top':
                        yPos -= h;
                        break;
                    case 'right':
                        b += c;
                        break;
                    case 'bottom':
                        yPos += d;
                        break;
                    case 'left':
                        b -= w;
                        break;
                    case 'inside':
                        w = c;
                        h = d;
                        break;
                    default:
                        e = $('#' + i.position);
                        if (!e.length) {
                            e = g;
                            b += c;
                            yPos += d
                        } else {
                            w = e.innerWidth();
                            h = e.innerHeight()
                        }
                }
                var zoom = 30;
                b += zoom;
                m = e.append(format('<div id="cloud-zoom-big" class="cloud-zoom-big" style="display:none;position:absolute;left:%0px;top:%1px;width:%2px;height:%3px;background-image:url(\'%4\');z-index:1;margin:0 5px;"></div> ', b, yPos, w, h, s.src)).find(':last');
                if (j.attr('title') && i.showTitle) {
                    m.append(format('<div class="cloud-zoom-title">%0</div>', j.attr('title'))).find(':last').css('opacity', i.titleOpacity)
                }
                if ($.browser.msie && $.browser.version < 7) {
                    r = $('<iframe frameborder="0" src="#"></iframe>').css({
                        position: "absolute",
                        left: b,
                        top: yPos,
                        zIndex: 99,
                        width: w,
                        height: h
                    }).insertBefore(m)
                }
                m.fadeIn(500);
                if (o) {
                    o.remove();
                    o = null
                }
                u = (j.outerWidth() / s.width) * m.width();
                ch = (j.outerHeight() / s.height) * m.height();
                o = g.append(format("<div class = 'cloud-zoom-lens' style='display:none;z-index:98;position:absolute;width:%0px;height:%1px;'></div>", u*1.3, ch)).find(':last');
                n.css('cursor', o.css('cursor'));
                var f = false;
                if (i.tint) {
                    o.css('background', 'url("' + j.attr('src') + '")');
                    p = g.append(format('<div style="display:none;position:absolute; left:0px; top:0px; width:%0px; height:%1px; background-color:%2;" />', j.outerWidth(), j.outerHeight(), i.tint)).find(':last');
                    p.css('opacity', i.tintOpacity);
                    f = true;
                    p.fadeIn(500)
                }
                if (i.softFocus) {
                    o.css('background', 'url("' + j.attr('src') + '")');
                    q = g.append(format('<div style="position:absolute;display:none;top:2px; left:2px; width:%0px; height:%1px;" />', j.outerWidth() - 2, j.outerHeight() - 2, i.tint)).find(':last');
                    q.css('background', 'url("' + j.attr('src') + '")');
                    q.css('opacity', 0.5);
                    f = true;
                    q.fadeIn(500)
                }
                if (!f) {
                    o.css('opacity', i.lensOpacity)
                }
                if (i.position !== 'inside') {
                    o.fadeIn(500)
                }
                zw.controlLoop();
                return
            })
        };
        k = new Image();
        $(k).load(function() {
            E.init2(this, 0)
        });
        k.src = j.attr('src');
        l = new Image();
        $(l).load(function() {
            E.init2(this, 1)
        });
        l.src = g.attr('href')
    }
    $.fn.CloudZoom = function(d) {
        try {
            document.execCommand("BackgroundImageCache", false, true)
        } catch (e) {}
        this.each(function() {
            var c, opts;
            eval('var	a = {' + $(this).attr('rel') + '}');
            c = a;
            if ($(this).is('.cloud-zoom')) {
                $(this).css({
                    'position': 'relative',
                    'display': 'block'
                });
                $('img', $(this)).css({
                    'display': 'block'
                });
                if ($(this).parent().attr('id') != 'wrap') {
                    $(this).wrap('<div id="wrap" style="top:0px;z-index:1;position:relative;"></div>')
                }
                opts = $.extend({}, $.fn.CloudZoom.defaults, d);
                opts = $.extend({}, opts, c);
                $(this).data('zoom', new CloudZoom($(this), opts))
            } else if ($(this).is('.cloud-zoom-gallery')) {
                opts = $.extend({}, c, d);
                $(this).data('relOpts', opts);
                $(this).bind('click', $(this), function(a) {
                    var b = a.data.data('relOpts');
                    $('#' + b.useZoom).data('zoom').destroy();
                    $('#' + b.useZoom).attr('href', a.data.attr('href'));
                    $('#' + b.useZoom + ' img').attr('src', a.data.data('relOpts').smallImage);
                    $('#' + a.data.data('relOpts').useZoom).CloudZoom();
                    return false
                })
            }
        });
        return this
    };
    $.fn.CloudZoom.defaults = {
        zoomWidth: 'auto',
        zoomHeight: 'auto',
        position: 'right',
        tint: false,
        tintOpacity: 0.5,
        lensOpacity: 0.5,
        softFocus: false,
        smoothMove: 3,
        showTitle: true,
        titleOpacity: 0.5,
        adjustX: 0,
        adjustY: 0
    }
})(jQuery);



 
var validator = {
	
	validateName : function(name) { 
		//var regEx =  /[a-zA-Z]\'?/g;
                var regEx = /^[A-z]+$/;
		return regEx.test(name);
	},
	
	validateEmail : function(email) {
		//var regEx = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
		//var regEx = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
		//var regEx =/^(?=[^@]{2,}@)([\w\.-]*[a-zA-Z0-9_]@(?=.{4,}\.[^.]*$)[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z])$/;
		//var regEx =/^(?=[^@]*[A-Za-z]{2,})([a-zA-Z0-9])(([a-zA-Z0-9])*([\._-])?([a-zA-Z0-9]))*@((([a-zA-Z]){2,})+(\.))+([a-zA-Z]{2,4})+$/;
		var regEx =/^(?=[^.]*[A-Za-z])([\.]*[a-zA-Z0-9]){2,}(([a-zA-Z0-9])*([\._-])?([a-zA-Z0-9]))*@(([a-zA-Z0-9\-]{2,})+(\.))+([a-zA-Z]{2,4})+$/;
		return regEx.test(email);
	},
	
	validateMobile : function(number) {
		var regEx = /^[0]?[789]\d{9}$/;
		return regEx.test(number);
	},
        
	
	onNewNewsletterSubmit : function(email) {
            var _email = email;
            var categories = [];

            $("input[name='newsCategories[]']:checked").each(function(){
                categories.push(parseInt($(this).val()));
            });

            var _base = '/newsletter/validate/';
            var _token = $('input[name="YII_CSRF_TOKEN"]').val();
            var _url = _base + '?YII_CSRF_TOKEN=' + _token + '&email=' + _email + '&categories=' + categories.join('-');
            $('.newsletterLoader').show();
            $.get(_url, function(__data) {
                __data = $.parseJSON(__data);
            });

            return true;
        },
	    stringValidate: function(event){
            return (event.charCode > 64 && event.charCode < 91) || (event.charCode > 96 && event.charCode < 123);
        },
        numaricValidate: function(event){
             return event.charCode >= 48 && event.charCode <= 57;
        },
        alphaNumericValidate: function(event){
            return ((event.charCode > 47 && event.charCode < 58) || (event.charCode > 64 && event.charCode < 91) || (event.charCode > 96 && event.charCode < 123) || (event.charCode === 0));
        },
	formSubmit : function(form) {
		$(form).find('input.requiredfields').each(function(e) {
		
			var dataInput 		= $(this).data('input');
			var dataInputVal 	= ($(this).val()).trim();
			
			switch(dataInput) {			
				case 'name_validation':
						if(dataInputVal.length <= 0) {
						jQuery(this).addClass('input-error');
						
						
						
					} else if ( ! validator.validateName(dataInputVal)) { 
						jQuery(this).addClass('input-error');
						
						
					} else {
						jQuery(this).removeClass('input-error');
						
					}
				break;			
				case 'email_validation':
					if(dataInputVal === ''){
						$(this).addClass('input-error');
                                                $(this).parent().find('.error').remove();
						$(this).parent().find('.error-msg').remove();
						
					}else if (! validator.validateEmail(dataInputVal) )
					{ 
						$(this).addClass('input-error');
                                                $(this).parent().find('.error').remove();
						$(this).parent().find('.error-msg').remove();
						$(this).parent().find('label.error').remove();
						$(this).parent().append('<span class="error-msg">Please enter a valid email address.</span>');
					}else{
						$(this).removeClass('input-error');
                                                $(this).parent().find('.error').remove();
						$(this).parent().find('.error-msg').remove();
					}
				break;
				case 'number_validation':
					if(dataInputVal.length <= 0){
						$(this).addClass('input-error');
						$(this).parent().find('.error-msg').remove();
						
					}else if (! validator.validateMobile(dataInputVal))
					{ 
						$(this).addClass('input-error');
						$(this).parent().find('.error-msg').remove();
						//$(this).parent().append('<span class="error-msg">Please enter valid mobile number</span>');
					}else{
						$(this).removeClass('input-error');
						$(this).parent().find('.error-msg').remove();
					}
				break;
				
				case 'password_validation':
					var passwordLength = jQuery(this).val().length;
					
					if (dataInputVal.length <= 0){
						jQuery(this).addClass('input-error');
                                                
				
					}else if (passwordLength < 6)
					{
						jQuery(this).addClass('input-error');
						jQuery(this).parent().find('.password-error').css('color','#ff0000');
                                                
					}else{
						jQuery(this).removeClass('input-error');
						jQuery(this).parent().find('.password-error').css('color','#191919');
					}
				break;
				default:
				$(this).removeClass('input-error');
				$(this).parent().find('.error-msg').remove();
			}
		});
                    
		if($(form).find('input.input-error').length>0) {
		jQuery('.error-populate-signup').show();
                jQuery('.error-populate-signup').css('color','#db0000');
                jQuery('.error-populate-signup').css('font-size','14px');
                jQuery('.error-populate-signup').css('font-weight','400');
                jQuery('.error-populate-signup').css('text-align','center');
                     
                if($('.main_create input').hasClass('input-error')){
                      $('html,body').animate({
                        scrollTop: $('.title_select_main').offset().top
                    }, 500);
                }
                else if($('.checkout_create input').hasClass('input-error')){
                      $('html,body').animate({
                        scrollTop: $('.or_txt').offset().top
                    }, 500);
                }
    
			return false;
		}
		else
		{       
            
			jQuery('.error-populate').hide();
            jQuery('.error-populate-signup').hide();
			return true;
		}	
	},
        
        contactusFormValid: function (form) {
            if ($(form).find("#ContactusForm_title").length > 0) {
                var SlectedVal = $(form).find("#ContactusForm_title").val();
                //var SlectedValSubtype = $(form).find("#FeedbackForm_subtype").val();
                            $('.feedSelectErr').remove();
                if (SlectedVal.length<=0) {
                                    if($(window).width()>=767) {
                                            $('#ContactusForm_title').after('<span class="error feedSelectErr">Please select title</span>');
                                            $(".titleselect").css('color', '#ff0000');
                                            $(".titleselect").css('border', '1px solid #ff0000');
                                    }
                                    else 
                                    {
                                            $('#ContactusForm_title').after('<span class="error feedSelectErr">Please select title</span>');
                                            $(".titleselect").css('color', '#ff0000');
                                            $(".titleselect").css('border', '1px solid #ff0000');
                                    }
                } else
                {
                                    if($(window).width()>=767) {
                    $(".chosen-single").css('color', '#747474');
                    $(".chosen-single").css('border', '1px solid #e9e9e9');
                                    }
                                    else {
                                            $(".titleselect").css('color', '#ff0000');
                                            $(".titleselect").css('border', '1px solid #e9e9e9');
                                    }
                }
            }

        },
        

            feedbackFormValid: function (form) {
        if ($(form).find("#FeedbackForm_feedback").length > 0) {
            var SlectedVal = $(form).find("#FeedbackForm_feedback").val();
            var SlectedValSubtype = $(form).find("#FeedbackForm_subtype").val();
			$('.feedSelectErr').remove();
            if (SlectedVal.length<=0) {    
				if($(window).width()>=767) {
					$('#FeedbackForm_feedback_chosen').after('<span class="error feedSelectErr">Please select type of feedback</span>');
					$(".chosen-single").css('color', '#ff0000');
					$(".chosen-single").css('border', '1px solid #ff0000');
				}
				else 
				{
					$('.feedbackselect').after('<span class="error feedSelectErr">Please select type of feedback</span>');
					$(".feedbackselect").css('color', '#ff0000');
					$(".feedbackselect").css('border', '1px solid #ff0000');
				}
            } else
            {
				if($(window).width()>=767) {
                $(".chosen-single").css('color', '#747474');
                $(".chosen-single").css('border', '1px solid #e9e9e9');
				}
				else {
					$(".feedbackselect").css('color', '#ff0000');
					$(".feedbackselect").css('border', '1px solid #e9e9e9');
				}
            }			
            if (SlectedVal == 'Complaint') {
				$('.feedSelectErrback').remove();
                if (SlectedValSubtype.length<=0) {   
					if($(window).width()>=767) {	
                    $('#FeedbackForm_subtype_chosen').after('<span class="error feedSelectErrback">Please select Sub Type of Feedback</span>');
                    $("#FeedbackForm_subtype_chosen a").css('color', '#ff0000');
                    $("#FeedbackForm_subtype_chosen a").css('border', '1px solid #ff0000');
					} else {
						
						$('.feedback_subtype').after('<span class="error feedSelectErrback">Please select Sub Type of Feedback</span>');
						$(".feedback_subtype").css('color', '#ff0000');
						$(".feedback_subtype").css('border', '1px solid #ff0000');
					}
                } else
                {
					if($(window).width()>=767) {
						$("#FeedbackForm_subtype_chosen a").css('color', '#747474');
						$("#FeedbackForm_subtype_chosen a").css('border', '1px solid #e9e9e9');
					} else 
					{
						$(".feedback_subtype").css('color', '#747474');
						$(".feedback_subtype").css('border', '1px solid #e9e9e9');
					}

                }
            }


        }

    },
    formSubmitNetpromoter: function (form) {
        if ($(form).find("#NetpromoterForm_netpromoter_array").length > 0) {
            var SlectedValNetpromoter = $(form).find("#NetpromoterForm_netpromoter_array").val();
             if (SlectedValNetpromoter == '') {
            $('.promoPoints').after('<span class="error feedSelectErrbacknetpromoter">Please select the rating</span>');
            return false;
        } else {
            $(form).find('.feedSelectErrbacknetpromoter').remove();
        }
        if ($(form).find('.feedSelectErrbacknetpromoter').length > 0) {
            return false;
        } else
        {
            return true;
        }
    }
    },
    
    formSubmitContactus: function (form) {
        validator.contactusFormValid(form);
        $(form).find('input.requiredfields_contactus,textarea.requiredfields_contactus').each(function (e) {
            var dataInput = $(this).data('input');
            var dataInputVal = ($(this).val()).trim();
            switch (dataInput) {
                case 'first_name_validation':
                    if (dataInputVal.length <= 0) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter a valid first name.</span>');
                    } else if (!validator.validateName(dataInputVal)) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter a valid first name.</span>');
                    } else {
                        $(this).parent().find('.error').remove();
                        jQuery(this).removeClass('input-error');
                    }
                    break;
                case 'last_name_validation':
                    if (dataInputVal.length <= 0) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter a valid last name.</span>');
                    } else if (!validator.validateName(dataInputVal)) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter a valid last name.</span>');
                    } else {
                        $(this).parent().find('.error').remove();
                        jQuery(this).removeClass('input-error');
                    }
                    break;    
                case 'email_validation':
                    if (dataInputVal === '') {
                        $(this).addClass('input-error');
                        $(this).parent().find('.error').remove();
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().append('<span class="error">Please enter a valid email address.</span>');

                    } else if (!validator.validateEmail(dataInputVal))
                    {
                        $(this).parent().find('.error').remove();
                        $(this).addClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().find('label.error').remove();
                        $(this).parent().append('<span class="error">Please enter a valid email address.</span>');
                    } else {
                        $(this).parent().find('.error').remove();
                        $(this).removeClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                    }
                    break;
                case 'number_validation':
                    if (dataInputVal.length <= 0) {
                        $(this).parent().find('.error').remove();
                        $(this).addClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().append('<span class="error">Please enter a valid mobile number.</span>');

                    } else if (!validator.validateMobile(dataInputVal))
                    {
                        $(this).parent().find('.error').remove();
                        $(this).addClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().append('<span class="error">Please enter valid mobile number</span>');
                    } else {
                        $(this).parent().find('.error').remove();
                        $(this).removeClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                    }
                    break;

		case 'contactus-enquiry':					
                    if (dataInputVal.length <= 0) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter your message here</span>');
                    } 
					else {
                        $(this).parent().find('.error').remove();
                        jQuery(this).removeClass('input-error');
                    }
                    break;
                default:
                    $(this).removeClass('input-error');
                    $(this).parent().find('.error-msg').remove();
            }

        });


        if ($(form).find('input.input-error, .feedSelectErr, .feedSelectErrback,.input-error').length > 0) {
            $("#feedback_form").css("background", "#DBAE58");
            jQuery('.error-populate').show();

            return false;
        } else
        {
            jQuery('.error-populate').hide();
               $("#feedback_form").css("background", "#ECECEC");
            return true;
        }


    },
    
    formSubmitBusiness: function (form) {
        $(form).find('input.requiredfields_business').each(function (e) {
            var dataInput = $(this).data('input');
            var dataInputVal = ($(this).val()).trim();
            switch (dataInput) {
                case 'name_validation':
                    if (dataInputVal.length <= 0) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter a valid name.</span>');
                    } else if (!validator.validateName(dataInputVal)) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter a valid name.</span>');
                    } else {
                        $(this).parent().find('.error').remove();
                        jQuery(this).removeClass('input-error');
                    }
                    break;
                  
                case 'email_validation':
                    if (dataInputVal === '') {
                        $(this).addClass('input-error');
                        $(this).parent().find('.error').remove();
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().append('<span class="error">Please enter a valid email address.</span>');

                    } else if (!validator.validateEmail(dataInputVal))
                    {
                        $(this).parent().find('.error').remove();
                        $(this).addClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().find('label.error').remove();
                        $(this).parent().append('<span class="error">Please enter a valid email address.</span>');
                    } else {
                        $(this).parent().find('.error').remove();
                        $(this).removeClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                    }
                    break;
                case 'number_validation':
                    if (dataInputVal.length <= 0) {
                       

                    } else if (!validator.validateMobile(dataInputVal))
                    {
                        $(this).parent().find('.error').remove();
                        $(this).addClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().append('<span class="error">Please enter valid mobile number</span>');
                    } else {
                        $(this).parent().find('.error').remove();
                        $(this).removeClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                    }
                    break;

		case 'enquiry':					
                    if (dataInputVal.length <= 0) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter your message here</span>');
                    } 
					else {
                        $(this).parent().find('.error').remove();
                        jQuery(this).removeClass('input-error');
                    }
                    break;
                default:
                    $(this).removeClass('input-error');
                    $(this).parent().find('.error-msg').remove();
            }

        });


        if ($(form).find('input.input-error, .feedSelectErr, .feedSelectErrback,.input-error').length > 0) {
            $("#feedback_form").css("background", "#DBAE58");
            jQuery('.error-populate').show();

            return false;
        } else
        {
            jQuery('.error-populate').hide();
               $("#feedback_form").css("background", "#ECECEC");
            return true;
        }


    },
    
        formSubmitFeedback: function (form) {
        validator.feedbackFormValid(form);
        $(form).find('input.requiredfields_feedback,textarea.requiredfields_feedback').each(function (e) {
            var dataInput = $(this).data('input');
            var dataInputVal = ($(this).val()).trim();
            switch (dataInput) {
                case 'name_validation':
                    if (dataInputVal.length <= 0) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter a valid name.</span>');
                    } else if (!validator.validateName(dataInputVal)) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter a valid name.</span>');
                    } else {
                        $(this).parent().find('.error').remove();
                        jQuery(this).removeClass('input-error');
                    }
                    break;
                case 'email_validation':
                    if (dataInputVal === '') {
                        $(this).addClass('input-error');
                        $(this).parent().find('.error').remove();
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().append('<span class="error">Please enter a valid email address.</span>');

                    } else if (!validator.validateEmail(dataInputVal))
                    {
                        $(this).parent().find('.error').remove();
                        $(this).addClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().find('label.error').remove();
                        $(this).parent().append('<span class="error">Please enter a valid email address.</span>');
                    } else {
                        $(this).parent().find('.error').remove();
                        $(this).removeClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                    }
                    break;
                case 'number_validation':
                    if (dataInputVal.length <= 0) {
                        $(this).parent().find('.error').remove();
                        $(this).addClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().append('<span class="error">Please enter a valid mobile number.</span>');

                    } else if (!validator.validateMobile(dataInputVal))
                    {
                        $(this).parent().find('.error').remove();
                        $(this).addClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().append('<span class="error">Please enter valid mobile number</span>');
                    } else {
                        $(this).parent().find('.error').remove();
                        $(this).removeClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                    }
                    break;

		case 'feed-description':					
                    if (dataInputVal.length <= 0) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter valid description.</span>');
                    } 
					else {
                        $(this).parent().find('.error').remove();
                        jQuery(this).removeClass('input-error');
                    }
                    break;
                default:
                    $(this).removeClass('input-error');
                    $(this).parent().find('.error-msg').remove();
            }

        });


        if ($(form).find('input.input-error, .feedSelectErr, .feedSelectErrback,.input-error').length > 0) {
            $("#feedback_form").css("background", "#DBAE58");
            jQuery('.error-populate').show();

            return false;
        } else
        {
            jQuery('.error-populate').hide();
               $("#feedback_form").css("background", "#ECECEC");
            return true;
        }


    },
        formSubmitSaveNewPassword : function(form) {            
        $(form).find('input.required_password').each(function(e) {
		
			var dataInput 		= $(this).data('input');
			var dataInputVal 	= ($(this).val()).trim();
                         $('.info-text-confirm').hide();
                         $('.info-text-match').hide();
                         $(this).removeClass('error');
                         
                         			
			switch(dataInput) {			
				
				case 'password':
		                if($(this).val().length<6)
				{
				 //$(this).parent().find('.info-text').remove();
                                 $(this).addClass('error');
                                 $(this).addClass('.info-text');
                                 $('.info-text').remove();
			 	 $(this).parent().append('<span class="info-text error">Must be 6 characters or more</span>');
				}
				break;
				default:
				$(this).removeClass('error');
                                $(this).removeClass('error-msg');
                                $('.info-text-confirm').hide();
                                $('.info-text-match').hide();
                                $('.error-msg').remove();
			}
		});
		
		if($(form).find('input.error').length>0) {
		//jQuery('.error-populate').show();
			return false;
		}
		else
		{
			//jQuery('.error-populate').hide();
			return true;
		}
		
		
	},
        formSubmitShipping : function(form) {
		$(form).find('input.requiredfields').each(function(e) {
			var dataInput 		= $(this).data('input');
			var dataInputVal 	= ($(this).val()).trim();
			
			switch(dataInput) {			
				case 'firstname_validation':
                                    var regEx =  /^[a-z]+$/i;
				        if(dataInputVal.length <= 0) {
						jQuery(this).addClass('error');
					} else if(!regEx.test($(this).val()))
                                        { 
                                            jQuery(this).addClass('error');

                                        }else {
                                            jQuery(this).removeClass('error');
                                        }
				break;			
				case 'lastname_validation':
                                    var regEx =  /^[a-z]+$/i;
					if(dataInputVal.length <= 0) {
						jQuery(this).addClass('error');
					}else if(!regEx.test($(this).val()))
                                        { 
                                            jQuery(this).addClass('error');

                                        } else {
                                            jQuery(this).removeClass('error');
                                        }
				break;
				case 'phone_validation':
					if(dataInputVal.length <= 0){
						$(this).addClass('error');
						$(this).parent().find('.error-msg').remove();
						
					}else if (! validator.validateMobile(dataInputVal))
					{ 
						$(this).addClass('error');
						$(this).parent().find('.error-msg').remove();
						//$(this).parent().append('<span class="error-msg">Please enter valid mobile number</span>');
					}else{
						$(this).removeClass('error');
						$(this).parent().find('.error-msg').remove();
					}
				break;
				
				case 'postcode_validation':
                                    var regEx = /^\d{6}$/;
					if(dataInputVal.length <= 0) {
						jQuery(this).addClass('error');
					} else if(!regEx.test($(this).val()))
                                        { 
                                            jQuery(this).addClass('error');

                                        }else {
                                            jQuery(this).removeClass('error');
                                        }
				break;
					
				case 'city_validation':
					if(dataInputVal.length <= 0) {
						jQuery(this).addClass('error');
					} else {
                                            jQuery(this).removeClass('error');
                                        }
				break;
                                case 'state_validation':
					if(dataInputVal.length <= 0) {
						jQuery(this).addClass('error');
					}
				break;
                                case 'address1_validation':
					if(dataInputVal.length <= 0) {
						jQuery(this).addClass('error');
					} else {
                                            jQuery(this).removeClass('error');
                                        }
				break;
				default:
				$(this).removeClass('error');
				$(this).parent().find('.error-msg').remove();
			}
		});
		
		if($(form).find('input.error').length>0) {
		//jQuery('.error-populate').show();
			return false;
		}
		else
		{
			//jQuery('.error-populate').hide();
			return true;
		}
		
		
		
	},
        formSubmitBilling : function(form) {
		$(form).find('input.requiredfields1').each(function(e) {
			
			if ($('#another_billing_address').is(':checked')) {
                //if($('#if ($('#another_billing_address').is(':checked')) {ShippingAddressForm_use_diff_billing').is(':checked')) {
			var dataInput 		= $(this).data('input');
			var dataInputVal 	= ($(this).val()).trim();
			jQuery('.error-populate').hide();
                        $(this).removeClass('error');
			switch(dataInput) {			
				case 'firstname1_validation':
                                    var regEx =  /^[a-z]+$/i;
				        if(dataInputVal.length <= 0) {
						jQuery(this).addClass('error');
					} else if(!regEx.test($(this).val()))
                                        { 
                                            jQuery(this).addClass('error');

                                        }else {
                                            jQuery(this).removeClass('error');
                                        }
				break;			
				case 'lastname1_validation':
                                    var regEx =  /^[a-z]+$/i;
					if(dataInputVal.length <= 0) {
						jQuery(this).addClass('error');
					}else if(!regEx.test($(this).val()))
                                        { 
                                            jQuery(this).addClass('error');

                                        } else {
                                            jQuery(this).removeClass('error');
                                        }
				break;
                                case 'phone1_validation':
					if(dataInputVal.length <= 0){
						$(this).addClass('error');
						$(this).parent().find('.error-msg').remove();
						
					}else if (! validator.validateMobile(dataInputVal))
					{ 
						$(this).addClass('error');
						$(this).parent().find('.error-msg').remove();
						//$(this).parent().append('<span class="error-msg">Please enter valid mobile number</span>');
					}else{
						$(this).removeClass('error');
						$(this).parent().find('.error-msg').remove();
					}
				break;
				
				case 'postcode1_validation':
                                        var regEx =  /^\d{6}$/;
					if(dataInputVal.length <= 0) {
						jQuery(this).addClass('error');
					} else if(!regEx.test($(this).val()))
                                        { 
                                            jQuery(this).addClass('error');

                                        } else {
                                            jQuery(this).removeClass('error');
                                        }
				break;
					
				case 'city1_validation':
					if(dataInputVal.length <= 0) {
						jQuery(this).addClass('error');
					} else {
                                            jQuery(this).removeClass('error');
                                        }
				break;
                                case 'state1_validation':
					if(dataInputVal.length <= 0) {
						jQuery(this).addClass('error');
					}
				break;
                                case 'address11_validation':
					if(dataInputVal.length <= 0) {
						jQuery(this).addClass('error');
					} else {
                                            jQuery(this).removeClass('error');
                                        }
				break;
				default:
				$(this).removeClass('error');
                                $(form).find('input.error').remove();
				$(this).parent().find('.error-msg').remove();
                                jQuery('.error-populate').hide();
			}
                    } else if($('#ShippingAddressForm_use_diff_billing').is(':unchecked')) {
                                $(this).removeClass('error');
                                jQuery('.error-populate').hide();
                    }

		});
		
		if($(form).find('input.error').length>0) {
		//jQuery('.error-populate').show();

			return false;
		}
		else
		{
			//jQuery('.error-populate').hide();
			return true;
		}
		
		
		
	},
	formValidation: function(formId,action) {
		$(formId).on(action,function() {
		  var result=validator.formSubmit($(this));
		  return result;
		});
	}
};

$(document).ready(function(){

validator.formValidation('#form-account-create-t','submit');
validator.formValidation('#checkoutvalidation','submit');

$('.requiredfields').each(function(){
	$(this).on('blur',function(){
		dataInput=$(this).data('input');
		$(this).removeClass('input-error');
		switch(dataInput) {
			case 'email_validation':
			if($(this).val().length<=1)
			{  $(this).parent().find('.error').remove();
			   $(this).parent().find('.error-msg').remove();
			   $(this).addClass('input-error');
			  // $(this).after($(this).data('title'));
			} else if(!validator.validateEmail($(this).val()))
			{ $(this).parent().find('.error').remove();
			  $(this).addClass('input-error');
			  //$(this).after($(this).data('title'));
			  $(this).parent().find('.error').remove();
                          $(this).parent().find('.error-msg').remove();
			  $(this).parent().find('label.error').remove();
			  $(this).parent().append('<span class="error">Please enter a valid email address.</span>');
			}		
			else 
			{
			 $(this).removeClass('input-error');
			 $(this).parent().find('.error-msg').remove();
                         $(this).parent().find('.error').remove();
			 
			}
			break;	

			case 'number_validation':
			if($(this).val().length<=1)
			{
			   $(this).addClass('input-error');
			} else if(!validator.validateMobile($(this).val()))
			{
			  $(this).addClass('input-error');
			  //$(this).after($(this).data('title'));
			  $(this).parent().find('.error-msg').remove();
                          $(this).parent().find('.error').remove();
			  $(this).parent().append('<span class="error">Please enter valid mobile number</span>');
			}		
			else 
			{
			 $(this).removeClass('input-error');
			 $(this).parent().find('.error-msg').remove();
			 $(this).parent().find('.error').remove();
			}
			break;	
					
			case 'password_validation':
					
					if($(this).val().length<=1){
					 $(this).addClass('input-error');
					
			
					}
					else if($(this).val().length<6){
					$(this).addClass('input-error');
                                        $(this).parent().find('.error-msg').remove();
                                        $(this).parent().find('.error').remove();
                                        $(this).parent().append('<span class="error-msg">Must be 6 characters or more.</span>');
					jQuery(this).parent().find('.password-error').css('color','#ff0000');
					}else
					{
					jQuery(this).removeClass('input-error');
						jQuery(this).parent().find('.password-error').css('color','#191919');
                                                 $(this).parent().find('.error-msg').remove();
                                                  $(this).parent().find('.error').remove();
					}
							
				break;
			case 'name_validation':
						if($(this).val().length<=1){
						jQuery(this).addClass('input-error');
						
						
						} else if ( ! validator.validateName($(this).val())){ 
						jQuery(this).addClass('input-error');
				
						
					} else {
						jQuery(this).removeClass('input-error');
					
					}
				break;		
				
				//default:
		}
	});
});
keypress.allowOnlyNumbers('.new_otp[type=text]');
alphabetkeypress.allowOnlyAlphabets('.requiredfields_feedback_firstname[type=text]');
keypress.allowOnlyNumbers('.requiredfields_feedback_contact_number[type=text]');

alphabetkeypress.allowOnlyAlphabets('.requiredfields_contactus_firstname[type=text]');
alphabetkeypress.allowOnlyAlphabets('.requiredfields_contactus_lastname[type=text]');
keypress.allowOnlyNumbers('.requiredfields_contactus_contact_number[type=text]');


$('.requiredfields_contactus').each(function () {
        $(this).on('keyup blur', function () {

            var dataInput = $(this).data('input');
            //console.log(dataInput);
            var dataInputVal = ($(this).val()).trim();

            switch (dataInput) {
                case 'first_name_validation':
                    if (dataInputVal.length <= 0) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter a valid first name.</span>');
                    } else if (!validator.validateName(dataInputVal)) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter a valid first name.</span>');
                    } else {
                        $(this).parent().find('.error').remove();
                        jQuery(this).removeClass('input-error');
                    }
                    break;
                case 'last_name_validation':
                    if (dataInputVal.length <= 0) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter a valid last name.</span>');
                    } else if (!validator.validateName(dataInputVal)) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter a valid last name.</span>');
                    } else {
                        $(this).parent().find('.error').remove();
                        jQuery(this).removeClass('input-error');
                    }
                    break;
                case 'email_validation':
                    if (dataInputVal === '') {
                        $(this).addClass('input-error');
                        $(this).parent().find('.error').remove();
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().append('<span class="error">Please enter a valid email address.</span>');

                    } else if (!validator.validateEmail(dataInputVal))
                    {
                        $(this).parent().find('.error').remove();
                        $(this).addClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().find('label.error').remove();
                        $(this).parent().append('<span class="error">Please enter a valid email address.</span>');
                    } else {
                        $(this).parent().find('.error').remove();
                        $(this).removeClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                    }
                    break;
                case 'number_validation':
                    if (dataInputVal.length <= 0) {
                        $(this).parent().find('.error').remove();
                        $(this).addClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().append('<span class="error">Please enter a valid mobile number.</span>');

                    } else if (!validator.validateMobile(dataInputVal))
                    {
                        $(this).parent().find('.error').remove();
                        $(this).addClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().append('<span class="error">Please enter valid mobile number</span>');
                    } else {
                        $(this).parent().find('.error').remove();
                        $(this).removeClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                    }
                    break;
		case 'contactus-enquiry':
                    if (dataInputVal.length <= 0) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter your message here.</span>');
                    }
                    else {
                        $(this).parent().find('.error').remove();
                        jQuery(this).removeClass('input-error');
                    }
                    break;
                default:
                    $(this).removeClass('input-error');
                    $(this).parent().find('.error-msg').remove();
            }


        });
    });
    
    $('#contactus_form').live('click', function (e) {
        e.preventDefault();
        var formData = $('#form-contactus').serializeArray();
        var validation = validator.formSubmitContactus($('#form-contactus'));
        if (validation) {
            $.ajax({
                url: "/customer/contactus/index",
                dataType: "json",
                type: "post",
                data: formData,
                success: function (result) {   
                    if (result.status) {
                           $('#myModal').modal({
                            show: 'false',backdrop: 'static', keyboard: false
                        });
                    } else {
		      $('.error').show();
                    }
                }
            });
        }
    });
       $('#business_form').on('click', function (e) {
        e.preventDefault();
        var formData = $('#businessform').serializeArray();
        var validation = validator.formSubmitBusiness($('#businessform'));
        if (validation) {
            $.ajax({
                url: "/clarksforbusiness/index",
                dataType: "json",
                type: "post",
                data: formData,
                success: function (result) {   
                    if (result.status) {
                           $('#myModal').modal({
                            show: 'false',backdrop: 'static', keyboard: false
                        });
                    } else {
		      $('.error').show();
                    }
                }
            });
        }
        e.stopImmediatePropagation();
    }); 
    
    
    $('.requiredfields_feedback').each(function () {
        $(this).on('keyup blur', function () {

            var dataInput = $(this).data('input');
            //console.log(dataInput);
            var dataInputVal = ($(this).val()).trim();

            switch (dataInput) {
                case 'name_validation':
                    if (dataInputVal.length <= 0) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter a valid name.</span>');
                    } else if (!validator.validateName(dataInputVal)) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter a valid name.</span>');
                    } else {
                        $(this).parent().find('.error').remove();
                        jQuery(this).removeClass('input-error');
                    }
                    break;
                case 'email_validation':
                    if (dataInputVal === '') {
                        $(this).addClass('input-error');
                        $(this).parent().find('.error').remove();
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().append('<span class="error">Please enter a valid email address.</span>');

                    } else if (!validator.validateEmail(dataInputVal))
                    {
                        $(this).parent().find('.error').remove();
                        $(this).addClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().find('label.error').remove();
                        $(this).parent().append('<span class="error">Please enter a valid email address.</span>');
                    } else {
                        $(this).parent().find('.error').remove();
                        $(this).removeClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                    }
                    break;
                case 'number_validation':
                    if (dataInputVal.length <= 0) {
                        $(this).parent().find('.error').remove();
                        $(this).addClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().append('<span class="error">Please enter a valid mobile number.</span>');

                    } else if (!validator.validateMobile(dataInputVal))
                    {
                        $(this).parent().find('.error').remove();
                        $(this).addClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                        $(this).parent().append('<span class="error">Please enter valid mobile number</span>');
                    } else {
                        $(this).parent().find('.error').remove();
                        $(this).removeClass('input-error');
                        $(this).parent().find('.error-msg').remove();
                    }
                    break;
				case 'feed-description':
                    if (dataInputVal.length <= 0) {
                        $(this).parent().find('.error').remove();
                        jQuery(this).addClass('input-error');
                        $(this).parent().append('<span class="error">Please enter valid description.</span>');
                    }
					else {
                        $(this).parent().find('.error').remove();
                        jQuery(this).removeClass('input-error');
                    }
                    break;
                default:
                    $(this).removeClass('input-error');
                    $(this).parent().find('.error-msg').remove();
            }


        });
    });
    
    $('#feedback_form').live('click', function (e) {
        e.preventDefault();
        var formData = $('#form-feedback').serializeArray();
        var validation = validator.formSubmitFeedback($('#form-feedback'));
        if (validation) {
            $.ajax({
                url: "/customer/feedback/Feedbackform",
                dataType: "json",
                type: "post",
                data: formData,
                success: function (result) {   
                    if (result.status) {
                           $('#myModal').modal({
                            show: 'false',backdrop: 'static', keyboard: false
                        });
                    } else {
		      $('.error').show();
                    }
                }
            });
        }
    });

    $("#FeedbackForm_feedback").on("change", function () {
        validator.feedbackFormValid('#form-feedback');
        if (this.value == 'Complaint')
        {
            $(".complaintdropdown").show();

        } else
        {
            $(".complaintdropdown").hide();
            $("#FeedbackForm_subtype").val($(this).prop('Select'));
        }
    });
    $("#FeedbackForm_subtype").on("change", function () {
        validator.feedbackFormValid('#form-feedback');
        $('.feedSelectErrback').remove();
        $("#FeedbackForm_subtype_chosen a").css('color', '#747474');
        $("#FeedbackForm_subtype_chosen a").css('border', '1px solid #e9e9e9');

    });

    $(".close_btn_feedback").live('click', function () {

        window.location.assign(document.location.origin)
    });

});







(function($){$.extend($.fn,{validate:function(options){if(!this.length){options&&options.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return;}var validator=$.data(this[0],'validator');if(validator){return validator;}validator=new $.validator(options,this[0]);$.data(this[0],'validator',validator);if(validator.settings.onsubmit){this.find("input, button").filter(".cancel").click(function(){validator.cancelSubmit=true;});this.submit(function(event){if(validator.settings.debug)event.preventDefault();function handle(){if(validator.settings.submitHandler){validator.settings.submitHandler.call(validator,validator.currentForm);return false;}return true;}if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}return handle();}else{validator.focusInvalid();return false;}});}return validator;},valid:function(){if($(this[0]).is('form')){return this.validate().form();}else{var valid=false;var validator=$(this[0].form).validate();this.each(function(){valid|=validator.element(this);});return valid;}},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value);});return result;},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,'validator').settings;var staticRules=settings.rules;var existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));staticRules[element.name]=existingRules;if(argument.messages)settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);break;case"remove":if(!argument){delete staticRules[element.name];return existingRules;}var filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];});return filtered;}}var data=$.validator.normalizeRules($.extend({},$.validator.metadataRules(element),$.validator.classRules(element),$.validator.attributeRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required;data=$.extend({required:param},data);}return data;}});$.extend($.expr[":"],{blank:function(a){return!$.trim(a.value);},filled:function(a){return!!$.trim(a.value);},unchecked:function(a){return!a.checked;}});$.format=function(source,params){if(arguments.length==1)return function(){var args=$.makeArray(arguments);args.unshift(source);return $.format.apply(this,args);};if(arguments.length>2&&params.constructor!=Array){params=$.makeArray(arguments).slice(1);}if(params.constructor!=Array){params=[params];}$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),n);});return source;};$.validator=function(options,form){this.settings=$.extend({},$.validator.defaults,options);this.currentForm=form;this.init();};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:[],ignoreTitle:false,onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass);this.errorsFor(element).hide();}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element){if(element.name in this.submitted||element==this.lastElement){this.element(element);}},onclick:function(element){if(element.name in this.submitted)this.element(element);},highlight:function(element,errorClass){$(element).addClass(errorClass);},unhighlight:function(element,errorClass){$(element).removeClass(errorClass);}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",dateDE:"Bitte geben Sie ein gültiges Datum ein.",number:"Please enter a valid number.",numberDE:"Bitte geben Sie eine Nummer ein.",digits:"Please enter only digits",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:$.format("Please enter no more than {0} characters."),minlength:$.format("Please enter at least {0} characters."),rangelength:$.format("Please enter a value between {0} and {1} characters long."),range:$.format("Please enter a value between {0} and {1}."),max:$.format("Please enter a value less than or equal to {0}."),min:$.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={});$.each(this.settings.groups,function(key,value){$.each(value.split(/\s/),function(index,name){groups[name]=key;});});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){var validator=$.data(this[0].form,"validator");validator.settings["on"+event.type]&&validator.settings["on"+event.type].call(validator,this[0]);}$(this.currentForm).delegate("focusin focusout keyup",":text, :password, :file, select, textarea",delegate).delegate("click",":radio, :checkbox",delegate);if(this.settings.invalidHandler)$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid())$(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}return this.valid();},element:function(element){element=this.clean(element);this.lastElement=element;this.prepareElement(element);this.currentElements=$(element);var result=this.check(element);if(result){delete this.invalid[element.name];}else{this.invalid[element.name]=true;}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}this.showErrors();return result;},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]});}this.successList=$.grep(this.successList,function(element){return!(element.name in errors);});}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors();},resetForm:function(){if($.fn.resetForm)$(this.currentForm).resetForm();this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0;for(var i in obj)count++;return count;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()==0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus();}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name==lastActive.name;}).length==1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in rulesCache||!validator.objectLength($(this).rules()))return false;rulesCache[this.name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){return $(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.formSubmitted=false;this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},check:function(element){element=this.clean(element);if(this.checkable(element)){element=this.findByName(element.name)[0];}var rules=$(element).rules();var dependencyMismatch=false;for(method in rules){var rule={method:method,parameters:rules[method]};try{var result=$.validator.methods[method].call(this,element.value,element,rule.parameters);if(result=="dependency-mismatch"){dependencyMismatch=true;continue;}dependencyMismatch=false;if(result=="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){this.settings.debug&&window.console&&console.log("exception occured when checking element "+element.id
+", check the '"+rule.method+"' method");throw e;}}if(dependencyMismatch)return;if(this.objectLength(rules))this.successList.push(element);return true;},customMetaMessage:function(element,method){if(!$.metadata)return;var meta=this.settings.meta?$(element).metadata()[this.settings.meta]:$(element).metadata();return meta&&meta.messages&&meta.messages[method];},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor==String?m:m[method]);},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined)return arguments[i];}return undefined;},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customMetaMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>");},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method);if(typeof message=="function")message=message.call(this,rule.parameters,element);this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper)toToggle=toToggle.add(toToggle.parents(this.settings.wrapper));return toToggle;},defaultShowErrors:function(){for(var i=0;this.errorList[i];i++){var error=this.errorList[i];this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass);this.showLabel(error.element,error.message);}if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}if(this.settings.success){for(var i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}if(this.settings.unhighlight){for(var i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass);}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},showLabel:function(element,message){var label=this.errorsFor(element);if(label.length){label.removeClass().addClass(this.settings.errorClass);label.attr("generated")&&label.html(message);}else{label=$("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(element),generated:true}).addClass(this.settings.errorClass).html(message||"");if(this.settings.wrapper){label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}if(!this.labelContainer.append(label).length)this.settings.errorPlacement?this.settings.errorPlacement(label,$(element)):label.insertAfter(element);}if(!message&&this.settings.success){label.text("");typeof this.settings.success=="string"?label.addClass(this.settings.success):this.settings.success(label);}this.toShow=this.toShow.add(label);},errorsFor:function(element){return this.errors().filter("[for='"+this.idOrName(element)+"']");},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},checkable:function(element){return/radio|checkbox/i.test(element.type);},findByName:function(name){var form=this.currentForm;return $(document.getElementsByName(name)).map(function(index,element){return element.form==form&&element.name==name&&element||null;});},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case'select':return $("option:selected",element).length;case'input':if(this.checkable(element))return this.findByName(element.name).filter(':checked').length;}return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param,element){return param;},"string":function(param,element){return!!$(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){return!$.validator.methods.required.call(this,$.trim(element.value),element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0)this.pendingRequest=0;delete this.pending[element.name];if(valid&&this.pendingRequest==0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();}else if(!valid&&this.pendingRequest==0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",previous={old:null,valid:true,message:this.defaultMessage(element,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){className.constructor==String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className);},classRules:function(element){var rules={};var classes=$(element).attr('class');classes&&$.each(classes.split(' '),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});return rules;},attributeRules:function(element){var rules={};var $element=$(element);for(method in $.validator.methods){var value=$element.attr(method);if(value){rules[method]=value;}}if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}return rules;},metadataRules:function(element){if(!$.metadata)return{};var meta=$.data(element.form,'validator').settings.meta;return meta?$(element).metadata()[meta]:$(element).metadata();},staticRules:function(element){var rules={};var validator=$.data(element.form,'validator');if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break;}if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter;});$.each(['minlength','maxlength','min','max'],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(['rangelength','range'],function(){if(rules[this]){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}if(rules.messages){delete rules.messages}return rules;},normalizeRule:function(data){if(typeof data=="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true;});data=transformed;}return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message;if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element))return"dependency-mismatch";switch(element.nodeName.toLowerCase()){case'select':var options=$("option:selected",element);return options.length>0&&(element.type=="select-multiple"||($.browser.msie&&!(options[0].attributes['value'].specified)?options[0].text:options[0].value).length>0);case'input':if(this.checkable(element))return this.getLength(value,element)>0;default:return $.trim(value).length>0;}},remote:function(value,element,param){if(this.optional(element))return"dependency-mismatch";var previous=this.previousValue(element);if(!this.settings.messages[element.name])this.settings.messages[element.name]={};this.settings.messages[element.name].remote=typeof previous.message=="function"?previous.message(value):previous.message;param=typeof param=="string"&&{url:param}||param;if(previous.old!==value){previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){if(response){var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);validator.showErrors();}else{var errors={};errors[element.name]=response||validator.defaultMessage(element,"remote");validator.showErrors(errors);}previous.valid=response;validator.stopRequest(element,response);}},param));return"pending";}else if(this.pending[element.name]){return"pending";}return previous.valid;},minlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)>=param;},maxlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)<=param;},rangelength:function(value,element,param){var length=this.getLength($.trim(value),element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value);},url:function(value,element){return this.optional(element)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value));},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(value);},dateDE:function(value,element){return this.optional(element)||/^\d\d?\.\d\d?\.\d\d\d?\d?$/.test(value);},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value);},numberDE:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:\.\d{3})+)(?:,\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},creditcard:function(value,element){if(this.optional(element))return"dependency-mismatch";if(/[^0-9-]+/.test(value))return false;var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);var nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9)nDigit-=9;}nCheck+=nDigit;bEven=!bEven;}return(nCheck%10)==0;},accept:function(value,element,param){param=typeof param=="string"?param:"png|jpe?g|gif";return this.optional(element)||value.match(new RegExp(".("+param+")$","i"));},equalTo:function(value,element,param){return value==$(param).val();}}});})(jQuery);;(function($){var ajax=$.ajax;var pendingRequests={};$.ajax=function(settings){settings=$.extend(settings,$.extend({},$.ajaxSettings,settings));var port=settings.port;if(settings.mode=="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}return(pendingRequests[port]=ajax.apply(this,arguments));}return ajax.apply(this,arguments);};})(jQuery);;(function($){$.each({focus:'focusin',blur:'focusout'},function(original,fix){$.event.special[fix]={setup:function(){if($.browser.msie)return false;this.addEventListener(original,$.event.special[fix].handler,true);},teardown:function(){if($.browser.msie)return false;this.removeEventListener(original,$.event.special[fix].handler,true);},handler:function(e){arguments[0]=$.event.fix(e);arguments[0].type=fix;return $.event.handle.apply(this,arguments);}};});$.extend($.fn,{delegate:function(type,delegate,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments);}});},triggerEvent:function(type,target){return this.triggerHandler(type,[$.event.fix({type:type,target:target})]);}})})(jQuery);

(function($) {
    $.isScrollToFixed = function(el) {
        return !!$(el).data('ScrollToFixed');
    };

    $.ScrollToFixed = function(el, options) {
        // To avoid scope issues, use 'base' instead of 'this' to reference this
        // class from internal events and functions.
        var base = this;

        // Access to jQuery and DOM versions of element.
        base.$el = $(el);
        base.el = el;

        // Add a reverse reference to the DOM object.
        base.$el.data('ScrollToFixed', base);

        // A flag so we know if the scroll has been reset.
        var isReset = false;

        // The element that was given to us to fix if scrolled above the top of
        // the page.
        var target = base.$el;

        var position;
        var originalPosition;
        var originalFloat;
        var originalOffsetTop;
        var originalZIndex;

        // The offset top of the element when resetScroll was called. This is
        // used to determine if we have scrolled past the top of the element.
        var offsetTop = 0;

        // The offset left of the element when resetScroll was called. This is
        // used to move the element left or right relative to the horizontal
        // scroll.
        var offsetLeft = 0;
        var originalOffsetLeft = -1;

        // This last offset used to move the element horizontally. This is used
        // to determine if we need to move the element because we would not want
        // to do that for no reason.
        var lastOffsetLeft = -1;

        // This is the element used to fill the void left by the target element
        // when it goes fixed; otherwise, everything below it moves up the page.
        var spacer = null;

        var spacerClass;

        var className;

        // Capture the original offsets for the target element. This needs to be
        // called whenever the page size changes or when the page is first
        // scrolled. For some reason, calling this before the page is first
        // scrolled causes the element to become fixed too late.
        function resetScroll() {
            // Set the element to it original positioning.
            target.trigger('preUnfixed.ScrollToFixed');
            setUnfixed();
            target.trigger('unfixed.ScrollToFixed');

            // Reset the last offset used to determine if the page has moved
            // horizontally.
            lastOffsetLeft = -1;

            // Capture the offset top of the target element.
            offsetTop = target.offset().top;

            // Capture the offset left of the target element.
            offsetLeft = target.offset().left;

            // If the offsets option is on, alter the left offset.
            if (base.options.offsets) {
                offsetLeft += (target.offset().left - target.position().left);
            }

            if (originalOffsetLeft == -1) {
                originalOffsetLeft = offsetLeft;
            }

            position = target.css('position');

            // Set that this has been called at least once.
            isReset = true;

            if (base.options.bottom != -1) {
                target.trigger('preFixed.ScrollToFixed');
                setFixed();
                target.trigger('fixed.ScrollToFixed');
            }
        }

        function getLimit() {
            var limit = base.options.limit;
            if (!limit) return 0;

            if (typeof(limit) === 'function') {
                return limit.apply(target);
            }
            return limit;
        }

        // Returns whether the target element is fixed or not.
        function isFixed() {
            return position === 'fixed';
        }

        // Returns whether the target element is absolute or not.
        function isAbsolute() {
            return position === 'absolute';
        }

        function isUnfixed() {
            return !(isFixed() || isAbsolute());
        }

        // Sets the target element to fixed. Also, sets the spacer to fill the
        // void left by the target element.
        function setFixed() {
            // Only fix the target element and the spacer if we need to.
            if (!isFixed()) {
                //get REAL dimensions (decimal fix)
                //Ref. http://stackoverflow.com/questions/3603065/how-to-make-jquery-to-not-round-value-returned-by-width
                var dimensions = target[0].getBoundingClientRect();

                // Set the spacer to fill the height and width of the target
                // element, then display it.
                spacer.css({
                    'display' : target.css('display'),
                    'width' : dimensions.width-2,
                    'height' : dimensions.height,
                    'float' : 'left'
                });

                // Set the target element to fixed and set its width so it does
                // not fill the rest of the page horizontally. Also, set its top
                // to the margin top specified in the options.

                cssOptions={
                    'z-index' : base.options.zIndex,
                    'position' : 'fixed',
                    'top' : base.options.bottom == -1?getMarginTop():'',
                    'bottom' : base.options.bottom == -1?'':base.options.bottom,
                    'margin-left' : '0px'
                }
                if (!base.options.dontSetWidth){ cssOptions['width']=target.css('width'); };

                target.css(cssOptions);

                target.addClass(base.options.baseClassName);

                if (base.options.className) {
                    target.addClass(base.options.className);
                }

                position = 'fixed';
            }
        }

        function setAbsolute() {

            var top = getLimit();
            var left = offsetLeft;

            if (base.options.removeOffsets) {
                left = '';
                top = top - offsetTop;
            }

            cssOptions={
              'position' : 'absolute',
              'top' : top,
              'left' : left,
              'margin-left' : '0px'
            }
            if (!base.options.dontSetWidth){ cssOptions['width']=target.css('width'); };

            target.css(cssOptions);

            position = 'absolute';
        }

        // Sets the target element back to unfixed. Also, hides the spacer.
        function setUnfixed() {
            // Only unfix the target element and the spacer if we need to.
            if (!isUnfixed()) {
                lastOffsetLeft = -1;

                // Hide the spacer now that the target element will fill the
                // space.
                spacer.css('display', 'none');

                // Remove the style attributes that were added to the target.
                // This will reverse the target back to the its original style.
                target.css({
                    'z-index' : originalZIndex,
                    'width' : '',
                    'position' : originalPosition,
                    'left' : '',
                    'top' : originalOffsetTop,
                    'margin-left' : ''
                });

                target.removeClass('scroll-to-fixed-fixed');

                if (base.options.className) {
                    target.removeClass(base.options.className);
                }

                position = null;
            }
        }

        // Moves the target element left or right relative to the horizontal
        // scroll position.
        function setLeft(x) {
            // Only if the scroll is not what it was last time we did this.
            if (x != lastOffsetLeft) {
                // Move the target element horizontally relative to its original
                // horizontal position.
                target.css('left', offsetLeft - x);

                // Hold the last horizontal position set.
                lastOffsetLeft = x;
            }
        }

        function getMarginTop() {
            var marginTop = base.options.marginTop;
            if (!marginTop) return 0;

            if (typeof(marginTop) === 'function') {
                return marginTop.apply(target);
            }
            return marginTop;
        }

        // Checks to see if we need to do something based on new scroll position
        // of the page.
        function checkScroll() {
            if (!$.isScrollToFixed(target) || target.is(':hidden')) return;
            var wasReset = isReset;
            var wasUnfixed = isUnfixed();

            // If resetScroll has not yet been called, call it. This only
            // happens once.
            if (!isReset) {
                resetScroll();
            } else if (isUnfixed()) {
                // if the offset has changed since the last scroll,
                // we need to get it again.

                // Capture the offset top of the target element.
                offsetTop = target.offset().top;

                // Capture the offset left of the target element.
                offsetLeft = target.offset().left;
            }

            // Grab the current horizontal scroll position.
            var x = $(window).scrollLeft();

            // Grab the current vertical scroll position.
            var y = $(window).scrollTop();

            // Get the limit, if there is one.
            var limit = getLimit();

            // If the vertical scroll position, plus the optional margin, would
            // put the target element at the specified limit, set the target
            // element to absolute.
            if (base.options.minWidth && $(window).width() < base.options.minWidth) {
                if (!isUnfixed() || !wasReset) {
                    postPosition();
                    target.trigger('preUnfixed.ScrollToFixed');
                    setUnfixed();
                    target.trigger('unfixed.ScrollToFixed');
                }
            } else if (base.options.maxWidth && $(window).width() > base.options.maxWidth) {
                if (!isUnfixed() || !wasReset) {
                    postPosition();
                    target.trigger('preUnfixed.ScrollToFixed');
                    setUnfixed();
                    target.trigger('unfixed.ScrollToFixed');
                }
            } else if (base.options.bottom == -1) {
                // If the vertical scroll position, plus the optional margin, would
                // put the target element at the specified limit, set the target
                // element to absolute.
                if (limit > 0 && y >= limit - getMarginTop()) {
                    if (!wasUnfixed && (!isAbsolute() || !wasReset)) {
                        postPosition();
                        target.trigger('preAbsolute.ScrollToFixed');
                        setAbsolute();
                        target.trigger('unfixed.ScrollToFixed');
                    }
                // If the vertical scroll position, plus the optional margin, would
                // put the target element above the top of the page, set the target
                // element to fixed.
                } else if (y >= offsetTop - getMarginTop()) {
                    if (!isFixed() || !wasReset) {
                        postPosition();
                        target.trigger('preFixed.ScrollToFixed');

                        // Set the target element to fixed.
                        setFixed();

                        // Reset the last offset left because we just went fixed.
                        lastOffsetLeft = -1;

                        target.trigger('fixed.ScrollToFixed');
                    }
                    // If the page has been scrolled horizontally as well, move the
                    // target element accordingly.
                    setLeft(x);
                } else {
                    // Set the target element to unfixed, placing it where it was
                    // before.
                    if (!isUnfixed() || !wasReset) {
                        postPosition();
                        target.trigger('preUnfixed.ScrollToFixed');
                        setUnfixed();
                        target.trigger('unfixed.ScrollToFixed');
                    }
                }
            } else {
                if (limit > 0) {
                    if (y + $(window).height() - target.outerHeight(true) >= limit - (getMarginTop() || -getBottom())) {
                        if (isFixed()) {
                            postPosition();
                            target.trigger('preUnfixed.ScrollToFixed');

                            if (originalPosition === 'absolute') {
                                setAbsolute();
                            } else {
                                setUnfixed();
                            }

                            target.trigger('unfixed.ScrollToFixed');
                        }
                    } else {
                        if (!isFixed()) {
                            postPosition();
                            target.trigger('preFixed.ScrollToFixed');
                            setFixed();
                        }
                        setLeft(x);
                        target.trigger('fixed.ScrollToFixed');
                    }
                } else {
                    setLeft(x);
                }
            }
        }

        function getBottom() {
            if (!base.options.bottom) return 0;
            return base.options.bottom;
        }

        function postPosition() {
            var position = target.css('position');

            if (position == 'absolute') {
                target.trigger('postAbsolute.ScrollToFixed');
            } else if (position == 'fixed') {
                target.trigger('postFixed.ScrollToFixed');
            } else {
                target.trigger('postUnfixed.ScrollToFixed');
            }
        }

        var windowResize = function(event) {
            // Check if the element is visible before updating it's position, which
            // improves behavior with responsive designs where this element is hidden.
            if(target.is(':visible')) {
                isReset = false;
                checkScroll();
            } else {
              // Ensure the spacer is hidden
              setUnfixed();
            }
        }

        var windowScroll = function(event) {
            (!!window.requestAnimationFrame) ? requestAnimationFrame(checkScroll) : checkScroll();
        }

        // From: http://kangax.github.com/cft/#IS_POSITION_FIXED_SUPPORTED
        var isPositionFixedSupported = function() {
            var container = document.body;

            if (document.createElement && container && container.appendChild && container.removeChild) {
                var el = document.createElement('div');

                if (!el.getBoundingClientRect) return null;

                el.innerHTML = 'x';
                el.style.cssText = 'position:fixed;top:100px;';
                container.appendChild(el);

                var originalHeight = container.style.height,
                originalScrollTop = container.scrollTop;

                container.style.height = '3000px';
                container.scrollTop = 500;

                var elementTop = el.getBoundingClientRect().top;
                container.style.height = originalHeight;

                var isSupported = (elementTop === 100);
                container.removeChild(el);
                container.scrollTop = originalScrollTop;

                return isSupported;
            }

            return null;
        }

        var preventDefault = function(e) {
            e = e || window.event;
            if (e.preventDefault) {
                e.preventDefault();
            }
            e.returnValue = false;
        }

        // Initializes this plugin. Captures the options passed in, turns this
        // off for devices that do not support fixed position, adds the spacer,
        // and binds to the window scroll and resize events.
        base.init = function() {
            // Capture the options for this plugin.
            base.options = $.extend({}, $.ScrollToFixed.defaultOptions, options);

            originalZIndex = target.css('z-index')

            // Turn off this functionality for devices that do not support it.
            // if (!(base.options && base.options.dontCheckForPositionFixedSupport)) {
            //     var fixedSupported = isPositionFixedSupported();
            //     if (!fixedSupported) return;
            // }

            // Put the target element on top of everything that could be below
            // it. This reduces flicker when the target element is transitioning
            // to fixed.
            base.$el.css('z-index', base.options.zIndex);

            // Create a spacer element to fill the void left by the target
            // element when it goes fixed.
            spacer = $('<div />');

            position = target.css('position');
            originalPosition = target.css('position');
            originalFloat = 'left';
            originalOffsetTop = target.css('top');

            // Place the spacer right after the target element.
            if (isUnfixed()) base.$el.after(spacer);

            // Reset the target element offsets when the window is resized, then
            // check to see if we need to fix or unfix the target element.
            $(window).bind('resize.ScrollToFixed', windowResize);

            // When the window scrolls, check to see if we need to fix or unfix
            // the target element.
            $(window).bind('scroll.ScrollToFixed', windowScroll);

            // For touch devices, call checkScroll directlly rather than
            // rAF wrapped windowScroll to animate the element
            if ('ontouchmove' in window) {
              $(window).bind('touchmove.ScrollToFixed', checkScroll);
            }

            if (base.options.preFixed) {
                target.bind('preFixed.ScrollToFixed', base.options.preFixed);
            }
            if (base.options.postFixed) {
                target.bind('postFixed.ScrollToFixed', base.options.postFixed);
            }
            if (base.options.preUnfixed) {
                target.bind('preUnfixed.ScrollToFixed', base.options.preUnfixed);
            }
            if (base.options.postUnfixed) {
                target.bind('postUnfixed.ScrollToFixed', base.options.postUnfixed);
            }
            if (base.options.preAbsolute) {
                target.bind('preAbsolute.ScrollToFixed', base.options.preAbsolute);
            }
            if (base.options.postAbsolute) {
                target.bind('postAbsolute.ScrollToFixed', base.options.postAbsolute);
            }
            if (base.options.fixed) {
                target.bind('fixed.ScrollToFixed', base.options.fixed);
            }
            if (base.options.unfixed) {
                target.bind('unfixed.ScrollToFixed', base.options.unfixed);
            }

            if (base.options.spacerClass) {
                spacer.addClass(base.options.spacerClass);
            }

            target.bind('resize.ScrollToFixed', function() {
                spacer.height(target.height());
            });

            target.bind('scroll.ScrollToFixed', function() {
                target.trigger('preUnfixed.ScrollToFixed');
                setUnfixed();
                target.trigger('unfixed.ScrollToFixed');
                checkScroll();
            });

            target.bind('detach.ScrollToFixed', function(ev) {
                preventDefault(ev);

                target.trigger('preUnfixed.ScrollToFixed');
                setUnfixed();
                target.trigger('unfixed.ScrollToFixed');

                $(window).unbind('resize.ScrollToFixed', windowResize);
                $(window).unbind('scroll.ScrollToFixed', windowScroll);

                target.unbind('.ScrollToFixed');

                //remove spacer from dom
                spacer.remove();

                base.$el.removeData('ScrollToFixed');
            });

            // Reset everything.
            windowResize();
        };

        // Initialize the plugin.
        base.init();
    };

    // Sets the option defaults.
    $.ScrollToFixed.defaultOptions = {
        marginTop : 0,
        limit : 0,
        bottom : -1,
        zIndex : 1000,
        baseClassName: 'scroll-to-fixed-fixed'
    };

    // Returns enhanced elements that will fix to the top of the page when the
    // page is scrolled.
    $.fn.scrollToFixed = function(options) {
        return this.each(function() {
            (new $.ScrollToFixed(this, options));
        });
    };
})(jQuery);



(function(global, factory) {
	// AMD
	if (typeof define === 'function' && define.amd) {
		define([ 'jquery' ], function(jQuery) {
			return factory(global, jQuery);
		});
	// CommonJS/Browserify
	} else if (typeof exports === 'object') {
		factory(global, require('jquery'));
	// Global
	} else {
		factory(global, global.jQuery);
	}
}(typeof window !== 'undefined' ? window : this, function(window, $) {
	'use strict';

	var document = window.document;
	var datakey = '__pz__';
	var slice = Array.prototype.slice;
	var rIE11 = /trident\/7./i;
	var supportsInputEvent = (function() {
		// IE11 returns a false positive
		if (rIE11.test(navigator.userAgent)) {
			return false;
		}
		var input = document.createElement('input');
		input.setAttribute('oninput', 'return');
		return typeof input.oninput === 'function';
	})();

	// Regex
	var rupper = /([A-Z])/g;
	var rsvg = /^http:[\w\.\/]+svg$/;

	var floating = '(\\-?\\d[\\d\\.e-]*)';
	var commaSpace = '\\,?\\s*';
	var rmatrix = new RegExp(
		'^matrix\\(' +
		floating + commaSpace +
		floating + commaSpace +
		floating + commaSpace +
		floating + commaSpace +
		floating + commaSpace +
		floating + '\\)$'
	);

	
	function matrixEquals(first, second) {
		var i = first.length;
		while(--i) {
			if (Math.round(+first[i]) !== Math.round(+second[i])) {
				return false;
			}
		}
		return true;
	}

	
	function createResetOptions(opts) {
		var options = { range: true, animate: true };
		if (typeof opts === 'boolean') {
			options.animate = opts;
		} else {
			$.extend(options, opts);
		}
		return options;
	}

	
	function Matrix(a, b, c, d, e, f, g, h, i) {
		if ($.type(a) === 'array') {
			this.elements = [
				+a[0], +a[2], +a[4],
				+a[1], +a[3], +a[5],
				    0,     0,     1
			];
		} else {
			this.elements = [
				a, b, c,
				d, e, f,
				g || 0, h || 0, i || 1
			];
		}
	}

	Matrix.prototype = {
		
		x: function(matrix) {
			var isVector = matrix instanceof Vector;

			var a = this.elements,
				b = matrix.elements;

			if (isVector && b.length === 3) {
				// b is actually a vector
				return new Vector(
					a[0] * b[0] + a[1] * b[1] + a[2] * b[2],
					a[3] * b[0] + a[4] * b[1] + a[5] * b[2],
					a[6] * b[0] + a[7] * b[1] + a[8] * b[2]
				);
			} else if (b.length === a.length) {
				// b is a 3x3 matrix
				return new Matrix(
					a[0] * b[0] + a[1] * b[3] + a[2] * b[6],
					a[0] * b[1] + a[1] * b[4] + a[2] * b[7],
					a[0] * b[2] + a[1] * b[5] + a[2] * b[8],

					a[3] * b[0] + a[4] * b[3] + a[5] * b[6],
					a[3] * b[1] + a[4] * b[4] + a[5] * b[7],
					a[3] * b[2] + a[4] * b[5] + a[5] * b[8],

					a[6] * b[0] + a[7] * b[3] + a[8] * b[6],
					a[6] * b[1] + a[7] * b[4] + a[8] * b[7],
					a[6] * b[2] + a[7] * b[5] + a[8] * b[8]
				);
			}
			return false; // fail
		},
		
		inverse: function() {
			var d = 1 / this.determinant(),
				a = this.elements;
			return new Matrix(
				d * ( a[8] * a[4] - a[7] * a[5]),
				d * (-(a[8] * a[1] - a[7] * a[2])),
				d * ( a[5] * a[1] - a[4] * a[2]),

				d * (-(a[8] * a[3] - a[6] * a[5])),
				d * ( a[8] * a[0] - a[6] * a[2]),
				d * (-(a[5] * a[0] - a[3] * a[2])),

				d * ( a[7] * a[3] - a[6] * a[4]),
				d * (-(a[7] * a[0] - a[6] * a[1])),
				d * ( a[4] * a[0] - a[3] * a[1])
			);
		},
		
		determinant: function() {
			var a = this.elements;
			return a[0] * (a[8] * a[4] - a[7] * a[5]) - a[3] * (a[8] * a[1] - a[7] * a[2]) + a[6] * (a[5] * a[1] - a[4] * a[2]);
		}
	};

	
	function Vector(x, y, z) {
		this.elements = [ x, y, z ];
	}

	
	Vector.prototype.e = Matrix.prototype.e = function(i) {
		return this.elements[ i ];
	};

	
	function Panzoom(elem, options) {

		// Allow instantiation without `new` keyword
		if (!(this instanceof Panzoom)) {
			return new Panzoom(elem, options);
		}

		// Sanity checks
		if (elem.nodeType !== 1) {
			$.error('Panzoom called on non-Element node');
		}
		if (!$.contains(document, elem)) {
			$.error('Panzoom element must be attached to the document');
		}

		// Don't remake
		var d = $.data(elem, datakey);
		if (d) {
			return d;
		}

		// Extend default with given object literal
		// Each instance gets its own options
		this.options = options = $.extend({}, Panzoom.defaults, options);
		this.elem = elem;
		var $elem = this.$elem = $(elem);
		this.$set = options.$set && options.$set.length ? options.$set : $elem;
		this.$doc = $(elem.ownerDocument || document);
		this.$parent = $elem.parent();
		this.parent = this.$parent[0];

		// This is SVG if the namespace is SVG
		// However, while <svg> elements are SVG, we want to treat those like other elements
		this.isSVG = rsvg.test(elem.namespaceURI) && elem.nodeName.toLowerCase() !== 'svg';

		this.panning = false;

		// Save the original transform value
		// Save the prefixed transform style key
		// Set the starting transform
		this._buildTransform();

		// Build the appropriately-prefixed transform style property name
		// De-camelcase
		this._transform = $.cssProps.transform.replace(rupper, '-$1').toLowerCase();

		// Build the transition value
		this._buildTransition();

		// Build containment dimensions
		this.resetDimensions();

		// Add zoom and reset buttons to `this`
		var $empty = $();
		var self = this;
		$.each([ '$zoomIn', '$zoomOut', '$zoomRange', '$reset' ], function(i, name) {
			self[ name ] = options[ name ] || $empty;
		});

		this.enable();

		this.scale = this.getMatrix()[0];
		this._checkPanWhenZoomed();

		// Save the instance
		$.data(elem, datakey, this);
	}

	// Attach regex for possible use (immutable)
	Panzoom.rmatrix = rmatrix;

	Panzoom.defaults = {
		// Should always be non-empty
		// Used to bind jQuery events without collisions
		// A guid is not added here as different instantiations/versions of panzoom
		// on the same element is not supported, so don't do it.
		eventNamespace: '.panzoom',

		// Whether or not to transition the scale
		transition: true,

		// Default cursor style for the element
		cursor: 'move',

		// There may be some use cases for zooming without panning or vice versa
		disablePan: false,
		disableZoom: false,

		// Pan only on the X or Y axes
		disableXAxis: false,
		disableYAxis: false,

		// Set whether you'd like to pan on left (1), middle (2), or right click (3)
		which: 1,

		// The increment at which to zoom
		// Should be a number greater than 0
		increment: 0.1,

		// When no scale is passed, this option tells
		// the `zoom` method to increment
		// the scale *linearly* based on the increment option.
		// This often ends up looking like very little happened at larger zoom levels.
		// The default is to multiply/divide the scale based on the increment.
		linearZoom: false,

		// Pan only when the scale is greater than minScale
		panOnlyWhenZoomed: false,

		// min and max zoom scales
		minScale: 0.3,
		maxScale: 2,

		// The default step for the range input
		// Precendence: default < HTML attribute < option setting
		rangeStep: 0.05,

		// Animation duration (ms)
		duration: 200,
		// CSS easing used for scale transition
		easing: 'ease-in-out',

		// Indicate that the element should be contained within it's parent when panning
		// Note: this does not affect zooming outside of the parent
		// Set this value to 'invert' to only allow panning outside of the parent element (basically the opposite of the normal use of contain)
		// 'invert' is useful for a large panzoom element where you don't want to show anything behind it
		contain: false
	};

	Panzoom.prototype = {
		constructor: Panzoom,

		
		instance: function() {
			return this;
		},

		
		enable: function() {
			// Unbind first
			this._initStyle();
			this._bind();
			this.disabled = false;
		},

		
		disable: function() {
			this.disabled = true;
			this._resetStyle();
			this._unbind();
		},

		
		isDisabled: function() {
			return this.disabled;
		},

		
		destroy: function() {
			this.disable();
			$.removeData(this.elem, datakey);
		},

		
		resetDimensions: function() {
			// Reset container properties
			this.container = this.parent.getBoundingClientRect();

			// Set element properties
			var elem = this.elem;
			// getBoundingClientRect() works with SVG, offsetWidth does not
			var dims = elem.getBoundingClientRect();
			var absScale = Math.abs(this.scale);
			this.dimensions = {
				width: dims.width,
				height: dims.height,
				left: $.css(elem, 'left', true) || 0,
				top: $.css(elem, 'top', true) || 0,
				// Borders and margins are scaled
				border: {
					top: $.css(elem, 'borderTopWidth', true) * absScale || 0,
					bottom: $.css(elem, 'borderBottomWidth', true) * absScale || 0,
					left: $.css(elem, 'borderLeftWidth', true) * absScale || 0,
					right: $.css(elem, 'borderRightWidth', true) * absScale || 0
				},
				margin: {
					top: $.css(elem, 'marginTop', true) * absScale || 0,
					left: $.css(elem, 'marginLeft', true) * absScale || 0
				}
			};
		},

		
		reset: function(options) {
			options = createResetOptions(options);
			// Reset the transform to its original value
			var matrix = this.setMatrix(this._origTransform, options);
			if (!options.silent) {
				this._trigger('reset', matrix);
			}
		},

		
		resetZoom: function(options) {
			options = createResetOptions(options);
			var origMatrix = this.getMatrix(this._origTransform);
			options.dValue = origMatrix[ 3 ];
			this.zoom(origMatrix[0], options);
		},

		
		resetPan: function(options) {
			var origMatrix = this.getMatrix(this._origTransform);
			this.pan(origMatrix[4], origMatrix[5], createResetOptions(options));
		},

		
		setTransform: function(transform) {
			var $set = this.$set;
			var i = $set.length;
			while(i--) {
				$.style($set[i], 'transform', transform);

				// Support IE9-11, Edge 13-14+
				// Set attribute alongside style attribute
				// since IE and Edge do not respect style settings on SVG
				// See https://css-tricks.com/transforms-on-svg-elements/
				if (this.isSVG) {
					$set[i].setAttribute('transform', transform);
				}
			}
		},

		
		getTransform: function(transform) {
			var $set = this.$set;
			var transformElem = $set[0];
			if (transform) {
				this.setTransform(transform);
			} else {

				// IE and Edge still set the transform style properly
				// They just don't render it on SVG
				// So we get a correct value here
				transform = $.style(transformElem, 'transform');

				if (this.isSVG && (!transform || transform === 'none')) {
					transform = $.attr(transformElem, 'transform') || 'none';
				}
			}

			// Convert any transforms set by the user to matrix format
			// by setting to computed
			if (transform !== 'none' && !rmatrix.test(transform)) {

				// Get computed and set for next time
				this.setTransform(transform = $.css(transformElem, 'transform'));
			}

			return transform || 'none';
		},

		
		getMatrix: function(transform) {
			var matrix = rmatrix.exec(transform || this.getTransform());
			if (matrix) {
				matrix.shift();
			}
			return matrix || [ 1, 0, 0, 1, 0, 0 ];
		},

		
		setMatrix: function(matrix, options) {
			if (this.disabled) { return; }
			if (!options) { options = {}; }
			// Convert to array
			if (typeof matrix === 'string') {
				matrix = this.getMatrix(matrix);
			}
			var scale = +matrix[0];
			var contain = typeof options.contain !== 'undefined' ? options.contain : this.options.contain;

			// Apply containment
			if (contain) {
				var dims = options.dims;
				if (!dims) {
					this.resetDimensions();
					dims = this.dimensions;
				}
				var spaceWLeft, spaceWRight, scaleDiff;
				var container = this.container;
				var width = dims.width;
				var height = dims.height;
				var conWidth = container.width;
				var conHeight = container.height;
				var zoomAspectW = conWidth / width;
				var zoomAspectH = conHeight / height;

				// If the element is not naturally centered,
				// assume full space right
				if (this.$parent.css('textAlign') !== 'center' || $.css(this.elem, 'display') !== 'inline') {
					// offsetWidth gets us the width without the transform
					scaleDiff = (width - this.elem.offsetWidth) / 2;
					spaceWLeft = scaleDiff - dims.border.left;
					spaceWRight = width - conWidth - scaleDiff + dims.border.right;
				} else {
					spaceWLeft = spaceWRight = ((width - conWidth) / 2);
				}
				var spaceHTop = ((height - conHeight) / 2) + dims.border.top;
				var spaceHBottom = ((height - conHeight) / 2) - dims.border.top - dims.border.bottom;

				if (contain === 'invert' || contain === 'automatic' && zoomAspectW < 1.01) {
					matrix[4] = Math.max(Math.min(matrix[4], spaceWLeft - dims.border.left), -spaceWRight);
				} else {
					matrix[4] = Math.min(Math.max(matrix[4], spaceWLeft), -spaceWRight);
				}

				if (contain === 'invert' || (contain === 'automatic' && zoomAspectH < 1.01)) {
					matrix[5] = Math.max(Math.min(matrix[5], spaceHTop - dims.border.top), -spaceHBottom);
				} else {
					matrix[5] = Math.min(Math.max(matrix[5], spaceHTop), -spaceHBottom);
				}
			}

			// Animate
			if (options.animate !== 'skip') {
				// Set transition
				this.transition(!options.animate);
			}

			// Update range element
			if (options.range) {
				this.$zoomRange.val(scale);
			}

			// Set the matrix on this.$set
			if (this.options.disableXAxis || this.options.disableYAxis) {
				var originalMatrix = this.getMatrix();
				if (this.options.disableXAxis) {
					matrix[4] = originalMatrix[4];
				}
				if (this.options.disableYAxis) {
					matrix[5] = originalMatrix[5];
				}
			}
			this.setTransform('matrix(' + matrix.join(',') + ')');

			this.scale = scale;

			// Disable/enable panning if zooming is at minimum and panOnlyWhenZoomed is true
			this._checkPanWhenZoomed(scale);

			if (!options.silent) {
				this._trigger('change', matrix);
			}

			return matrix;
		},

		
		isPanning: function() {
			return this.panning;
		},

		
		transition: function(off) {
			if (!this._transition) { return; }
			var transition = off || !this.options.transition ? 'none' : this._transition;
			var $set = this.$set;
			var i = $set.length;
			while(i--) {
				// Avoid reflows when zooming
				if ($.style($set[i], 'transition') !== transition) {
					$.style($set[i], 'transition', transition);
				}
			}
		},

		
		pan: function(x, y, options) {
			if (this.options.disablePan) { return; }
			if (!options) { options = {}; }
			var matrix = options.matrix;
			if (!matrix) {
				matrix = this.getMatrix();
			}
			// Cast existing matrix values to numbers
			if (options.relative) {
				x += +matrix[4];
				y += +matrix[5];
			}
			matrix[4] = x;
			matrix[5] = y;
			this.setMatrix(matrix, options);
			if (!options.silent) {
				this._trigger('pan', matrix[4], matrix[5]);
			}
		},

		
		zoom: function(scale, opts) {
			// Shuffle arguments
			if (typeof scale === 'object') {
				opts = scale;
				scale = null;
			} else if (!opts) {
				opts = {};
			}
			var options = $.extend({}, this.options, opts);
			// Check if disabled
			if (options.disableZoom) { return; }
			var animate = false;
			var matrix = options.matrix || this.getMatrix();
			var startScale = +matrix[0];

			// Calculate zoom based on increment
			if (typeof scale !== 'number') {
				if (options.linearZoom) {
					scale = startScale + (options.increment * (scale ? -1 : 1));
				} else {
					scale = scale ? (startScale / (1 + options.increment)) : (startScale * (1 + options.increment));
				}
				animate = true;
			}

			// Constrain scale
			scale = Math.max(Math.min(scale, options.maxScale), options.minScale);

			// Calculate focal point based on scale
			var focal = options.focal;
			if (focal && !options.disablePan) {
				// Adapted from code by Florian Günther
				// https://github.com/florianguenther/zui53
				this.resetDimensions();
				var dims = options.dims = this.dimensions;
				var clientX = focal.clientX;
				var clientY = focal.clientY;

				// Adjust the focal point for transform-origin 50% 50%
				// SVG elements have a transform origin of 0 0
				if (!this.isSVG) {
					clientX -= (dims.width / startScale) / 2;
					clientY -= (dims.height / startScale) / 2;
				}

				var clientV = new Vector(clientX, clientY, 1);
				var surfaceM = new Matrix(matrix);
				// Supply an offset manually if necessary
				var o = this.parentOffset || this.$parent.offset();
				var offsetM = new Matrix(1, 0, o.left - this.$doc.scrollLeft(), 0, 1, o.top - this.$doc.scrollTop());
				var surfaceV = surfaceM.inverse().x(offsetM.inverse().x(clientV));
				var scaleBy = scale / matrix[0];
				surfaceM = surfaceM.x(new Matrix([scaleBy, 0, 0, scaleBy, 0, 0]));
				clientV = offsetM.x(surfaceM.x(surfaceV));
				matrix[4] = +matrix[4] + (clientX - clientV.e(0));
				matrix[5] = +matrix[5] + (clientY - clientV.e(1));
			}

			// Set the scale
			matrix[0] = scale;
			matrix[3] = typeof options.dValue === 'number' ? options.dValue : scale;

			// Calling zoom may still pan the element
			this.setMatrix(matrix, {
				animate: typeof options.animate !== 'undefined' ? options.animate : animate,
				// Set the zoomRange value
				range: !options.noSetRange
			});

			// Trigger zoom event
			if (!options.silent) {
				this._trigger('zoom', matrix[0], options);
			}
		},

		
		option: function(key, value) {
			var options;
			if (!key) {
				// Avoids returning direct reference
				return $.extend({}, this.options);
			}

			if (typeof key === 'string') {
				if (arguments.length === 1) {
					return this.options[ key ] !== undefined ?
						this.options[ key ] :
						null;
				}
				options = {};
				options[ key ] = value;
			} else {
				options = key;
			}

			this._setOptions(options);
		},

		
		_setOptions: function(options) {
			$.each(options, $.proxy(function(key, value) {
				switch(key) {
					case 'disablePan':
						this._resetStyle();
						
					case '$zoomIn':
					case '$zoomOut':
					case '$zoomRange':
					case '$reset':
					case 'disableZoom':
					case 'onStart':
					case 'onChange':
					case 'onZoom':
					case 'onPan':
					case 'onEnd':
					case 'onReset':
					case 'eventNamespace':
						this._unbind();
				}
				this.options[ key ] = value;
				switch(key) {
					case 'disablePan':
						this._initStyle();
						
					case '$zoomIn':
					case '$zoomOut':
					case '$zoomRange':
					case '$reset':
						// Set these on the instance
						this[ key ] = value;
						
					case 'disableZoom':
					case 'onStart':
					case 'onChange':
					case 'onZoom':
					case 'onPan':
					case 'onEnd':
					case 'onReset':
					case 'eventNamespace':
						this._bind();
						break;
					case 'cursor':
						$.style(this.elem, 'cursor', value);
						break;
					case 'minScale':
						this.$zoomRange.attr('min', value);
						break;
					case 'maxScale':
						this.$zoomRange.attr('max', value);
						break;
					case 'rangeStep':
						this.$zoomRange.attr('step', value);
						break;
					case 'startTransform':
						this._buildTransform();
						break;
					case 'duration':
					case 'easing':
						this._buildTransition();
						
					case 'transition':
						this.transition();
						break;
					case 'panOnlyWhenZoomed':
						this._checkPanWhenZoomed();
						break;
					case '$set':
						if (value instanceof $ && value.length) {
							this.$set = value;
							// Reset styles
							this._initStyle();
							this._buildTransform();
						}
				}
			}, this));
		},

		
		_checkPanWhenZoomed: function(scale) {
			var options = this.options;
			if (options.panOnlyWhenZoomed) {
				if (!scale) {
					scale = this.getMatrix()[0];
				}
				var toDisable = scale <= options.minScale;
				if (options.disablePan !== toDisable) {
					this.option('disablePan', toDisable);
				}
			}
		},

		
		_initStyle: function() {
			var styles = {
				// Set the same default whether SVG or HTML
				// transform-origin cannot be changed to 50% 50% in IE9-11 or Edge 13-14+
				'transform-origin': this.isSVG ? '0 0' : '50% 50%'
			};
			// Set elem styles
			if (!this.options.disablePan) {
				styles.cursor = this.options.cursor;
			}
			this.$set.css(styles);

			// Set parent to relative if set to static
			var $parent = this.$parent;
			// No need to add styles to the body
			if ($parent.length && !$.nodeName(this.parent, 'body')) {
				styles = {
					overflow: 'hidden'
				};
				if ($parent.css('position') === 'static') {
					styles.position = 'relative';
				}
				$parent.css(styles);
			}
		},

		
		_resetStyle: function() {
			this.$elem.css({
				'cursor': '',
				'transition': ''
			});
			this.$parent.css({
				'overflow': '',
				'position': ''
			});
		},

		
		_bind: function() {
			var self = this;
			var options = this.options;
			var ns = options.eventNamespace;
			var str_down = 'mousedown' + ns + ' pointerdown' + ns + ' MSPointerDown' + ns;
			var str_start = 'touchstart' + ns + ' ' + str_down;
			var str_click = 'touchend' + ns + ' click' + ns + ' pointerup' + ns + ' MSPointerUp' + ns;
			var events = {};
			var $reset = this.$reset;
			var $zoomRange = this.$zoomRange;

			// Bind panzoom events from options
			$.each([ 'Start', 'Change', 'Zoom', 'Pan', 'End', 'Reset' ], function() {
				var m = options[ 'on' + this ];
				if ($.isFunction(m)) {
					events[ 'panzoom' + this.toLowerCase() + ns ] = m;
				}
			});

			// Bind $elem drag and click/touchdown events
			// Bind touchstart if either panning or zooming is enabled
			if (!options.disablePan || !options.disableZoom) {
				events[ str_start ] = function(e) {
					var touches;
					if (e.type === 'touchstart' ?
						// Touch
						(touches = e.touches || e.originalEvent.touches) &&
							((touches.length === 1 && !options.disablePan) || touches.length === 2) :
						// Mouse/Pointer: Ignore unexpected click types
						// Support: IE10 only
						// IE10 does not support e.button for MSPointerDown, but does have e.which
						!options.disablePan && (e.which || e.originalEvent.which) === options.which) {

						e.preventDefault();
						e.stopPropagation();
						self._startMove(e, touches);
					}
				};
				// Prevent the contextmenu event
				// if we're binding to right-click
				if (options.which === 3) {
					events.contextmenu = false;
				}
			}
			this.$elem.on(events);

			// Bind reset
			if ($reset.length) {
				$reset.on(str_click, function(e) {
					e.preventDefault();
					self.reset();
				});
			}

			// Set default attributes for the range input
			if ($zoomRange.length) {
				$zoomRange.attr({
					// Only set the range step if explicit or
					// set the default if there is no attribute present
					step: options.rangeStep === Panzoom.defaults.rangeStep &&
						$zoomRange.attr('step') ||
						options.rangeStep,
					min: options.minScale,
					max: options.maxScale
				}).prop({
					value: this.getMatrix()[0]
				});
			}

			// No bindings if zooming is disabled
			if (options.disableZoom) {
				return;
			}

			var $zoomIn = this.$zoomIn;
			var $zoomOut = this.$zoomOut;

			// Bind zoom in/out
			// Don't bind one without the other
			if ($zoomIn.length && $zoomOut.length) {
				// preventDefault cancels future mouse events on touch events
				$zoomIn.on(str_click, function(e) {
					e.preventDefault();
					self.zoom();
				});
				$zoomOut.on(str_click, function(e) {
					e.preventDefault();
					self.zoom(true);
				});
			}

			if ($zoomRange.length) {
				events = {};
				// Cannot prevent default action here
				events[ str_down ] = function() {
					self.transition(true);
				};
				// Zoom on input events if available and change events
				// See https://github.com/timmywil/jquery.panzoom/issues/90
				events[ (supportsInputEvent ? 'input' : 'change') + ns ] = function() {
					self.zoom(+this.value, { noSetRange: true });
				};
				$zoomRange.on(events);
			}
		},

		
		_unbind: function() {
			this.$elem
				.add(this.$zoomIn)
				.add(this.$zoomOut)
				.add(this.$reset)
				.off(this.options.eventNamespace);
		},

		
		_buildTransform: function() {
			// Save the original transform
			// Retrieving this also adds the correct prefixed style name
			// to jQuery's internal $.cssProps
			return this._origTransform = this.getTransform(this.options.startTransform);
		},

		
		_buildTransition: function() {
			if (this._transform) {
				var options = this.options;
				this._transition = this._transform + ' ' + options.duration + 'ms ' + options.easing;
			}
		},

		
		_getDistance: function(touches) {
			var touch1 = touches[0];
			var touch2 = touches[1];
			return Math.sqrt(Math.pow(Math.abs(touch2.clientX - touch1.clientX), 2) + Math.pow(Math.abs(touch2.clientY - touch1.clientY), 2));
		},

		
		_getMiddle: function(touches) {
			var touch1 = touches[0];
			var touch2 = touches[1];
			return {
				clientX: ((touch2.clientX - touch1.clientX) / 2) + touch1.clientX,
				clientY: ((touch2.clientY - touch1.clientY) / 2) + touch1.clientY
			};
		},

		
		_trigger: function (event) {
			if (typeof event === 'string') {
				event = 'panzoom' + event;
			}
			this.$elem.triggerHandler(event, [this].concat(slice.call(arguments, 1)));
		},

		
		_startMove: function(event, touches) {
			if (this.panning) {
				return;
			}
			var moveEvent, endEvent,
				startDistance, startScale, startMiddle,
				startPageX, startPageY, touch;
			var self = this;
			var options = this.options;
			var ns = options.eventNamespace;
			var matrix = this.getMatrix();
			var original = matrix.slice(0);
			var origPageX = +original[4];
			var origPageY = +original[5];
			var panOptions = { matrix: matrix, animate: 'skip' };
			var type = event.type;

			// Use proper events
			if (type === 'pointerdown') {
				moveEvent = 'pointermove';
				endEvent = 'pointerup';
			} else if (type === 'touchstart') {
				moveEvent = 'touchmove';
				endEvent = 'touchend';
			} else if (type === 'MSPointerDown') {
				moveEvent = 'MSPointerMove';
				endEvent = 'MSPointerUp';
			} else {
				moveEvent = 'mousemove';
				endEvent = 'mouseup';
			}

			// Add namespace
			moveEvent += ns;
			endEvent += ns;

			// Remove any transitions happening
			this.transition(true);

			// Indicate that we are currently panning
			this.panning = true;

			// Trigger start event
			this._trigger('start', event, touches);

			var setStart = function(event, touches) {
				if (touches) {
					if (touches.length === 2) {
						if (startDistance != null) {
							return;
						}
						startDistance = self._getDistance(touches);
						startScale = +matrix[0];
						startMiddle = self._getMiddle(touches);
						return;
					}
					if (startPageX != null) {
						return;
					}
					if ((touch = touches[0])) {
						startPageX = touch.pageX;
						startPageY = touch.pageY;
					}
				}
				if (startPageX != null) {
					return;
				}
				startPageX = event.pageX;
				startPageY = event.pageY;
			};

			setStart(event, touches);

			var move = function(e) {
				var coords;
				e.preventDefault();
				touches = e.touches || e.originalEvent.touches;
				setStart(e, touches);

				if (touches) {
					if (touches.length === 2) {

						// Calculate move on middle point
						var middle = self._getMiddle(touches);
						var diff = self._getDistance(touches) - startDistance;

						// Set zoom
						self.zoom(diff * (options.increment / 100) + startScale, {
							focal: middle,
							matrix: matrix,
							animate: 'skip'
						});

						// Set pan
						self.pan(
							+matrix[4] + middle.clientX - startMiddle.clientX,
							+matrix[5] + middle.clientY - startMiddle.clientY,
							panOptions
						);
						startMiddle = middle;
						return;
					}
					coords = touches[0] || { pageX: 0, pageY: 0 };
				}

				if (!coords) {
					coords = e;
				}

				self.pan(
					origPageX + coords.pageX - startPageX,
					origPageY + coords.pageY - startPageY,
					panOptions
				);
			};

			// Bind the handlers
			$(document)
				.off(ns)
				.on(moveEvent, move)
				.on(endEvent, function(e) {
					e.preventDefault();
					// Unbind all document events
					$(this).off(ns);
					self.panning = false;
					// Trigger our end event
					// Simply set the type to "panzoomend" to pass through all end properties
					// jQuery's `not` is used here to compare Array equality
					e.type = 'panzoomend';
					self._trigger(e, matrix, !matrixEquals(matrix, original));
				});
		}
	};

	// Add Panzoom as a static property
	$.Panzoom = Panzoom;

	
	$.fn.panzoom = function(options) {
		var instance, args, m, ret;

		// Call methods widget-style
		if (typeof options === 'string') {
			ret = [];
			args = slice.call(arguments, 1);
			this.each(function() {
				instance = $.data(this, datakey);

				if (!instance) {
					ret.push(undefined);

				// Ignore methods beginning with `_`
				} else if (options.charAt(0) !== '_' &&
					typeof (m = instance[ options ]) === 'function' &&
					// If nothing is returned, do not add to return values
					(m = m.apply(instance, args)) !== undefined) {

					ret.push(m);
				}
			});

			// Return an array of values for the jQuery instances
			// Or the value itself if there is only one
			// Or keep chaining
			return ret.length ?
				(ret.length === 1 ? ret[0] : ret) :
				this;
		}

		return this.each(function() { new Panzoom(this, options); });
	};

	return Panzoom;
}));

var globalAccount = {
        
        userNumber : 0,
        otpLength : 4,
        passLength : 6,
        redirectUrl : "",
        loginStatusRes : false,
        sslAjaxDataType :'json',
        generateOtpUrl : "/customer/account/generateotpforlogin",
        generateOtpUrlForRegister : "/customer/account/generateotp",
        resendOtpUrl : "/customer/account/resendotp",
        validateOtpUrl : "/customer/account/ValidateOtp",
        loginUrl : "/customer/account/login",
        xhr : "",
        validateOtpUrlAndRedirect : "/customer/account/ValidateOtpAndLogin",
        resetPassLink : "/customer/account/forgotpassword/",
        restorePassKey : "",
        resetPassByOtpLink : "/customer/account/restorepass/key/",
        resetPassByOtpLinkBeforeLogin : "/customer/account/restorepassbeforelogin/key/",
        addressCreationLink : "/customer/address/edit/",
        addressCreationLinkNew : "/customer/address/new/",
        addressDeletionLink : "/customer/address/delete",
        customerAddressLink : "/customer/address/index",
        customerAccountLogoutUrl : "/customer/account/logout",
        checkCustomerExist : "/customer/account/checkcustomerexist",
        orderPageAjaxUrl: "/customer/order/index",
        pageLimit: 5,
        
        downloadTimer:'',
        
        is_clicked : true,
        codgenerateotp : "/customer/account/codgenerateotp",
        codotpvalidateUrl : "/customer/account/codotpverify",
        
	init : function ()
	{
		this.otpHiddingEle();
        this.autoValidateOtp();
        this.autoValidateOtpForReset();
		this.validateInputsOnBlur();
		this.showExistingCards();
		this.setAsDefaultAddress();
		this.ajaxCustomerCreation();
        this.setCookieconsentStatus();
	},
        setAsDefaultAddress: function() {
           jQuery('.set-default-button').on('click',function(){
              jQuery(this).text('Saving as Default..').prop('disabled',true); 
           });
        },
        ajaxCustomerCreation: function() {
            $('#form-account-checkout-create').live('submit',function(e){
                          e.preventDefault();
                          var formData = $('#form-account-checkout-create').serializeArray();
                          var validation = validator.formSubmit($('#form-account-checkout-create'));
                           if (validation) {
                               
                               $(".sign-up").text('Logging ...').prop('disabled', true);
                               if(globalAccount.is_clicked){
                                   
                                   globalAccount.is_clicked = false;
                                   $.ajax({
                                            url: "/customer/account/ajaxcreate",
                                           dataType: "json",
                                           type: "post",
                                           data: formData,
                                           success: function (result) {
                                                    if(oneStepCheckout.IsCheckout){
                                                        gaTracking.authCheckout('Signupotp');
                                                    }
                                                    
                                                    facebookPixelTracking.callFbq('CompleteRegistration');
                                                    facebookPixelTracking.callFbq('Lead');
                                                   if(result.success){
                                                       
                                                       
                                                        $('.error-populate').html(result.msg).show();
                                                        $('.error-populate').css('color','#008000');
                                                         window.location.href = result.redirectUrl;
                                                   }else{
                                                        $(".sign-up").text('CONTINUE').prop('disabled', false);
                                                       if(jQuery('.container.customer_account_page').length !== 0){
                                                            if($('.login-header').length > 0) {
                                                               $('.login-header').remove();
                                                           }
                                                           jQuery('.container.customer_account_page').replaceWith(result.content);
                                                       }else{
                                                           jQuery('#form-account-checkout-create').replaceWith(result.content);
                                                           jQuery('.master_login,.customer_logo,.social-signup,.or_txt').show();
                                                       }
                                                          
                                                          if(result.error){
                                                                 jQuery('.details-box.sign_u fieldset').prepend('<p class="error-populate">'+result.error+'</p>');
                                                                 var signupElePosition = $('.main_create > fieldset').offset().top;
                                                                 $('html, body').animate({scrollTop: Math.round(signupElePosition)}, 500);
                                                          }
                                                   }
                                                
                                                globalAccount.is_clicked = true;
                                           }

                                   });
                               }
                           }
           });  
          },
	showExistingCards : function ()
	{
		$(".card-title").each(function() {
			$(this).on('click touch',function () {
				if($(this).hasClass('closed'))
				{
				   $(this).removeClass('closed').addClass('opened');
				   $(this).parents('.account-savedcard').find('.account-card-detail').slideToggle();	
				}
				else 
				{
				   $(this).removeClass('opened').addClass('closed');
				   $(this).parents('.account-savedcard').find('.account-card-detail').slideToggle();	
				}
			});
		});
	},
        removeAddress: function (ele){
            var addressId = jQuery(ele).data('address-id');
            if(addressId){
                globalAccount.setDeleteAddressId(addressId);
                
        if(typeof globalAccount.deleteAddressId !== 'undefined') {
                var url = globalAccount.addressDeletionLink+'?address_id='+globalAccount.deleteAddressId;
                swal({
                title: "Are you sure you want to delete this address?",
                showCancelButton: true,
                closeOnConfirm: false,
                showLoaderOnConfirm: true,
                confirmButtonText: "Yes",
                confirmButtonColor: "#7e883a",
              },
              function(){
                  $.ajax({
                    url: url,
                    type:'GET',
                    data: null,
                    success: function(response) {
                        var resultJson = jQuery.parseJSON(response);
                        if(resultJson.success){
                            $( ".l-hasSidebar" ).replaceWith( resultJson.savedContent );
                            swal({
                                title: resultJson.msg,
                                type: 'success',
                                timer: 3000,
                                showConfirmButton: false
                              });
                        }
                    },
                    error: function(response, error){
                        console.log(error);
                    }

                });
              });
            }
            }           
        },
        ajaxFormSubmit: function (url,postedData,ele,method)
        {
            
            var ele = ele || '';
            var textLoad = '';
            if(ele) {
                textLoad = jQuery(ele).text();
                jQuery(ele).text('Loading...');
            }
            $.ajax({
                url: url,
                type:method,
                data: postedData,
                success: function(response) {
                    var resultJson = jQuery.parseJSON(response);
                    if(resultJson.editAddress) {
                            if(resultJson.success && resultJson.savedContent != ''){
                               $( ".l-hasSidebar" ).replaceWith( resultJson.savedContent );
                               swal({
                                    title: resultJson.msg,
                                    type: "success",
                                    timer: 3000,
                                    showConfirmButton: false
                                  });
                            }else{
                                jQuery('.existingAddressContainer form').slideUp(300, function(){ $(this).remove();});
                                var isMobile =oneStepCheckout.isMobile();
                                if(isMobile){
                                    jQuery(ele).parents('.account-saved-footer.active').after(resultJson.newAddressForm);
                                }else{
                                    jQuery(ele).parents('.row').after(resultJson.newAddressForm);
                                }
                                jQuery('.existingAddressContainer form').hide();
                                jQuery('.existingAddressContainer form').slideDown();
                                if(isMobile){
                                     $('html, body').animate({
                                        scrollTop: jQuery(ele).parents('.account-saved-footer').find('.saveAddBtn').offset().top
                                    }, 500);
                                }
                                if(!resultJson.error){
                                    $('.accountsavedAddresslist .saveAddBtn').removeClass('active').addClass('disnone');
                                    $('.accountsavedAddresslist .updateAddBtn').removeClass('disnone');
                                    $(ele).parents('.accountsavedAddresslist').find('.account-saved-address, .account-saved-footer').addClass('active');
                                    $(ele).parents('.accountsavedAddresslist').find('.saveAddBtn').removeClass('disnone').addClass('active');	
                                    $(ele).addClass('disnone');
                                }
                            }
                           // $('.existingAddressContainer select').chosen();
                        }
                        else if(resultJson.success){
                            var message = 'error';
                            if(resultJson.mobileValid) {
                                $( ".l-hasSidebar" ).replaceWith( resultJson.savedContent );
                                message = 'success';
                            }
                            swal({
                                title: resultJson.msg,
                                type: message,
                                timer: 3000,
                                showConfirmButton: false
                              });
                        }else{
                            jQuery('.new-address-area').html(resultJson.newAddressForm);
                            //$('select').chosen();
                        }
                },
                error: function(response, error){
                    console.log(error);
                }

            }).done(function () {
                if(ele) {
                    jQuery(ele).text(textLoad);
                }
            });
        },
        ajaxFormSubmitForEdit: function (url,postedData,ele,method)
        {
            
            var ele = ele || '';
            var textLoad = '';
            if(ele) {
                textLoad = jQuery(ele).text();
                //jQuery(ele).text('Loading...');
            }
            $.ajax({
                url: url,
                type:method,
                data: postedData,
                success: function(response) {
                    var resultJson = jQuery.parseJSON(response);
                    if(resultJson.editAddress) {
                            if(resultJson.success && resultJson.savedContent != ''){
                               $( ".l-hasSidebar" ).replaceWith( resultJson.savedContent );
                               $('.addressline').find('input').removeClass('error');
                               $('.addressline .s-error').remove();
                               swal({
                                    title: resultJson.msg,
                                    type: "success",
                                    timer: 3000,
                                    showConfirmButton: false
                                  });
                            }else{
                                jQuery('.existingAddressContainer form').slideUp(300, function(){ $(this).remove();});
                                var isMobile =oneStepCheckout.isMobile();
                                if(isMobile){
                                    jQuery(ele).parents('.account-saved-footer.active').after(resultJson.newAddressForm);
                                }else{
                                    jQuery('#address-edit-form').replaceWith(resultJson.newAddressForm);
                                }
                                jQuery('.existingAddressContainer form').hide();
                                jQuery('.existingAddressContainer form').slideDown();
                                if(isMobile){
                                     $('html, body').animate({
                                        scrollTop: jQuery(ele).parents('.account-saved-footer').find('.saveAddBtn').offset().top
                                    }, 500);
                                }
                                if(!resultJson.error){
                                    $('.accountsavedAddresslist .saveAddBtn').removeClass('active').addClass('disnone');
                                    $('.accountsavedAddresslist .updateAddBtn').removeClass('disnone');
                                    $(ele).parents('.accountsavedAddresslist').find('.account-saved-address, .account-saved-footer').addClass('active');
                                    $(ele).parents('.accountsavedAddresslist').find('.saveAddBtn').removeClass('disnone').addClass('active');	
                                    $(ele).addClass('disnone');
                                }
                            }
                            //$('.existingAddressContainer select').chosen();
                        }
                        else if(resultJson.success){
                            var message = 'error';
                            if(resultJson.mobileValid) {
                                $( ".l-hasSidebar" ).replaceWith( resultJson.savedContent );
                                message = 'success';
                            }
                            swal({
                                title: resultJson.msg,
                                type: message,
                                timer: 3000,
                                showConfirmButton: false
                              });
                        }else{
                            jQuery('.new-address-area').html(resultJson.newAddressForm);
                            //$('select').chosen();
                        }
                },
                error: function(response, error){
                    console.log(error);
                }

            }).done(function () {
                if(ele) {
                    jQuery(ele).text(textLoad);
                }
            });
        },
        parseResponse : function (resObj,dataCntrId){

            if(resObj.success){
                console.log('done');
            }else{
                jQuery('.'+dataCntrId).html(resObj.newAddressForm);
            }

            return true;
        },
	showAddressNewBlock : function (isNewBlockShow)
	{
			$('.new-address-area').find('.PinCodeError').remove();			
			$('.new-address-area').find('#AddressForm_postcode').removeAttr('style');
            isNewBlockShow = isNewBlockShow || false;
            $(".new-address-area").slideToggle();
            if(isNewBlockShow){
                $(".showNewAddressBlock").show(400);
            }else{
                $(".showNewAddressBlock").hide();
            }
           // $('select').chosen();
            jQuery('.existingAddressContainer form').slideToggle();
            jQuery('.existingAddressContainer form').remove();
            $('.accountsavedAddresslist .saveAddBtn').removeClass('active').addClass('disnone');
            $('.accountsavedAddresslist .updateAddBtn').removeClass('disnone');	
            $('.accountsavedAddresslist').find('.account-saved-address, .account-saved-footer').removeClass('active');            
	},
	saveAddressNewBlock :function (form,ele)
	{   
            
            //jQuery('#AddressForm_postcode').trigger('blur');
            if(jQuery(ele).data('default-shipping') == 1){
                jQuery('#AddressForm_is_default_shipping').val(1);
            }
            var data = $( '#'+form ).serializeArray();
            if($("#address-form").find('.PinCodeError').length==0)
                {
                globalAccount.ajaxFormSubmitForNew(globalAccount.addressCreationLinkNew,data,ele,'POST');
            }
            else
            {
                return false;
            }
	},
        ajaxFormSubmitForNew: function(url,postedData,ele,method)
        {  
            var ele = ele || '';
            var textLoad = '';
            if(ele) {
                textLoad = jQuery(ele).text();
                //jQuery(ele).text('Loading...');
            }
            $.ajax({
                url: url,
                type:method,
                data: postedData,
                success: function(response) {
                    var resultJson = jQuery.parseJSON(response);
                    if(resultJson.editAddress) {
                            if(resultJson.success && resultJson.savedContent != ''){
                               $( ".l-hasSidebar" ).replaceWith( resultJson.savedContent );
                               swal({
                                    title: resultJson.msg,
                                    type: "success",
                                    timer: 3000,
                                    showConfirmButton: false
                                  });
                            }else{
                                jQuery('.existingAddressContainer form').slideUp(300, function(){ $(this).remove();});
                                var isMobile =oneStepCheckout.isMobile();
                                if(isMobile){
                                    jQuery(ele).parents('.account-saved-footer.active').after(resultJson.newAddressForm);
                                }else{
                                    jQuery(ele).parents('.row').after(resultJson.newAddressForm);
                                }
                                jQuery('.existingAddressContainer form').hide();
                                jQuery('.existingAddressContainer form').slideDown();
                                if(isMobile){
                                     $('html, body').animate({
                                        scrollTop: jQuery(ele).parents('.account-saved-footer').find('.saveAddBtn').offset().top
                                    }, 500);
                                }
                                if(!resultJson.error){
                                    $('.accountsavedAddresslist .saveAddBtn').removeClass('active').addClass('disnone');
                                    $('.accountsavedAddresslist .updateAddBtn').removeClass('disnone');
                                    $(ele).parents('.accountsavedAddresslist').find('.account-saved-address, .account-saved-footer').addClass('active');
                                    $(ele).parents('.accountsavedAddresslist').find('.saveAddBtn').removeClass('disnone').addClass('active');	
                                    $(ele).addClass('disnone');
                                }
                            }
                            //$('.existingAddressContainer select').chosen();
                        }
                        else if(resultJson.success){
                            var message = 'error';
                            if(resultJson.mobileValid) {
                                $( ".l-hasSidebar" ).replaceWith( resultJson.savedContent );
                                message = 'success';
                            }
                            swal({
                                title: resultJson.msg,
                                type: message,
                                timer: 3000,
                                showConfirmButton: false
                              });
                            window.location.href = globalAccount.customerAddressLink;
                        }else{
                            jQuery('#address-form').replaceWith(resultJson.newAddressForm);
                            //$('select').chosen();
                        }
                },
                error: function(response, error){
                    console.log(error);
                }

            }).done(function () {
                if(ele) {
                    jQuery(ele).text(textLoad);
                }
            });  
        },
	saveAddressEditBlock :function (form,ele)
	{
              var addressId = jQuery(ele).data('address-id');
              
                if(addressId){
                    var url = globalAccount.addressCreationLink+'?address_id='+addressId;
                }
                var data = $( '#'+form ).serializeArray();
                
                //console.log(data);                
                
                
                if($("#address-edit-form").find('.errorMessage').length==0)
                {
                    globalAccount.ajaxFormSubmitForEdit(url,data,ele,'POST');
                }
                else 
                {
                    return false;
                }
               
	},
	showAddressEditBlock : function (ele)
	{
		var addressId = jQuery(ele).data('address-id');
                if($('.new-address-area').css('display') == 'block' )
                {
                globalAccount.showAddressNewBlock(true);
                }
                if(addressId){
                    var url = globalAccount.addressCreationLink+'?address_id='+addressId;
                    globalAccount.ajaxFormSubmit(url,false,ele,'GET');
                }
                
		//$(this).parent('.accountsavedAddresslist').find('.account-saved-address').addClass('active');
		$('.accountsavedAddresslist .saveAddBtn').removeClass('active').addClass('disnone');
                //$('.set-default-button').removeClass('active').addClass('disnone');
                $('.default_button_'+addressId).removeClass('active').addClass('disnone');
                $('.cancel_'+addressId).removeClass('disnone');
		$('.accountsavedAddresslist .updateAddBtn').removeClass('disnone');	
		$('.accountsavedAddresslist').find('.account-saved-address, .account-saved-footer').removeClass('active');
		$(ele).parents('.accountsavedAddresslist').find('.account-saved-address, .account-saved-footer').addClass('active');
		$(ele).parents('.accountsavedAddresslist').find('.saveAddBtn').removeClass('disnone').addClass('active');	
		$(ele).addClass('disnone');
//		$('.exist-address-area').slideDown();
		
	},
	hideAddressNewBlock : function ()
	{
                
                $(".new-address-area").slideToggle();
		$(".showNewAddressBlock").show(400);
               
         },
         getdataid : function(id)
         {
        $('.editBlock').hide();
        $('.cancel_'+id).addClass('disnone');
        $('.default_button_'+id).removeClass('disnone').addClass('active');
        $('.save_'+id).addClass('disnone');
        $('.update_'+id).removeClass('disnone').addClass('active');
         },
	showhidePasswordReset : function ()
	{
		$('.newPasswordSec').slideToggle();
                $(".change-account-password").show();
                $(".cancel-change-account-password").show();
                $('.change-account-password a').hide();
	},
        hidePasswordReset : function ()
	{
		$('.newPasswordSec').hide();
                $(".cancel-change-account-password").hide();
                $(".change-account-password").show();
                $('.change-account-password a').show();
	},
	editCProfile :function()
	{
		$("#customer-firstname, #customer-lastname").addClass('activeInput').removeAttr('readonly');
		$("#CProEditButton").addClass('displayNone');
		$("#CProSaveButton").addClass('displayBlock');
	},
	saveProfle :function(form)
	{
		globalAccount.validateInputsOnSubmit(form);
		if($('#'+form).find('.error').length==0){
			// right code here for save profile
			console.log('Profile Success');
		}
	},
	saveNewPassword :function(form)
	{       //return false; 
                var formData = $('#form-account-edit-password').serializeArray();
                var validation = validator.formSubmitSaveNewPassword($('#form-account-edit-password'));
                 if (validation) { 
                console.log(formData);
                $.ajax({
                    url: "/customer/account/restorepass",
                    dataType: "json",
                    type: "post",
                    data: formData,
                    success: function (result) {
                        if (result.status) {
                            return true;
                        } else {
                            event.preventDefault();
                            return false;
                        }
                    }
                });
            } else { 
                console.log(validation);return false;
            }
	},
	validateInputsOnSubmit : function(form)
	{
		//$('.myaccount-secton').find('.error').remove();
		$('#'+form).find('.crequiredfield').each(function(){
			 $(this).parent().find('.error').remove();
			dataInput=$(this).data('input');
			switch(dataInput) {
			case 'firstname':
				var regEx =  /^[a-z_ ]+$/i;
				if(!regEx.test($(this).val()))
				{
				 $(this).parent().find('.error').remove();	
				 $(this).parent().append('<span class="info-text error">Please enter valid firstname</span>');
				}
			break;
			case 'lastname':
				var regEx =  /^[a-z_ ]+$/i;
				if(!regEx.test($(this).val()))
				{
				 $(this).parent().find('.error').remove();	
				 $(this).parent().append('<span class="info-text error">Please enter valid lastname</span>');
				}
			break;
                        case 'old_password':
				if($(this).val().length<6)
				{
                                 $(this).removeClass('.error');
				 $(this).parent().find('.info-text').remove();
			 	 $(this).parent().append('<span class="info-text error">Must be 6 characters or more</span>');
				}
			break;
			case 'password':
				if($(this).val().length<6)
				{
				 $(this).parent().find('.info-text').remove();
			 	 $(this).parent().append('<span class="info-text error">Must be 6 characters or more</span>');
				}
			break;
			case 'pincode':
				var regEx = /^[1-9][0-9]{5}$/;
				if(!regEx.test($(this).val()))
				{
				 $(this).parent().find('.error').remove();	
				 $(this).parent().append('<span class="info-text error">Please enter valid Pincode</span>');
				}
			break;
			case 'city':
				if($(this).val().length<2)
				{
				 $(this).parent().find('.error').remove();	
				 $(this).parent().append('<span class="info-text error">Please enter valid City</span>');
				}
			break;
			case 'state':
				if($(this).val().length<2)
				{
				 $(this).parent().find('.error').remove();	
				 $(this).parent().append('<span class="info-text error">Please enter valid State</span>');
				}
			break;
			case 'address1':
				if($(this).val().length<3)
				{
				 $(this).parent().find('.error').remove();	
				 $(this).parent().append('<span class="info-text error">Please enter valid Address</span>');
				}
			break;
			default:
				$(this).parent().find('.error').remove();
			break;	
			}			
		});
	},
	validateInputsOnBlur : function()
	{
		$('.crequiredfield').each(function(){
		$(this).on('keyup blur',function(){
			//$(this).parent().find('.error').remove();
                        //$(this).parent().removeClass('.error');
                        //$(this).removeClass('.error');
                        $(this).parent().find('.info-text').remove();
                        $('.info-text-confirm').hide();
                        $('.info-text-match').hide();
			dataInput=$(this).data('input');
                    //    console.log(dataInput);
			switch(dataInput) {
			case 'firstname':
                                 //var node = $(this);
                                 var regEx =  /^[a-z_ ]+$/i;
                                 //node.val(node.val().replace(/[^a-z]/g,'') ); 
				if($(this).val().length<1)
				{
				 $(this).parent().find('span.error').remove();
                                 $(this).removeClass('.error');
				 $(this).parent().append('<span class="info-text error">Please enter valid firstname</span>');
				} else if(!regEx.test($(this).val())) 
                                {
                                 $(this).parent().find('span.error').remove();	
				 $(this).parent().append('<span class="info-text error">Please enter valid firstname</span>');
                                }
 
			break;
			case 'lastname':
                                var regEx =  /^[a-z_ ]+$/i;
				if($(this).val().length<1)
				{
				 $(this).parent().find('span.error').remove();	
				 $(this).parent().append('<span class="info-text error">Please enter valid lastname</span>');
				} else if(!regEx.test($(this).val())) 
                                {
                                 $(this).parent().find('span.error').remove();	
				 $(this).parent().append('<span class="info-text error">Please enter valid lastname</span>');
                                }
			break;
                        case 'old_password':
				if($(this).val().length<6)
				{
                                 $(this).removeClass('.error');
				 $(this).parent().find('.info-text').remove();
			 	 $(this).parent().append('<span class="info-text error">Must be 6 characters or more</span>');
				}
			break;
			case 'password':
				if($(this).val().length<6)
				{
                                 $(this).removeClass('.error');
				 $(this).parent().find('.info-text').remove();
			 	 $(this).parent().append('<span class="info-text error">Must be 6 characters or more</span>');
				}
			break;
            case 'crequiredfieldRestore':
				if($(this).val().length<6)
				{
                                 $('.info-text-match').hide();
                                 $('.info-text-confirm').hide();
                                 $(this).removeClass('.error');
			 	 $('.info-text-confirm').show();
				}
				else if($(this).val()!=$("#password").val())
				{
                                 $(this).removeClass('.error');
                                 $('.info-text-confirm').hide();
                                 //$('.info-text-match').hide();
                                 $('.info-text-match').show();
				}
			break;
			default:
                                $(this).removeClass('.error');
                                $('.info-text-confirm').hide();
                                $('.info-text-match').hide();
			break;	
			}	
		});
		});
	},
        getParameterByName : function (name) {
            var url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        },
	signInUser : function()
	{
                this.checkPasswordExist();
		
	},
        
        
        	checkPasswordExist : function ()
	{
                var closestForm = 'form-account-create-t';
		$('#'+closestForm+' .error-populate').hide();
		if($("#signOtp").prop("checked") == true){
			var masterInput=$("#loginInput").val();
			if(masterInput.match(/^\d{10}$/) && masterInput.length==10) {

                                   $.ajax({
                                    url:this.checkCustomerExist,
                                    dataType: globalAccount.sslAjaxDataType,
                                    type: "POST",
                                    crossDomain:globalAccount.sslCrossDomain,
                                    jsonpCallback: 'jsonpCallback',
                                    data: $("#form-account-create-t").serialize(),
                                    success: function (result) {
                                       // console.log(result);
                                         //checking if mobile number exist in our DB
                                         if(result == false){
                                             //if ajax success show below code
                                            $('.master_login').hide();
                                            $(".otp_rht").hide();
                                            $('.after_otp_conf').show();
                                            $(".new_signin_otp_btn").attr('disabled',true);
                                            $("#stepOneSubmit").text("SEND OTP");
                                            
                                            
                                         }
                                         //checking if customer has password
                                         else if (result.password == '') {
                                            var hybris = 1;
                                            $('.fpass').show();
                                            $('.login_form,.reg_form,.Modal-heading').hide();
                                            globalAccount.forgotPassEle(hybris);
                                            if($.isNumeric( masterInput )) {
                                            $('#reset_email').val(masterInput);
                                            }
                                            else {
                                            $('#reset_email').val("");
                                            }
                                        } 
                                        
                                        else  if (result.status) {
                                           
                                           globalAccount.gloginValidation();
                                        } else {
                                            $("#login-ph").val("");
                                            //if ajax error show below code
                                            $('#'+closestForm+' .error-populate').html(result.msg).show();
                                        }

                                    },
                                     error: function (error) {
                                                    console.log(error);
                                                }
                                });
                                

			}
			else 
			{
				$('#'+closestForm+' .error-populate').html('Enter valid mobile number').show();
                                $("#loginInput").addClass("input-error");
			}
		}
else if($("#signOtp").prop("checked") == false)
		{
			var masterInput=$("#loginInput").val();
                        this.validateSignInInputs();
			if(masterInput.match(/^\d{10}$/) || masterInput.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)) {
                            var redirecturl = $("#redirecturl-login").val();
                            var addsaveditems = $("#addsaveditems-login").val();
                            var refRedirectUrl = "?redirecturl="+redirecturl;
                            var refAddsaveditems = "&addsaveditems="+addsaveditems;
                                   $.ajax({
                                    url:this.checkCustomerExist,
                                    dataType: globalAccount.sslAjaxDataType,
                                    jsonpCallback: 'jsonpCallback',
                                    crossDomain: globalAccount.sslCrossDomain,
                                    type: "POST",
                                    data: $("#form-account-create-t").serialize(),
                                  success: function (result) {
                                         if (result.password == '') {
                                             var hybris = 1;
                                            $('.fpass').show();
                                            $('.login_form,.reg_form,.Modal-heading').hide();
                                            globalAccount.forgotPassEle(hybris);
                                            if($.isNumeric( masterInput )) {
                                            $('#reset_email').val(masterInput);
                                            }
                                            else {
                                            $('#reset_email').val("");
                                            }
                                            
                                        } 
                                               else if (result.status) {
                                                  globalAccount.gloginValidation();
                                                } else {
                                                    $('#'+closestForm+' .error-populate').html('please check the credentials').show();
                                                }
                                            },
                                     error: function (error) {
                                                    console.log(error);
                                                }
                                });
			}
            else
            {
                
                $('#' + closestForm + ' .error-populate').html('Enter valid credentials').show();
                $("#loginInput").addClass("input-error");
            }
		}	
	},
	gloginValidation : function ()
	{         
               $('#stepOneSubmit').removeAttr('disabled');
		$('.error-populate').hide();
		if($("#signOtp").prop("checked") == true){
			var masterInput=$("#loginInput").val();
			if(masterInput.match(/^\d{10}$/) && masterInput.length==10) {
				// success ajax otp section
				$("#new_send_otp_btn").text("SENDING OTP ...");
                                $("#otp-code").val("");
                                $.ajax({
                                    url:this.generateOtpUrl,
                                    dataType: "json",
                                    type: "post",
                                    data: $("#form-account-create-t").serialize(),
                                    success: function (result) {
                                        if (result.status) {
                                           
                                           globalAccount.otpTimer();
                                            this.userNumber = result.number;
                                            $("#login-ph").val(this.userNumber);
                                            
                                            $("#success-response").html(this.userNumber);
                                            //if ajax success show below code
                                            $('.master_login').hide();
                                            $(".otp_rht").hide();
                                            $('.after_otp_conf').show();
                                            $('#new_send_otp_btn').attr('disabled',true).css('background', '#333');
                                            $("#stepOneSubmit").text("SEND OTP");   
                                            
                                        } else {
                                            if(result.failed_count >= 3){
                                                $('#stepOneSubmit').prop('disabled', true); 
                                                $('.g-recaptcha').show();
                                                grecaptcha.reset();
                                            }
                                            $("#login-ph").val("");
                                            //if ajax error show below code
                                            $('.error-populate').html(result.msg).show();
                                        }
                                    }
                                });
			}
			else 
			{
				$('.error-populate').html('Enter valid mobile number').show();
                                $("#loginInput").addClass("input-error");
			}
		}
		else if($("#signOtp").prop("checked") == false)
		{
                      
			var masterInput=$("#loginInput").val();
                        this.validateSignInInputs();
			if(masterInput.match(/^\d{10}$/) || masterInput.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)) {
				// success ajax call should come here
                                if (this.getParameterByName("redirecturl") !== undefined) {
                                    refRedirectUrl = "?redirecturl="+this.getParameterByName("redirecturl");
                                    if (this.getParameterByName("addsaveditems") !== undefined) {
                                        refAddsaveditems = "&addsaveditems="+this.getParameterByName("addsaveditems");
                                    } else {refAddsaveditems = "";}
                                } else {refRedirectUrl = ""; refAddsaveditems = "";}
                                $.ajax({
                                    url:this.loginUrl+refRedirectUrl+refAddsaveditems,
                                    dataType: "json",
                                    type: "post",
                                    data: $("#form-account-create-t").serialize(),
                                    success: function (result) {
                                        if(oneStepCheckout.IsCheckout){
                                            gaTracking.authCheckout('Signinpassword');
                                        }
                                        if (result.status) {
                                            $('.error-populate').html(result.msg).show();
                                            $('.error-populate').css('color','#008000');
                                            window.location = result.redirectUrl;
                                        } else {
                                            if(result.failed_count >= 3){
                                                    $('#stepOneSubmit').prop('disabled', true);
                                                    $('.g-recaptcha').show();
                                                    grecaptcha.reset();
                                            }
                                            $('.error-populate').html(result.msg).show();
                                        }
                                    }
                                });
			}
            else
            {
                
                $('.error-populate').html('Enter valid credentials').show();
                $("#loginInput").addClass("input-error");
            }
		}	
	},
        
        validateSignInInputs : function () {
            if ($("#loginInput").val() == "") {
                $("#loginInput").addClass("input-error");
            } else {
                $("#loginInput").removeClass("input-error");
            }
            if ($("#signPassword").val() == "") {
                $("#signPassword").addClass("input-error");
            } else {
                $("#signPassword").removeClass("input-error");
            }
        },
        
        loginByOtp : function () {
            var formData = $('#form-account-create-t-2').serializeArray();
            formData.push({name: 'LoginForm[number]', value: $("#login-ph").val()});
            if ($("#otp-code").val() != "") {
                if (this.xhr != "") {
                    this.xhr.abort();
                }
                this.xhr = $.ajax({
                    url: this.validateOtpUrl,
                    dataType: "json",
                    type: "post",
                    data: formData,
                    success: function (result) {
                        //console.log(result);
                        globalAccount.xhr = "";
                        if (result.status) {
                            $('.uibotltomform .error-populate').hide()
                            $(".otp_wrong").hide();
                            $(".otp_rht").show();
                            
                            $('.js-otp-timer').hide();
                            globalAccount.redirectUrl = result.redirectUrl;
                            globalAccount.loginStatusRes = true;
                            if (result.loginStatus) {
                                //window.location = result.redirectUrl;
                                return true;
                            }
                        } else {
                             if (result.failed_count >= 3){
                                 
                                 if($('.checkout_signup_container').is(':visible')){
                                     $('#myModal_otp').modal('show');
                                 }
                                 else{$('.after_otp_conf').hide();
                            $('#myModal_otp').show();}
                                
                            }
                            $(".otp_rht").hide();
                            $(".otp_wrong").show();
                            globalAccount.redirectUrl = "";
                            globalAccount.loginStatusRes = false;
                            return false;
                        }
                        //location.reload();
                    }
                });
            }
        },
        
        loginByOtpAndRedirect : function () {
            var formData = $('#form-account-create-t-2').serializeArray();
            formData.push({name: 'LoginForm[number]', value: $("#login-ph").val()});
            if ($("#otp-code").val() != "") {
                if (this.xhr != "") {
                    this.xhr.abort();
                }
                if (this.getParameterByName("redirecturl") !== undefined) {
                    refRedirectUrl = "?redirecturl="+this.getParameterByName("redirecturl");
                    if (this.getParameterByName("addsaveditems") !== undefined) {
                        refAddsaveditems = "&addsaveditems="+this.getParameterByName("addsaveditems");
                    } else {refAddsaveditems = "";}
                } else {refRedirectUrl = ""; refAddsaveditems = "";}
                this.xhr = $.ajax({
                    url: this.validateOtpUrlAndRedirect+refRedirectUrl+refAddsaveditems,
                    dataType: "json",
                    type: "post",
                    data: formData,
                    success: function (result) {
                        //console.log(result);
                        globalAccount.xhr = "";
                        if (result.status) {
                            if(oneStepCheckout.IsCheckout){
                                gaTracking.authCheckout('Signinotp');
                            }
                            $(".otp_wrong").hide();
                            $(".otp_rht").show();
                            
                            $('.js-otp-timer').hide();
                            globalAccount.redirectUrl = result.redirectUrl;
                            globalAccount.loginStatusRes = true;
                            if (result.loginStatus) {
                                window.location = result.redirectUrl;
                                return true;
                            }
                        } else {
                            $(".otp_rht").hide();
                            $(".otp_wrong").show();
                            globalAccount.redirectUrl = "";
                          //  $('.master_login').show();
                            $('.after_otp_conf').show();
                            jQuery('#loginInput').parent().append('<p class="error-populate">' + result.msg + '</p>');
                            globalAccount.loginStatusRes = false;
                            return false;
                        }
                        //location.reload();
                    }
                });
            }
        },
        
        autoValidateOtp : function () {
            $(document).on('keyup', "#otp-code", function(){
               var inputLen = $(this).val().toString().length;
                if (inputLen == globalAccount.otpLength) {
                    globalAccount.loginStatusRes = false;
                    globalAccount.loginByOtp();
          //           $(".new_signin_otp_btn").attr('disabled',false);
                } else {
                   $(".otp_rht").hide();
                   $(".otp_wrong").show();
           //         $(".new_signin_otp_btn").attr('disabled',true);
                    return false;
                }
            });
        },
        
        redirectUser : function () {
//            if (globalAccount.loginStatusRes) {
//                window.location = globalAccount.redirectUrl;
//            }
            globalAccount.loginByOtpAndRedirect();
        },
        
        sendNewOtp : function () {
            $('.error-populate').hide();
		if($("#signOtp").prop("checked") == true){
			var masterInput=$("#loginInput").val();
			if(masterInput.match(/^\d{10}$/) && masterInput.length==10) {
				// success ajax otp section
				
                                $.ajax({
                                    url:this.resendOtpUrl,
                                    dataType: "json",
                                    type: "post",
                                    data: $("#form-account-create-t").serialize(),
                                    success: function (result) {
                                        if (result.status) {
                                            
                                            globalAccount.otpTimer();
                                            this.userNumber = result.number;
                                            $("#login-ph").val(this.userNumber);
                                            
                                            $(".otp-success").html('OTP has been resent to mobile number <span id="success-response">'+this.userNumber+'</span>');
                                            //if ajax success show below code
                                            $('.master_login').hide();
                                            $(".otp_rht").hide();
                                            $('.after_otp_conf').show();                                           
                                        } else {
                                            $("#login-ph").val("");
                                            //if ajax error show below code
                                            $('.error-populate').html(result.msg).show();
                                        }
                                    }
                                });
			}
			else 
			{
				$('.error-populate').html('Enter valid mobile number').show();
                                $("#loginInput").addClass("input-error");
			}
		}
		else if($("#signOtp").prop("checked") == false)
		{  
			var masterInput=$("#loginInput").val();
                        this.validateSignInInputs();
			if(masterInput.match(/^\d{10}$/) || masterInput.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)) {
				// success ajax call should come here
                                if (this.getParameterByName("redirecturl") !== undefined) {
                                    refRedirectUrl = "?redirecturl="+this.getParameterByName("redirecturl");
                                    if (this.getParameterByName("addsaveditems") !== undefined) {
                                        refAddsaveditems = "&addsaveditems="+this.getParameterByName("addsaveditems");
                                    } else {refAddsaveditems = "";}
                                } else {refRedirectUrl = ""; refAddsaveditems = "";}
                                $.ajax({
                                    url:this.loginUrl+refRedirectUrl+refAddsaveditems,
                                    dataType: "json",
                                    type: "post",
                                    data: $("#form-account-create-t").serialize(),
                                    success: function (result) {
                                        //console.log(result);
                                        if (result.status) {
                                            $('.error-populate').html(result.msg).show();
                                            window.location = result.redirectUrl;
                                        } else {
                                            $('.error-populate').html(result.msg).show();
                                        }
                                    }
                                });
			}
			else 
			{       
				$('.error-populate').html('Enter valid credentials').show();
                                $("#loginInput").addClass("input-error");
			}
		}
        },
        
        sendNewOtpReg :function(resendOtp,shippingForm){
            if($('#otp_to_mobile').is(':visible')){
             if(shippingForm == 1)
            {
               var formData = $('#form-shipping-address').serializeArray();
            }
            else{
                var formData = $('#form-account-checkout-create').serializeArray();
            }
            
             var otpUrl = this.generateOtpUrlForRegister;
            $(this).text('SENDING OTP ...').prop('disabled', true);
            var curentId = $(this).attr('id');
            if(resendOtp == 1)
            {
                 otpUrl = this.resendOtpUrl;
            }
            $.ajax({
                url: otpUrl,
                dataType: "json",
                type: "post",
                data: formData,
                success: function (result) {
                    if (result.status) {
                        if (curentId === 'new-ot') {
                            $('#new-ot').text('SEND NEW OTP');
                        } else {
                            $('#otp_generation').text('OTP SENT');
                            $('.newsletter_category').hide();
                        }
                        jQuery('.details-box.sign_u fieldset').prev('.error-populate').remove();
                        userNumber = result.number;
                        jQuery('#otp_to_mobile').html(userNumber);
                        jQuery('.details-box').hide();
                        jQuery('.social-signup').hide();
                        jQuery('.or').hide();
                        jQuery('#divOtp').show();
                        
                        globalAccount.otpTimer();
                        $(".sign-up").css("background", "#0092ff");
                        $("button").addClass("signup_hover");
                                               
                         if($('.checkout_signup_container').is(':visible')){
                              $('html, body').animate({scrollTop: $("#divOtp").offset().top}, 500);
                            
                            }
                            else{
                                $('html, body').animate({scrollTop: $(".login-header").offset().top}, 500);
                            }
                    
                    } else {
                        $('#otp_generation').text('Send otp for verification').prop('disabled', false);
                      //  jQuery('#contact_number').parent().append('<div class="s-error mob-error">' + result.msg + '</div>');
                        
                    }
                }
            });
        }
        },
	otpHiddingEle : function()
	{
		$(document).on('change', "#signOtp", function()
		{	
			$('.error-populate').hide();
			if($("#signOtp").prop("checked") == true){
				$('.opt_hidden').hide();
                                keypress.allowOnlyNumbers('#loginInput');
                                $("#loginInput").attr('maxlength','10');
                                var masterInput=$("#loginInput").val();
                                if(!masterInput.match(/^\d{10}$/) || masterInput == "") {
                                    $("#loginInput").val("");
                                    $("#control_user").text("Mobile Number");
                                    $("#loginInput").attr("placeholder", "Mobile number");
                                }
				$("#stepOneSubmit").text("SEND OTP");
                                $("#stepOneSubmit").attr("id", "new_send_otp_btn");
			}
			else if($("#signOtp").prop("checked") == false)
			{       $("#loginInput").removeAttr('onkeyup');
                                $("#loginInput").removeAttr('maxlength');
				$('.opt_hidden').show();
				$("#new_send_otp_btn").text("SIGN IN");
                                $("#control_user").text("Email Address or Mobile Number");
                                $("#loginInput").attr("placeholder", "Email Address or Mobile number");
			}
		});
		$(document).on('change', ".resettingSource", function()
		{	
			$('.error-populate').hide();
			if($(".resettingSource:checked"))
			{
				$("#reset_email").removeAttr("disabled");
					//alert('email');
                                        if ($(".resettingSource:checked").val() == "otp") {
                                            $('#reset_email').val("");
                                            $('#reset_email').attr("placeholder", "Enter your mobile number");
                                         if($('.signin-signup-popup').is(':visible')){             
                                             $('#reset_email').addClass('sendotptonumber');
                                           }
                                            $('.reset-info-area, .reset-pass-area').hide();
                                            $('#sent-otp-email').hide();
                                            $("#reset_email").attr('maxlength','10');
                                        }
                                        
                                        if ($(".resettingSource:checked").val() == "email") {
                                            $('#reset_email').val("");
                                            $('#reset_email').attr("placeholder", "Email address");
                                            $('#reset_email').removeClass('sendotptonumber')
                                            $('.reset-pass-area, .reset-info-area').hide();
                                            $('#sent-otp-email').show();
                                            $("#reset_email").removeAttr('maxlength');
                                        }
			}
		});
	},
        
	sendResetRequest : function()
	{
		var masterInput=$("#reset_email").val();
		if($(".resettingSource:checked").val() == "otp"){
			if(masterInput.match(/^\d{10}$/) && masterInput.match(/^(?:(?:\+|0{0,2})91(\s*[\-]\s*)?|[0]?)?[789]\d{9}$/)) {
                                $('#reset_email').css('border-color', '#D3D3D3');
				// success ajax call should come here
                                $("#stepOneSubmitReset").text("SENDING OTP ...");
                                var formData = $('#form-account-create-t-reset').serializeArray();
                                formData.push({name: 'LoginForm[number]', value: $("#reset_email").val()});
                                if($('.signin-signup-popup').is(':visible')){ 
                                $('#reset_email').parent().append("<div class=inputFieldloader></div>");
                                }
                                
                                globalAccount.otpTimer();
				//if ajax success show below code
                                $.ajax({
                                    url:this.generateOtpUrl,
                                    dataType: "json",
                                    type: "post",
                                    data: formData,
                                    success: function (result) {
                                        if (result.status) {
                                            this.userNumber = result.number;
                                            $("#login-ph").val(this.userNumber);
                                            $("#success-response").html(result.formatedNumber);
                                            //if ajax success show below code
                                            $('.inputFieldloader').remove();
                                            
                                            if($('.checkout_signup_container').is(':visible')){
                                            $('.reset-area').hide();
                                             }else{
                                              $('.reset-area').show();
                                            }
                                            $('#sent-otp-email').hide();
                                            $('.reset-info-area').hide();
                                            $('.reset-pass-area').show();
                                            $(".otp_rht").hide();
                                            $('.error-populate').hide();
                                        } else {
                                         //   $("#login-ph").val("");
                                            //if ajax error show below code
                                            $('.error-populate').html(result.msg).show();
                                            $('.error-populate').show();
                                            $('.inputFieldloader').remove();
                                            $('.reset-pass-area').hide();
                                        }
                                        $("#stepOneSubmitReset").text("PROCEED");
                                    }
                                });
			}
			else 
			{
			//   $('.error-populate').html('Please check credential').show();
                         //  $('#reset_email').css('border-color', 'red');
 			   $('.inputFieldloader').remove();
                            $('.reset-pass-area').hide();
			}
		}
		else if($(".resettingSource:checked").val() == "email")
		{
			if(masterInput.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)) {
                                $('#reset_email').css('border-color', '#D3D3D3');

                                $('#reset_email').parent().append("<div class=inputFieldloader></div>");
				// success ajax call should come here
                                $.ajax({
                                    url:this.resetPassLink,
                                    dataType: "json",
                                    type: "post",
                                    data: $("#form-account-create-t-reset").serialize(),
                                    success: function (result) {
                                        if (result.status) {
                                            //if ajax success show below code
                                          if($('.signin-signup-popup').is(':visible')){ 
                                            $('.reset-area').show();
                                            }
                                            else{
                                                $('.reset-area').hide();
                                            }
                                            $('.inputFieldloader').remove();
                                            $('.reset-info-area').show();
                                            $('#user-reset-email-id').html(result.msg);
                                            globalAccount.restorePassKey = result.restorePassKey;
                                        } else {
                                            $('.error-populate').html(result.msg).show();
                                            $('.error-populate').show();
                                            $('.inputFieldloader').remove();
                                        }
                                    }
                                });
			}
			else 
			{
			    $('.inputFieldloader').remove();
			}
		}
		else 
		{
			 //$('.error-populate').html('Enter valid Input').show(); 
		}
	},
        
        autoValidateOtpForReset : function () {
            $(document).on("keyup", "#otp-code-reset", function () {
                var inputLen = $(this).val().toString().length;
                if (inputLen == globalAccount.otpLength) {
                    globalAccount.loginStatusRes = false;
                    globalAccount.loginByOtpForReset();
                } else {
                    $(".otp_rht").hide();
                    $(".otp_wrong").show();
                    $(".enter-new-pass").attr("disabled", "disabled");
                    $(".enter-new-pass-2").attr("disabled", "disabled");
                    $(".enter-new-pass-3").attr("disabled", "disabled");
                }
            });
        },
        enableCSRFpopUp: function() {
            var windowObj = window.location;
            var currentUrl = JSON.stringify(windowObj);
            if (currentUrl.indexOf("#reload-popup") >= 0) {
                $(".reload_popup").show();
            }
        },
        loginByOtpForReset : function () {
            var formData = $('#form-account-create-t-reset').serializeArray();
            formData.push({name: 'LoginForm[number]', value: $("#login-ph").val()});
            formData.push({name: 'LoginForm[otp]', value: $("#otp-code-reset").val()});
            if ($("#otp-code-reset").val() != "") {
                if (this.xhr != "") {
                    this.xhr.abort();
                }
                this.xhr = $.ajax({
                    url: this.validateOtpUrl,
                    dataType: "json",
                    type: "post",
                    data: formData,
                    success: function (result) {
                        //console.log(result);
                        globalAccount.xhr = "";
                        if (result.status) {
                            $(".otp_wrong").hide();
                            $(".otp_rht").show();
                            
                            $('.js-otp-timer').hide();
                            globalAccount.redirectUrl = result.redirectUrl;
                            globalAccount.loginStatusRes = true;
                            $(".enter-new-pass").removeAttr("disabled");
                            $(".enter-new-pass-2").removeAttr("disabled");
                            $(".enter-new-pass-3").removeAttr("disabled");
                            if (result.loginStatus) {
                                //window.location = result.redirectUrl;
                                if (result.restorePassKey != "") {
                                    globalAccount.restorePassKey = result.restorePassKey;
                                }
                                return true;
                            }
                        } else {
                            $(".otp_rht").hide();
                            $(".otp_wrong").show();
                            globalAccount.redirectUrl = "";
                            globalAccount.loginStatusRes = false;
                            $(".enter-new-pass").attr("disabled", "disabled");
                            $(".enter-new-pass-2").attr("disabled", "disabled");
                            $(".enter-new-pass-3").attr("disabled", "disabled");
                            return false;
                        }
                        //location.reload();
                    }
                });
            }
        },
        
        resetSendNewOtp : function () {
            $(".enter-new-pass").attr("disabled", "disabled");
            $(".enter-new-pass-2").attr("disabled", "disabled");
            $(".enter-new-pass-3").attr("disabled", "disabled");
            var masterInput=$("#reset_email").val();
            if($(".resettingSource:checked").val() == "otp"){
                
                if(masterInput.match(/^\d{10}$/)) {
                        var formData = $('#form-account-create-t-reset').serializeArray();
                        formData.push({name: 'LoginForm[number]', value: $("#reset_email").val()});
                        formData.push({name: 'LoginForm[otp]', value: $("#otp-code-reset").val()});
                        $.ajax({
                            url:this.resendOtpUrl,
                            dataType: "json",
                            type: "post",
                            data: formData,
                            success: function (result) {
                                if (result.status) {
                                    
                                    globalAccount.otpTimer();
                                    this.userNumber = result.number;
                                    $("#login-ph").val(this.userNumber);
                                    $("#success-response").html(result.formatedNumber);
                                    $("#otp-code-reset").val("");
                                    $(".enter-new-pass").css("border-color", "#D3D3D3");
                                    $(".enter-new-pass").val("");
                                    $(".enter-new-pass-2").css("border-color", "#D3D3D3");
                                    $(".enter-new-pass-2").val("");
                                    $('.error-populate').hide();
                                    $('.pass-len-identifier').css("color", "#191919");
                                    $('.otp-title').hide();
                                    $(".new-reset-otp-sent").html("An OTP has been sent to mobile number "+result.formatedNumber);
                                    //if ajax success show below code

                                    $(".otp_rht").hide();
                                } else {
                                    $("#login-ph").val("");
                                    //if ajax error show below code
                                    $('.error-populate').html(result.msg).show();
                                }
                            }
                        });
                }
                else 
                {
                   $('.error-populate').html('Please check credential').show();
                   $('#reset_email').css('border-color', 'red');
                }
            }
        },
        
        resendResetRequest : function()
	{
		var masterInput=$("#reset_email").val();
		if($(".resettingSource:checked").val() == "email")
		{
                    if(masterInput.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)) {
                            $('#reset_email').css('border-color', '#D3D3D3');

                            // success ajax call should come here
                            $.ajax({
                                url:this.resetPassLink,
                                dataType: "json",
                                type: "post",
                                data: $("#form-account-create-t-reset").serialize(),
                                success: function (result) {
                                    if (result.status) {
                                        //if ajax success show below code
                                        $('#user-reset-email-id').html("Email has been resent");
                                        globalAccount.restorePassKey = result.restorePassKey;
                                    } else {
                                        //$('.error-populate').html(result.msg).show();
                                    }
                                }
                            });
                    }
                    else 
                    {
                       $('.error-populate').html('Please check credential').show();
                       $('#reset_email').css('border-color', 'red');
                    }
		}
		else 
		{
			 //$('.error-populate').html('Enter valid Input').show(); 
		}
	},
	forgotPassEle : function(hybris)	
	{
                if(hybris ==1){
                    $('.login-header .login-title').text('We are in process of upgrading our security policy, request you to please change your password.');
                }else{
                    $('.login-header .login-title').text('Did you forget your password?');
                }
		$('.master_login').hide();
		$('.reset-area').show();
                $('.login-title').html('Reset Password');
        },
        
        resetPasswordAndLogin : function () {
            
            var passVal = $(".enter-new-pass").val();
            var inputLen = passVal.toString().length;
            if (inputLen >= globalAccount.passLength) {
                $.ajax({
                    url:this.resetPassByOtpLinkBeforeLogin+globalAccount.restorePassKey,
                    dataType: "json",
                    type: "post",
                    data: $("#form-account-create-t-2-reset-pass").serialize(),
                    success: function (result) {
                        if (result.status) {
                            if (result.status) {
                                window.location = result.redirectUrl;
                            } else {
                                $('.error-populate').html(result.msg).show();
                            }

                        } else {
                            $('.error-populate').html(result.msg).show();
                        }
                    }
                });
            }
            else {
                $('.error-populate').html("Must be 6 characters or more").show();
                $('.error-populate').css("text-align", "left");
                $('.error-populate').css("font-size", "12px");
                $('.error-populate').css("color", "red");
                //$(".enter-new-pass").css("border-color", "red");
                //$(".pass-len-identifier").css("color", "red");
                $(".enter-new-pass-2").css("border-color", "red");
            }
            if (inputLen < globalAccount.passLength) {
                //$('.error-populate').html("Must be 6 characters or more").show();
                $(".enter-new-pass").css("border-color", "red");
                $(".pass-len-identifier").css("color", "red");
            }
        },
        setDeleteAddressId: function(deleteAddressId) {
            this.deleteAddressId = deleteAddressId;
        },
        setCookieconsentStatus:function() {
            $('.cc-dismiss').on('click',function() {
                $.ajax({
                    url: '/index/SetCookie',
                    dataType: "json",
                    type: "get",
                    data: {'cookieName':'cookieconsent_status','cookieValue':'dismiss'},
                    success: function(result) {
                        if(result.status==true) {
                            $(".cookie-window").hide();
                        }
                    },
                });
            });
        },
        orderPageInitialize: function() {
            $('.order-header').on('click', function () {
                $('.order-body-div').html('');
                $('.order-header').parent().find('.button-cancelorder').hide();

                if($(this).find('.total_price').hasClass('open')) {
                    $('.order-header').parent().find('.order-body,.order-invoice-id').hide();
                    $('.order-header').find('.total_price').removeClass('open');
                }
                else {
                    $('.order-header').find('.total_price').addClass('open');
                    $("#order_items_loader").show();
                    var orderNr = $(this).data("order-nr");
                    var itemsUrl = ordercancel.orderLineAjaxUpdateUrl+orderNr;
                    $.get(itemsUrl,function(data) {
                        try {
                            var dataObj = JSON.parse(data);
                            if (dataObj.status == false) {
                                 $('.reload_popup').show();
                                 location.reload();
                            } else {
                                $('.reload_popup').hide();
                                $("#order-body-div-"+orderNr).html(dataObj.html);
                            }
                        }
                        catch(e) {
                            $('.reload_popup').show();
                            location.reload();
                            console.log(data);
                        }
                        $("#order_items_loader").hide();
                    });
                    $('.order-header').parent().find('.order-body').hide();
                    $('.order-header').find('.total_price').removeClass('open');
                    $(this).find('.total_price').addClass('open');
                    $(this).parent().find('.button-cancelorder').slideToggle();
                    $(this).parent().find('.order-body,.order-invoice-id').slideToggle();
                    if($(window).width()>767) {
                        $('html, body').animate({
                            scrollTop: ($(this).offset().top-100)
                        },1000);
                    }
                    else {
                        $('html, body').animate({
                            scrollTop: ($(this).offset().top-50)
                        },1000);
                    }
                }
            });
        },
        myOrderPagination: function(pages) {
           $('#myorder_pagination').twbsPagination({
                totalPages: pages,
                next: '<i class="pageright fa fa-caret-right"></i>',
                prev: '<i class="pageright fa fa-caret-left"></i>',
                cssStyle: '',
                first:'',
                last:'',
                onPageClick: function (event, page) {
                     event.stopImmediatePropagation();
                     $("#order_items_loader").show();
                    globalAccount.ajaxPageUpdate(page);
                }
            });
        },
        ajaxPageUpdate: function(page) {
            var curPage = page-1;
            $.ajax({
                dataType: "json",
                url:globalAccount.orderPageAjaxUrl,
                type: "GET",
                data:{pageValue:curPage},
                success: function (result) {
                    if(result.status == true) {
                        $('#salesorder-pagination-content').html($(result.data).find('#salesorder-pagination-content').html());
                        $("#order_items_loader").hide();
                        globalAccount.orderPageInitialize();
                        if($(window).width()>767) {
                           $('html, body').animate({
                            scrollTop: ($('#salesorder-pagination-content').offset().top-230)
                            },1000);
                        } else {
                            $('html, body').animate({
                                scrollTop: ($('#salesorder-pagination-content').offset().top-50)
                            },1000);
                        }

                    } else if(result.status == false) {
                        location.reload();
                    }
                }
            });
        },
       
        otpTimer: function () {
            $('.js-otp-timer').hide();
            var timeleft = 30;
            globalAccount.downloadTimer = setInterval(function () {
                if($('.otp_rht').is(':visible') || $('.success_otp').is(':visible')){
                    clearInterval(globalAccount.downloadTimer);
                    $('.countdowntimer').html('');
                    $('new_otp').hide(); 
                    timeleft = 30;
                }
              else{  
                timeleft--;
                $('.countdowntimer').text("Resend OTP will be active:"+timeleft);
                if (timeleft <= 0) {
                    clearInterval(globalAccount.downloadTimer);
                    $('.countdowntimer').html('');
                    $('.js-otp-timer').show(); 
                    $('.new_otp').show(); 
                }
            }
            
            }, 1000);
        },
     
     
    codOtpGenerate: function (resendOtp) {
        var mobile = $("#customer_phone").val();
        var otpUrl = this.codgenerateotp;
        if (mobile.match(/^\d{10}$/)) {
            $('#checkout-complete-payment-btn').hide();
            $('#cod_otp').hide();
            $('.js-otp-timer').hide(); 
            $(".cod_otp_generate").text("SENDING OTP ...");
            
            if(resendOtp == 1)
            {
                 otpUrl = this.resendOtpUrl;
            }
            $.ajax({
                url: otpUrl,
                dataType: "json",
                data: {'mobile': mobile},
                success: function (result) {
                    if (result.status) {
                        $(".otp_rht").hide();
                        globalAccount.otpTimer();
                        $('.cod-otp-verification').hide();
                        $('#cod_otp, .cod-captchaBox .otp_area').show();
                        $('#new_send_otp_btn').attr('disabled', true).css('background', '#333');
                        $("#stepOneSubmit").text("SEND OTP");

                    } else {
                        $('.error-populate').html(result.msg).show();
                    }
                }
            });
        }
        else
        {
            $('.error-populate').html('Enter valid mobile number').show();
            $("#loginInput").addClass("input-error");
        }
        },
        
         
        codOtpvalidate: function () {
            var otp     = $("#cod_otp").val();
            var mobile  = $("#customer_phone").val();
            if (otp.match(/^\d{4}$/)) {
                $.ajax({
                    url: this.codotpvalidateUrl,
                    dataType: "json",
                    data: {'otp': otp, 'mobile': mobile},
                    success: function (result) {
                        if (result.status) {
                            $('#checkout-complete-payment-btn').show();
                            $('.uibotltomform .error-populate').hide()
                            $(".otp_wrong").hide();
                            $(".otp_rht").show();
                            $('.js-otp-timer').hide();
                        } else {
                            $('#checkout-complete-payment-btn').hide();
                            $(".otp_rht").hide();
                            $(".otp_wrong").show();
                        }
                    }
                });
        }
    },
}
$(function (){
    globalAccount.init();
	//reload popup enable for session timeout/csrf issue
    globalAccount.enableCSRFpopUp();
    //$("select").chosen();
});


$(document).ajaxComplete(function( event, xhr, settings ) {
    try {
        var responseText=JSON.parse(xhr.responseText);
        if(responseText!='') {
            if(responseText.error_type==='csrf_not_verified') {
                $('.reload_popup').show();
            }
        }
    } catch (e) {

    }
});
//CDM-871 script move from customer/account/create file to Js file
$(document).ready(function(){
    
    $(".signin-signup-popup").on("hidden.bs.modal", function () {
        clearInterval(globalAccount.downloadTimer);
    });
    $('#otp_generation,#new-ot').live('click', function () {
        if($('#contact_number').is(':visible') && $('#contact_number').val().length==10){
        var formData = $('#form-account-checkout-create').serializeArray();
            $(this).text('SENDING OTP ...').prop('disabled', true);
            var curentId = $(this).attr('id');
            $.ajax({
                url: "/customer/account/GenerateOtp",
                dataType: "json",
                type: "post",
                data: formData,
                success: function (result) {
                    if (result.status) {
                        if (curentId === 'new-ot') {
                            $('#new-ot').text('SEND NEW OTP');
                        } else {
                            $('#otp_generation').text('OTP SENT');
                            $('.newsletter_category').hide();
                        }
                        jQuery('.details-box.sign_u fieldset').prev('.error-populate').remove();
                        userNumber = result.number;
                        jQuery('#otp_to_mobile').html(userNumber);
                        jQuery('.details-box').hide();
                        jQuery('.social-signup').hide();
                        jQuery('.or').hide();
                        jQuery('#divOtp').show();
                        
                        globalAccount.otpTimer();
                        $(".sign-up").css("background", "#0092ff");
                        $("button").addClass("signup_hover");
                                               
                         if($('.checkout_signup_container').is(':visible')){
                              $('html, body').animate({scrollTop: $("#divOtp").offset().top}, 500);
                            
                            }
                            else{
                                $('html, body').animate({scrollTop: $(".login-header").offset().top}, 500);
                            }
                    
                    } else {
                        $('#otp_generation').text('Send otp for verification').prop('disabled', false);
                      //  jQuery('#contact_number').parent().append('<div class="s-error mob-error">' + result.msg + '</div>');
                        
                    }
                }
            });
        }
    });
    
    keypress.allowOnlyNumbers('input[name="validate_otp"]');
    
    
     $(document).on('keyup', 'input[name="validate_otp"]', function () {
            $('.sign-up').prop('disabled', true);
            $("button").addClass("signup_hover");
            if ($(this).val().length == 4) {
                var formData = $('#form-account-checkout-create').serializeArray();
                $.ajax({
                    url: "/customer/account/ValidateOtp",
                    dataType: "json",
                    type: "post",
                    data: formData,
                    success: function (result) {
                        if (result.status) {
                            $('.reg-pass').prop('disabled', false);
                            $('.notsuccess_otp').hide();
                            $('.sign-up').prop('disabled', false);
                            $('.mobil-numb span').html(result.formatedNumber);
                            $('.success_otp,.mobil-numb').show();
                            
                            $('.js-otp-timer').hide();
                        } else {
                            $('.notsuccess_otp').show();
                            $('.success_otp,.mobil-numb').hide();
                            $('.reg-pass').prop('disabled', true);
                        }
                    }
                });
            } else {
                $('.notsuccess_otp').show();
                $('.success_otp,.mobil-numb').hide();
                $('.sign-up').prop('disabled', true);
                $(".sign-up").css("background", "#0092ff");
                $("button").addClass("signup_hover");
            }
        });
});
$(document).ready(function(){

 if($(window).width()>767)
 {
	$('.ordersummaryboxborder').addClass('expanded');
 }
 $(document).on('click','.panel-heading',function(){
	$(this).closest('.ordersummaryboxborder').each(function(){
	   if($(this).hasClass('expanded'))
	   	{
			$(this).removeClass('expanded');
	  	 }
	   else 
		{
                	$(this).addClass('expanded');
		}
         });
});
 });
!function(e,t,n){"use strict";!function o(e,t,n){function a(s,l){if(!t[s]){if(!e[s]){var i="function"==typeof require&&require;if(!l&&i)return i(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return a(n?n:t)},c,c.exports,o,e,t,n)}return t[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)a(n[s]);return a}({1:[function(o,a,r){function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var l,i,u,c,d=o("./modules/handle-dom"),f=o("./modules/utils"),p=o("./modules/handle-swal-dom"),m=o("./modules/handle-click"),v=o("./modules/handle-key"),y=s(v),b=o("./modules/default-params"),h=s(b),g=o("./modules/set-params"),w=s(g);r["default"]=u=c=function(){function o(e){var t=a;return t[e]===n?h["default"][e]:t[e]}var a=arguments[0];if((0,d.addClass)(t.body,"stop-scrolling"),(0,p.resetInput)(),a===n)return(0,f.logStr)("SweetAlert expects at least 1 attribute!"),!1;var r=(0,f.extend)({},h["default"]);switch(typeof a){case"string":r.title=a,r.text=arguments[1]||"",r.type=arguments[2]||"";break;case"object":if(a.title===n)return(0,f.logStr)('Missing "title" argument!'),!1;r.title=a.title;for(var s in h["default"])r[s]=o(s);r.confirmButtonText=r.showCancelButton?"Confirm":h["default"].confirmButtonText,r.confirmButtonText=o("confirmButtonText"),r.doneFunction=arguments[1]||null;break;default:return(0,f.logStr)('Unexpected type of argument! Expected "string" or "object", got '+typeof a),!1}(0,w["default"])(r),(0,p.fixVerticalPosition)(),(0,p.openModal)(arguments[1]);for(var u=(0,p.getModal)(),v=u.querySelectorAll("button"),b=["onclick","onmouseover","onmouseout","onmousedown","onmouseup","onfocus"],g=function(e){return(0,m.handleButton)(e,r,u)},C=0;C<v.length;C++)for(var S=0;S<b.length;S++){var x=b[S];v[C][x]=g}(0,p.getOverlay)().onclick=g,l=e.onkeydown;var k=function(e){return(0,y["default"])(e,r,u)};e.onkeydown=k,e.onfocus=function(){setTimeout(function(){i!==n&&(i.focus(),i=n)},0)},c.enableButtons()},u.setDefaults=c.setDefaults=function(e){if(!e)throw new Error("userParams is required");if("object"!=typeof e)throw new Error("userParams has to be a object");(0,f.extend)(h["default"],e)},u.close=c.close=function(){var o=(0,p.getModal)();(0,d.fadeOut)((0,p.getOverlay)(),5),(0,d.fadeOut)(o,5),(0,d.removeClass)(o,"showSweetAlert"),(0,d.addClass)(o,"hideSweetAlert"),(0,d.removeClass)(o,"visible");var a=o.querySelector(".sa-icon.sa-success");(0,d.removeClass)(a,"animate"),(0,d.removeClass)(a.querySelector(".sa-tip"),"animateSuccessTip"),(0,d.removeClass)(a.querySelector(".sa-long"),"animateSuccessLong");var r=o.querySelector(".sa-icon.sa-error");(0,d.removeClass)(r,"animateErrorIcon"),(0,d.removeClass)(r.querySelector(".sa-x-mark"),"animateXMark");var s=o.querySelector(".sa-icon.sa-warning");return(0,d.removeClass)(s,"pulseWarning"),(0,d.removeClass)(s.querySelector(".sa-body"),"pulseWarningIns"),(0,d.removeClass)(s.querySelector(".sa-dot"),"pulseWarningIns"),setTimeout(function(){var e=o.getAttribute("data-custom-class");(0,d.removeClass)(o,e)},300),(0,d.removeClass)(t.body,"stop-scrolling"),e.onkeydown=l,e.previousActiveElement&&e.previousActiveElement.focus(),i=n,clearTimeout(o.timeout),!0},u.showInputError=c.showInputError=function(e){var t=(0,p.getModal)(),n=t.querySelector(".sa-input-error");(0,d.addClass)(n,"show");var o=t.querySelector(".sa-error-container");(0,d.addClass)(o,"show"),o.querySelector("p").innerHTML=e,setTimeout(function(){u.enableButtons()},1),t.querySelector("input").focus()},u.resetInputError=c.resetInputError=function(e){if(e&&13===e.keyCode)return!1;var t=(0,p.getModal)(),n=t.querySelector(".sa-input-error");(0,d.removeClass)(n,"show");var o=t.querySelector(".sa-error-container");(0,d.removeClass)(o,"show")},u.disableButtons=c.disableButtons=function(e){var t=(0,p.getModal)(),n=t.querySelector("button.confirm"),o=t.querySelector("button.cancel");n.disabled=!0,o.disabled=!0},u.enableButtons=c.enableButtons=function(e){var t=(0,p.getModal)(),n=t.querySelector("button.confirm"),o=t.querySelector("button.cancel");n.disabled=!1,o.disabled=!1},"undefined"!=typeof e?e.sweetAlert=e.swal=u:(0,f.logStr)("SweetAlert is a frontend module!"),a.exports=r["default"]},{"./modules/default-params":2,"./modules/handle-click":3,"./modules/handle-dom":4,"./modules/handle-key":5,"./modules/handle-swal-dom":6,"./modules/set-params":8,"./modules/utils":9}],2:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var o={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#8CD4F5",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0,inputType:"text",inputPlaceholder:"",inputValue:"",showLoaderOnConfirm:!1};n["default"]=o,t.exports=n["default"]},{}],3:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0});var a=t("./utils"),r=(t("./handle-swal-dom"),t("./handle-dom")),s=function(t,n,o){function s(e){m&&n.confirmButtonColor&&(p.style.backgroundColor=e)}var u,c,d,f=t||e.event,p=f.target||f.srcElement,m=-1!==p.className.indexOf("confirm"),v=-1!==p.className.indexOf("sweet-overlay"),y=(0,r.hasClass)(o,"visible"),b=n.doneFunction&&"true"===o.getAttribute("data-has-done-function");switch(m&&n.confirmButtonColor&&(u=n.confirmButtonColor,c=(0,a.colorLuminance)(u,-.04),d=(0,a.colorLuminance)(u,-.14)),f.type){case"mouseover":s(c);break;case"mouseout":s(u);break;case"mousedown":s(d);break;case"mouseup":s(c);break;case"focus":var h=o.querySelector("button.confirm"),g=o.querySelector("button.cancel");m?g.style.boxShadow="none":h.style.boxShadow="none";break;case"click":var w=o===p,C=(0,r.isDescendant)(o,p);if(!w&&!C&&y&&!n.allowOutsideClick)break;m&&b&&y?l(o,n):b&&y||v?i(o,n):(0,r.isDescendant)(o,p)&&"BUTTON"===p.tagName&&sweetAlert.close()}},l=function(e,t){var n=!0;(0,r.hasClass)(e,"show-input")&&(n=e.querySelector("input").value,n||(n="")),t.doneFunction(n),t.closeOnConfirm&&sweetAlert.close(),t.showLoaderOnConfirm&&sweetAlert.disableButtons()},i=function(e,t){var n=String(t.doneFunction).replace(/\s/g,""),o="function("===n.substring(0,9)&&")"!==n.substring(9,10);o&&t.doneFunction(!1),t.closeOnCancel&&sweetAlert.close()};o["default"]={handleButton:s,handleConfirm:l,handleCancel:i},n.exports=o["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],4:[function(n,o,a){Object.defineProperty(a,"__esModule",{value:!0});var r=function(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")},s=function(e,t){r(e,t)||(e.className+=" "+t)},l=function(e,t){var n=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(r(e,t)){for(;n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");e.className=n.replace(/^\s+|\s+$/g,"")}},i=function(e){var n=t.createElement("div");return n.appendChild(t.createTextNode(e)),n.innerHTML},u=function(e){e.style.opacity="",e.style.display="block"},c=function(e){if(e&&!e.length)return u(e);for(var t=0;t<e.length;++t)u(e[t])},d=function(e){e.style.opacity="",e.style.display="none"},f=function(e){if(e&&!e.length)return d(e);for(var t=0;t<e.length;++t)d(e[t])},p=function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1},m=function(e){e.style.left="-9999px",e.style.display="block";var t,n=e.clientHeight;return t="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(e).getPropertyValue("padding-top"),10):parseInt(e.currentStyle.padding),e.style.left="",e.style.display="none","-"+parseInt((n+t)/2)+"px"},v=function(e,t){if(+e.style.opacity<1){t=t||16,e.style.opacity=0,e.style.display="block";var n=+new Date,o=function a(){e.style.opacity=+e.style.opacity+(new Date-n)/100,n=+new Date,+e.style.opacity<1&&setTimeout(a,t)};o()}e.style.display="block"},y=function(e,t){t=t||16,e.style.opacity=1;var n=+new Date,o=function a(){e.style.opacity=+e.style.opacity-(new Date-n)/100,n=+new Date,+e.style.opacity>0?setTimeout(a,t):e.style.display="none"};o()},b=function(n){if("function"==typeof MouseEvent){var o=new MouseEvent("click",{view:e,bubbles:!1,cancelable:!0});n.dispatchEvent(o)}else if(t.createEvent){var a=t.createEvent("MouseEvents");a.initEvent("click",!1,!1),n.dispatchEvent(a)}else t.createEventObject?n.fireEvent("onclick"):"function"==typeof n.onclick&&n.onclick()},h=function(t){"function"==typeof t.stopPropagation?(t.stopPropagation(),t.preventDefault()):e.event&&e.event.hasOwnProperty("cancelBubble")&&(e.event.cancelBubble=!0)};a.hasClass=r,a.addClass=s,a.removeClass=l,a.escapeHtml=i,a._show=u,a.show=c,a._hide=d,a.hide=f,a.isDescendant=p,a.getTopMargin=m,a.fadeIn=v,a.fadeOut=y,a.fireClick=b,a.stopEventPropagation=h},{}],5:[function(t,o,a){Object.defineProperty(a,"__esModule",{value:!0});var r=t("./handle-dom"),s=t("./handle-swal-dom"),l=function(t,o,a){var l=t||e.event,i=l.keyCode||l.which,u=a.querySelector("button.confirm"),c=a.querySelector("button.cancel"),d=a.querySelectorAll("button[tabindex]");if(-1!==[9,13,32,27].indexOf(i)){for(var f=l.target||l.srcElement,p=-1,m=0;m<d.length;m++)if(f===d[m]){p=m;break}9===i?(f=-1===p?u:p===d.length-1?d[0]:d[p+1],(0,r.stopEventPropagation)(l),f.focus(),o.confirmButtonColor&&(0,s.setFocusStyle)(f,o.confirmButtonColor)):13===i?("INPUT"===f.tagName&&(f=u,u.focus()),f=-1===p?u:n):27===i&&o.allowEscapeKey===!0?(f=c,(0,r.fireClick)(f,l)):f=n}};a["default"]=l,o.exports=a["default"]},{"./handle-dom":4,"./handle-swal-dom":6}],6:[function(n,o,a){function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var s=n("./utils"),l=n("./handle-dom"),i=n("./default-params"),u=r(i),c=n("./injected-html"),d=r(c),f=".sweet-alert",p=".sweet-overlay",m=function(){var e=t.createElement("div");for(e.innerHTML=d["default"];e.firstChild;)t.body.appendChild(e.firstChild)},v=function x(){var e=t.querySelector(f);return e||(m(),e=x()),e},y=function(){var e=v();return e?e.querySelector("input"):void 0},b=function(){return t.querySelector(p)},h=function(e,t){var n=(0,s.hexToRgb)(t);e.style.boxShadow="0 0 2px rgba("+n+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"},g=function(n){var o=v();(0,l.fadeIn)(b(),10),(0,l.show)(o),(0,l.addClass)(o,"showSweetAlert"),(0,l.removeClass)(o,"hideSweetAlert"),e.previousActiveElement=t.activeElement;var a=o.querySelector("button.confirm");a.focus(),setTimeout(function(){(0,l.addClass)(o,"visible")},500);var r=o.getAttribute("data-timer");if("null"!==r&&""!==r){var s=n;o.timeout=setTimeout(function(){var e=(s||null)&&"true"===o.getAttribute("data-has-done-function");e?s(null):sweetAlert.close()},r)}},w=function(){var e=v(),t=y();(0,l.removeClass)(e,"show-input"),t.value=u["default"].inputValue,t.setAttribute("type",u["default"].inputType),t.setAttribute("placeholder",u["default"].inputPlaceholder),C()},C=function(e){if(e&&13===e.keyCode)return!1;var t=v(),n=t.querySelector(".sa-input-error");(0,l.removeClass)(n,"show");var o=t.querySelector(".sa-error-container");(0,l.removeClass)(o,"show")},S=function(){var e=v();e.style.marginTop=(0,l.getTopMargin)(v())};a.sweetAlertInitialize=m,a.getModal=v,a.getOverlay=b,a.getInput=y,a.setFocusStyle=h,a.openModal=g,a.resetInput=w,a.resetInputError=C,a.fixVerticalPosition=S},{"./default-params":2,"./handle-dom":4,"./injected-html":7,"./utils":9}],7:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var o='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert"><div class="sa-icon sa-error">\n      <span class="sa-x-mark">\n        <span class="sa-line sa-left"></span>\n        <span class="sa-line sa-right"></span>\n      </span>\n    </div><div class="sa-icon sa-warning">\n      <span class="sa-body"></span>\n      <span class="sa-dot"></span>\n    </div><div class="sa-icon sa-info"></div><div class="sa-icon sa-success">\n      <span class="sa-line sa-tip"></span>\n      <span class="sa-line sa-long"></span>\n\n      <div class="sa-placeholder"></div>\n      <div class="sa-fix"></div>\n    </div><div class="sa-icon sa-custom"></div><h2>Title</h2>\n    <p>Text</p>\n    <fieldset>\n      <input type="text" tabIndex="3" />\n      <div class="sa-input-error"></div>\n    </fieldset><div class="sa-error-container">\n      <div class="icon">!</div>\n      <p>Not valid!</p>\n    </div><div class="sa-button-container">\n      <button class="cancel" tabIndex="2">Cancel</button>\n      <div class="sa-confirm-button-container">\n        <button class="confirm" tabIndex="1">OK</button><div class="la-ball-fall">\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n    </div></div>';n["default"]=o,t.exports=n["default"]},{}],8:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var a=e("./utils"),r=e("./handle-swal-dom"),s=e("./handle-dom"),l=["error","warning","info","success","input","prompt"],i=function(e){var t=(0,r.getModal)(),o=t.querySelector("h2"),i=t.querySelector("p"),u=t.querySelector("button.cancel"),c=t.querySelector("button.confirm");if(o.innerHTML=e.html?e.title:(0,s.escapeHtml)(e.title).split("\n").join("<br>"),i.innerHTML=e.html?e.text:(0,s.escapeHtml)(e.text||"").split("\n").join("<br>"),e.text&&(0,s.show)(i),e.customClass)(0,s.addClass)(t,e.customClass),t.setAttribute("data-custom-class",e.customClass);else{var d=t.getAttribute("data-custom-class");(0,s.removeClass)(t,d),t.setAttribute("data-custom-class","")}if((0,s.hide)(t.querySelectorAll(".sa-icon")),e.type&&!(0,a.isIE8)()){var f=function(){for(var o=!1,a=0;a<l.length;a++)if(e.type===l[a]){o=!0;break}if(!o)return logStr("Unknown alert type: "+e.type),{v:!1};var i=["success","error","warning","info"],u=n;-1!==i.indexOf(e.type)&&(u=t.querySelector(".sa-icon.sa-"+e.type),(0,s.show)(u));var c=(0,r.getInput)();switch(e.type){case"success":(0,s.addClass)(u,"animate"),(0,s.addClass)(u.querySelector(".sa-tip"),"animateSuccessTip"),(0,s.addClass)(u.querySelector(".sa-long"),"animateSuccessLong");break;case"error":(0,s.addClass)(u,"animateErrorIcon"),(0,s.addClass)(u.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":(0,s.addClass)(u,"pulseWarning"),(0,s.addClass)(u.querySelector(".sa-body"),"pulseWarningIns"),(0,s.addClass)(u.querySelector(".sa-dot"),"pulseWarningIns");break;case"input":case"prompt":c.setAttribute("type",e.inputType),c.value=e.inputValue,c.setAttribute("placeholder",e.inputPlaceholder),(0,s.addClass)(t,"show-input"),setTimeout(function(){c.focus(),c.addEventListener("keyup",swal.resetInputError)},400)}}();if("object"==typeof f)return f.v}if(e.imageUrl){var p=t.querySelector(".sa-icon.sa-custom");p.style.backgroundImage="url("+e.imageUrl+")",(0,s.show)(p);var m=80,v=80;if(e.imageSize){var y=e.imageSize.toString().split("x"),b=y[0],h=y[1];b&&h?(m=b,v=h):logStr("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+e.imageSize)}p.setAttribute("style",p.getAttribute("style")+"width:"+m+"px; height:"+v+"px")}t.setAttribute("data-has-cancel-button",e.showCancelButton),e.showCancelButton?u.style.display="inline-block":(0,s.hide)(u),t.setAttribute("data-has-confirm-button",e.showConfirmButton),e.showConfirmButton?c.style.display="inline-block":(0,s.hide)(c),e.cancelButtonText&&(u.innerHTML=(0,s.escapeHtml)(e.cancelButtonText)),e.confirmButtonText&&(c.innerHTML=(0,s.escapeHtml)(e.confirmButtonText)),e.confirmButtonColor&&(c.style.backgroundColor=e.confirmButtonColor,c.style.borderLeftColor=e.confirmLoadingButtonColor,c.style.borderRightColor=e.confirmLoadingButtonColor,(0,r.setFocusStyle)(c,e.confirmButtonColor)),t.setAttribute("data-allow-outside-click",e.allowOutsideClick);var g=!!e.doneFunction;t.setAttribute("data-has-done-function",g),e.animation?"string"==typeof e.animation?t.setAttribute("data-animation",e.animation):t.setAttribute("data-animation","pop"):t.setAttribute("data-animation","none"),t.setAttribute("data-timer",e.timer)};o["default"]=i,t.exports=o["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],9:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0});var a=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},r=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?parseInt(t[1],16)+", "+parseInt(t[2],16)+", "+parseInt(t[3],16):null},s=function(){return e.attachEvent&&!e.addEventListener},l=function(t){"undefined"!=typeof e&&e.console&&e.console.log("SweetAlert: "+t)},i=function(e,t){e=String(e).replace(/[^0-9a-f]/gi,""),e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var n,o,a="#";for(o=0;3>o;o++)n=parseInt(e.substr(2*o,2),16),n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16),a+=("00"+n).substr(n.length);return a};o.extend=a,o.hexToRgb=r,o.isIE8=s,o.logStr=l,o.colorLuminance=i},{}]},{},[1]),"function"==typeof define&&define.amd?define(function(){return sweetAlert}):"undefined"!=typeof module&&module.exports&&(module.exports=sweetAlert)}(window,document);
!function(){var e=function(t,i){function s(){this.q=[],this.add=function(e){this.q.push(e)};var e,t;this.call=function(){for(e=0,t=this.q.length;e<t;e++)this.q[e].call()}}function o(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):e.style[t]}function n(e,t){if(e.resizedAttached){if(e.resizedAttached)return void e.resizedAttached.add(t)}else e.resizedAttached=new s,e.resizedAttached.add(t);e.resizeSensor=document.createElement("div"),e.resizeSensor.className="resize-sensor";var i="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",n="position: absolute; left: 0; top: 0; transition: 0s;";e.resizeSensor.style.cssText=i,e.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+i+'"><div style="'+n+'"></div></div><div class="resize-sensor-shrink" style="'+i+'"><div style="'+n+' width: 200%; height: 200%"></div></div>',e.appendChild(e.resizeSensor),{fixed:1,absolute:1}[o(e,"position")]||(e.style.position="relative");var d,r,l=e.resizeSensor.childNodes[0],c=l.childNodes[0],h=e.resizeSensor.childNodes[1],a=(h.childNodes[0],function(){c.style.width=l.offsetWidth+10+"px",c.style.height=l.offsetHeight+10+"px",l.scrollLeft=l.scrollWidth,l.scrollTop=l.scrollHeight,h.scrollLeft=h.scrollWidth,h.scrollTop=h.scrollHeight,d=e.offsetWidth,r=e.offsetHeight});a();var f=function(){e.resizedAttached&&e.resizedAttached.call()},u=function(e,t,i){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener(t,i)},p=function(){e.offsetWidth==d&&e.offsetHeight==r||f(),a()};u(l,"scroll",p),u(h,"scroll",p)}var d=Object.prototype.toString.call(t),r="[object Array]"===d||"[object NodeList]"===d||"[object HTMLCollection]"===d||"undefined"!=typeof jQuery&&t instanceof jQuery||"undefined"!=typeof Elements&&t instanceof Elements;if(r)for(var l=0,c=t.length;l<c;l++)n(t[l],i);else n(t,i);this.detach=function(){if(r)for(var i=0,s=t.length;i<s;i++)e.detach(t[i]);else e.detach(t)}};e.detach=function(e){e.resizeSensor&&(e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached)},"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=e:window.ResizeSensor=e}();
//# sourceMappingURL=maps/ResizeSensor.min.js.map



(function ($) {
    $.fn.theiaStickySidebar = function (options) {
        var defaults = {
            'containerSelector': '',
            'additionalMarginTop': 0,
            'additionalMarginBottom': 0,
            'updateSidebarHeight': true,
            'minWidth': 0,
            'disableOnResponsiveLayouts': true,
            'sidebarBehavior': 'modern'
        };
        options = $.extend(defaults, options);

        // Validate options
        options.additionalMarginTop = parseInt(options.additionalMarginTop) || 0;
        options.additionalMarginBottom = parseInt(options.additionalMarginBottom) || 0;

        tryInitOrHookIntoEvents(options, this);

        // Try doing init, otherwise hook into window.resize and document.scroll and try again then.
        function tryInitOrHookIntoEvents(options, $that) {
            var success = tryInit(options, $that);

            if (!success) {
                console.log('TSS: Body width smaller than options.minWidth. Init is delayed.');

                $(document).scroll(function (options, $that) {
                    return function (evt) {
                        var success = tryInit(options, $that);

                        if (success) {
                            $(this).unbind(evt);
                        }
                    };
                }(options, $that));
                $(window).resize(function (options, $that) {
                    return function (evt) {
                        var success = tryInit(options, $that);

                        if (success) {
                            $(this).unbind(evt);
                        }
                    };
                }(options, $that))
            }
        }

        // Try doing init if proper conditions are met.
        function tryInit(options, $that) {
            if (options.initialized === true) {
                return true;
            }

            if ($('body').width() < options.minWidth) {
                return false;
            }

            init(options, $that);

            return true;
        }

        // Init the sticky sidebar(s).
        function init(options, $that) {
            options.initialized = true;

            // Add CSS
            $('head').append($('<style>.sidebar-main:after {content: ""; display: table; clear: both;}</style>'));

            $that.each(function () {
                var o = {};

                o.sidebar = $(this);

                // Save options
                o.options = options || {};

                // Get container
                o.container = $(o.options.containerSelector);
                if (o.container.length == 0) {
                    o.container = o.sidebar.parent();
                }

                // Create sticky sidebar
                o.sidebar.parents().css('-webkit-transform', 'none'); // Fix for WebKit bug - https://code.google.com/p/chromium/issues/detail?id=20574
                o.sidebar.css({
                    'overflow': 'visible',
                    // The "box-sizing" must be set to "content-box" because we set a fixed height to this element when the sticky sidebar has a fixed position.
                    '-webkit-box-sizing': 'border-box',
                    '-moz-box-sizing': 'border-box',
                    'box-sizing': 'border-box'
                });

                // Get the sticky sidebar element. If none has been found, then create one.
                o.stickySidebar = o.sidebar.find('.theiaStickySidebar');
                if (o.stickySidebar.length == 0) {
                    // Remove <script> tags, otherwise they will be run again when added to the stickySidebar.
                    var javaScriptMIMETypes = /(?:text|application)\/(?:x-)?(?:javascript|ecmascript)/i;
                    o.sidebar.find('script').filter(function (index, script) {
                        return script.type.length === 0 || script.type.match(javaScriptMIMETypes);
                    }).remove();

                    o.stickySidebar = $('<div>').addClass('theiaStickySidebar').append(o.sidebar.children());
                    o.sidebar.append(o.stickySidebar);
                }

                // Get existing top and bottom margins and paddings
                o.marginBottom = parseInt(o.sidebar.css('margin-bottom'));
                o.paddingTop = parseInt(o.sidebar.css('padding-top'));
                o.paddingBottom = parseInt(o.sidebar.css('padding-bottom'));

                // Add a temporary padding rule to check for collapsable margins.
                var collapsedTopHeight = o.stickySidebar.offset().top;
                var collapsedBottomHeight = o.stickySidebar.outerHeight();
                o.stickySidebar.css('padding-top', 1);
                o.stickySidebar.css('padding-bottom', 1);
                collapsedTopHeight -= o.stickySidebar.offset().top;
                collapsedBottomHeight = o.stickySidebar.outerHeight() - collapsedBottomHeight - collapsedTopHeight;
                if (collapsedTopHeight == 0) {
                    o.stickySidebar.css('padding-top', 0);
                    o.stickySidebarPaddingTop = 0;
                }
                else {
                    o.stickySidebarPaddingTop = 1;
                }

                if (collapsedBottomHeight == 0) {
                    o.stickySidebar.css('padding-bottom', 0);
                    o.stickySidebarPaddingBottom = 0;
                }
                else {
                    o.stickySidebarPaddingBottom = 1;
                }

                // We use this to know whether the user is scrolling up or down.
                o.previousScrollTop = null;

                // Scroll top (value) when the sidebar has fixed position.
                o.fixedScrollTop = 0;

                // Set sidebar to default values.
                resetSidebar();

                o.onScroll = function (o) {
                    // Stop if the sidebar isn't visible.
                    if (!o.stickySidebar.is(":visible")) {
                        return;
                    }

                    // Stop if the window is too small.
                    if ($('body').width() < o.options.minWidth) {
                        resetSidebar();
                        return;
                    }

                    // Stop if the sidebar width is larger than the container width (e.g. the theme is responsive and the sidebar is now below the content)
                    if (o.options.disableOnResponsiveLayouts) {
                        var sidebarWidth = o.sidebar.outerWidth(o.sidebar.css('float') == 'none');

                        if (sidebarWidth + 50 > o.container.width()) {
                            resetSidebar();
                            return;
                        }
                    }

                    var scrollTop = $(document).scrollTop();
                    var position = 'static';

                    // If the user has scrolled down enough for the sidebar to be clipped at the top, then we can consider changing its position.
                    if (scrollTop >= o.sidebar.offset().top + (o.paddingTop - o.options.additionalMarginTop)) {
						o.stickySidebar.addClass('sticky');
                        // The top and bottom offsets, used in various calculations.
                        var offsetTop = o.paddingTop + options.additionalMarginTop;
                        var offsetBottom = o.paddingBottom + o.marginBottom + options.additionalMarginBottom;

                        // All top and bottom positions are relative to the window, not to the parent elemnts.
                        var containerTop = o.sidebar.offset().top;
                        var containerBottom = o.sidebar.offset().top + getClearedHeight(o.container);

                        // The top and bottom offsets relative to the window screen top (zero) and bottom (window height).
                        var windowOffsetTop = 0 + options.additionalMarginTop;
                        var windowOffsetBottom;

                        var sidebarSmallerThanWindow = (o.stickySidebar.outerHeight() + offsetTop + offsetBottom) < $(window).height();
                        if (sidebarSmallerThanWindow) {
                            windowOffsetBottom = windowOffsetTop + o.stickySidebar.outerHeight();
                        }
                        else {
                            windowOffsetBottom = $(window).height() - o.marginBottom - o.paddingBottom - options.additionalMarginBottom;
                        }

                        var staticLimitTop = containerTop - scrollTop + o.paddingTop;
                        var staticLimitBottom = containerBottom - scrollTop - o.paddingBottom - o.marginBottom;

                        var top = o.stickySidebar.offset().top - scrollTop;
                        var scrollTopDiff = o.previousScrollTop - scrollTop;

                        // If the sidebar position is fixed, then it won't move up or down by itself. So, we manually adjust the top coordinate.
                        if (o.stickySidebar.css('position') == 'fixed') {
                            if (o.options.sidebarBehavior == 'modern') {
                                top += scrollTopDiff;
                            }
                        }

                        if (o.options.sidebarBehavior == 'stick-to-top') {
                            top = options.additionalMarginTop;
                        }

                        if (o.options.sidebarBehavior == 'stick-to-bottom') {
                            top = windowOffsetBottom - o.stickySidebar.outerHeight();
                        }

                        if (scrollTopDiff > 0) { // If the user is scrolling up.
                            top = Math.min(top, windowOffsetTop);
                        }
                        else { // If the user is scrolling down.
                            top = Math.max(top, windowOffsetBottom - o.stickySidebar.outerHeight());
                        }

                        top = Math.max(top, staticLimitTop);

                        top = Math.min(top, staticLimitBottom - o.stickySidebar.outerHeight());

                        // If the sidebar is the same height as the container, we won't use fixed positioning.
                        var sidebarSameHeightAsContainer = o.container.height() == o.stickySidebar.outerHeight();

                        if (!sidebarSameHeightAsContainer && top == windowOffsetTop) {
                            position = 'fixed';
                        }
                        else if (!sidebarSameHeightAsContainer && top == windowOffsetBottom - o.stickySidebar.outerHeight()) {
                            position = 'fixed';
                        }
                        else if (scrollTop + top - o.sidebar.offset().top - o.paddingTop <= options.additionalMarginTop) {
                            // Stuck to the top of the page. No special behavior.
                            position = 'static';
                        }
                        else {
                            // Stuck to the bottom of the page.
                            position = 'absolute';
                        }
                    }else{
						o.stickySidebar.removeClass('sticky');
					}

                    
                    if (position == 'fixed') {
                        var scrollLeft = $(document).scrollLeft();

                        o.stickySidebar.css({
                            'position': 'fixed',
                            'width': getWidthForObject(o.stickySidebar) + 'px',
                            'transform': 'translateY(' + top + 'px)',
                            'left': (o.sidebar.offset().left + parseInt(o.sidebar.css('padding-left')) - scrollLeft) + 'px',
                            'top': '0px'
                        });
                    }
                    else if (position == 'absolute') {
                        var css = {};

                        if (o.stickySidebar.css('position') != 'absolute') {
                            css.position = 'absolute';
                            css.transform = 'translateY(' + (scrollTop + top - o.sidebar.offset().top - o.stickySidebarPaddingTop - o.stickySidebarPaddingBottom) + 'px)';
                            css.top = '0px';
                        }

                        css.width = getWidthForObject(o.stickySidebar) + 'px';
                        css.left = '';

                        o.stickySidebar.css(css);
                    }
                    else if (position == 'static') {
                        resetSidebar();
                    }

                    if (position != 'static') {
                        if (o.options.updateSidebarHeight == true) {
                            o.sidebar.css({
                                'min-height': o.stickySidebar.outerHeight() + o.stickySidebar.offset().top - o.sidebar.offset().top + o.paddingBottom
                            });
                        }
                    }

                    o.previousScrollTop = scrollTop;
                };

                // Initialize the sidebar's position.
                o.onScroll(o);

                // Recalculate the sidebar's position on every scroll and resize.
                $(document).scroll(function (o) {
                    return function () {
                        o.onScroll(o);
                    };
                }(o));
                $(window).resize(function (o) {
                    return function () {
                        o.stickySidebar.css({'position': 'static'});
                        o.onScroll(o);
                    };
                }(o));

                // Recalculate the sidebar's position every time the sidebar changes its size.
                if (typeof ResizeSensor !== 'undefined') {
                    new ResizeSensor(o.stickySidebar[0], function (o) {
                        return function () {
                            o.onScroll(o);
                        };
                    }(o));
                }

                // Reset the sidebar to its default state
                function resetSidebar() {
                    o.fixedScrollTop = 0;
                    o.sidebar.css({
                        'min-height': '1px'
                    });
                    o.stickySidebar.css({
                        'position': 'static',
                        'width': '',
                        'transform': 'none'
                    });
                }

                // Get the height of a div as if its floated children were cleared. Note that this function fails if the floats are more than one level deep.
                function getClearedHeight(e) {
                    var height = e.height();

                    e.children().each(function () {
                        height = Math.max(height, $(this).height());
                    });

                    return height;
                }
            });
        }

        function getWidthForObject(object) {
            var width;

            try {
                width = object[0].getBoundingClientRect().width;
            }
            catch (err) {
            }

            if (typeof width === "undefined") {
                width = object.width();
            }

            return width;
        }
    }
})(jQuery);

(function(a){var b=(a.browser.msie?"paste":"input")+".mask",c=window.orientation!=undefined;a.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn"},a.fn.extend({caret:function(a,b){if(this.length!=0){if(typeof a=="number"){b=typeof b=="number"?b:a;return this.each(function(){if(this.setSelectionRange)this.setSelectionRange(a,b);else if(this.createTextRange){var c=this.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select()}})}if(this[0].setSelectionRange)a=this[0].selectionStart,b=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var c=document.selection.createRange();a=0-c.duplicate().moveStart("character",-1e5),b=a+c.text.length}return{begin:a,end:b}}},unmask:function(){return this.trigger("unmask")},mask:function(d,e){if(!d&&this.length>0){var f=a(this[0]);return f.data(a.mask.dataName)()}e=a.extend({placeholder:"_",completed:null},e);var g=a.mask.definitions,h=[],i=d.length,j=null,k=d.length;a.each(d.split(""),function(a,b){b=="?"?(k--,i=a):g[b]?(h.push(new RegExp(g[b])),j==null&&(j=h.length-1)):h.push(null)});return this.trigger("unmask").each(function(){function v(a){var b=f.val(),c=-1;for(var d=0,g=0;d<k;d++)if(h[d]){l[d]=e.placeholder;while(g++<b.length){var m=b.charAt(g-1);if(h[d].test(m)){l[d]=m,c=d;break}}if(g>b.length)break}else l[d]==b.charAt(g)&&d!=i&&(g++,c=d);if(!a&&c+1<i)f.val(""),t(0,k);else if(a||c+1>=i)u(),a||f.val(f.val().substring(0,c+1));return i?d:j}function u(){return f.val(l.join("")).val()}function t(a,b){for(var c=a;c<b&&c<k;c++)h[c]&&(l[c]=e.placeholder)}function s(a){var b=a.which,c=f.caret();if(a.ctrlKey||a.altKey||a.metaKey||b<32)return!0;if(b){c.end-c.begin!=0&&(t(c.begin,c.end),p(c.begin,c.end-1));var d=n(c.begin-1);if(d<k){var g=String.fromCharCode(b);if(h[d].test(g)){q(d),l[d]=g,u();var i=n(d);f.caret(i),e.completed&&i>=k&&e.completed.call(f)}}return!1}}function r(a){var b=a.which;if(b==8||b==46||c&&b==127){var d=f.caret(),e=d.begin,g=d.end;g-e==0&&(e=b!=46?o(e):g=n(e-1),g=b==46?n(g):g),t(e,g),p(e,g-1);return!1}if(b==27){f.val(m),f.caret(0,v());return!1}}function q(a){for(var b=a,c=e.placeholder;b<k;b++)if(h[b]){var d=n(b),f=l[b];l[b]=c;if(d<k&&h[d].test(f))c=f;else break}}function p(a,b){if(!(a<0)){for(var c=a,d=n(b);c<k;c++)if(h[c]){if(d<k&&h[c].test(l[d]))l[c]=l[d],l[d]=e.placeholder;else break;d=n(d)}u(),f.caret(Math.max(j,a))}}function o(a){while(--a>=0&&!h[a]);return a}function n(a){while(++a<=k&&!h[a]);return a}var f=a(this),l=a.map(d.split(""),function(a,b){if(a!="?")return g[a]?e.placeholder:a}),m=f.val();f.data(a.mask.dataName,function(){return a.map(l,function(a,b){return h[b]&&a!=e.placeholder?a:null}).join("")}),f.attr("readonly")||f.one("unmask",function(){f.unbind(".mask").removeData(a.mask.dataName)}).bind("focus.mask",function(){m=f.val();var b=v();u();var c=function(){b==d.length?f.caret(0,b):f.caret(b)};(a.browser.msie?c:function(){setTimeout(c,0)})()}).bind("blur.mask",function(){v(),f.val()!=m&&f.change()}).bind("keydown.mask",r).bind("keypress.mask",s).bind(b,function(){setTimeout(function(){f.caret(v(!0))},0)}),v()})}})})(jQuery)
$(function(){
          $("#AddressForm_postcode").live('keyup blur',function(){
            var pincode = $(this).val();
            pincode = pincode.replace(/_/g, '',pincode);
            if(pincode.length != 6){
                //$(this).mask('?999999', { placeholder: "" });
                keypress.allowOnlyNumbers($('#AddressForm_postcode'));
                $('#AddressForm_fk_customer_address_region option:first').attr("selected", true);
                $("#AddressForm_city").val('');
                return false;
            }
            var $this = jQuery(this);
            $.get('/checkout/finish/pincode/find/' + pincode,function(data){
                if(data){
                    $('.PinCodeError').remove();
                    var d = jQuery.parseJSON(data);
                    if (d.validation == true) {
                        $('.cc').css('border', '');
                        $this.parents('form').find("#AddressForm_city").val(d.data.city);
                        var stateObj = $this.parents('form').find('#AddressForm_fk_customer_address_region option').filter(function () {
                                                return allCapps( $(this).text() )=== d.data.state;
                                        });
                         if(stateObj.length){
                                stateObj.attr("selected", true);
                         }else {
                                $this.parents('form').find('#AddressForm_fk_customer_address_region option:first').attr("selected", true);
                         }
                        
                        var errorMsgObj =  $("#AddressForm_postcode").next("div.errorMessage");
                        if(errorMsgObj.length){
                            errorMsgObj.html("");
                            $('.cc').css('border', 'none');
                        }
                        
               $.get('/search/location/?q=' + pincode,function(data){
               var t = jQuery.parseJSON(data);
               if(typeof t[2]!=='undefined' && t[2].data2 === 'Y')
               {
                   var errorMsgObj =  $("#AddressForm_postcode").next("div.errorMessage");
                        var errorEditObj = $(".new-address-block #AddressForm_postcode").next("div.newmsg");
                        if(errorMsgObj.length){
                            errorMsgObj.html("");
                           errorEditObj.html("");
                           $('.cc').css('border', 'none');
                        }
               }
    else
    {
        var errorMsgObj =  $(".editBlock #AddressForm_postcode").next("div.errorMessage");
        var errornewMsgObj =  $(".new-address-block").next("div.newmsg");
           if(errorMsgObj.length){
                              $('.editBlock .cc').css('border-color','red');
                              errorMsgObj.html('Oops, We dont deliver to this pincode, try another');
                         }else {
                             var errorEmnt = '<div class="errorMessage PinCodeError">Oops, We dont deliver to this pincode, try another</div>';
                             $('.editBlock .cc').css('border-color','red');
                             $(errorEmnt).insertAfter($('.editBlock #AddressForm_postcode'));
                           
                        }
                        if(errornewMsgObj.length){
                              $('.new-address-block .cc').css('border-color','red');
                              errornewMsgObj.html('Oops, We dont deliver to this pincode, try another one');
                         }else {
                                    var errornewEmnt = '<div class="errorMessage PinCodeError newmsg">Oops, We dont deliver to this pincode, try another one</div>';
                                    $('.new-address-block .cc').css('border-color','red');
                                    if($('.PinCodeError').length)
                                    {
                                    }
                                    else
                                    {
                                    $(errornewEmnt).insertAfter($('.new-address-block #AddressForm_postcode'));
                                }
                           
                        }
    }
    });
                        
        }else {
                        var errorMsgObj =  $("#AddressForm_postcode").next("div.errorMessage");
                        if(errorMsgObj.length){
                               $('.cc').css('border-color','red');
                               errorMsgObj.html('Oops, We dont deliver to this pincode, try another');
                        }else {
                            var errorEmnt = '<div class="errorMessage PinCodeError">Oops, We dont deliver to this pincode, try another</div>';
                            $('.cc').css('border-color','red');
                            $(errorEmnt).insertAfter($('.new-address-block #AddressForm_postcode'));
                            
                           }
                        $this.parents('form').find('#AddressForm_fk_customer_address_region option:first').attr("selected", true);
                        $this.parents('form').find("#AddressForm_city").val('');
                        var stateObj = $this.parents('form').find('#AddressForm_fk_customer_address_region option').filter(function () {
                                                return allCapps( $(this).text()) === '';
                                        });
                                        
                         if(stateObj.length){
                                stateObj.attr("selected", true);
                         }else {
                                $this.parents('form').find('#AddressForm_fk_customer_address_region option:first').attr("selected", true);
                         }
                    }
                }
                $this.parents('form').find('#AddressForm_fk_customer_address_region').trigger('chosen:updated');
            });
            
        });       
});
function allCapps(str){
    str = str.toLowerCase();
    return (str + '').replace(/^([a-z])|\s+([a-z])/g, function ($1) {
        return $1.toUpperCase();
    });
}     




(function($, undf){
	'use strict';

	

	$.MixItUp = function(){
		var self = this;

		self._execAction('_constructor', 0);

		$.extend(self, {

			

			selectors: {
				target: '.mix',
				filter: '.filter',
				sort: '.sort'
			},

			animation: {
				enable: true,
				effects: 'fade scale',
				duration: 600,
				easing: 'ease',
				perspectiveDistance: '3000',
				perspectiveOrigin: '50% 50%',
				queue: true,
				queueLimit: 1,
				animateChangeLayout: false,
				animateResizeContainer: true,
				animateResizeTargets: false,
				staggerSequence: false,
				reverseOut: false
			},

			callbacks: {
				onMixLoad: false,
				onMixStart: false,
				onMixBusy: false,
				onMixEnd: false,
				onMixFail: false,
				_user: false
			},

			controls: {
				enable: true,
				live: false,
				toggleFilterButtons: false,
				toggleLogic: 'or',
				activeClass: 'active'
			},

			layout: {
				display: 'inline-block',
				containerClass: '',
				containerClassFail: 'fail'
			},

			load: {
				filter: 'all',
				sort: false
			},

			

			_$body: null,
			_$container: null,
			_$targets: null,
			_$parent: null,
			_$sortButtons: null,
			_$filterButtons: null,

			_suckMode: false,
			_mixing: false,
			_sorting: false,
			_clicking: false,
			_loading: true,
			_changingLayout: false,
			_changingClass: false,
			_changingDisplay: false,

			_origOrder: [],
			_startOrder: [],
			_newOrder: [],
			_activeFilter: null,
			_toggleArray: [],
			_toggleString: '',
			_activeSort: 'default:asc',
			_newSort: null,
			_startHeight: null,
			_newHeight: null,
			_incPadding: true,
			_newDisplay: null,
			_newClass: null,
			_targetsBound: 0,
			_targetsDone: 0,
			_queue: [],

			_$show: $(),
			_$hide: $()
		});

		self._execAction('_constructor', 1);
	};

	

	$.MixItUp.prototype = {
		constructor: $.MixItUp,

		

		_instances: {},
		_handled: {
			_filter: {},
			_sort: {}
		},
		_bound: {
			_filter: {},
			_sort: {}
		},
		_actions: {},
		_filters: {},

		

		

		extend: function(extension){
			for(var key in extension){
				$.MixItUp.prototype[key] = extension[key];
			}
		},

		

		addAction: function(hook, name, func, priority){
			$.MixItUp.prototype._addHook('_actions', hook, name, func, priority);
		},

		

		addFilter: function(hook, name, func, priority){
			$.MixItUp.prototype._addHook('_filters', hook, name, func, priority);
		},

		

		_addHook: function(type, hook, name, func, priority){
			var collection = $.MixItUp.prototype[type],
				obj = {};

			priority = (priority === 1 || priority === 'post') ? 'post' : 'pre';

			obj[hook] = {};
			obj[hook][priority] = {};
			obj[hook][priority][name] = func;

			$.extend(true, collection, obj);
		},


		

		

		_init: function(domNode, config){
			var self = this;

			self._execAction('_init', 0, arguments);

			config && $.extend(true, self, config);

			self._$body = $('body');
			self._domNode = domNode;
			self._$container = $(domNode);
			self._$container.addClass(self.layout.containerClass);
			self._id = domNode.id;

			self._platformDetect();

			self._brake = self._getPrefixedCSS('transition', 'none');

			self._refresh(true);

			self._$parent = self._$targets.parent().length ? self._$targets.parent() : self._$container;

			if(self.load.sort){
				self._newSort = self._parseSort(self.load.sort);
				self._newSortString = self.load.sort;
				self._activeSort = self.load.sort;
				self._sort();
				self._printSort();
			}

			self._activeFilter = self.load.filter === 'all' ?
				self.selectors.target :
				self.load.filter === 'none' ?
					'' :
					self.load.filter;

			self.controls.enable && self._bindHandlers();

			if(self.controls.toggleFilterButtons){
				self._buildToggleArray();

				for(var i = 0; i < self._toggleArray.length; i++){
					self._updateControls({filter: self._toggleArray[i], sort: self._activeSort}, true);
				};
			} else if(self.controls.enable){
				self._updateControls({filter: self._activeFilter, sort: self._activeSort});
			}

			self._filter();

			self._init = true;

			self._$container.data('mixItUp',self);

			self._execAction('_init', 1, arguments);

			self._buildState();

			self._$targets.css(self._brake);

			self._goMix(self.animation.enable);
		},

		

		_platformDetect: function(){
			var self = this,
				vendorsTrans = ['Webkit', 'Moz', 'O', 'ms'],
				vendorsRAF = ['webkit', 'moz'],
				chrome = window.navigator.appVersion.match(/Chrome\/(\d+)\./) || false,
				ff = typeof InstallTrigger !== 'undefined',
				prefix = function(el){
					for (var i = 0; i < vendorsTrans.length; i++){
						if (vendorsTrans[i] + 'Transition' in el.style){
							return {
								prefix: '-'+vendorsTrans[i].toLowerCase()+'-',
								vendor: vendorsTrans[i]
							};
						};
					};
					return 'transition' in el.style ? '' : false;
				},
				transPrefix = prefix(self._domNode);

			self._execAction('_platformDetect', 0);

			self._chrome = chrome ? parseInt(chrome[1], 10) : false;
			self._ff = ff ? parseInt(window.navigator.userAgent.match(/rv:([^)]+)\)/)[1]) : false;
			self._prefix = transPrefix.prefix;
			self._vendor = transPrefix.vendor;
			self._suckMode = window.atob && self._prefix ? false : true;

			self._suckMode && (self.animation.enable = false);
			(self._ff && self._ff <= 4) && (self.animation.enable = false);

			

			

			for(var x = 0; x < vendorsRAF.length && !window.requestAnimationFrame; x++){
				window.requestAnimationFrame = window[vendorsRAF[x]+'RequestAnimationFrame'];
			}

			

			if(typeof Object.getPrototypeOf !== 'function'){
				if(typeof 'test'.__proto__ === 'object'){
					Object.getPrototypeOf = function(object){
						return object.__proto__;
					};
				} else {
					Object.getPrototypeOf = function(object){
						return object.constructor.prototype;
					};
				}
			}

			

			if(self._domNode.nextElementSibling === undf){
				Object.defineProperty(Element.prototype, 'nextElementSibling',{
					get: function(){
						var el = this.nextSibling;

						while(el){
							if(el.nodeType ===1){
								return el;
							}
							el = el.nextSibling;
						}
						return null;
					}
				});
			}

			self._execAction('_platformDetect', 1);
		},

		

		_refresh: function(init, force){
			var self = this;

			self._execAction('_refresh', 0, arguments);

			self._$targets = self._$container.find(self.selectors.target);

			for(var i = 0; i < self._$targets.length; i++){
				var target = self._$targets[i];

				if(target.dataset === undf || force){

					target.dataset = {};

					for(var j = 0; j < target.attributes.length; j++){

						var attr = target.attributes[j],
							name = attr.name,
							val = attr.value;

						if(name.indexOf('data-') > -1){
							var dataName = self._helpers._camelCase(name.substring(5,name.length));
							target.dataset[dataName] = val;
						}
					}
				}

				if(target.mixParent === undf){
					target.mixParent = self._id;
				}
			}

			if(
				(self._$targets.length && init) ||
				(!self._origOrder.length && self._$targets.length)
			){
				self._origOrder = [];

				for(var i = 0; i < self._$targets.length; i++){
					var target = self._$targets[i];

					self._origOrder.push(target);
				}
			}

			self._execAction('_refresh', 1, arguments);
		},

		

		_bindHandlers: function(){
			var self = this,
				filters = $.MixItUp.prototype._bound._filter,
				sorts = $.MixItUp.prototype._bound._sort;

			self._execAction('_bindHandlers', 0);

			if(self.controls.live){
				self._$body
					.on('click.mixItUp.'+self._id, self.selectors.sort, function(){
						self._processClick($(this), 'sort');
					})
					.on('click.mixItUp.'+self._id, self.selectors.filter, function(){
						self._processClick($(this), 'filter');
					});
			} else {
				self._$sortButtons = $(self.selectors.sort);
				self._$filterButtons = $(self.selectors.filter);

				self._$sortButtons.on('click.mixItUp.'+self._id, function(){
					self._processClick($(this), 'sort');
				});

				self._$filterButtons.on('click.mixItUp.'+self._id, function(){
					self._processClick($(this), 'filter');
				});
			}

			filters[self.selectors.filter] = (filters[self.selectors.filter] === undf) ? 1 : filters[self.selectors.filter] + 1;
			sorts[self.selectors.sort] = (sorts[self.selectors.sort] === undf) ? 1 : sorts[self.selectors.sort] + 1;

			self._execAction('_bindHandlers', 1);
		},

		

		_processClick: function($button, type){
			var self = this,
				trackClick = function($button, type, off){
					var proto = $.MixItUp.prototype;

					proto._handled['_'+type][self.selectors[type]] = (proto._handled['_'+type][self.selectors[type]] === undf) ?
						1 :
						proto._handled['_'+type][self.selectors[type]] + 1;

					if(proto._handled['_'+type][self.selectors[type]] === proto._bound['_'+type][self.selectors[type]]){
						$button[(off ? 'remove' : 'add')+'Class'](self.controls.activeClass);
						delete proto._handled['_'+type][self.selectors[type]];
					}
				};

			self._execAction('_processClick', 0, arguments);

			if(!self._mixing || (self.animation.queue && self._queue.length < self.animation.queueLimit)){
				self._clicking = true;

				if(type === 'sort'){
					var sort = $button.attr('data-sort');

					if(!$button.hasClass(self.controls.activeClass) || sort.indexOf('random') > -1){
						$(self.selectors.sort).removeClass(self.controls.activeClass);
						trackClick($button, type);
						self.sort(sort);
					}
				}

				if(type === 'filter') {
					var filter = $button.attr('data-filter'),
						ndx,
						seperator = self.controls.toggleLogic === 'or' ? ',' : '';

					if(!self.controls.toggleFilterButtons){
						if(!$button.hasClass(self.controls.activeClass)){
							$(self.selectors.filter).removeClass(self.controls.activeClass);
							trackClick($button, type);
							self.filter(filter);
						}
					} else {
						self._buildToggleArray();

						if(!$button.hasClass(self.controls.activeClass)){
							trackClick($button, type);

							self._toggleArray.push(filter);
						} else {
							trackClick($button, type, true);
							ndx = self._toggleArray.indexOf(filter);
							self._toggleArray.splice(ndx, 1);
						}

						self._toggleArray = $.grep(self._toggleArray,function(n){return(n);});

						self._toggleString = self._toggleArray.join(seperator);

						self.filter(self._toggleString);
					}
				}

				self._execAction('_processClick', 1, arguments);
			} else {
				if(typeof self.callbacks.onMixBusy === 'function'){
					self.callbacks.onMixBusy.call(self._domNode, self._state, self);
				}
				self._execAction('_processClickBusy', 1, arguments);
			}
		},

		

		_buildToggleArray: function(){
			var self = this,
				activeFilter = self._activeFilter.replace(/\s/g, '');

			self._execAction('_buildToggleArray', 0, arguments);

			if(self.controls.toggleLogic === 'or'){
				self._toggleArray = activeFilter.split(',');
			} else {
				self._toggleArray = activeFilter.split('.');

				!self._toggleArray[0] && self._toggleArray.shift();

				for(var i = 0, filter; filter = self._toggleArray[i]; i++){
					self._toggleArray[i] = '.'+filter;
				}
			}

			self._execAction('_buildToggleArray', 1, arguments);
		},

		

		_updateControls: function(command, multi){
			var self = this,
				output = {
					filter: command.filter,
					sort: command.sort
				},
				update = function($el, filter){
					try {
						(multi && type === 'filter' && !(output.filter === 'none' || output.filter === '')) ?
								$el.filter(filter).addClass(self.controls.activeClass) :
								$el.removeClass(self.controls.activeClass).filter(filter).addClass(self.controls.activeClass);
					} catch(e) {}
				},
				type = 'filter',
				$el = null;

			self._execAction('_updateControls', 0, arguments);

			(command.filter === undf) && (output.filter = self._activeFilter);
			(command.sort === undf) && (output.sort = self._activeSort);
			(output.filter === self.selectors.target) && (output.filter = 'all');

			for(var i = 0; i < 2; i++){
				$el = self.controls.live ? $(self.selectors[type]) : self['_$'+type+'Buttons'];
				$el && update($el, '[data-'+type+'="'+output[type]+'"]');
				type = 'sort';
			}

			self._execAction('_updateControls', 1, arguments);
		},

		

		_filter: function(){
			var self = this;

			self._execAction('_filter', 0);

			for(var i = 0; i < self._$targets.length; i++){
				var $target = $(self._$targets[i]);

				if($target.is(self._activeFilter)){
					self._$show = self._$show.add($target);
				} else {
					self._$hide = self._$hide.add($target);
				}
			}

			self._execAction('_filter', 1);
		},

		

		_sort: function(){
			var self = this,
				arrayShuffle = function(oldArray){
					var newArray = oldArray.slice(),
						len = newArray.length,
						i = len;

					while(i--){
						var p = parseInt(Math.random()*len);
						var t = newArray[i];
						newArray[i] = newArray[p];
						newArray[p] = t;
					};
					return newArray;
				};

			self._execAction('_sort', 0);

			self._startOrder = [];

			for(var i = 0; i < self._$targets.length; i++){
				var target = self._$targets[i];

				self._startOrder.push(target);
			}

			switch(self._newSort[0].sortBy){
				case 'default':
					self._newOrder = self._origOrder;
					break;
				case 'random':
					self._newOrder = arrayShuffle(self._startOrder);
					break;
				case 'custom':
					self._newOrder = self._newSort[0].order;
					break;
				default:
					self._newOrder = self._startOrder.concat().sort(function(a, b){
						return self._compare(a, b);
					});
			}

			self._execAction('_sort', 1);
		},

		

		_compare: function(a, b, depth){
			depth = depth ? depth : 0;

			var self = this,
				order = self._newSort[depth].order,
				getData = function(el){
					return el.dataset[self._newSort[depth].sortBy] || 0;
				},
				attrA = isNaN(getData(a) * 1) ? getData(a).toLowerCase() : getData(a) * 1,
				attrB = isNaN(getData(b) * 1) ? getData(b).toLowerCase() : getData(b) * 1;

			if(attrA < attrB)
				return order === 'asc' ? -1 : 1;
			if(attrA > attrB)
				return order === 'asc' ? 1 : -1;
			if(attrA === attrB && self._newSort.length > depth+1)
				return self._compare(a, b, depth+1);

			return 0;
		},

		

		_printSort: function(reset){
			var self = this,
				order = reset ? self._startOrder : self._newOrder,
				targets = self._$parent[0].querySelectorAll(self.selectors.target),
				nextSibling = targets.length ? targets[targets.length -1].nextElementSibling : null,
				frag = document.createDocumentFragment();

			self._execAction('_printSort', 0, arguments);

			for(var i = 0; i < targets.length; i++){
				var target = targets[i],
					whiteSpace = target.nextSibling;

				if(target.style.position === 'absolute') continue;

				if(whiteSpace && whiteSpace.nodeName === '#text'){
					self._$parent[0].removeChild(whiteSpace);
				}

				self._$parent[0].removeChild(target);
			}

			for(var i = 0; i < order.length; i++){
				var el = order[i];

				if(self._newSort[0].sortBy === 'default' && self._newSort[0].order === 'desc' && !reset){
					var firstChild = frag.firstChild;
					frag.insertBefore(el, firstChild);
					frag.insertBefore(document.createTextNode(' '), el);
				} else {
					frag.appendChild(el);
					frag.appendChild(document.createTextNode(' '));
				}
			}

			nextSibling ?
				self._$parent[0].insertBefore(frag, nextSibling) :
				self._$parent[0].appendChild(frag);

			self._execAction('_printSort', 1, arguments);
		},

		

		_parseSort: function(sortString){
			var self = this,
				rules = typeof sortString === 'string' ? sortString.split(' ') : [sortString],
				newSort = [];

			for(var i = 0; i < rules.length; i++){
				var rule = typeof sortString === 'string' ? rules[i].split(':') : ['custom', rules[i]],
					ruleObj = {
						sortBy: self._helpers._camelCase(rule[0]),
						order: rule[1] || 'asc'
					};

				newSort.push(ruleObj);

				if(ruleObj.sortBy === 'default' || ruleObj.sortBy === 'random') break;
			}

			return self._execFilter('_parseSort', newSort, arguments);
		},

		

		_parseEffects: function(){
			var self = this,
				effects = {
					opacity: '',
					transformIn: '',
					transformOut: '',
					filter: ''
				},
				parse = function(effect, extract, reverse){
					if(self.animation.effects.indexOf(effect) > -1){
						if(extract){
							var propIndex = self.animation.effects.indexOf(effect+'(');
							if(propIndex > -1){
								var str = self.animation.effects.substring(propIndex),
									match = /\(([^)]+)\)/.exec(str),
									val = match[1];

									return {val: val};
							}
						}
						return true;
					} else {
						return false;
					}
				},
				negate = function(value, invert){
					if(invert){
						return value.charAt(0) === '-' ? value.substr(1, value.length) : '-'+value;
					} else {
						return value;
					}
				},
				buildTransform = function(key, invert){
					var transforms = [
						['scale', '.01'],
						['translateX', '20px'],
						['translateY', '20px'],
						['translateZ', '20px'],
						['rotateX', '90deg'],
						['rotateY', '90deg'],
						['rotateZ', '180deg'],
					];

					for(var i = 0; i < transforms.length; i++){
						var prop = transforms[i][0],
							def = transforms[i][1],
							inverted = invert && prop !== 'scale';

						effects[key] += parse(prop) ? prop+'('+negate(parse(prop, true).val || def, inverted)+') ' : '';
					}
				};

			effects.opacity = parse('fade') ? parse('fade',true).val || '0' : '1';

			buildTransform('transformIn');

			self.animation.reverseOut ? buildTransform('transformOut', true) : (effects.transformOut = effects.transformIn);

			effects.transition = {};

			effects.transition = self._getPrefixedCSS('transition','all '+self.animation.duration+'ms '+self.animation.easing+', opacity '+self.animation.duration+'ms linear');

			self.animation.stagger = parse('stagger') ? true : false;
			self.animation.staggerDuration = parseInt(parse('stagger') ? (parse('stagger',true).val ? parse('stagger',true).val : 100) : 100);

			return self._execFilter('_parseEffects', effects);
		},

		

		_buildState: function(future){
			var self = this,
				state = {};

			self._execAction('_buildState', 0);

			state = {
				activeFilter: self._activeFilter === '' ? 'none' : self._activeFilter,
				activeSort: future && self._newSortString ? self._newSortString : self._activeSort,
				fail: !self._$show.length && self._activeFilter !== '',
				$targets: self._$targets,
				$show: self._$show,
				$hide: self._$hide,
				totalTargets: self._$targets.length,
				totalShow: self._$show.length,
				totalHide: self._$hide.length,
				display: future && self._newDisplay ? self._newDisplay : self.layout.display
			};

			if(future){
				return self._execFilter('_buildState', state);
			} else {
				self._state = state;

				self._execAction('_buildState', 1);
			}
		},

		

		_goMix: function(animate){
			var self = this,
				phase1 = function(){
					if(self._chrome && (self._chrome === 31)){
						chromeFix(self._$parent[0]);
					}

					self._setInter();

					phase2();
				},
				phase2 = function(){
					var scrollTop = window.pageYOffset,
						scrollLeft = window.pageXOffset,
						docHeight = document.documentElement.scrollHeight;

					self._getInterMixData();

					self._setFinal();

					self._getFinalMixData();

					(window.pageYOffset !== scrollTop) && window.scrollTo(scrollLeft, scrollTop);

					self._prepTargets();

					if(window.requestAnimationFrame){
						requestAnimationFrame(phase3);
					} else {
						setTimeout(function(){
							phase3();
						},20);
					}
				},
				phase3 = function(){
					self._animateTargets();

					if(self._targetsBound === 0){
						self._cleanUp();
					}
				},
				chromeFix = function(grid){
					var parent = grid.parentElement,
						placeholder = document.createElement('div'),
						frag = document.createDocumentFragment();

					parent.insertBefore(placeholder, grid);
					frag.appendChild(grid);
					parent.replaceChild(grid, placeholder);
				},
				futureState = self._buildState(true);

			self._execAction('_goMix', 0, arguments);

			!self.animation.duration && (animate = false);

			self._mixing = true;

			self._$container.removeClass(self.layout.containerClassFail);

			if(typeof self.callbacks.onMixStart === 'function'){
				self.callbacks.onMixStart.call(self._domNode, self._state, futureState, self);
			}

			self._$container.trigger('mixStart', [self._state, futureState, self]);

			self._getOrigMixData();

			if(animate && !self._suckMode){

				window.requestAnimationFrame ?
					requestAnimationFrame(phase1) :
					phase1();

			} else {
				self._cleanUp();
			}

			self._execAction('_goMix', 1, arguments);
		},

		

		_getTargetData: function(el, stage){
			var self = this,
				elStyle;

			el.dataset[stage+'PosX'] = el.offsetLeft;
			el.dataset[stage+'PosY'] = el.offsetTop;

			if(self.animation.animateResizeTargets){
				elStyle = !self._suckMode ?
					window.getComputedStyle(el) :
					{
						marginBottom: '',
						marginRight: ''
					};

				el.dataset[stage+'MarginBottom'] = parseInt(elStyle.marginBottom);
				el.dataset[stage+'MarginRight'] = parseInt(elStyle.marginRight);
				el.dataset[stage+'Width'] = el.offsetWidth;
				el.dataset[stage+'Height'] = el.offsetHeight;
			}
		},

		

		_getOrigMixData: function(){
			var self = this,
				parentStyle = !self._suckMode ? window.getComputedStyle(self._$parent[0]) : {boxSizing: ''},
				parentBS = parentStyle.boxSizing || parentStyle[self._vendor+'BoxSizing'];

			self._incPadding = (parentBS === 'border-box');

			self._execAction('_getOrigMixData', 0);

			!self._suckMode && (self.effects = self._parseEffects());

			self._$toHide = self._$hide.filter(':visible');
			self._$toShow = self._$show.filter(':hidden');
			self._$pre = self._$targets.filter(':visible');

			self._startHeight = self._incPadding ?
				self._$parent.outerHeight() :
				self._$parent.height();

			for(var i = 0; i < self._$pre.length; i++){
				var el = self._$pre[i];

				self._getTargetData(el, 'orig');
			}

			self._execAction('_getOrigMixData', 1);
		},

		

		_setInter: function(){
			var self = this;

			self._execAction('_setInter', 0);

			if(self._changingLayout && self.animation.animateChangeLayout){
				self._$toShow.css('display',self._newDisplay);

				if(self._changingClass){
					self._$container
						.removeClass(self.layout.containerClass)
						.addClass(self._newClass);
				}
			} else {
				self._$toShow.css('display', self.layout.display);
			}

			self._execAction('_setInter', 1);
		},

		

		_getInterMixData: function(){
			var self = this;

			self._execAction('_getInterMixData', 0);

			for(var i = 0; i < self._$toShow.length; i++){
				var el = self._$toShow[i];

				self._getTargetData(el, 'inter');
			}

			for(var i = 0; i < self._$pre.length; i++){
				var el = self._$pre[i];

				self._getTargetData(el, 'inter');
			}

			self._execAction('_getInterMixData', 1);
		},

		

		_setFinal: function(){
			var self = this;

			self._execAction('_setFinal', 0);

			self._sorting && self._printSort();

			self._$toHide.removeStyle('display');

			if(self._changingLayout && self.animation.animateChangeLayout){
				self._$pre.css('display',self._newDisplay);
			}

			self._execAction('_setFinal', 1);
		},

		

		_getFinalMixData: function(){
			var self = this;

			self._execAction('_getFinalMixData', 0);

			for(var i = 0; i < self._$toShow.length; i++){
				var el = self._$toShow[i];

				self._getTargetData(el, 'final');
			}

			for(var i = 0; i < self._$pre.length; i++){
				var el = self._$pre[i];

				self._getTargetData(el, 'final');
			}

			self._newHeight = self._incPadding ?
				self._$parent.outerHeight() :
				self._$parent.height();

			self._sorting && self._printSort(true);

			self._$toShow.removeStyle('display');

			self._$pre.css('display',self.layout.display);

			if(self._changingClass && self.animation.animateChangeLayout){
				self._$container
					.removeClass(self._newClass)
					.addClass(self.layout.containerClass);
			}

			self._execAction('_getFinalMixData', 1);
		},

		

		_prepTargets: function(){
			var self = this,
				transformCSS = {
					_in: self._getPrefixedCSS('transform', self.effects.transformIn),
					_out: self._getPrefixedCSS('transform', self.effects.transformOut)
				};

			self._execAction('_prepTargets', 0);

			if(self.animation.animateResizeContainer){
				self._$parent.css('height',self._startHeight+'px');
			}

			for(var i = 0; i < self._$toShow.length; i++){
				var el = self._$toShow[i],
					$el = $(el);

				el.style.opacity = self.effects.opacity;
				el.style.display = (self._changingLayout && self.animation.animateChangeLayout) ?
					self._newDisplay :
					self.layout.display;

				$el.css(transformCSS._in);

				if(self.animation.animateResizeTargets){
					el.style.width = el.dataset.finalWidth+'px';
					el.style.height = el.dataset.finalHeight+'px';
					el.style.marginRight = -(el.dataset.finalWidth - el.dataset.interWidth) + (el.dataset.finalMarginRight * 1)+'px';
					el.style.marginBottom = -(el.dataset.finalHeight - el.dataset.interHeight) + (el.dataset.finalMarginBottom * 1)+'px';
				}
			}

			for(var i = 0; i < self._$pre.length; i++){
				var el = self._$pre[i],
					$el = $(el),
					translate = {
						x: el.dataset.origPosX - el.dataset.interPosX,
						y: el.dataset.origPosY - el.dataset.interPosY
					},
					transformCSS = self._getPrefixedCSS('transform','translate('+translate.x+'px,'+translate.y+'px)');

				$el.css(transformCSS);

				if(self.animation.animateResizeTargets){
					el.style.width = el.dataset.origWidth+'px';
					el.style.height = el.dataset.origHeight+'px';

					if(el.dataset.origWidth - el.dataset.finalWidth){
						el.style.marginRight = -(el.dataset.origWidth - el.dataset.interWidth) + (el.dataset.origMarginRight * 1)+'px';
					}

					if(el.dataset.origHeight - el.dataset.finalHeight){
						el.style.marginBottom = -(el.dataset.origHeight - el.dataset.interHeight) + (el.dataset.origMarginBottom * 1) +'px';
					}
				}
			}

			self._execAction('_prepTargets', 1);
		},

		

		_animateTargets: function(){
			var self = this;

			self._execAction('_animateTargets', 0);

			self._targetsDone = 0;
			self._targetsBound = 0;

			self._$parent
				.css(self._getPrefixedCSS('perspective', self.animation.perspectiveDistance+'px'))
				.css(self._getPrefixedCSS('perspective-origin', self.animation.perspectiveOrigin));

			if(self.animation.animateResizeContainer){
				self._$parent
					.css(self._getPrefixedCSS('transition','height '+self.animation.duration+'ms ease'))
					.css('height',self._newHeight+'px');
			}

			for(var i = 0; i < self._$toShow.length; i++){
				var el = self._$toShow[i],
					$el = $(el),
					translate = {
						x: el.dataset.finalPosX - el.dataset.interPosX,
						y: el.dataset.finalPosY - el.dataset.interPosY
					},
					delay = self._getDelay(i),
					toShowCSS = {};

				el.style.opacity = '';

				for(var j = 0; j < 2; j++){
					var a = j === 0 ? a = self._prefix : '';

					if(self._ff && self._ff <= 20){
						toShowCSS[a+'transition-property'] = 'all';
						toShowCSS[a+'transition-timing-function'] = self.animation.easing+'ms';
						toShowCSS[a+'transition-duration'] = self.animation.duration+'ms';
					}

					toShowCSS[a+'transition-delay'] = delay+'ms';
					toShowCSS[a+'transform'] = 'translate('+translate.x+'px,'+translate.y+'px)';
				}

				if(self.effects.transform || self.effects.opacity){
					self._bindTargetDone($el);
				}

				(self._ff && self._ff <= 20) ?
					$el.css(toShowCSS) :
					$el.css(self.effects.transition).css(toShowCSS);
			}

			for(var i = 0; i < self._$pre.length; i++){
				var el = self._$pre[i],
					$el = $(el),
					translate = {
						x: el.dataset.finalPosX - el.dataset.interPosX,
						y: el.dataset.finalPosY - el.dataset.interPosY
					},
					delay = self._getDelay(i);

				if(!(
					el.dataset.finalPosX === el.dataset.origPosX &&
					el.dataset.finalPosY === el.dataset.origPosY
				)){
					self._bindTargetDone($el);
				}

				$el.css(self._getPrefixedCSS('transition', 'all '+self.animation.duration+'ms '+self.animation.easing+' '+delay+'ms'));
				$el.css(self._getPrefixedCSS('transform', 'translate('+translate.x+'px,'+translate.y+'px)'));

				if(self.animation.animateResizeTargets){
					if(el.dataset.origWidth - el.dataset.finalWidth && el.dataset.finalWidth * 1){
						el.style.width = el.dataset.finalWidth+'px';
						el.style.marginRight = -(el.dataset.finalWidth - el.dataset.interWidth)+(el.dataset.finalMarginRight * 1)+'px';
					}

					if(el.dataset.origHeight - el.dataset.finalHeight && el.dataset.finalHeight * 1){
						el.style.height = el.dataset.finalHeight+'px';
						el.style.marginBottom = -(el.dataset.finalHeight - el.dataset.interHeight)+(el.dataset.finalMarginBottom * 1) +'px';
					}
				}
			}

			if(self._changingClass){
				self._$container
					.removeClass(self.layout.containerClass)
					.addClass(self._newClass);
			}

			for(var i = 0; i < self._$toHide.length; i++){
				var el = self._$toHide[i],
					$el = $(el),
					delay = self._getDelay(i),
					toHideCSS = {};

				for(var j = 0; j<2; j++){
					var a = j === 0 ? a = self._prefix : '';

					toHideCSS[a+'transition-delay'] = delay+'ms';
					toHideCSS[a+'transform'] = self.effects.transformOut;
					toHideCSS.opacity = self.effects.opacity;
				}

				$el.css(self.effects.transition).css(toHideCSS);

				if(self.effects.transform || self.effects.opacity){
					self._bindTargetDone($el);
				};
			}

			self._execAction('_animateTargets', 1);

		},

		

		_bindTargetDone: function($el){
			var self = this,
				el = $el[0];

			self._execAction('_bindTargetDone', 0, arguments);

			if(!el.dataset.bound){

				el.dataset.bound = true;
				self._targetsBound++;

				$el.on('webkitTransitionEnd.mixItUp transitionend.mixItUp',function(e){
					if(
						(e.originalEvent.propertyName.indexOf('transform') > -1 ||
						e.originalEvent.propertyName.indexOf('opacity') > -1) &&
						$(e.originalEvent.target).is(self.selectors.target)
					){
						$el.off('.mixItUp');
						el.dataset.bound = '';
						self._targetDone();
					}
				});
			}

			self._execAction('_bindTargetDone', 1, arguments);
		},

		

		_targetDone: function(){
			var self = this;

			self._execAction('_targetDone', 0);

			self._targetsDone++;

			(self._targetsDone === self._targetsBound) && self._cleanUp();

			self._execAction('_targetDone', 1);
		},

		

		_cleanUp: function(){
			var self = this,
				targetStyles = self.animation.animateResizeTargets ?
					'transform opacity width height margin-bottom margin-right' :
					'transform opacity',
				unBrake = function(){
					self._$targets.removeStyle('transition', self._prefix);
				};

			self._execAction('_cleanUp', 0);

			!self._changingLayout ?
				self._$show.css('display',self.layout.display) :
				self._$show.css('display',self._newDisplay);

			self._$targets.css(self._brake);

			self._$targets
				.removeStyle(targetStyles, self._prefix)
				.removeAttr('data-inter-pos-x data-inter-pos-y data-final-pos-x data-final-pos-y data-orig-pos-x data-orig-pos-y data-orig-height data-orig-width data-final-height data-final-width data-inter-width data-inter-height data-orig-margin-right data-orig-margin-bottom data-inter-margin-right data-inter-margin-bottom data-final-margin-right data-final-margin-bottom');

			self._$hide.removeStyle('display');

			self._$parent.removeStyle('height transition perspective-distance perspective perspective-origin-x perspective-origin-y perspective-origin perspectiveOrigin', self._prefix);

			if(self._sorting){
				self._printSort();
				self._activeSort = self._newSortString;
				self._sorting = false;
			}

			if(self._changingLayout){
				if(self._changingDisplay){
					self.layout.display = self._newDisplay;
					self._changingDisplay = false;
				}

				if(self._changingClass){
					self._$parent.removeClass(self.layout.containerClass).addClass(self._newClass);
					self.layout.containerClass = self._newClass;
					self._changingClass = false;
				}

				self._changingLayout = false;
			}

			self._refresh();

			self._buildState();

			if(self._state.fail){
				self._$container.addClass(self.layout.containerClassFail);
			}

			self._$show = $();
			self._$hide = $();

			if(window.requestAnimationFrame){
				requestAnimationFrame(unBrake);
			}

			self._mixing = false;

			if(typeof self.callbacks._user === 'function'){
				self.callbacks._user.call(self._domNode, self._state, self);
			}

			if(typeof self.callbacks.onMixEnd === 'function'){
				self.callbacks.onMixEnd.call(self._domNode, self._state, self);
			}

			self._$container.trigger('mixEnd', [self._state, self]);

			if(self._state.fail){
				(typeof self.callbacks.onMixFail === 'function') && self.callbacks.onMixFail.call(self._domNode, self._state, self);
				self._$container.trigger('mixFail', [self._state, self]);
			}

			if(self._loading){
				(typeof self.callbacks.onMixLoad === 'function') && self.callbacks.onMixLoad.call(self._domNode, self._state, self);
				self._$container.trigger('mixLoad', [self._state, self]);
			}

			if(self._queue.length){
				self._execAction('_queue', 0);

				self.multiMix(self._queue[0][0],self._queue[0][1],self._queue[0][2]);
				self._queue.splice(0, 1);
			}

			self._execAction('_cleanUp', 1);

			self._loading = false;
		},

		

		_getPrefixedCSS: function(property, value, prefixValue){
			var self = this,
				styles = {},
				prefix = '',
				i = -1;

			for(i = 0; i < 2; i++){
				prefix = i === 0 ? self._prefix : '';
				prefixValue ? styles[prefix+property] = prefix+value : styles[prefix+property] = value;
			}

			return self._execFilter('_getPrefixedCSS', styles, arguments);
		},

		

		_getDelay: function(i){
			var self = this,
				n = typeof self.animation.staggerSequence === 'function' ? self.animation.staggerSequence.call(self._domNode, i, self._state) : i,
				delay = self.animation.stagger ? n * self.animation.staggerDuration : 0;

			return self._execFilter('_getDelay', delay, arguments);
		},

		

		_parseMultiMixArgs: function(args){
			var self = this,
				output = {
					command: null,
					animate: self.animation.enable,
					callback: null
				};

			for(var i = 0; i < args.length; i++){
				var arg = args[i];

				if(arg !== null){
					if(typeof arg === 'object' || typeof arg === 'string'){
						output.command = arg;
					} else if(typeof arg === 'boolean'){
						output.animate = arg;
					} else if(typeof arg === 'function'){
						output.callback = arg;
					}
				}
			}

			return self._execFilter('_parseMultiMixArgs', output, arguments);
		},

		

		_parseInsertArgs: function(args){
			var self = this,
				output = {
					index: 0,
					$object: $(),
					multiMix: {filter: self._state.activeFilter},
					callback: null
				};

			for(var i = 0; i < args.length; i++){
				var arg = args[i];

				if(typeof arg === 'number'){
					output.index = arg;
				} else if(typeof arg === 'object' && arg instanceof $){
					output.$object = arg;
				} else if(typeof arg === 'object' && self._helpers._isElement(arg)){
					output.$object = $(arg);
				} else if(typeof arg === 'object' && arg !== null){
					output.multiMix = arg;
				} else if(typeof arg === 'boolean' && !arg){
					output.multiMix = false;
				} else if(typeof arg === 'function'){
					output.callback = arg;
				}
			}

			return self._execFilter('_parseInsertArgs', output, arguments);
		},

		

		_execAction: function(methodName, isPost, args){
			var self = this,
				context = isPost ? 'post' : 'pre';

			if(!self._actions.isEmptyObject && self._actions.hasOwnProperty(methodName)){
				for(var key in self._actions[methodName][context]){
					self._actions[methodName][context][key].call(self, args);
				}
			}
		},

		

		_execFilter: function(methodName, value, args){
			var self = this;

			if(!self._filters.isEmptyObject && self._filters.hasOwnProperty(methodName)){
				for(var key in self._filters[methodName]){
					return self._filters[methodName][key].call(self, args);
				}
			} else {
				return value;
			}
		},

		

		_helpers: {

			

			_camelCase: function(string){
				return string.replace(/-([a-z])/g, function(g){
						return g[1].toUpperCase();
				});
			},

			

			_isElement: function(el){
				if(window.HTMLElement){
					return el instanceof HTMLElement;
				} else {
					return (
						el !== null &&
						el.nodeType === 1 &&
						el.nodeName === 'string'
					);
				}
			}
		},

		

		

		isMixing: function(){
			var self = this;

			return self._execFilter('isMixing', self._mixing);
		},

		

		filter: function(){
			var self = this,
				args = self._parseMultiMixArgs(arguments);

			self._clicking && (self._toggleString = '');

			self.multiMix({filter: args.command}, args.animate, args.callback);
		},

		

		sort: function(){
			var self = this,
				args = self._parseMultiMixArgs(arguments);

			self.multiMix({sort: args.command}, args.animate, args.callback);
		},

		

		changeLayout: function(){
			var self = this,
				args = self._parseMultiMixArgs(arguments);

			self.multiMix({changeLayout: args.command}, args.animate, args.callback);
		},

		

		multiMix: function(){
			var self = this,
				args = self._parseMultiMixArgs(arguments);

			self._execAction('multiMix', 0, arguments);

			if(!self._mixing){
				if(self.controls.enable && !self._clicking){
					self.controls.toggleFilterButtons && self._buildToggleArray();
					self._updateControls(args.command, self.controls.toggleFilterButtons);
				}

				(self._queue.length < 2) && (self._clicking = false);

				delete self.callbacks._user;
				if(args.callback) self.callbacks._user = args.callback;

				var sort = args.command.sort,
					filter = args.command.filter,
					changeLayout = args.command.changeLayout;

				self._refresh();

				if(sort){
					self._newSort = self._parseSort(sort);
					self._newSortString = sort;

					self._sorting = true;
					self._sort();
				}

				if(filter !== undf){
					filter = (filter === 'all') ? self.selectors.target : filter;

					self._activeFilter = filter;
				}

				self._filter();

				if(changeLayout){
					self._newDisplay = (typeof changeLayout === 'string') ? changeLayout : changeLayout.display || self.layout.display;
					self._newClass = changeLayout.containerClass || '';

					if(
						self._newDisplay !== self.layout.display ||
						self._newClass !== self.layout.containerClass
					){
						self._changingLayout = true;

						self._changingClass = (self._newClass !== self.layout.containerClass);
						self._changingDisplay = (self._newDisplay !== self.layout.display);
					}
				}

				self._$targets.css(self._brake);

				self._goMix(args.animate ^ self.animation.enable ? args.animate : self.animation.enable);

				self._execAction('multiMix', 1, arguments);

			} else {
				if(self.animation.queue && self._queue.length < self.animation.queueLimit){
					self._queue.push(arguments);

					(self.controls.enable && !self._clicking) && self._updateControls(args.command);

					self._execAction('multiMixQueue', 1, arguments);

				} else {
					if(typeof self.callbacks.onMixBusy === 'function'){
						self.callbacks.onMixBusy.call(self._domNode, self._state, self);
					}
					self._$container.trigger('mixBusy', [self._state, self]);

					self._execAction('multiMixBusy', 1, arguments);
				}
			}
		},

		

		insert: function(){
			var self = this,
				args = self._parseInsertArgs(arguments),
				callback = (typeof args.callback === 'function') ? args.callback : null,
				frag = document.createDocumentFragment(),
				target = (function(){
					self._refresh();

					if(self._$targets.length){
						return (args.index < self._$targets.length || !self._$targets.length) ?
							self._$targets[args.index] :
							self._$targets[self._$targets.length-1].nextElementSibling;
					} else {
						return self._$parent[0].children[0];
					}
				})();

			self._execAction('insert', 0, arguments);

			if(args.$object){
				for(var i = 0; i < args.$object.length; i++){
					var el = args.$object[i];

					frag.appendChild(el);
					frag.appendChild(document.createTextNode(' '));
				}

				self._$parent[0].insertBefore(frag, target);
			}

			self._execAction('insert', 1, arguments);

			if(typeof args.multiMix === 'object'){
				self.multiMix(args.multiMix, callback);
			}
		},

		

		prepend: function(){
			var self = this,
				args = self._parseInsertArgs(arguments);

			self.insert(0, args.$object, args.multiMix, args.callback);
		},

		

		append: function(){
			var self = this,
				args = self._parseInsertArgs(arguments);

			self.insert(self._state.totalTargets, args.$object, args.multiMix, args.callback);
		},

		

		getOption: function(string){
			var self = this,
				getProperty = function(obj, prop){
					var parts = prop.split('.'),
						last = parts.pop(),
						l = parts.length,
						i = 1,
						current = parts[0] || prop;

					while((obj = obj[current]) && i < l){
						current = parts[i];
						i++;
					}

					if(obj !== undf){
						return obj[last] !== undf ? obj[last] : obj;
					}
				};

			return string ? self._execFilter('getOption', getProperty(self, string), arguments) : self;
		},

		

		setOptions: function(config){
			var self = this;

			self._execAction('setOptions', 0, arguments);

			typeof config === 'object' && $.extend(true, self, config);

			self._execAction('setOptions', 1, arguments);
		},

		

		getState: function(){
			var self = this;

			return self._execFilter('getState', self._state, self);
		},

		

		forceRefresh: function(){
			var self = this;

			self._refresh(false, true);
		},

		

		destroy: function(hideAll){
			var self = this,
				filters = $.MixItUp.prototype._bound._filter,
				sorts = $.MixItUp.prototype._bound._sort;

			self._execAction('destroy', 0, arguments);

			self._$body
				.add($(self.selectors.sort))
				.add($(self.selectors.filter))
				.off('.mixItUp');

			for(var i = 0; i < self._$targets.length; i++){
				var target = self._$targets[i];

				hideAll && (target.style.display = '');

				delete target.mixParent;
			}

			self._execAction('destroy', 1, arguments);

			if(filters[self.selectors.filter] && filters[self.selectors.filter] > 1) {
				filters[self.selectors.filter]--;
			} else if(filters[self.selectors.filter] === 1) {
				delete filters[self.selectors.filter];
			}

			if(sorts[self.selectors.sort] && sorts[self.selectors.sort] > 1) {
				sorts[self.selectors.sort]--;
			} else if(sorts[self.selectors.sort] === 1) {
				delete sorts[self.selectors.sort];
			}

			delete $.MixItUp.prototype._instances[self._id];
		}

	};

	
	

	$.fn.mixItUp = function(){
		var args = arguments,
			dataReturn = [],
			eachReturn,
			_instantiate = function(domNode, settings){
				var instance = new $.MixItUp(),
					rand = function(){
						return ('00000'+(Math.random()*16777216<<0).toString(16)).substr(-6).toUpperCase();
					};

				instance._execAction('_instantiate', 0, arguments);

				domNode.id = !domNode.id ? 'MixItUp'+rand() : domNode.id;

				if(!instance._instances[domNode.id]){
					instance._instances[domNode.id] = instance;
					instance._init(domNode, settings);
				}

				instance._execAction('_instantiate', 1, arguments);
			};

		eachReturn = this.each(function(){
			if(args && typeof args[0] === 'string'){
				var instance = $.MixItUp.prototype._instances[this.id];
				if(args[0] === 'isLoaded'){
					dataReturn.push(instance ? true : false);
				} else {
					var data = instance[args[0]](args[1], args[2], args[3]);
					if(data !== undf)dataReturn.push(data);
				}
			} else {
				_instantiate(this, args[0]);
			}
		});

		if(dataReturn.length){
			return dataReturn.length > 1 ? dataReturn : dataReturn[0];
		} else {
			return eachReturn;
		}
	};

	

	$.fn.removeStyle = function(style, prefix){
		prefix = prefix ? prefix : '';

		return this.each(function(){
			var el = this,
				styles = style.split(' ');

			for(var i = 0; i < styles.length; i++){
				for(var j = 0; j < 4; j++){
					switch (j) {
						case 0:
							var prop = styles[i];
							break;
						case 1:
							var prop = $.MixItUp.prototype._helpers._camelCase(prop);
							break;
						case 2:
							var prop = prefix+styles[i];
							break;
						case 3:
							var prop = $.MixItUp.prototype._helpers._camelCase(prefix+styles[i]);
					}

					if(
                                                el.style[prop] !== undf &&
						typeof el.style[prop] !== 'unknown' &&
						el.style[prop].length > 0
					){
						el.style[prop] = '';
					}

					if(!prefix && j === 1)break;
				}
			}

			if(el.attributes && el.attributes.style && el.attributes.style !== undf && el.attributes.style.value === ''){
				el.attributes.removeNamedItem('style');
			}
		});
	};

})(jQuery);



var buttonFilter = {
  
  $filters: null,
  $reset: null,
  groups: [],
  outputArray: [],
  outputString: '',
  
  init: function(){
    var self = this;    
    self.$filters = $('#Filters');
    self.$reset = $('#Reset');
    self.$container = $('#techno_filter');
    
    self.$filters.find('.tencho-filter').each(function(){
      self.groups.push({
        $buttons: $(this).find('.filter'),
        active: ''
      });
    });    
    self.bindHandlers();
  },
  bindHandlers: function(){
    var self = this;
    self.$filters.on('click', '.filter', function(e){
		e.preventDefault();
		var $button = $(this);
        $button.addClass('active').siblings('.filter').removeClass('active');
        self.parseFilters();
		$('.video-overlay').hide();	
		$('#Reset').css('opacity','1');
		$('#Reset').css('pointer-events','auto');
	});
	
	self.$filters.on('mouseover', '.filter', function(e){
		e.preventDefault();
		var $button = $(this).data('filter');
		$buttonNew = $button.split('.').join('');
		$('.technology-filter .mix').each(function(){
			if($(this).hasClass($buttonNew)){
				$(this).css('opacity', '1');
			}else{
				$(this).css('opacity', '0.5');
			}
		});
        
	});
	self.$filters.on('mouseout', '.filter', function(e){
		e.preventDefault();
		$('.technology-filter .mix').css('opacity', '1');
	});
	 
	
    // Handle reset click
    
    self.$reset.on('click', function(e){
		e.preventDefault();      
		self.$filters.find('.filter').removeClass('active'); 
		$(this).css('opacity','0.35');
		$(this).css('pointer-events','none');     
		self.parseFilters();
    });
    
  },
  
  parseFilters: function(){
    var self = this;
 
    for(var i = 0, group; group = self.groups[i]; i++){
      group.active = group.$buttons.filter('.active').attr('data-filter') || '';
    }
    
    self.concatenate();
  },
  
  concatenate: function(){
    var self = this;
    
    self.outputString = ''; // Reset output string
    
    for(var i = 0, group; group = self.groups[i]; i++){
      self.outputString += group.active;
    }
        
    !self.outputString.length && (self.outputString = 'all'); 
    
    //salert(self.outputString); 
       
    if(self.$container.mixItUp('isLoaded')){
    	self.$container.mixItUp('filter', self.outputString);
    }
  }
};

$(function(){      
	buttonFilter.init();
	$('#techno_filter').mixItUp({
		controls: {
		  enable: false 
		},
		animation: {
        enable: false
         },
		callbacks: {
		  onMixFail: function(){
			//alert('No items were found matching the selected filters.');			
		  }
		},
		
	});   
	 
});
$('.banner-close-icon').live('click', function(){
    $('.techno-image').hide();
});
	
$(document).ready(function() {
    
   if(($('div').hasClass('order_failure'))|| ($('div').hasClass('order_success_page'))){
       $('body').addClass('success-page');
   }
    $( ".mix" ).each(function() {
        $(this).on("click", function(){
            var bannerCotent = $(this).find('.techno-banner').html();
            $('.video-overlay').show();
            $(".video-overlay").empty().append('<div class="techno-image animated slideInUp">'+ bannerCotent +'</div>');	
            $('html, body').animate({
                scrollTop: $(".techno-explanation").offset().top
            }, 100);
        });
    });	
    if(!$('body').hasClass('success-page')){
        if(isMobile()){
            $( ".mix" ).each(function() {
                $(this).on("click", function(){
                    var bannerCotent = $(this).find('.techno-banner').html();
                    $(".video-overlay").empty().append('<div class="techno-image animated slideInDown">'+ bannerCotent +'</div>');	
                });
            });
             $('.technology-filter .mix').on('click', function(){
                 $('.technology-top-content, #Filters, .technology-heading, .mix, .footer-container, .techno-explanation').css('display','none');
            });
            $('.banner-close-icon').live('click', function(){
                 $('.technology-top-content, #Filters, .technology-heading, .mix, .footer-container, .techno-explanation').css('display','block');
                 $('.techno-image').css('display','none');
                 $('html, body').animate({
                    scrollTop: $(".technology-filter").offset().top
                }, 1000);
            });
            $('.back-to-top').live('click', function(){
              $('.technology-top-content, #Filters, .technology-heading, .mix, .footer-container, .techno-explanation').css('display','block');
                $('.techno-image').css('display','none');
                $('html, body').animate({
                    scrollTop: $(".technology-filter").offset().top
                }, 1000);
            });
        }
    }
    if ($(window).width() < 767){
       
    }
    $('.filter-button').on('click', function(){
        $('.Filters-main').toggle('slow');
        if($(this).attr('aria-expanded')==='false'){
            $(this).attr('aria-expanded','true');
        }
        else{
            $(this).attr('aria-expanded','false');           
         }
    });   
    
});




$(document).ready(function() {
		
	   $("#ultimate-boot-slider").owlCarousel({
			loop:false,
			autoplay:false,
			items:3,
			smartSpeed: 2500,
			dots: false,
			nav: false,
			navText: ["<i class='fa fa-angle-left fa-2x'></i>", "<i class='fa fa-angle-right fa-2x'></i>"],
			responsive:{
				0:{
				  items:1  
				},
				500:{
					items:2
				},
                                1024:{
                                    items:3
                                },
				1200:{
					items:3
				}
			}
		});
		 if ($(window).width() < 767){
			$("#ultimate-boot-slider").owlCarousel({
			loop:true,
			autoplay:false,
			items:3,
			smartSpeed: 2500,
			dots: true,
			nav: true,
			navText: ["<i class='fa fa-angle-left fa-2x'></i>", "<i class='fa fa-angle-right fa-2x'></i>"],
			responsive:{
				0:{
				  items:1  
				},
				500:{
					items:2
				},
				1200:{
					items:3
				}
			}
		});
		}
        
        
        $("#mens-nature-product").owlCarousel({
			loop:true,
			autoplay:false,
			items:3,
			smartSpeed: 2500,
			dots: false,
			nav: true,
			navText: ["<i class='fa fa-angle-left fa-2x'></i>", "<i class='fa fa-angle-right fa-2x'></i>"],
			responsive:{
				0:{
				  items:1  
				},
				500:{
					items:2
				},
                               800:{
                                    items:3
                                },
				1200:{
					items:3
				}
			}
		});    
                $("#womens-nature-product").owlCarousel({
			loop:true,
			autoplay:false,
			items:3,
			smartSpeed: 2500,
			dots: false,
			nav: true,
			navText: ["<i class='fa fa-angle-left fa-2x'></i>", "<i class='fa fa-angle-right fa-2x'></i>"],
			responsive:{
				0:{
				  items:1  
				},
				500:{
					items:2
				},
                                800:{
                                    items:3
                                },
				1200:{
					items:3
				}
			}
		}); 
                
                $('.nature-b').click(
                    function(){
                        $(this).css('display','none');
                        $('.nature-a').css('display','block');
                    
                });
                $('.nature-a').click(
                    function(){
                        $(this).css('display','none');
                        $('.nature-b').css('display','block');
                    
                });
                $('.nature-c').click(
                    function(){
                        $(this).css('display','none');
                        $('.nature-d').css('display','block');
                    
                });
                $('.nature-d').click(
                    function(){
                        $(this).css('display','none');
                        $('.nature-c').css('display','block');
                    
                });
                
                $('.hidden-tres').click(function(){
                    $('.measurements-hidden').toggle();
              
                });
       
    
   if($(window).width() > 767){
        $('.btn-comf').click(function(e){
            $('.carousel-science .comfort').show();
            $('.carousel-science .science, .carousel-science .movement').hide();
            e.preventDefault();
              $('.comfort').css({ 'right': '40%', 'top': '20%' }).animate({
                  'right' : '28px',
                  'top'  : '7px',
                  'opacity' : '1'
              },"fast"); 
        }); 
         $('.btn-sci').on('click', function(e){
            $('.carousel-science .comfort, .carousel-science .movement').hide();
            $('.carousel-science .science').show();
            e.preventDefault();
            $('.science').css({ 'right': '40%', 'bottom': '5%' }).animate({
                'bottom' : '-20px',
                'right' : '25px',
                'opacity' : '1'
            },"fast"); 
        });
        $('.btn-mov').on('click', function(e){
            $('.carousel-science .comfort, .carousel-science .science').hide();
            $('.carousel-science .movement').show();                 
            e.preventDefault();
            $('.movement').css({ 'top': '50%', 'left': '15%' }).animate({
                'left' : '20px',
                'top' : '-5px',
                'opacity' : '1'
            },"fast"); 
        });
        $('#max .hideme-tech').show();
          $('#wave').on('click', function(){
            $('#td-2').slideDown();
            $('#td-3').slideUp();
            $('#wave .hideme-tech').hide();
             $('#max .hideme-tech').show();
        });
        $('#max').on('click', function(){
            $('#td-2').slideUp();
            $('#td-3').slideDown();
            $('#max .hideme-tech').hide();
            $('#wave .hideme-tech').show();    
        });
   
     }
   
        var videoHeight = $(window).height();
        var videoWidth = $(window).width();
        $('.technologies iframe').css('height', videoHeight);
        $('.technologies iframe').css('width', videoWidth);  
        
      

});

   
$(window).scroll(function() {    
    $('.hidemedown').each(function() {  
        var top_of_object = $(this).offset().top;    
        var bottom_of_window = $(window).scrollTop() + $(window).height();   

        if (bottom_of_window > top_of_object) {    
            if ($(this).hasClass('check')) {        
                $(this).animate({        
                    'top': '-3',  
                    'opacity': '1'   
                }, 500);     
            }else {       
                $(this).animate({    
                     'top': '0',     
                    'opacity': '1'    
                   }, 500);      
            }    
        }  
    });  
    $('.hideme').each(function() {     
        var top_of_object = $(this).offset().top;    
        var bottom_of_window = $(window).scrollTop() + $(window).height();  
        if (bottom_of_window > top_of_object) {     
            $(this).animate({   
                'opacity': '1'     
            }, 500);    
        }   
    });  

}); 
  

(function (factory) {
    if (typeof define === 'function' && define.amd) {
        // AMD
        define(['jquery'], factory);
    } else if (typeof module === 'object' && module.exports) {
        // Node/CommonJS
        module.exports = factory(require('jquery'));
    } else {
        // browser globals
        factory(jQuery);
    }
}(function ($) {

    var BarRating = (function() {

        function BarRating() {
            var self = this;

            // wrap element in a wrapper div
            var wrapElement = function() {
                var classes = ['br-wrapper'];

                if (self.options.theme !== '') {
                    classes.push('br-theme-' + self.options.theme);
                }

                self.$elem.wrap($('<div />', {
                    'class': classes.join(' ')
                }));
            };

            // unwrap element
            var unwrapElement = function() {
                self.$elem.unwrap();
            };

            // find option by value
            var findOption = function(value) {
                if ($.isNumeric(value)) {
                    value = Math.floor(value);
                }

                return $('option[value="' + value  + '"]', self.$elem);
            };

            // get initial option
            var getInitialOption = function() {
                var initialRating = self.options.initialRating;

                if (!initialRating) {
                    return $('option:selected', self.$elem);
                }

                return findOption(initialRating);
            };

            // get empty option
            var getEmptyOption = function() {
                var $emptyOpt = self.$elem.find('option[value="' + self.options.emptyValue + '"]');

                if (!$emptyOpt.length && self.options.allowEmpty) {
                    $emptyOpt = $('<option />', { 'value': self.options.emptyValue });

                    return $emptyOpt.prependTo(self.$elem);
                }

                return $emptyOpt;
            };

            // get data
            var getData = function(key) {
                var data = self.$elem.data('barrating');

                if (typeof key !== 'undefined') {
                    return data[key];
                }

                return data;
            };

            // set data
            var setData = function(key, value) {
                if (value !== null && typeof value === 'object') {
                    self.$elem.data('barrating', value);
                } else {
                    self.$elem.data('barrating')[key] = value;
                }
            };

            // save data on element
            var saveDataOnElement = function() {
                var $opt = getInitialOption();
                var $emptyOpt = getEmptyOption();

                var value = $opt.val();
                var text = $opt.data('html') ? $opt.data('html') : $opt.text();

                // if the allowEmpty option is not set let's check if empty option exists in the select field
                var allowEmpty = (self.options.allowEmpty !== null) ?
                    self.options.allowEmpty :
                    !!$emptyOpt.length;

                var emptyValue = ($emptyOpt.length) ? $emptyOpt.val() : null;
                var emptyText = ($emptyOpt.length) ? $emptyOpt.text() : null;

                setData(null, {
                    userOptions: self.options,

                    // initial rating based on the OPTION value
                    ratingValue: value,
                    ratingText: text,

                    // rating will be restored by calling clear method
                    originalRatingValue: value,
                    originalRatingText: text,

                    // allow empty ratings?
                    allowEmpty: allowEmpty,

                    // rating value and text of the empty OPTION
                    emptyRatingValue: emptyValue,
                    emptyRatingText: emptyText,

                    // read-only state
                    readOnly: self.options.readonly,

                    // did the user already select a rating?
                    ratingMade: false
                });
            };

            // remove data on element
            var removeDataOnElement = function() {
                self.$elem.removeData('barrating');
            };

            // return current rating text
            var ratingText = function() {
                return getData('ratingText');
            };

            // return current rating value
            var ratingValue = function() {
                return getData('ratingValue');
            };

            // build widget and return jQuery element
            var buildWidget = function() {
                var $w = $('<div />', { 'class': 'br-widget' });

                // create A elements that will replace OPTIONs
                self.$elem.find('option').each(function() {
                    var val, text, html, $a;

                    val = $(this).val();

                    // create ratings - but only if val is not defined as empty
                    if (val !== getData('emptyRatingValue')) {
                        text = $(this).text();
                        html = $(this).data('html');
                        if (html) { text = html; }

                        $a = $('<a />', {
                            'href': '#',
                            'data-rating-value': val,
                            'data-rating-text': text,
                            'html': (self.options.showValues) ? text : ''
                        });

                        $w.append($a);
                    }

                });

                // append .br-current-rating div to the widget
                if (self.options.showSelectedRating) {
                    $w.append($('<div />', { 'text': '', 'class': 'br-current-rating' }));
                }

                // additional classes for the widget
                if (self.options.reverse) {
                    $w.addClass('br-reverse');
                }

                if (self.options.readonly) {
                    $w.addClass('br-readonly');
                }

                return $w;
            };

            // return a jQuery function name depending on the 'reverse' setting
            var nextAllorPreviousAll = function() {
                if (getData('userOptions').reverse) {
                    return 'nextAll';
                } else {
                    return 'prevAll';
                }
            };

            // set the value of the select field
            var setSelectFieldValue = function(value) {
                // change selected option
                findOption(value).prop('selected', true);

                if (getData('userOptions').triggerChange) {
                    self.$elem.change();
                }
            };

            // reset select field
            var resetSelectField = function() {
                $('option', self.$elem).prop('selected', function() {
                    return this.defaultSelected;
                });

                if (getData('userOptions').triggerChange) {
                    self.$elem.change();
                }
            };

            // display the currently selected rating
            var showSelectedRating = function(text) {
                // text undefined?
                text = text ? text : ratingText();

                // special case when the selected rating is defined as empty
                if (text == getData('emptyRatingText')) {
                    text = 'Click to rate!';
                }

                // update .br-current-rating div
                if (self.options.showSelectedRating) {
                    self.$elem.parent().find('.br-current-rating').text(text);
                }
            };

            // return rounded fraction of a value (14.4 -> 40, 0.99 -> 90)
            var fraction = function(value) {
                return Math.round(((Math.floor(value * 10) / 10) % 1) * 100);
            };

            // remove all classes from elements
            var resetStyle = function() {
                // remove all classes starting with br-*
                self.$widget.find('a').removeClass(function(index, classes) {
                    return (classes.match(/(^|\s)br-\S+/g) || []).join(' ');
                });
            };

            // apply style by setting classes on elements
            var applyStyle = function() {
                var $a = self.$widget.find('a[data-rating-value="' + ratingValue() + '"]');
                var initialRating = getData('userOptions').initialRating;
                var baseValue = $.isNumeric(ratingValue()) ? ratingValue() : 0;
                var f = fraction(initialRating);
                var $all, $fractional;

                resetStyle();

                // add classes
                $a.addClass('br-selected br-current')[nextAllorPreviousAll()]()
                    .addClass('br-selected');
                if (!getData('ratingMade') && $.isNumeric(initialRating)) {
                    if ((initialRating <= baseValue) || !f) {
                        return;
                    }

                    $all = self.$widget.find('a');

                    $fractional = ($a.length) ?
                        $a[(getData('userOptions').reverse) ? 'prev' : 'next']() :
                        $all[(getData('userOptions').reverse) ? 'last' : 'first']();

                    $fractional.addClass('br-fractional');
                    $fractional.addClass('br-fractional-' + f);
                }
            };

            // check if the element is deselectable?
            var isDeselectable = function($element) {
                if (!getData('allowEmpty') || !getData('userOptions').deselectable) {
                    return false;
                }

                return (ratingValue() == $element.attr('data-rating-value'));
            };

            // handle click events
            var attachClickHandler = function($elements) {
                $elements.on('click.barrating', function(event) {
                    var $a = $(this),
                        options = getData('userOptions'),
                        value,
                        text;

                    event.preventDefault();

                    value = $a.attr('data-rating-value');
                    text = $a.attr('data-rating-text');

                    // is current and deselectable?
                    if (isDeselectable($a)) {
                        value = getData('emptyRatingValue');
                        text = getData('emptyRatingText');
                    }

                    // remember selected rating
                    setData('ratingValue', value);
                    setData('ratingText', text);
                    setData('ratingMade', true);

                    setSelectFieldValue(value);
                    showSelectedRating(text);

                    applyStyle();

                    // onSelect callback
                    options.onSelect.call(
                        self,
                        ratingValue(),
                        ratingText(),
                        event
                    );
					var Count = $a.parents('.stars-example-css').find('.br-selected').length;
					$a.parent('.br-widget').removeClass (function (index, className) {
						return (className.match (/(^|\s)br-stars-selected-\S+/g) || []).join(' ');
					});;
					$a.parent('.br-widget').addClass('br-stars-selected-'+Count+'');
                                        $a.parents('.rv-recommend-friend').find('.rv-netpromotercomment-wrapper').show();
                                        if(!$('.rv-mbox-injection-container ul li.rv-recommend-friend').hasClass('rv-field-focus')){
                                            $('.rv-mbox-injection-container ul li').removeClass('rv-field-focus');
                                            $('.rv-mbox-injection-container ul li.rv-recommend-friend').addClass('rv-field-focus');
                                        }
                    return false;
                });
            };

            // handle mouseenter events
            var attachMouseEnterHandler = function($elements) {
                $elements.on('mouseenter.barrating', function() {
                    var $a = $(this);

                    resetStyle();

                    $a.addClass('br-active')[nextAllorPreviousAll()]()
                        .addClass('br-active');
                                        var Count = $('.br-active').length;
					$a.parent('.br-widget').addClass('br-widget-'+Count+'');
                    showSelectedRating($a.attr('data-rating-text'));
                });
            };

            // handle mouseleave events
            var attachMouseLeaveHandler = function($elements) {
                self.$widget.on('mouseleave.barrating blur.barrating', function() {
                    showSelectedRating();
                    applyStyle();
					$elements.on('mouseleave.barrating blur.barrating', function() {
					$(".stars-example-css div").removeClass (function (index, className) {
						return (className.match (/(^|\s)br-widget-\S+/g) || []).join(' ');
					});
				});
                });
				$elements.on('mouseleave.barrating blur.barrating', function() {
					$(".stars-example-css div").removeClass (function (index, className) {
						return (className.match (/(^|\s)br-widget-\S+/g) || []).join(' ');
					});
				});
            };

            // somewhat primitive way to remove 300ms click delay on touch devices
            // for a more advanced solution consider setting `fastClicks` option to false
            // and using a library such as fastclick (https://github.com/ftlabs/fastclick)
            var fastClicks = function($elements) {
                $elements.on('touchstart.barrating', function(event) {
                    event.preventDefault();
                    event.stopPropagation();

                    $(this).click();
                });
            };

            // disable clicks
            var disableClicks = function($elements) {
                $elements.on('click.barrating', function(event) {
                    event.preventDefault();
                });
            };

            var attachHandlers = function($elements) {
                // attach click event handler
                attachClickHandler($elements);

                if (self.options.hoverState) {
                    // attach mouseenter event handler
                    attachMouseEnterHandler($elements);

                    // attach mouseleave event handler
                    attachMouseLeaveHandler($elements);
                }
            };

            var detachHandlers = function($elements) {
                // remove event handlers in the ".barrating" namespace
                $elements.off('.barrating');
            };

            var setupHandlers = function(readonly) {
                var $elements = self.$widget.find('a');

                if (getData('userOptions').fastClicks) {
                    fastClicks($elements);
                }

                if (readonly) {
                    detachHandlers($elements);
                    disableClicks($elements);
                } else {
                    attachHandlers($elements);
                }
            };

            this.show = function() {
                // run only once
                if (getData()) return;

                // wrap element
                wrapElement();

                // save data
                saveDataOnElement();

                // build & append widget to the DOM
                self.$widget = buildWidget();
                self.$widget.insertAfter(self.$elem);

                applyStyle();

                showSelectedRating();

                setupHandlers(self.options.readonly);

                // hide the select field
                self.$elem.hide();
            };

            this.readonly = function(state) {
                if (typeof state !== 'boolean' || getData('readOnly') == state) return;

                setupHandlers(state);
                setData('readOnly', state);
                self.$widget.toggleClass('br-readonly');
            };

            this.set = function(value) {
                var options = getData('userOptions');

                if (self.$elem.find('option[value="' + value + '"]').length === 0) return;

                // set data
                setData('ratingValue', value);
                setData('ratingText', self.$elem.find('option[value="' + value + '"]').text());
                setData('ratingMade', true);

                setSelectFieldValue(ratingValue());
                showSelectedRating(ratingText());

                applyStyle();

                // onSelect callback
                if (!options.silent) {
                    options.onSelect.call(
                        this,
                        ratingValue(),
                        ratingText()
                    );
                }
            };

            this.clear = function() {
                var options = getData('userOptions');

                // restore original data
                setData('ratingValue', getData('originalRatingValue'));
                setData('ratingText', getData('originalRatingText'));
                setData('ratingMade', false);

                resetSelectField();
                showSelectedRating(ratingText());

                applyStyle();

                // onClear callback
                options.onClear.call(
                    this,
                    ratingValue(),
                    ratingText()
                );
            };

            this.destroy = function() {
                var value = ratingValue();
                var text = ratingText();
                var options = getData('userOptions');

                // detach handlers
                detachHandlers(self.$widget.find('a'));

                // remove widget
                self.$widget.remove();

                // remove data
                removeDataOnElement();

                // unwrap the element
                unwrapElement();

                // show the element
                self.$elem.show();

                // onDestroy callback
                options.onDestroy.call(
                    this,
                    value,
                    text
                );
            };
        }

        BarRating.prototype.init = function (options, elem) {
            this.$elem = $(elem);
            this.options = $.extend({}, $.fn.barrating.defaults, options);

            return this.options;
        };

        return BarRating;
    })();

    $.fn.barrating = function (method, options) {
        return this.each(function () {
            var plugin = new BarRating();

            // plugin works with select fields
            if (!$(this).is('select')) {
                $.error('Sorry, this plugin only works with select fields.');
            }

            // method supplied
            if (plugin.hasOwnProperty(method)) {
                plugin.init(options, this);
                if (method === 'show') {
                    return plugin.show(options);
                } else {
                    // plugin exists?
                    if (plugin.$elem.data('barrating')) {
                        plugin.$widget = $(this).next('.br-widget');
                        return plugin[method](options);
                    }
                }

            // no method supplied or only options supplied
            } else if (typeof method === 'object' || !method) {
                options = method;
                plugin.init(options, this);
                return plugin.show();

            } else {
                $.error('Method ' + method + ' does not exist on jQuery.barrating');
            }
        });
    };

    $.fn.barrating.defaults = {
        theme:'',
        initialRating:null, // initial rating
        allowEmpty:null, // allow empty ratings?
        emptyValue:'', // this is the expected value of the empty rating
        showValues:false, // display rating values on the bars?
        showSelectedRating:true, // append a div with a rating to the widget?
        deselectable:true, // allow to deselect ratings?
        reverse:false, // reverse the rating?
        readonly:false, // make the rating ready-only?
        fastClicks:true, // remove 300ms click delay on touch devices?
        hoverState:true, // change state on hover?
        silent:false, // supress callbacks when controlling ratings programatically
        triggerChange:true, // trigger change event when ratings are set or reset
        onSelect:function (value, text, event) {
        }, // callback fired when a rating is selected
        onClear:function (value, text) {
        }, // callback fired when a rating is cleared
        onDestroy:function (value, text) {
        } // callback fired when a widget is destroyed
    };

    $.fn.barrating.BarRating = BarRating;

}));



var customRating = {
	formRatingValidate: function(form) {
		"use strict";
		$(form).find("textarea.requiredrating, select.requiredrating, input.requiredrating").each(function() {
			var dataInput = $(this).data("rating");
			var dataInputVal = $(this).val().trim();
                        var dataSelectVal = $(this).find('option:selected').val();
			switch (dataInput) {
				case "overall-rating":
					var ratingVal = $(this).find("option:selected").val();
					if (ratingVal === "") {
						$(this).addClass("input-error");
						$(this).parents("li").find(".rv-helper i").removeClass("fa-check-circle");
						$(this).parents("li").find(".rv-helper i").addClass("fa-times-circle");
						$(this).parents("li").find(".rv-helper").addClass("rv-rating-error");
                                                $(this).parents("li").addClass("rv-li-error");
					} else {
						$(this).removeClass("input-error");
						$(this).parents("li").find(".rv-helper i").removeClass("fa-times-circle");
						$(this).parents("li").find(".rv-helper").removeClass("rv-rating-error");
						$(this).parents("li").find(".rv-helper i").addClass("fa-check-circle");
						$(this).parents("li").find(".rv-helper").addClass("optional-success");
                                                $(this).parents("li").removeClass("rv-li-error");
					}
					break;
				case "rating-textarea":
					if (dataInputVal.length <= 0) {
						$(this).addClass("error");
						$(this).parents("li").find('.rv-helper-required').addClass('error');
                                                $(this).parents("li").find('.rv-helper').removeClass('success');
                                                $(this).parents("li").addClass("rv-li-error");
					} else {
                                                $(this).removeClass("error");
						$(this).parents("li").find('.rv-helper-required').removeClass('error');
                                                $(this).parents("li").find('.rv-helper').addClass('success');
                                                $(this).parents("li").removeClass("rv-li-error");
					}
					break;
                                case "review-title":
					if (dataSelectVal == "") {
						$(this).parent('.rv-fancy-select').addClass("error");
						$(this).parents("li").find('.rv-helper-required').addClass('error');
                                                $(this).parents("li").find('.rv-helper').removeClass('success');
                                                $(this).parents("li").addClass("rv-li-error");
					} else {
                                                $(this).parents("li").find('.rv-helper-required').removeClass('error')
						$(this).parent('.rv-fancy-select').removeClass('error');
                                                $(this).parents("li").find('.rv-helper').addClass('success');
                                                $(this).parents("li").removeClass("rv-li-error");
					}
					break;
                                case "rating-input":
					if (dataInputVal.length <= 0) {
						$(this).addClass("input-error");
						$(this).parents("li").addClass('error');
						$(this).parents("li").find('.rv-helper-required').addClass('error');
                                                $(this).parents("li").find('.rv-helper').removeClass('success');
                                                $(this).parents("li").addClass("rv-li-error");
					} else {
						$(this).removeClass("input-error");
                                                $(this).parents("li").removeClass('error');
                                                $('.rv-helper-required').removeClass('error');
                                                $(this).parents("li").find('.rv-helper').addClass('success');
                                                $(this).parents("li").removeClass("rv-li-error");
					}
					break;
				default:
					$(this).removeClass("input-error");
					$(this).parent().find(".error-msg").remove();
			}
		});
		$(".rv-box-half-width").each(function() {
			var optionalVal = $(this).find(".rv-fields").data("rating");
			if (optionalVal === "optional") {
				$(this).find(".rv-helper").addClass("optional-success");
			} else {
				$(this).find(".rv-helper").removeClass("optional-success");
			}
		});
                if(($("#rating_rating").data("rating") === "overall-rating") && ($("#rating_rating option:selected").val() === "")){
                    $("#rating_rating").parents("li").addClass("rv-field-focus");
                    return false;
                }else if(($("#RatingForm_title").data("rating") === "review-title") && ($("#RatingForm_title option:selected").val() === "")){
                    $("#RatingForm_title").parents("li").addClass("rv-field-focus");return false;
                }else if(($(".rv-textarea-tooltip-box").data("rating") === "rating-textarea") && ($(".rv-textarea-tooltip-box").val().trim() === "")){
                    $(".rv-textarea-tooltip-box").parents("li").addClass("rv-field-focus");return false;
                }

                if ($(form).find('.input-error, .error').length > 0) {
                        return false;
                } else
                {
                    return true;
                }
	}
};

var pdpCustomRating = {
	init: function() {
		"use strict";
		this.writeCustomRating();
	},
	writeCustomRating: function() {
                
		$(".js-product-write-rating").barrating("show", {
			theme: 'css-stars',
			showSelectedRating: true,
                        onSelect: function(event) {
                            if (typeof(event) !== 'undefined') {
                              // rating was selected by a user
                                this.$elem.parents('.rv-fancy-star-rating-li').find('.rv-helper').addClass('success');
                                this.$elem.removeClass("input-error");
                                this.$elem.parents("li").find(".rv-helper i").removeClass("fa-times-circle");
                                this.$elem.parents("li").find(".rv-helper").removeClass("rv-rating-error");
                                this.$elem.parents("li").find(".rv-helper i").addClass("fa-check-circle");
                                this.$elem.parents("li").find(".rv-helper").addClass("optional-success");
                                this.$elem.parents("li").addClass("rv-li-error");
                             }
                        }
		});
		$(".js-write-square-rating").barrating({
			theme: 'bars-square',
			showValues: true,
			showSelectedRating: false,
                        onSelect: function(event) {
                            if (typeof(event) !== 'undefined') {
                              // rating was selected by a user
                              this.$elem.parents('.rv-fancy-bar-rating-li').find('.rv-helper').addClass('success');
                              $('.rv-netpromotercomment-wrapper').show();
                            }
                        }
		});
                
		$("#rv-text-field-title, .rv-select, .rv-textarea-field").focus(function() {
			$(".rv-mbox-injection-container li").removeClass("rv-field-focus");
			$(this).parents("li").addClass("rv-field-focus");
		});
                $(".rv-textarea-tooltip-box").focus(function() {
                    $(".rv-textarea-tooltip").fadeIn(400);
		});
		$("#rv-text-field-title, .rv-select, .rv-textarea-field").focusout(function() {
			$(this).parents("li").removeClass("rv-field-focus");
                        $(".rv-textarea-tooltip").hide();
		});
		$(".rv-recommend-radio > li").on("click", function() {
			$(".rv-recommend-radio > li").removeClass("rv-radio-selected");
			$(this).find("input[type='radio']").prop("checked", true);
			$(this).addClass("rv-radio-selected");
                        $(this).parents('.rv-box-half-width').find('.rv-helper').addClass('success');
		});
		$(".rv-fieldset-tags-group > li").on("click", function() {
                    if($(this).find("input[type='checkbox']").prop('checked') === false){
                        $(this).find("input[type='checkbox']").prop("checked", true);
                        $(this).addClass("rv-radio-selected");
                        $(this).parents("li").addClass("rv-field-focus");
                    }else{
                        $(this).find("input[type='checkbox']").prop("checked", false);
                        $(this).removeClass("rv-radio-selected");
                        $(this).parents("li").removeClass("rv-field-focus");
                    }
		});
		$(".rv-reason-purchase-container").focusout(function() {
			$(this).removeClass("rv-field-focus");
		});
		$(".br-theme-bars-square a").live("click", function() {
			$(".rv-mbox-injection-container ul li").removeClass("rv-field-focus");
			$(".rv-mbox-injection-container ul li.rv-recommend-friend").addClass("rv-field-focus");
		});
                $('.rv-fancy-select').each(function(){
                    $(this).on("change", function(){
                       $(this).parents('.rv-fancy-select-li').find('.rv-helper').addClass('success'); 
                    });
                });
		$("#rv-textarea-field-netpromotercomment").focusout(function() {
			if ($(this).val().trim() !== "") {
				$(this).parents(".rv-netpromotercomment-wrapper").find(".rv-helper").addClass("optional-success");
			} else {
				$(this).parents(".rv-netpromotercomment-wrapper").find(".rv-helper").removeClass("optional-success");
			}
		});
                
		$(".close").on("click", function() {
                    //if Url contains #review then remove 
                        if((window.location.href.split('#')[1]) && (window.location.href.split('#')[1] == 'review')){
                            window.location.href = window.location.href.split('#')[0];
                        }
                        //CDM-722 undefined message on popup
                        if($("#ProductRatingForm")[0].length)
                          {
                             $("#ProductRatingForm")[0].reset(); 
                          }
                        $('select').barrating('clear');
			$(".stars-example-css").find("a").removeClass("br-selected");
			$(".stars-example-css").find("a").removeClass("br-current");
			$(".rv-radio-container-li").removeClass("rv-radio-selected");
			$(".rv-netpromotercomment-wrapper").hide();
			$(".rv-mbox-injection-container ul li.first").removeClass("rv-field-focus");
			$(".rv-mbox-injection-container ul li.rv-recommend-friend").removeClass("rv-field-focus");
			$(".br-widget").removeClass(function(index, className) {
				return (className.match(/(^|\s)br-stars-selected-\S+/g) || []).join(" ");
			});
			$(".rv-helper").removeClass("rv-rating-error optional-success");
                        $('.rv-fancy-select, .rv-helper-required, .rv-textarea-field').removeClass('error');
                        $(".rv-helper").removeClass('success')
		});
                
                //CDM-642 After submitting the review it is duplicating in message displaying and in bob(prefent multiple click)
                $(".rv-sumbit-btn").on("click", function() {
                    var result = customRating.formRatingValidate($("#ProductRatingForm"));
                    if(result){
                        var formData = $('#ProductRatingForm').serializeArray();
                         $(".rv-sumbit-btn").attr("disabled", true);
                        $.ajax({
                            url: "/catalog/sendrating/",
                            dataType: "json",
                            type: "post",
                            data: formData,
                            success: function (result) { 
                                //html element should be empty before processing and this is common for both condition so called outside
                                 $(".write-review-container, .js-write-modal-popup .modal-body").html("");
                                if (result.status) {
                                    //append dynammic message
                                    //CDM-681 append message to success message
                                    $(".js-write-modal-popup .modal-body").append('<div class="rv-success-container"><p><i class="fa fa-check-circle" aria-hidden="true"></i></p><h2>'+ result.message +'</h2><p class="rv-suceess-msg">It may take few days to appear on the website while your review is being moderated.</p></div>')
                                } else {
                                    $(".js-write-modal-popup .modal-body").append('<div class="rv-success-container"><p><i class="fa fa-check-circle" aria-hidden="true"></i></p><h2>'+ result.message +'</h2></div>') 
                                }
                            }
                        });
                    }else{
                        $(".rv-sumbit-btn").attr("disabled", false);
                        $(".js-write-modal-popup").animate({ scrollTop:0 }, 1000);
                    }
                });
	},
        displayCustomRating: function() {

            
            $.fn.stars = function() {
                
                    return $(this).each(function() {
                            var val = parseFloat($(this).data('reviews'));
                            var size = Math.max(0, (Math.min(5, val))) * 20;
                            var $span = $('<span />').width(size);
                            $(this).html($span);

                            var tex = (size / 100) * 5;
                            $('.star-tex').text(tex.toFixed(1));
                    });
            };
            $('.avg-stars').stars();
            
            
            
            $('.right-rating-inner-section .overall-rat').each(function() {
                   
                var ratingType = $(this).find('.box-body').data('display-rating');

                if(typeof ratingType != 'undefined'){
                    var ratingTypeVal = $('.avg'+ratingType).data('value');
                    var percenStyle = (ratingTypeVal / 5) * 100;
                    $(this).find('.ratingss').css('width', percenStyle + '%');
                    $(this).find('.rating-text').text(ratingTypeVal);    
                }
            });
            
        },  
        displayCustomReviews: function() {
            
            $('.rv-display-bar-rating').barrating('show', {
                    theme: 'bars-movie',
                    hoverState: false,
                    readonly: true
            });
            
            
            var revCom = $('.review-comments ul li');
            for (var i = 0; i < revCom.length; i++) {
                    var revRating = revCom.eq(i).find('.rate-stars');
                    var objRating = $(revCom.eq(i)).find('.rate-stars');
                    for (var j = 0; j < revRating.length; j++) {
                            var current_Rating, current_Rating_value;
                            current_Rating = objRating[j].dataset.displayrating;
                            current_Rating_value = objRating[j].dataset.value;
                            if($(objRating[j]).hasClass('box-example-movie')){
                                $($(objRating[j]).find('select')).barrating('set', current_Rating_value);
                            }else{
                                current_Rating_value = objRating[j].dataset.value * 20;
                                $($(objRating[j]).find('.avg-stars span').css('width', current_Rating_value));
                            }
                    }
            }
            
        },
        displayRatingReviewsAjax: function(reviews) {
            
            var sku         = $("input[name=configSku]").val();  
            var pageid      = $("#reviews_page_id").val(); 
            var starclicked = $('#star_clicked').val();
            var sortValue   = $('#sort_value').val();
            pageid          = typeof pageid === 'undefined' ? 0 : pageid;
            sortValue       = typeof sortValue === 'undefined' ? 'mostRecent' : sortValue;
            
            $("#loadId").show();
            
            $.ajax({
                url: "/catalog/displayRatings",
                type: "get",
                dataType: 'html',
                data: {sku: sku, reviews: reviews, page: pageid, star: starclicked, sort: sortValue},
                success: function (result) {
                    if($.trim(result)) {
                        
                        if(reviews == true){
                            
                            $('.review-comments').html(result);
                            pdpCustomRating.displayCustomReviews();
                            pdpCustomRating.displayReviewsPagination();                            
                        } else {
                            
                            $('.review-body').html(result);
                            pdpCustomRating.displayCustomRating();
                            pdpCustomRating.displayReviewByStarClick();
                            pdpCustomRating.displayReviewsSorting();
                            pdpCustomRating.displayRatingReviewsAjax(true);
                        }
                        pdpCustomRating.displayReviewsCountHelpful();   
                    }   
                    $("#loadId").hide();
                },
                error: function (xhr, errorThrown) {
                    console.log('error ' + (errorThrown ? errorThrown : xhr.status));
		}
            });
            
             $('.selectpicker').selectpicker();
        },
        displayReviewsPagination: function() {
            
            var pagelimit       = Number($('#page_limit').val());
            var pageid          = Number($("#reviews_page_id").val());
            var allcount        = Number($("#total_reviews").val());
            
            $("#loadId").hide();
            
            
            $('.reviews-num-show').show();
            if(allcount === 0) {
                $("#prev_page, #next_page").prop("disabled", true);
                $('.reviews-num-show').hide();
            }
            
            
            if(pageid === 0) {
                $("#prev_page").prop("disabled", true);
            }
            
            
            if((allcount - pageid) <= pagelimit) {
                $("#next_page").prop("disabled", true);
            }
                    
            
            $("#prev_page").on("click", function(event) {
                
                event.preventDefault();
                pageid -= pagelimit;
                $("#reviews_page_id").val(pageid);
                
                if(pageid >= 0) {
                    
                    pdpCustomRating.displayRatingReviewsAjax(true);
                    
                    $('html, body').animate({scrollTop:1750}, 'slow');
                    
                    if((allcount - pageid) > pagelimit) {
                        $("#next_page").prop("disabled", false);
                    }
                    if(pageid == 0){
                        $("#reviews_page_id").val(0);
                        $("#prev_page").prop("disabled", true);
                    } 
                } else {
                    $("#reviews_page_id").val(0);
                    $("#prev_page").prop("disabled", true);
                }               
            });
            
            
            
            $("#next_page").on("click", function(event) {
                
                event.preventDefault();
                pageid += pagelimit;
                
                if(pageid <= allcount) {
                    
                    $("#reviews_page_id").val(pageid);
                    pdpCustomRating.displayRatingReviewsAjax(true);
                    
                    $("#prev_page").prop("disabled", false);
                                        
                    if((allcount - pageid) <= pagelimit) {
                        $("#next_page").prop("disabled", true);
                    }
                    $('html, body').animate({scrollTop:1750}, 'slow');
                }              
            });
            
        },
        displayReviewByStarClick: function() {
            
            $(".rating-snap-bar").css( 'cursor', 'pointer' );
            $(".rating-snap-bar").on("click", function(event) {
                event.preventDefault();
                var starVal = $(this).data('rating-value');
                var starTotal = $(this).find('.star-total').text();
                // If total star value is greater then zero
                if(starTotal > 0) {
                    $('.active-filters').show();
                    $('.star-filters').text(starVal + ' stars');
                    $('#star_clicked').val(starVal);
                    $("#reviews_page_id").val(0);
                    pdpCustomRating.displayRatingReviewsAjax(true);
                }
            });
            
            $(".review-button").on("click", function(event) {
                $('.active-filters').hide();
                $('.star-filters').empty();
                $('#star_clicked, #reviews_page_id').val(0);
                pdpCustomRating.displayRatingReviewsAjax(true);
            });
            
            $(".js-click-review").on("click", function() {
                pdpCustomRating.openWriteReviewForm();
            });
        },
        displayReviewsCountHelpful: function() {
            
            var pageid      = Number($("#reviews_page_id").val());
            var allcount    = Number($("#total_reviews").val());
            var pagelimit   = Number($('#page_limit').val());
            
            // Calculate for display reviews count (like: 1-5 of 10 Reviews)
            var startcount = 0;    
            var endcount   = 0;
            
            if(allcount) {
                startcount  = pageid + 1;    
                endcount    = pageid + pagelimit;
                endcount    = (endcount > allcount) ? allcount : endcount;
            }
            
            // Display reviews count (like: 1-5 of 10 Reviews)
            var reviewsnum = startcount + '-' + endcount + ' of ' + allcount + ' Reviews';
            $('.reviews-num-show').text(reviewsnum);
            
                        
            $(".review-helpful").on("click", function(event) {
                event.preventDefault();

                var helpful    = $(this).val();
                var reviewId   = $(this).parent().find('input[name=rating-review-id]').val();

                
                var isLoggedIn  = ($(".loginNecessary").length > 0) ? false : true;
                var requestData = {loggedIn:isLoggedIn, reviewId:reviewId, helpful:helpful, page:pageid};
                
                if(helpful && reviewId) {

                    var that = $(this);
                    
                    $.ajax({
                        url: "/catalog/reviewHelpful/",
                        type: "get",
                        dataType: 'text',
                        data: requestData,
                        success: function (data) {
                            if(data){
                                var obj = $.parseJSON(data);
                                if(obj) {

                                    if(!isLoggedIn){
                                        
                                        
                                        $(".js-login-link").data('events','false').trigger("click");
                                    } else {
                                        
                                        var helpfulVar = (helpful === 'yes') ? '.helpful-yes-count' : '.helpful-no-count' ;
                                        var helpfulValue = parseInt(that.find(helpfulVar).text()) + 1;
                                        that.find(helpfulVar).text(helpfulValue);

                                        that.parent().find('.review-helpful').attr("disabled", true);
                                    }
                                }
                            }  
                        },
                        error: function (xhr, errorThrown) {
                            console.log('error ' + (errorThrown ? errorThrown : xhr.status));
                        }
                    });
                } 
            });
             
        },
        displayReviewsSorting: function() {
            $("#ratings-sort").change(function() {
                var sortVal = $(this).val() ? $(this).val() : 'mostRecent';
                $('#sort_value').val(sortVal); 
                $('#reviews_page_id').val(0);
                pdpCustomRating.displayRatingReviewsAjax(true);
            });
        },
        openWriteReviewForm: function() {
            var review_count = $("#customer-review-count").text();
            
            
            if ($(".loginNecessary").length > 0) {
                 $(".js-login-link").data('events','true').trigger("click");
            }
            else if(review_count > 0){
              $(".write-review-container").html("");
              $(".js-write-modal-popup .modal-body").html('<div class="rv-success-container"><p><i class="fa fa-check-circle" aria-hidden="true"></i></p><h2>You have already submitted a review. Thanks!</h2></div>') ;
              $(".js-write-modal-popup").appendTo("body").modal("show");
            }
            else if($(".account-detail-icon").data("login") === true){
                
                 var configId = $("#configId").val();
                var requestData = {configId:configId}; 
                if(configId) {
                    $.ajax({
                        url: "/catalog/isreviewed/",
                        type: "get",
                        dataType: 'text',
                        data: requestData,
                        success: function (data) {
                            if(data){
                                var obj = $.parseJSON(data);
                                if(obj) {
                                $(".write-review-container").html("");
                                $(".js-write-modal-popup .modal-body").html('<div class="rv-success-container"><p><i class="fa fa-check-circle" aria-hidden="true"></i></p><h2>You have already submitted a review. Thanks!</h2></div>') ;
                                $(".js-write-modal-popup").appendTo("body").modal("show");
                                }
                                else{
                                $(".js-write-modal-popup").appendTo("body").modal("show");  
                                }
                            }  
                        },
                        error: function (xhr, errorThrown) {
                            console.log('error ' + (errorThrown ? errorThrown : xhr.status));
                        }
                    });  
            } 
            else{
                $(".js-write-modal-popup .modal-body").html('<div class="rv-success-container"><p><i class="fa fa-check-circle" aria-hidden="true"></i></p><h2>Please refresh the page and try again</h2></div>') ;
                $(".js-write-modal-popup").appendTo("body").modal("show");
            }
            }
        },
        openDisplayReviews: function() {
            if($('.review-body').is(':empty')) { 
                
                pdpCustomRating.displayRatingReviewsAjax(false);
            }
        }
};

$(function() {
	    //If url contains #review open the review popup
	"use strict";
    $(".js-click-review").off("click");

        
        $(".requiredrating").each(function() {
            $(this).on('blur',function(){
			var dataInput = $(this).data("rating");
			var dataInputVal = $(this).val().trim();
                        var dataSelectVal = $(this).find('option:selected').val();
			switch (dataInput) {
				case "rating-textarea":
					if (dataInputVal.length <= 0) {
						$(this).addClass("error");
						$(this).parents("li").find('.rv-helper-required').addClass('error');
                                                $(this).parents("li").find('.rv-helper').removeClass('success');
                                                $(this).parents("li").addClass('rv-li-error');
					} else {
                                                $(this).removeClass("error");
						$(this).parents("li").find('.rv-helper-required').removeClass('error');
                                                $(this).parents("li").find('.rv-helper').addClass('success');
                                                $(this).parents("li").removeClass('rv-li-error');
					}
					break;
                                case "review-title":
					if (dataSelectVal.length <= 0) {
						$(this).parent('.rv-fancy-select').addClass("error");
						$(this).parents("li").find('.rv-helper-required').addClass('error');
                                                $(this).parents("li").find('.rv-helper').removeClass('success');
                                                $(this).parents("li").addClass('rv-li-error');
					} else {
                                                $(this).parent('.rv-fancy-select').removeClass('error')
						$(this).parents("li").find('.rv-helper-required').removeClass('error');
                                                $(this).parents("li").find('.rv-helper').addClass('success');
                                                $(this).parents("li").removeClass('rv-li-error');
					}
					break;
				default:
					$(this).removeClass("input-error");
					$(this).parent().find(".error-msg").remove();
			}
            });
            
		});
   	pdpCustomRating.init();
        
        $('.rv-textarea-field').keypress(function (e) {
            var regex = new RegExp("^[a-zA-Z0-9\\-\\s]+$");
            var str = String.fromCharCode(!e.charCode ? e.which : e.charCode);
            if (regex.test(str)) {
                return true;
            }

            e.preventDefault();
            return false;
        });
        pdpCustomRating.displayCustomRating(); 
});
$(window).load(function(){
    
    $(".js-click-review").on("click", function() {
        pdpCustomRating.openWriteReviewForm();
    }); 
    
    if(location.hash.substr(1) == 'helpful') {
        // Reviews comes after customer login through clicking review's helpful(yes/no)
        pdpCustomRating.openDisplayReviews();
        $('html, body').animate({scrollTop:1850}, 'slow');
    } else {
        // Reviews comes after page load at bottom scroll of page
        $(window).scroll(function(){
            if($(window).scrollTop() == ($(document).height()-window.innerHeight)) {
                  pdpCustomRating.openDisplayReviews(); 
            }
        }); 
    }
});






var commonCarousel = {
    init: function(){
        "use strict";           
    },
    renderCarousel:function(owl){ 
        owl.owlCarousel({
            loop: true,
            items:1,
            navText : ["<i class='fa fa-angle-left'></i>", "<i class='fa fa-angle-right'></i>"],
            responsiveClass: true,
            dots:true,
            responsive: {
                0: {
                    items: 1,
                    nav: true
                }
            }
        });
        
    }
    
}
var natureCarousel = {
    init: function(){
        "use strict";           
    },
    renderCarousel:function(owl){ 
        owl.owlCarousel({
            loop: false,
            mouseDrag:true,
            touchDrag:true,
            items:3,
            slideBy : 3,
            navText : ["<i class='fa fa-angle-left'></i>", "<i class='fa fa-angle-right'></i>"],
            responsiveClass: true,
            dots:true,
            responsive: {
                0: {
                    items: 1,
                    nav: true
                },
                500:{
                    items:2,
                    nav: true
                },
                1000:{
                    items:3,
                    nav: true
                }
            }
        });
        
    }
    
}
var naturemodalCarousel = {
    init: function(){
        "use strict";           
    },
    renderCarousel:function(owl){ 
        owl.owlCarousel({
            loop: false,
            items:2,
            slideBy : 2,
            navText : ["<i class='fa fa-angle-left'></i>", "<i class='fa fa-angle-right'></i>"],
            responsiveClass: true,
            dots:true,
            responsive: {
                0: {
                    items: 1,
                    nav: true
                },
                500:{
                    items:2,
                    nav: true
                },
                1200:{
                    items:2,
                    nav: true
                }
            }
        });
        
    }
    
    }

function isMobile(){
	var is_mobile = false;
	
	var w = window,
		d = document,
		e = d.documentElement,
		g = d.getElementsByTagName('body')[0],
		x = w.innerWidth || e.clientWidth || g.clientWidth,
		y = w.innerHeight|| e.clientHeight|| g.clientHeight;	
	if( x < 767) {
		is_mobile = true;
	}

    return is_mobile;	
}

var detectIsMobile = function() {
    var is_mobile = false;
    var w = window,
        d = document,
        e = d.documentElement,
        g = d.getElementsByTagName('body')[0],
        x = w.innerWidth || e.clientWidth || g.clientWidth,
        y = w.innerHeight|| e.clientHeight|| g.clientHeight;
    if( x < 767) {
        is_mobile = true;
    }

    return is_mobile;
};

function storeLocator(){

        $('.storelocatore a').on('click', function(event){
            event.stopImmediatePropagation();
            if(isMobile()){
                var storelocator = $('.store-locator').detach();
                $('.header').after(storelocator);
            }else{
                var storelocator = $('.store-locator').detach();
                $('.header').before(storelocator);
            }
            $('.storeinformation').hide();
            var storelocatorWidth = $('.store-loactor').width();
            $('.store-locator-container').css('width', storelocatorWidth);
            $(".store-locator").slideToggle();
            $(".store-input").focus();
            $('.storelocatore span').toggleClass('arrow-down teal');
            $('.quick-header-container').toggleClass('quick-header');
            return false;
        });
}
function tabMobMenu(){
        if($('.js-mobile-menu .main-menu').length == 0){
            var mobNavigation = $('.navigation-container').html();
            //$('.js-mobile-menu').prepend(mobNavigation);
            $('.js-mob-account-container').before(mobNavigation);
        }
        if($('.js-mobile-menu .footer-line').length == 0){
            var mobFooterTopcontainer = $('.footer-top-container').html();
            $('.js-mob-account-container').after('<div class="mob-footer-top-container">'+mobFooterTopcontainer+'</div>');
        }
        if(!($('.cms-staticpage > div').hasClass('newsletter-page'))&& ($('.sticky-email-box').length == 1)){
            var newsletterSubscriber  = $('.subscriber-container').html();
            $('.mob-footer-top-container').after('<div class="sticky-footer js-sticky-footer"><h4 class="js-category">Subscribe to Clarks newsletter</h4><div class="js-category-content mob-newsletter-container">'+newsletterSubscriber+'</div></div>');
        }
        if($('.js-mobile-menu .mob-social-container').length == 0){
            var mobSocialMedia = $('.js-social-media').html();
            $('.js-sticky-footer').after('<div class="footer-top-container mob-social-container">'+mobSocialMedia+'</div>');
        
        }
        $('.js-mobile-menu .item-mega-menu > .js-category a').removeAttr('data-menu_value');
}
function kidsHealth() {
    // using window width is bad!
    if ($(window).width() < 991) {
        $('.ages-container.owl-carousel').removeClass('off');
        $('.ages-container.owl-carousel').owlCarousel({
            thumbs: true,
            thumbsPrerendered: true,
            loop: true,
            navText : ["<svg viewBox='0 0 100 100'><path d='M 10,50 L 60,100 L 70,90 L 30,50  L 70,10 L 60,0 Z' class='arrow'></path></svg>","<svg viewBox='0 0 100 100'><path d='M 10,50 L 60,100 L 70,90 L 30,50  L 70,10 L 60,0 Z' class='arrow' transform='translate(100, 100) rotate(180) '></path></svg>"],
            responsiveClass: true,
            responsive: {
                0: {
                    items: 1,
                    nav: true
                }
            }
        });
    } else {
        if (!$('.ages-container.owl-carousel').hasClass('off')) {
            $('.ages-container.owl-carousel').addClass('off').trigger('destroy.owl.carousel');
            $('.ages-container.owl-carousel').find('.owl-stage-outer').children(':eq(0)').unwrap();
        } else {
            $('.ages-container.owl-carousel').addClass('off');
        }
    }
}

function healPageCarousel() {
    // CDM-761 Static Page slider
    if ($(window).width() < 854) {
        $('.js-material-slider.owl-carousel').removeClass('off');
        $(".js-material-slider").owlCarousel({
            loop: true,
            margin: 0,
            nav: true,
            dots: true,
            navText: ["<i class='fa fa-angle-left fa-2x'></i>", "<i class='fa fa-angle-right fa-2x'></i>"],
            responsive: {
                0: {
                    items: 1
                },
                600: {
                    items: 2,

                },

                767: {
                    items: 2
                }
            }

        });
    } else {
        if (!$('.js-material-slider.owl-carousel').hasClass('off')) {
            $('.js-material-slider.owl-carousel').addClass('off').trigger('destroy.owl.carousel');
            $('.js-material-slider.owl-carousel').find('.owl-stage-outer').children(':eq(0)').unwrap();
        } else {
            $('.js-material-slider.owl-carousel').addClass('off');
        }
    }

    if (detectIsMobile) {
        $(".js-second-slider").owlCarousel({
            animateOut: 'fadeOut',
            animateIn: 'fadeIn',
            loop: true,
            mouseDrag: false,
            touchDrag: false,
            autoplay: true,
            responsiveClass: true,
            nav: false,
            dots: false,
            autoplaySpeed: 3000,
            responsive: {
                0: {
                    items: 1,
                    nav: false
                }
            }

        });

    } else {
        if (!$('.js-second-slider').hasClass('off')) {
            $('.js-second-slider.owl-carousel').addClass('off').trigger('destroy.owl.carousel');
            $('.js-second-slider.owl-carousel').find('.owl-stage-outer').children(':eq(0)').unwrap();
        } else {
            $('.js-second-slider.owl-carousel').addClass('off');
        }
    }
    
    
}


function ageHover() {
    $('#age-00-02').hover(
        function () {
            $('.ages-container').toggleClass('hover-01');
        }
    )
    $('#age-02-04').hover(
        function () {
            $('.ages-container').toggleClass('hover-02');
        }
    )
    $('#age-05-12').hover(
        function () {
            $('.ages-container').toggleClass('hover-03');
        }
    )
}


function womensUnProd(){    
    var prodWomens = $('.un-featured-prods-womens .owl-carousel');
    if ($(window).width() < 768) {
        prodWomens.removeClass('off');
        commonCarousel.renderCarousel($('.unstruct-womens-prod'));
     
    } else {
        if (!prodWomens.hasClass('off')) {
            prodWomens.addClass('off').trigger('destroy.owl.carousel');
            prodWomens.find('.owl-stage-outer').children(':eq(0)').unwrap();
            prodWomens.find('.owl-thumbs').remove();
        } else {
            prodWomens.addClass('off');
        }
    }
}
function shoeScience(){
    var shoeDiagram =  $('.shoe-diagram .owl-carousel');
    if ($(window).width() < 768) {
       shoeDiagram.removeClass('off');
        commonCarousel.renderCarousel($('.shoe-carousel-science'));
      
    } else {
        if (!shoeDiagram.hasClass('off')) {
            shoeDiagram.addClass('off').trigger('destroy.owl.carousel');
            shoeDiagram.find('.owl-stage-outer').children(':eq(0)').unwrap();
            shoeDiagram.find('.owl-thumbs').remove();
        } else {
            shoeDiagram.addClass('off');
        }
    }
}
function mensUnProd(){  
    var prodMens = $('.un-featured-prods-mens .owl-carousel');
    if ($(window).width() < 768) {
        prodMens.removeClass('off');
        commonCarousel.renderCarousel($('.unstruct-mens-prod'));
      
    } else {
        if (!prodMens.hasClass('off')) {
            prodMens.addClass('off').trigger('destroy.owl.carousel');
            prodMens.find('.owl-stage-outer').children(':eq(0)').unwrap();
            prodMens.find('.owl-thumbs').remove();
        } else {
            prodMens.addClass('off');
        }
    }
}

function unstructTechno() {
    var tehnoOwl = $('.technologies .owl-carousel');
     if ($(window).width() < 768) {
        tehnoOwl.removeClass('off');
        commonCarousel.renderCarousel($('.js-tech-tiles'));
     
    } else {
        if (!tehnoOwl.hasClass('off')) {
            tehnoOwl.addClass('off').trigger('destroy.owl.carousel');
            tehnoOwl.find('.owl-stage-outer').children(':eq(0)').unwrap();
            tehnoOwl.find('.owl-thumbs').remove();
        } else {
            tehnoOwl.addClass('off');
        }
    }
}
function awMobCollection() {
    var awOwl = $('.js-aw-mob-collection');
     if ($(window).width() < 768) {
        awOwl.removeClass('off');
        commonCarousel.renderCarousel($('.js-aw-mob-collection'));
     
    } else {
        if (!awOwl.hasClass('off')) {
            awOwl.addClass('off').trigger('destroy.owl.carousel');
            awOwl.find('.owl-stage-outer').children(':eq(0)').unwrap();
            awOwl.find('.owl-thumbs').remove();
        } else {
            awOwl.addClass('off');
        }
    }
}
function unstructuredMob() {
    var unStruct = $('.js-mob-unstructured');
     if ($(window).width() < 768) {
        unStruct.removeClass('off');
        commonCarousel.renderCarousel($('.js-mob-unstructured'));
     
    } else {
        if (!unStruct.hasClass('off')) {
            unStruct.addClass('off').trigger('destroy.owl.carousel');
            unStruct.find('.owl-stage-outer').children(':eq(0)').unwrap();
            unStruct.find('.owl-thumbs').remove();
        } else {
            unStruct.addClass('off');
        }
    }
}
function newTrigenic() {
    // using window width is bad!
    if ($(window).width() < 991) {
        $('.principle-trigenic-container .owl-carousel').removeClass('off');
        $('.js-trigenic-text-carousel').owlCarousel({
        loop: true,
        items:1,
        navText : ["<i class='fa fa-caret-left'></i>", "<i class='fa fa-caret-right'></i>"],
        responsiveClass: true,
        dots:true,
        responsive: {
            0: {
                items: 1,
                nav: true
            },
            768: {
                items: 2,
                nav: true
            }
        }
        });
    } else {
        if (!$('.principle-trigenic-container .owl-carousel').hasClass('off')) {
            $('.principle-trigenic-container .owl-carousel').addClass('off').trigger('destroy.owl.carousel');
            $('.principle-trigenic-container .owl-carousel').find('.owl-stage-outer').children(':eq(0)').unwrap();
            $('.principle-trigenic-container .owl-carousel').find('.owl-thumbs').remove();
        } else {
            $('.principle-trigenic-container .owl-carousel').addClass('off');
        }
    }
}



function videoIos(){
    if(window.navigator.userAgent.match( /iP(hone|od|ad)/)){
        var iOS = parseFloat(
            ('' + (/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent) || [0,''])
            [1])
            .replace('undefined', '3_2').replace('_', '.').replace('_', '')
        ) || false;
        if(iOS >= 8 && iOS < 10){
            $('.my-video').append("<a id='play-pause' href='javascript:void(0)'><i class='fa fa-play-circle'></i></a>");
            $('#play-pause i').on('click', function(){
                $(this).hide();
            });
        }
    } 
}

// Toggle between two images

function change_image() {
    if($('.cms-staticpage > div').hasClass('kids-health-two-four') || $('.cms-staticpage > div').hasClass('kids-health-five-twelve')){
        var dataImg = $('#change-image').data('img');
        var imgSrc2 = $('.toggle-image').attr('src'); 
        var imgSrc1 = $('#change-image').data('src'); 
        if (dataImg == 'one') {
            document.getElementById('change-image').src = imgSrc2;
            $('#change-image').data('img', 'two');
        } else {
            document.getElementById('change-image').src = imgSrc1;
            $('#change-image').data('img', 'one');
        }
    }
}
    setInterval(change_image, 4000);


var moreInOutCarousel = {
    init: function(){
        "use strict";
        $('.js-image-animate').owlCarousel({
            animateOut: 'fadeOut',
            animateIn: 'fadeIn',
            loop:true,
            mouseDrag:false,
            touchDrag:false,
            autoplay:true,
            responsiveClass:true,
            nav:false,
            dots:false,
            autoplaySpeed:3000,
            responsive:{
                0:{
                    items:1,
                    nav:false
                }
            }
        });
    },
    DestroyCarousel: function(){
         var $animateCarousel = $('.js-image-animate.owl-carousel');
         $animateCarousel.trigger('destroy.owl.carousel');
         $animateCarousel.find('.owl-stage-outer').children(':eq(0)').unwrap();
         $animateCarousel.find('.owl-thumbs').remove();
    },
    renderCarousel: function(){
        if(isMobile()){
            moreInOutCarousel.DestroyCarousel();
            var moreImg = $('.mob-more-banner img').attr('src');
            $('.js-image-animate').append('<div class="item mob-more-item"><img src='+moreImg+' class="img-responsive" /></div>');
            moreInOutCarousel.init();
        }else{
            moreInOutCarousel.DestroyCarousel();
            $('.mob-more-item').remove();
            moreInOutCarousel.init();
        }
    }
}


var springCarousel = {
    init: function(){
        "use strict";
    },
    renderCarousel: function(){
        $('.spring-summer-products-container').owlCarousel({
            thumbs: true,
            thumbsPrerendered: true,
            loop: true,
            navText : ["<i class='fa fa-angle-left fa-2x'></i>", "<i class='fa fa-angle-right fa-2x'></i>"],
            dots:true,
            responsiveClass: true,
            responsive: {
                0: {
                    items: 1,
                    nav: true
                }
            }
        });
    },
    checkCarousel: function(elem){
        if($(window).width() < 767){
            elem.removeClass('off');
            springCarousel.renderCarousel();
        }else{
            if (! elem.hasClass('off')) {
             elem.addClass('off').trigger('destroy.owl.carousel');
             elem.find('.owl-stage-outer').children(':eq(0)').unwrap();
            } else {
                 elem.addClass('off');
            }
        }
    }
}


var commonCarousel_fade = {
    init: function(){
        "use strict";           
    },
    renderCarousel:function(owl){ 
        owl.owlCarousel({
            animateOut: 'fadeOut',
            animateIn: 'fadeIn',
            loop:true,
            mouseDrag:false,
            touchDrag:false,
            autoplay:true,
            responsiveClass:true,
            nav:false,
            dots:false,
            autoplaySpeed:3000,
            responsive:{
                0:{
                    items:1,
                    nav:false
                }
            }
        });
        
    } 
}
function cloudPerson(){
    var cloudProd = $('.cloud-person-carousel');
    if($(window).width() < 767){
        cloudProd.removeClass('off');
        commonCarousel_fade.renderCarousel(cloudProd); 
    }else{
        if (! cloudProd.hasClass('off')) {
            cloudProd.addClass('off').trigger('destroy.owl.carousel');
            cloudProd.find('.owl-stage-outer').children(':eq(0)').unwrap();
        } else {
            cloudProd.addClass('off');
        }
    }
   
}


 
var naturePrinciples = {
    init:function(){
        "use strict";
    },
    renderCarousel:function(owl){
        owl.owlCarousel({
            loop: false,
            items:1,
            navText : ["<i class='fa fa-angle-left'></i>", "<i class='fa fa-angle-right'></i>"],
            responsiveClass: true,
            dots:true,
            responsive: {
                0: {
                    items: 1,
                    nav: true,
                    slideBy : 1
                },
                414:{
                     items: 2,
                    nav: true,
                    slideBy : 2
                },
                667:{
                     items: 4
                }
            }
        });
    }
}
function nature(){
    var cloudProd = $('.nature-principles-carousel');
    if($(window).width() < 767){
        cloudProd.removeClass('off');
        naturePrinciples.renderCarousel(cloudProd); 
    }else{
        if (! cloudProd.hasClass('off')) {
            cloudProd.addClass('off').trigger('destroy.owl.carousel');
            cloudProd.find('.owl-stage-outer').children(':eq(0)').unwrap();
        } else {
            cloudProd.addClass('off');
        }
    }
   
}

var viewportWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
var viewportHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;

function setHistoryItemSize() {
    
  if (viewportWidth > viewportHeight) {     
    setShowITWidth();
  } else if (viewportWidth < viewportHeight) {
    setShowITHeight();     
  } 
}

function setShowITWidth() {
    var historyPop = document.querySelectorAll(".nature-history .showIT .showITwrap");
    for (var i = 0; i <= historyPop.length; i++) {
      historyPop[i].style.width = (viewportHeight + "px");
    }
}
function setShowITHeight() {
    var historyPop2 = document.querySelectorAll(".nature-history .showIT .showITwrap");
    for (var i = 0; i <= historyPop2.length; i++) {
      historyPop2[i].style.height = (viewportWidth + "px");
      historyPop2[i].style.top = ((viewportHeight - viewportWidth) / 2 + "px");
    }
}
function natureHistory(){
$('.bannerRow-inner .banner-readmore').each(function(){
    $(this).on('click', function(){
        $(this).parents('.bannerRow-inner').find('.banner-popup').addClass('showIT');  
        setHistoryItemSize();
    });

});
$('.bannerRow-inner .banner-close').each(function(){
$(this).on('click', function(){
    $(this).parents('.bannerRow-inner').find('.banner-popup').removeClass('showIT');  
     
});
});
}

$(document).ready(function() {

cloudPerson();
nature();
natureHistory();
commonCarousel.renderCarousel($('.js-cloud-carousel-banner'));
natureCarousel.renderCarousel($('.js-nature-prod-carousel'));
naturemodalCarousel.renderCarousel($('.nature-model-car'));

//    if($('body').hasClass('cartpage') && $('.serviceablity-msg').text().trim() == ""){
//        if($(window).width() >= 768){
//            var pincodeTop = $('.pincode-right').offset().top - 200;
//            //$('#InputBoxpincode').focus();
//            //$("html, body").animate({ scrollTop: pincodeTop }, "slow");
//        }else{
//            $(".pincode-slider").css("bottom", "50px");
//           // $('#InputBoxpincode').focus();
//        }
//    }
    if($(".showdefault .invalidPincodeErr").length !== 0){
        $(".shippingProceedBtn").addClass("unactive");
    }else{
        $(".shippingProceedBtn").removeClass("unactive");
    }
    $(document).on('click','.saved_shipping_address_list_area_container .js_osc_usr_addrs_rbt', function(){
        if($(this).parents('.saved_address_list_area').find('.invalidPincodeErr').length !== 0){
            $(".shippingProceedBtn").addClass("unactive");
        }else{
            $(".shippingProceedBtn").removeClass("unactive");
        }
    })

if($(window).width() >= 768){
    $('.reubyn-read-more').on('click', function(){
        $('.reubyn-fadein').fadeIn(3000);
    });
    $('.reubyn-close').on('click', function(){
        $('.reubyn-fadein').fadeOut(3000);
    });
}

    $('#businessform').live('submit',function(e){
        e.preventDefault();
         validator.formSubmit($('#businessform'));
        $('.error-mes').remove();
        $('#businessform .ui-form').each(function(){
            var businessName = $(this).find('.firstname').val();
            var businessEmail = $(this).find('.email_validation').val();
           
            if(businessName === ""){
                $('.firstname').removeClass('input-error');
                $(this).append('<span class="error-mes">Please enter a name.</span>');
            }
            else if(businessEmail === ""){
                $('.email_validation').removeClass('input-error');
                $(this).append('<span class="error-mes">Please enter a email address</span>');
            }            
        });
        $('.business-form .number_validation').removeClass('input-error');
    });
    $('.business-form .firstname, #AddressForm_first_name, #AddressForm_last_name').keypress(validator.stringValidate);
    $('.business-form .companyname').keypress(validator.alphaNumericValidate);
    $('.business-form .number_validation').keypress(validator.numaricValidate);
    
    
    "use strict"; // Start of use strict

//    $('.storelocatore a').on('click', function(){
//        if($('.product-search').is(':visible')){
//            $('.product-search').hide();
//        }
//        $('.storeinformation').hide();
//        $(this).find('span').toggle();
//        $('.store-locator').show('slow');
//        $('.quick-header-container').toggleClass('active');
//        $("#storefindbtnall").trigger("change");
//      
//    });
    
    //storeProgressBar();
    storeLocator();

   if(($('div').hasClass('order_failure'))|| ($('div').hasClass('order_success_page'))){
       $('body').addClass('success-page');
   }
   

if(!$('body').hasClass('success-page')){
    if(isMobile() && ($('.catalogpage').find('div').hasClass('serchResultTextConNew'))){
            $('.allfilters_right').addClass('disable');
    }else{
            $('.allfilters_right').removeClass('disable');
    }
}

if ($(window).width() < 767) {
    if ($("body").hasClass("cartpage")) {
        $('.search-icon,.mini-cart,.cart-title').hide();
        $('.mycart-text').show();
       
            if ($('.pincode-slider').is(':empty')) {
                 $(".product-details").appendTo(".pincode-slider");
            }
    }
}



var bgImg = $(".signin-popup-content > img").attr("src");
$(".signin-signup-left-container").css({"background":"url("+bgImg+") no-repeat", "background-size":"cover"});
   
    
        $(document).on("click", ".js-reset-email", function () {
            globalAccount.sendResetRequest();
        });



    $(document).on("click",".js-toggle-password", function () {
        $(this).toggleClass("fa-eye fa-eye-slash");
        var input = $($(this).attr("toggle"));
        if (input.attr("type") === "password") {
            input.attr("type", "text");
        } else {
            input.attr("type", "password");
        }
    });
    $(document).on('keypress', '#contact_number', function(){
        console.log('test');
        var keycode = event.which;
        if (!(event.shiftKey == false && (keycode == 46 || keycode == 8 || keycode == 37 || keycode == 39 || (keycode >= 48 && keycode <= 57)))) {
            event.preventDefault();
        }
    });
 
if(!$('body').hasClass('success-page')){
    if(!isMobile()  && !(navigator.userAgent.match(/Tablet/i) ||
        navigator.userAgent.match(/iPad/i) ||
        navigator.userAgent.match(/Kindle/i) ||
        navigator.userAgent.match(/Playbook/i) ||
        navigator.userAgent.match(/Nexus/i) ||
        navigator.userAgent.match(/Xoom/i) ||
        navigator.userAgent.match(/SM-N900T/i) || //Samsung Note 3
        navigator.userAgent.match(/GT-N7100/i) || //Samsung Note 2
        navigator.userAgent.match(/SAMSUNG-SGH-I717/i) || //Samsung Note
        navigator.userAgent.match(/SM-T330NU/i) //Samsung Tab 4
        )){
        $(".dropdown").hover(
            function() { 
                $('.mini-cart-content').show();
                $('.dropdown-menu', this).fadeIn("fast");
            },
            function() { $('.mini-cart-content').hide(); $('.dropdown-menu', this).fadeOut("fast");
        });
    }
}
    $('.btn-close').click(function(){
        $('.header-bag').hide();
    });
    


    $(document).on('click','.js-videoPoster',function(ev) {
      ev.preventDefault();
      var $poster = $(this);
      var $wrapper = $poster.closest('.js-videoWrapper');
      videoPlay($wrapper);
      $(this).next('.close-icon').show();
    });
    $(document).on('click','.js-videoStop',function(ev) {
      ev.preventDefault();
      var $poster = $(this);
      var $wrapper = $poster.closest('.js-videoWrapper');
      videoStop($wrapper);
      $(this).hide();
    });

    $('.search-container a.search-icon').on('click', function () {
         if($('.header').hasClass('stick')){
             $('body,html').animate({scrollTop:0},400, function(){
                $("#product-search").slideDown();
                $("#searchInput").focus();
                $('.searchlocatore span').toggleClass('search-arrow-down teal');
                return false;
             });
         }else{
             if($('.store-locator').is(':visible')){
                 $('.store-locator').hide();
             }
             $("#product-search").slideToggle();
             $("#searchInput").focus();
             $("#searchInput").val('');
             $("#searchSuggestResult").html('').fadeOut(200);
             $('.searchlocatore span').toggleClass('search-arrow-down teal');
             return false;
         }
    });

    $("#store-locator").owlCarousel({
            loop:false,
            autoplay:false,
            items:4,
            smartSpeed: 2000,
            dots: false,
            nav: true,
            navText: ["<i class='fa fa-angle-left fa-2x'></i>", "<i class='fa fa-angle-right fa-2x'></i>"],
            responsive:{
                0:{
                  items:2  
                },
                500:{
                    items:2
                },
                1200:{
                    items:4
                }
            }
    });

    $('.open-video.men').on('click', function(){
            $('.static-close').remove();
            $('#women-trigenic-video-one').modal('show');
            $('body').append('<a href="javascript:void(0);" class="close close-icon static-close" data-dismiss="modal" aria-hidden="true">Close</a>');
    });
    $('.open-video.women').on('click', function(){
            $('.static-close').remove();
            $('#men-trigenic-video-one').modal('show');
            $('body').append('<a href="javascript:void(0);" class="close close-icon static-close" data-dismiss="modal" aria-hidden="true">Close</a>');
    });
    $("#women-generic-carousel, #men-generic-carousel").owlCarousel({
            loop:true,
            autoplay:false,
            items:3,
            smartSpeed: 2500,
            dots: true,
            nav: true,
            navText: ["<i class='fa fa-angle-left fa-3x'></i>", "<i class='fa fa-angle-right fa-3x'></i>"],
            responsive:{
                0:{
                  items:1  
                },
                500:{
                    items:1
                },
                1024:{
                    items:3
                }
            }
    });
 
    if(!$('body').hasClass('success-page')){
        featureCarousel();
    }
    $(".recent-carousel-slider").owlCarousel({
        loop:false,
        autoplay:false,
        items:4,
        slideBy : 4,
        smartSpeed: 1500,
        dots: false,
        nav: true,
        navText: ["<i class='fa fa-angle-left fa-1x'></i>", "<i class='fa fa-angle-right fa-1x'></i>"],
        responsive:{
                0:{
                  items:1,
                  slideBy : 1
                },
                500:{
                    items:2,
                    slideBy : 2
                },
                768:{
                    items:3,
                    slideBy : 3
                },
                1024:{
                    items:4,
                    slideBy :4
                }
            }
    });
    $(".mini-content-carousel").owlCarousel({
        loop:true,
        autoplay:false,
        items:1,
        smartSpeed: 1500,
        dots: false,
        nav: true,
        navText: ["<i class='fa fa-angle-left fa-2x'></i>", "<i class='fa fa-angle-right fa-2x'></i>"],
    });
    $(".shoe-discovery").owlCarousel({
            loop:false,
            autoplay:false,
            items:6,
            dots: false,
            smartSpeed: 500,
            nav: true,
            slideBy : 6,
            navText: ["<i class='fa fa-angle-left fa-3x'></i>", "<i class='fa fa-angle-right fa-3x'></i>"],
            responsive:{
                0:{
                  items:2,
                  slideBy : 2
                },
                480:{
                    items:3,
                  slideBy :3
                },
                500:{
                    items:3,
                    slideBy : 3
                },
                1024:{
                    items:6,
                    slideBy : 6
                }
            }
    });
    $('#vertical-tab').easyResponsiveTabs({
            type: 'vertical',
            width: 'auto',
            fit: true,
            tabidentify: 'ver_1' // The tab groups identifier
        });
        $('#accordion-tab').easyResponsiveTabs({
            type: 'accordion',
            width: 'auto',
            fit: true,
            tabidentify: 'ver_1' // The tab groups identifier
        }); 
        $(".productdesc-tabs").easyResponsiveTabs({
            type: 'default', //Types: default, vertical, accordion           
            width: 'auto', //auto or any custom width
            fit: true,   // 100% fits in a container
            tabidentify: 'accordion_1', // The tab groups identifier
            activetab_bg: '',
            inactive_bg: '',
            active_border_color: '',
            active_content_border_color: ''
        });

        $('.single-product-thumbnails li:first-child').addClass('active');
        $('.single-product-thumbnails li').each(function(){
            $(this).on('click', function(){
                    $('.single-product-thumbnails li').removeClass('active');
                    var productImage = $(this).data('image_full');
                    var productZoomImage = $(this).data('zoom_full');
                    $('.main-image').attr('src', productImage);
                    $('.zoom-img').attr('data-image', productImage);
                    $('.zoom-img a').attr('href', productZoomImage);
                    $(this).addClass('active');
            });
        });
        //CDM-741 added class for getting discount value
        var discountTxt = $('.prod-price .discounts-pdp').text();
        $('.product-offer-discount').text(discountTxt);
 
if(!$('body').hasClass('success-page')){
    if( ! isMobile() || (! $(window).width() < 991)){
       // $('.newsletter_category').hide();
        $('.newsletter_category .close-icon, .js-remove-email').on('click', function(){
            $('.js-subscribe').show();
            $('#footer-newsletter-email').val('');
            $('.newsletter_category, #news_letter_error, #news_letter_success').hide();
            nslfooterAjaxCallAllowed = true;
        });
    }
}
             $('.desktop-preferences-data ul li').live('click', function(){

                if($(this).find('input').is(':checked') === false)
                {
                    $(this).find('input').attr('checked', true);
                    //$('.join-btn').prop("disabled", false);
                    $(this).find('.overlay-elt, .circular-tick-box').show();
                   $(this).find('.item').addClass('overlay');
                    //$('.join-btn').removeClass('unactive');
                }else{
                    $(this).find('input').attr('checked', false);
                     $(this).find('.item').removeClass('overlay');
                   // $('.join-btn').prop("disabled", true);
                    $(this).find('.overlay-elt, .circular-tick-box').hide();
                   // $('.join-btn').addClass('unactive');
                }
                if( $('.desktop-preferences-data ul li').find('input').is(':checked') === true ){
                    $('.join-btn').removeClass('unactive');
                    $('.join-btn').prop("disabled", false);
                }else{
                     $('.join-btn').addClass('unactive');
                     $('.join-btn').prop("disabled", true);
                }
              // var all_checkboxes = $('.desktop-preferences-data ul li input[type="checkbox"]');
              if( isMobile() || ( $(window).width() < 991)){
                    if ($('.desktop-preferences-data ul li input[type="checkbox"]:checked').length === $('.mobile-menu .desktop-preferences-data ul li').length){
                        $('.js-select-all-btn').text('Deselect all');
                    }
                    else{
                        $('.js-select-all-btn').text('Select all');                   
                    }
                }else{
                    if ($('.desktop-preferences-data ul li input[type="checkbox"]:checked').length === $('.desktop-preferences-data ul li').length){
                        $('.js-select-all-btn').text('Deselect all');
                    }
                    else{
                        $('.js-select-all-btn').text('Select all');                   
                    }
                }
            });
    
            $(".js-select-all-btn").live('click', function(event){
                event.preventDefault();    
                if ($('.desktop-preferences-data ul li input:checked').length == $('.desktop-preferences-data ul li input').length) {
                    $('.desktop-preferences-data ul li .item').removeClass('overlay');
                    $('.overlay-elt, .circular-tick-box').hide();
                    $('.js-select-all-btn').text('select All');
                    $('.desktop-preferences-data ul li').find('input').attr('checked', false);
                    $('.join-btn').prop("disabled", true);
                    $('.join-btn').addClass('unactive');        
                }
                else{        
                    $('.desktop-preferences-data ul li .item').addClass('overlay');
                    $('.overlay-elt, .circular-tick-box').show();
                    $('.js-select-all-btn').text('Deselect All');
                    $('.desktop-preferences-data ul li').find('input').attr('checked', true);
                    $('.join-btn').prop("disabled", false);
                    $('.join-btn').removeClass('unactive');
                }
            });

 
        $('.close-bag').live('click', function(){
            $('.mini-cart-content').hide('slow');
        });
 
        $('.js-review-back-btn').on('click', function(){
            $('.js_osc_step_3').trigger('click');
        });
        $('.js-delivery-back-btn').on('click', function(){
            $('.js_osc_step_2').trigger('click');
        });
        $('.js-signin-back-btn').on('click', function(){
            $('.js_osc_step_1').trigger('click');
        });
        
        if(($('.master_login').css('display') == 'block') || ($('#checkout_signup_one').css('display') == 'block')){
            $('.checkout-back-container a').hide();
            $('.js-shopping-back-btn').show();
        }else{
            $('.js-shopping-back-btn').hide();
        }
        $('.onestickySummary .applycoupon').hide();
 
        $('.rack .js-img-wrap').each(function(){
            $(this).hover(
            function(){
                    $(this).find('img:nth-child(1)').css('display', 'none');
                    $(this).find('img:nth-child(2)').css('display', 'block');
            },
            function(){
                    $(this).find('img:nth-child(2)').css('display', 'none');
                    $(this).find('img:nth-child(1)').css('display', 'block');
            }
            );
        });
        var shoeProductCounts = $('.shoe-products-container .item').length;
        var shoeProductDetailCounts = $('.shoe-discovery-detail-container .shoe-discovery-details').length;
	if(shoeProductCounts == shoeProductDetailCounts){
        $('.shoe-products-container .item').on('click', function(){
                var shoeProductIndex = $('.shoe-products-container .item').index(this);
                $('.shoe-discovery-detail-container .shoe-discovery-details').hide();
                $('.shoe-discovery-detail-container .shoe-discovery-details').eq(shoeProductIndex).show();
        });
	}else{
		console.log('shoe products and product detail counts are not matched');
	}
         
        
            var hideMegaMenu = function(){
           $('.submenu-content-container').html('').fadeOut(100);
           $('.navigation > li.item-mega-menu').removeClass('hover');
       };
       $('.navigation > li.item-mega-menu').on("mouseenter", function () {
           if($(this).data('submenu') != ''){
               var hoverClass = $(this).find('.menu-hover a.js-level1').text();
               $(this).addClass(hoverClass);
               var menuCont = $(".submenu-content-container");
               var currentMenu = $(this).html();
               menuCont.html('');
               menuCont.append(currentMenu);
               menuCont.stop();
               if(($(".submenu-content-container").length > 0) && ($(this).find('ul').hasClass('js-category-content')) && ($('.submenu-content-container').html() != null)){
                   menuCont.css({opacity : 1}).fadeIn(1);
               }
           } else {
               $('.submenu-content-container').hide();
           }
       });
       $('.navigation > li.item-mega-menu').on("mouseleave", function () {
           setTimeout(function(){
           if ($('.submenu-content-container:hover').length == 0 && $('.navigation > li.item-mega-menu:hover').length == 0) {
                   hideMegaMenu();
           }
           }, 600);
       });

       $(".search-container, .quick-header-container, .minicart-container").on("mouseover", function () {
               hideMegaMenu();
       });
       $('.submenu-content-container').hover(function () {
           var hoverActiveMenu = $(this).find('.js-category-submenu .menu-hover a').text();
           $('.main-menu').find('.'+$.trim(hoverActiveMenu)).addClass('hover'); 
       }, 
       function () {
           hideMegaMenu();
       });
   

if(!$('body').hasClass('success-page')){
        if( isMobile() || ($(window).width() < 991)){
            tabMobMenu();
        }
}   
    $(".js-btn-hamburger-icon").live('click', function (e) {
        if(!$('body').hasClass('success-page')){
            if( isMobile() || ($(window).width() < 991)){
                e.preventDefault();
                tabMobMenu();
                $('.js-mobile-menu').animate({ width: 'toggle' });
                $('.js-mobile-menu .navigation').show();
                $(".hamburger").hide();
            }
        }
    });
    $(".js-close-hamburger").live('click', function () {
        if(!$('body').hasClass('success-page')){
            if( isMobile() || ($(window).width() < 991)){
                $('.js-mobile-menu').animate({ width: 'toggle' });
                $('.js-mobile-menu .navigation').hide();
                $(".hamburger").show();
            }
        }
    });

if(!$('body').hasClass('success-page')){
    if(isMobile()){
        $('.expand-desc-link').on('click', function(){
                $('.mob-product-details').toggleClass('active');
                $('.products-social-media').toggle();
                if($('.mob-product-details').hasClass('active')){
                        $(this).text('HIDE DESCRIPTION');
            }else{
                        $(this).text('SHOW DESCRIPTION');
            }
        });
    }
}   
    
        var checkoutProcess = $('.js-checkout-steps-container').html();
        $('.checkout-border-bottom').html('');
        $('.checkout-border-bottom').append('<div class="wrapper checkout-steps-container">'+checkoutProcess+'</div>');
    
    
   
    $('#availability-fltr .refineByTitle').on('click', function(){
        if(!$('body').hasClass('success-page')){ 
            if($('.excludeStockArea').is(':visible') && isMobile()){
                    $("html, body").animate({ scrollTop: $(document).height() }, 1000);
            }
        }
    });
  
     
     
     
       
    
     
     if(!$('body').hasClass('success-page')){
        if(isMobile()){
            $('.address-content .item').each(function(){
                $(this).click(function(){
                        var base_url = window.location.origin;
                        var location = $(this).find('.store-detailslink a').attr('href');
                        window.location.reload(base_url+location);
                });
            });
        }
     }
     if($('.checkout_main_page div').hasClass('mob-redirection-page')){
         $('.checkout-logo a').css('cursor','default');
     }
     
     $('.ulscrollbar').enscroll();
     $('.js-foot-owl-carousel').owlCarousel({
        thumbs: true,
        thumbsPrerendered: true,
        loop: true,
        navText : ["<svg viewBox='0 0 100 100'><path d='M 10,50 L 60,100 L 70,90 L 30,50  L 70,10 L 60,0 Z' class='arrow'></path></svg>","<svg viewBox='0 0 100 100'><path d='M 10,50 L 60,100 L 70,90 L 30,50  L 70,10 L 60,0 Z' class='arrow' transform='translate(100, 100) rotate(180) '></path></svg>"],
        responsiveClass: true,
        dots:true,
        responsive: {
            0: {
                items: 1,
                nav: true
            }
        }
    });
    
    function hideP() {
            $(".question").children('p').slideUp('normal');
    }
    $('.question').click(function () {
        var $this = $(this);
        $(this).toggleClass('opened');
        $(".question").not($(this)).removeClass('opened');
        if ($(this).hasClass('opened')) {
            hideP();
            $(this).children('p').slideDown('normal');
        } else {
            hideP();
        }
    });
    $('#shoe .owl-carousel').owlCarousel({
        loop: true,
        navText : ["<i class='fa fa-angle-left fa-2x'></i>", "<i class='fa fa-angle-right fa-2x'></i>"],
        responsiveClass: true,
        dots:true,
        responsive: {
            0: {
                items: 1,
                nav: true
            }
        }
    });
    $('.js-trigenic-carousel').owlCarousel({
        loop: true,
        items:1,
        navText : ["<i class='fa fa-caret-left'></i>", "<i class='fa fa-caret-right'></i>"],
        responsiveClass: true,
        dots:false,
        responsive: {
            0: {
                items: 1,
                nav: true
            }
        }
    });
    ageHover();
    kidsHealth();
    healPageCarousel();
    newTrigenic();
    unstructTechno();
    womensUnProd();
    mensUnProd();
    shoeScience();
    awMobCollection();
    unstructuredMob();
    $('.js-read-more').on('click', function(){
        if( isMobile() || ($(window).width() < 991)){
            if($(this).text() == 'Read more'){
                $(this).prev('p').css('height', 'auto');
                $(this).text('Read less');
            }else{
                $(this).prev('p').removeAttr('style');
                $(this).text('Read more');
            }
        }
    });
    
    if(!$('body').hasClass('success-page')){
        moreInOutCarousel.renderCarousel();
        springCarousel.checkCarousel($('.spring-women-container .owl-carousel'));
    }
    
    var menuFinder = $('.navigation a');
    for(var i=1; i <= menuFinder.length; i++){
        var menuText = $('.navigation a').eq(i);
        var str = $.trim(menuText.text().toLowerCase());
        var menuCheck = str.match(/sale/g);
        if(menuCheck){
                menuText.addClass('red');
        }
    }
    
     $("#stepOneSubmit, #otp_generation, #signPassword").on('keypress', function (e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code == 13) {
          e.preventDefault();
          e.stopPropagation();
          $('#stepOneSubmit').trigger('click');
      }
    }); 
     $("#contact_number").on('keypress', function (e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code == 13) {
          e.preventDefault();
          e.stopPropagation();
          $('#otp_generation').trigger('click');
      }
    });
    $("#form-contactus #contact_number").on('keypress', function (e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code == 13) {
          e.preventDefault();
          e.stopPropagation();
          $('#contactus_form').trigger('click');
      }
    });
    $("#footer-newsletter-email").on('keypress', function (e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code == 13) {
          e.preventDefault();
          e.stopPropagation();
          $('.subscribe-email').trigger('click');
      }
    });
    $("#InputBoxpincode").on('keypress', function (e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code == 13) {
          e.preventDefault();
          e.stopPropagation();
          $('.cart-pin-check, .pin-check').trigger('click');
      }
    });
    $("#otp-code").on('keypress', function (e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code == 13) {
          e.preventDefault();
          e.stopPropagation();
          $('#login').trigger('click');
      }
    });
    $(".checkout_sign_Up #RegistrationForm_password2").on('keypress', function (e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code == 13) {
          e.preventDefault();
          e.stopPropagation();
          $('#otp_generation').trigger('click');
      }
    });
    
     $(document).on('keypress','#loginInput',function(e){
  //  $("#loginInput").on('keypress', function (e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code == 13) {
          e.preventDefault();
          e.stopPropagation();
          $('#stepOneSubmit').trigger('click');
      }
    });
      $(document).on('keypress','#signPassword',function(e){
  //  $("#loginInput").on('keypress', function (e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code == 13) {
          e.preventDefault();
          e.stopPropagation();
          $('#stepOneSubmit').trigger('click');
      }
    });
    
    $(".customer_acc #otp_generation").on('keypress', function (e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code == 13) {
          e.preventDefault();
          e.stopPropagation();
          $('.customer_acc #otp_generation').trigger('click');
      }
    });
    $(".js-btn-size-guide").on("click", function() {
        $("#size-guide-popup").appendTo("body").modal("show");
    });
    $(document).on('click','.size-guide-scroll-top',function(){
        if($('#size-guide-popup').css('display') === 'block'){
            $('#size-guide-popup').animate({ scrollTop:0 }, 1000);
        }
    });
    
    $(".js-aw-collection").owlCarousel({
                loop:true,
                autoplay:false,
                items:3,
                slideBy : 3,
                dots: true,
                nav: true,
                navText: ["<i class='fa fa-angle-left fa-2x'></i>", "<i class='fa fa-angle-right fa-2x'></i>"],
                responsive:{
                    0:{
                      items:1,
                      slideBy : 1
                    },
                    768:{
                       items:3 
                    },
                    1024:{
                       items:3
                    }
                }
    });
    
    $('#sec-car .sli-con').hover(
    function() {
        $('#sec-car .sli-con').removeClass('sec-car-hvr');
        $(this).addClass('sec-car-hvr');
    });
    $('#sec-car .sli-con').focus(
        function() {
            $('#sec-car .sli-con').removeClass('sec-car-hvr');
            $(this).addClass('sec-car-hvr');
    });
    $('.sec-spt .btn-exp').on("click", function(){   
        var tips = $(this).parents(".sec-spt").find(".hid-con");
        var tipsContaner = $(this).parents(".sec-spt").find(".hid-con-con");		
        if (tips.attr('hidden') === 'hidden') {                 
            tips.removeAttr('hidden');
            tipsContaner.addClass('spec-fxx');
            $(this).addClass('active');
            $('.sec-spt .hid-con').not(tips).attr('hidden', true);
            $('.sec-spt .hid-con-con').not(tipsContaner).removeClass('spec-fxx');
            $('.sec-spt .btn-exp').not($(this)).removeClass('active');
        } else {
            tips.attr('hidden', true);
            tipsContaner.removeClass('spec-fxx');
            $(this).removeClass('active');
        }            
    });
    $(".js-modal-btn").on("click", function() {
        $(".unstructured-video-modal").appendTo("body").modal("show");
    });
    
    $(".js-trigenic-modal-btn").on("click", function() {
        var videoId = $(this).data("video-id");
        $(this).parents(".sec-con").find(".unstructured-video-modal iframe").attr('src', videoId);
        $(this).parents(".sec-con").find(".unstructured-video-modal").modal("show");
    });
    $('.trigenic-static-inner .unstructured-video-modal .close').live("click", function(){
        $(this).parents(".sec-con").find(".unstructured-video-modal iframe").attr('src', "");
    });
    $(".js-trigenic-collection").on("click", function(){
        console.log($(this).parents(".sec-con").find(".sho-hid").offset().top);
        $(this).parents(".sec-con").find(".sho-hid").slideToggle();
        var CurrentTxt = $(this).text();
        if(CurrentTxt == "View Collection"){
            var divCal= 300; 
            $(this).text("Hide Collection");
            $('body,html').animate({scrollTop:$(this).parents(".sec-con").find(".sho-hid").offset().top - divCal}, 0);
        }else{
            $(this).text("View Collection");
        }
    });
    $(".js-trigenic-content-btn").on("click", function(){
        var triCont =  $(this).parents(".tec-con").find(".hid-con");
        var triContParent = $(this).parents(".tec-con");
        $(".hid-con").not(triCont).addClass("hidden");
        $(".tec-con").not(triContParent).removeClass("spe-fxx");
        triCont.toggleClass("hidden");
        triContParent.toggleClass("spe-fxx");
    });
    
    $(".js-material-shoe-slider").owlCarousel({
        loop: true,
        margin:0,
        nav: true,
        dots:true,
        navText: ["<i class='fa fa-angle-left fa-2x'></i>", "<i class='fa fa-angle-right fa-2x'></i>"],
        responsive:{
        0:{
            items:1
        },
        767:{
            items:1,
            nav:false,
        },
        1000:{
            items:1,
            nav:true,
           
        }
        }

});
 
});

$('.js-category').live('click touch', function () {
    if(!$('body').hasClass('success-page')){
        if( isMobile() || ($(window).width() < 991)){
            if(!$(this).hasClass("no-children")){
                if (($(this).next('.js-category-content')).is(':hidden')) {
                    $(this).addClass("active");
                    $(this).find('.menu-down-arrow i').removeClass('fa-angle-down').addClass('fa-angle-up');
                    $(this).next('.js-category-content').slideToggle("slow");
                } else {
                    $(this).removeClass("active");
                    $(this).find('.menu-down-arrow i').removeClass('fa-angle-up').addClass('fa-angle-down');
                    $(this).next('.js-category-content').slideToggle("slow");
                }
                //e.preventDefault();
                //return false;
            }
        }
    }
});



$('.homepageSlider').owlCarousel({
    animateOut: 'fadeOut',
    animateIn: 'fadeIn',
    loop:true,
    mouseDrag:false,
    touchDrag:false,
    autoplay:true,
    responsiveClass:true,
    nav:false,
    dots:false,
    autoplaySpeed:3000,
    responsive:{
        0:{
            items:1,
            nav:false
        }
    }
});
$(".product-slide").owlCarousel({
        autoplay:false, 
        loop: true,
        margin:0,
        nav: false,
        dots:true,
        responsive:{
        0:{
            items:1
        },
        767:{
            items:3
        }
        }

});

$('#searchInput').keypress(function(){
        if($(this).val() !==''){
            $('.search-loc-close').show();
        }
        else{
             $('.search-loc-close').hide();
        }
    });
$('.search-loc-close').click(function(){
        $(this).hide();
        $(this).closest('.store-search').find("input[type=text]").val("");        
});

 
    function cartCouponPrice(){
         $('.cart-page-items .item-product-to-price').each(function(){
            if($(this).find('.old-price-cartpage').length >0){
                $(this).find('.original_price').addClass('original_price_color'); 
            }
        });
    }

$(window).on('load', function(){
    if($('body').hasClass('home-page') || $('div').hasClass('category-landing-page') || $('div').hasClass('topselling') || $('body').hasClass('catalogpage') || $('body').hasClass('catalogdetailpage') || $('body').hasClass('cartpage')){
         $('.header-promotional-container').show();
     }else{
         $('.header-promotional-container').hide();
    }
    
$(document).on("click", ".js-login-link", function(event){
         
      clearInterval(globalAccount.downloadTimer);
	  
          
        event.data = $(this).data('events');  
        if(event.data == 'true'){
        var date = new Date();
        date.setTime(date.getTime() + (10*60*1000));
        document.cookie = "review=1; expires="+date.toUTCString()+"; path=/";  
        }                      
    var poupId = this.id;
        if (poupId === 'signup-popup') {
            $('.signupbtn').hide();
        } else {
            $('.signupbtn').show();
        }
        $(".signin-signup-right-container").html('');
        if (isMobile() || ($(window).width() < 991) && $('.mobile-menu').is(":visible")) {
            $('.js-mobile-menu').animate({width: 'toggle'});
            $('.js-mobile-menu .navigation').hide();
            $(".hamburger").show();
        }
    $.ajax({
            url: '/customer/account/renderpopup/',
            dataType: "json",
            data: {'popupId':poupId},
            success: function(response) {
                $(".signin-signup-right-container").html((response.status) ? response.message.html : response.message);
            }
    });
    $(".js-signin-signup-popup").modal("show");
});
    cartCouponPrice();
   
       if($('.container-fluid').hasClass('trigenic-page')){
            vpHeight = $(window).height();
            vpWidth = $(window).width();
            var headerHeight = 88;
            visibleArea = vpHeight - headerHeight;
            visibleArea2 = visibleArea * 0.6666;
            $(window).on('scroll', function () {
                if($('.single-image').length>0){            
               
        if($(this).scrollTop() > 350) {         
                    $('#detailVideo video').each(function(){   
                             if(!$(this).get(0).paused){              
                       try{$(this).get(0).pause();}catch(err){}       
                           }                  
           });            
         }
        else{                        
           $('#detailVideo video').each(function(){    
                            if($(this).get(0).paused){  
                                                          try{    
                                    var video = $(this).get(0);   
                                     cs_customerJs.actionVideoPlay(video);   
                                 }catch(err){}                       
             }                                                    
        });                                        }   
               
       }
                    var section2Top = $('#section-2').offset().top;
                    if ($(window).scrollTop() >= (section2Top - visibleArea2)) {
                            $('.static-wrapper').addClass('active');
                    } else {
                            $('.static-wrapper').removeClass('active');
                    }
            });
            window.sr = ScrollReveal({ reset: true });
            sr.reveal('.trigenic-animation', { duration: 1200 }); 
        }
        $(".modal-wide").on("show.bs.modal", function() {
          var height = $(window).height() - 200;
          $(this).find(".modal-content").css("height", height);
        });
        $('.static-close').live('click', function(){
           $('.modal-wide').modal('hide');
           $(this).hide();
        });
        
        $('#ProfileForm_gender > input').wrap('<label class="control control-radio"></label>');
        $('#ProfileForm_gender .control-radio').append('<div class="control_indicator"></div>');
        
        if(catalog.getCookie('review') == '1'){
            $('.js-click-review').trigger('click');
            document.cookie = 'review' + '=; expires=Thu, 01-Jan-70 00:00:01 GMT;';
        }
});


$(window).on('resize', function(){
    cloudPerson();
    nature();
    natureHistory();
      
    if(!$('body').hasClass('success-page')){
        featureCarousel();
    }
    storeLocator();
    select_picker();
    $('.js-mobile-menu .item-mega-menu > .js-category a').removeAttr('data-menu_value');
    if($(window).width() > 991){
        $('.mobile-menu').hide();
    }
    newTrigenic();
    
    if(!$('body').hasClass('success-page')){
        moreInOutCarousel.renderCarousel();
        springCarousel.checkCarousel($('.spring-women-container .owl-carousel'));
    }
    unstructTechno();
    womensUnProd();
    mensUnProd();
    shoeScience();
    awMobCollection();
    unstructuredMob();
})


function videoPlay($wrapper) {
  var $iframe = $wrapper.find('.js-videoIframe');
  var src = $iframe.data('src');
  $wrapper.addClass('videoWrapperActive');
  $iframe.attr('src',src);
}

function videoStop($wrapper) {
  if (!$wrapper) {
    var $wrapper = $('.js-videoWrapper');
    var $iframe = $('.js-videoIframe');
  } else {
    var $iframe = $wrapper.find('.js-videoIframe');
  }
  $wrapper.removeClass('videoWrapperActive');
  $iframe.attr('src','');
}
function featureCarousel(){
    var featureCarousel =  $(".feature-carousel-slider");
        if(isMobile()){
           featureCarousel.trigger('destroy.owl.carousel').removeClass('owl-carousel owl-loaded');
           featureCarousel.addClass('owl-carousel');
            featureCarousel.owlCarousel({
                loop:true,
                autoplay:false,
                items:1,
                stagePadding:50,
                margin:10,
                dots: false,
                nav: true,
                navText: ["<i class='fa fa-angle-left fa-2x'></i>", "<i class='fa fa-angle-right fa-2x'></i>"],
                responsive:{
                    0:{
                      items:1  
                    }
                }
            });
        }else{
            featureCarousel.trigger('destroy.owl.carousel').removeClass('owl-carousel owl-loaded');
            featureCarousel.addClass('owl-carousel');
            featureCarousel.owlCarousel({
                loop:true,
                autoplay:false,
                items:1,
                stagePadding:50,
                dots: true,
                nav: true,
                navText: ["<i class='fa fa-angle-left fa-2x'></i>", "<i class='fa fa-angle-right fa-2x'></i>"],
                responsive:{
                    0:{
                      items:1  
                    },
                    768:{
                       items:3 
                    }
                }
            });
        }
}

function select_picker(){
 if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) {
     $('.selectpicker').selectpicker('mobile');
 }
 }


function cartOrderSummary(){
    if($(window).width() < 767){
        $('.web-order-summary-container').removeClass('col-sm-12').addClass('mob-order-summary-container'); 
        $('.mob-order-summary').on('click', function(event){
            event.stopImmediatePropagation();
            $(this).toggleClass('active');
            $('.mob-order-summary-container').slideToggle('slow');

        });
         if ($('.pincode-slider').is(':empty')) {
        $(".product-details").appendTo(".pincode-slider");
    }
    } 
    if($('body').hasClass('cartpage')){
           $('.cartblock').show();
       }else{
           $('.cartblock').hide();
       }
       
       if($('body').hasClass('oneStepCart')){
           $('.product-details').hide();
       }else{
           $('.product-details').show();
       } 
}
function pdp_zoom_mob(){
  if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) {
        if (window.matchMedia("(orientation: landscape)").matches) {
          var mob_zoomwidth = $(window).width();
           $('.pan-zoom').css({'width': mob_zoomwidth/1.4, 'margin':'0px auto'});
        }
        else{
           $('.pan-zoom').css('width','100%');
        }
    }
}
$(document).ready(function(){
    select_picker();
    //pdp_zoom_mob();
    $('#loginInput').focus();
});


$(document).ready(function() {    
    $('body').on('click', '#loadMore', function (e) {
       if (catalog.totalGroup === '0' || catalog.trackLoad <= catalog.totalGroup) {
            $('#loadId').show();
            catalog.setCookie('seeall',0,1);
            catalog.catalogPageLoading();
       }
   });
   
    jQuery(window).scroll(function () {
        if($('#seeAll').css('display') === 'none'){
            catalog.plpLazyLoad();
        }
    });
});
    $(document).ready(function() { 
        if($('.login_page > div').hasClass('after_otp_conf')){
            $('body,html').animate({scrollTop:$('.after_otp_conf').offset().top}, 400);
        }
        else if($('.login_page > div').hasClass('reset-area')){
            $('body,html').animate({scrollTop:$('.reset-area').offset().top}, 400);
        }
        
        $('.availability-fltr').show();
        $(".fliterpartialleft").each(function () {
            var isClosed = $('.refineByTitle:lt(3)').hasClass("closed");
            var price = $('.fct').hasClass('price-fltr');
            $('.refineListBox').css('border-bottom','1px solid rgb(51,51,51)');
            $(this).find(".refineListBox:lt(3)").show();
            
            if (isClosed) {
                $('.refineByTitle:lt(3)').removeClass("closed").addClass('opened');
                $(this).find(".refineByTitle:lt(3)").css('border-bottom','1px solid rgb(51,51,51)');  
                
            }
             else{
                $('.refineByTitle:lt(3)').removeClass("opened").addClass('closed');
                $(this).find(".refineByTitle:lt(3)").css('border-bottom','1px dashed #eee');
             }
             if(price){
                 $('.color-price').hide();
                 $('.price_filter').removeClass("closed").addClass('opened');
                 $(this).find(".price_filter").css('border-bottom','1px solid rgb(51,51,51)');  
                 $('.price').show();
             }
         });
    if(!$('body').hasClass('success-page')){
        if(isMobile()){
            $('.add-filter').click(function(){
                $('.fliterpartialleft').show('slow');
                $('.catalog-products').hide();
                $('footer').hide();
                $('.sortBar').hide('slow');
            });
            $('.add-filter-close').click(function(){
                $('.fliterpartialleft').hide('slow');
                $('.catalog-products').show('slow');
                $('footer').show('slow');
                $('.sortBar').show('slow');
            });
        }
    }
        if($(window).width()<768){
            $('.sortBar_right').removeClass('plp-select').addClass('filter-select-box col-xs-7 nopadding');
            $('.sortBar_right select').addClass('selectpicker');
            $('.sortBar_right select').attr('data-width','190px');
            $('.selectpicker').selectpicker();
            $('.sortBar-left').addClass('col-xs-12 nopadding');
            $('.add-filter').addClass('col-xs-5 nopadding');
        }
        $('.forget_pass a').on('click', function(){
            $('body,html').animate({scrollTop:$('.header-container').offset().top}, 400);
        });
        $('.checkout_signup_container .forgot_link').on('click', function(){
             $('.checkout_radios, .onstep-account-title').hide();
        });
        //$(".savedcards").attr('checked', 'checked');

       
       
    });
    $(document).ready(function() {
        $('.customer_account_page').each(function(){
            var news_letter = $(this).find('.newsletter_category').show();
            if(news_letter){
                $('.sticky-footer').hide();
            }
        });     
     $(".addressdefaultbtn").each(function (){
         if($(this).find(".js_osc_usr_addrs_rbt").is(":checked")){
             $(this).css('background-color', 'rgb(236,249,232)');
             $(this).parent().siblings('.account-saved-address').css('background-color', 'rgb(236,249,232)');
              $(this).parent().parent('.accountsaved-Addresslist').css('background-color', 'rgb(236,249,232)');
         }else{
         }
     });
     
     $(".addressdefaultbtn").click(function (){
            if($(this).hasClass('defaultShippingAddress')){
                return false;
            }
            $(".addressdefaultbtn, .account-saved-address").css('background-color', '#F2F2F2');   
            $('.accountsaved-Addresslist').css('background-color', '#F2F2F2');
         if($(this).find(".js_osc_usr_addrs_rbt").is(":checked")){
             $(this).css('background-color', 'rgb(236,249,232)');
             $(this).parent().siblings('.account-saved-address').css('background-color', 'rgb(236,249,232)');
             $(this).parent().parent('.accountsaved-Addresslist').css('background-color', 'rgb(236,249,232)');
             var shippingAddressURL = $.trim($(this).attr('rel'));
             if(shippingAddressURL!="" && typeof(shippingAddressURL)!="undefined"){
                 window.location.href = shippingAddressURL;
             }
         }else{
         }
     });
     $(".account-saved-address p:first-child").addClass("subheading-text");
     var savedaddress= $(".row .accountsavedAddresslist").length;
     $("span.saved-addresses-count").text(savedaddress);
     
        
     $(".view-all-tab .showless").click(function(){
        $(this).css('display','none') ;
        $(".account-order-list.grttwo").css('display','none') ;
        $(".view-all-tab .showall").css('display','block');
     });

     
     
     
     $(".errorPage").parent().parent().css('min-height', 'auto');
     
     $( window ).resize(function() {
         nature();
         pdp_zoom_mob();
        if($(window).width() <=375){
          $('.my-account-setting h3.heading').addClass("accordian-heading accordion-toggle").attr("href", "#myacco").attr("data-toggle","collapse").attr("aria-expanded","false");   
          $('.my-account-setting .expanded').addClass("accordian-content collapse").attr("id", "myacco").attr("role", "tabpanel");
          
          $('.preferences h3.heading').addClass("accordian-heading accordion-toggle").attr("href", "#pref").attr("data-toggle","collapse").attr("aria-expanded","false");   
          $('.preferences .expanded').addClass("accordian-content collapse").attr("id", "pref").attr("role", "tabpanel");
         
          $('.deliverydetails h3.heading').addClass("accordian-heading accordion-toggle").attr("href", "#deli").attr("data-toggle","collapse").attr("aria-expanded","false");   
          $('.deliverydetails .expanded').addClass("accordian-content collapse").attr("id", "deli").attr("role", "tabpanel");
        } 
        else{
            
        }
            kidsHealth();
            healPageCarousel();
     });
     
    $(".updatemapData").each(function (){ 
     if($(".updatemapData .active").length > 0 ){
       $(".updatemapData .active").parent(".updatemapData").css('background-color', '#ebf7fe');
       $(".updatemapData .active").parent(".updatemapData").css('border', '1px solid #BAE6FF');
      
     }
    });
     $(".updatemapData").click(function (){ 
       $(".updatemapData ").css('background-color', '#F3F3F3');
         $(".updatemapData").css('border', 'none');
       if($(this).find(".active")){
         $(".updatemapData .active").parent(".updatemapData").css('background-color', '#ebf7fe');
         $(".updatemapData .active").parent(".updatemapData").css('border', '1px solid #BAE6FF');
       }
       
     });
if(!$('body').hasClass('success-page')){     
if(!isMobile()){
        var addressPerPage = 3;
        var currentPage =1;
        
        $(".address-content.row").owlCarousel({
            loop:false,
            autoplay:false,
            dots: false,
            smartSpeed: 500,
            nav: true,
            navText: ["<i class='fa fa-angle-left fa-3x'></i>", "<i class='fa fa-angle-right fa-3x'></i>"],
            responsive:{
                0:{
                  items:addressPerPage
                },
                480:{
                    items:addressPerPage
                },
                500:{
                    items:addressPerPage
                },
                1024:{
                    items:addressPerPage
                }
            }
    });
        
        
 
    var totalQuestions = $('.storeaddressdiv .address-content.row .owl-item').length;
    var $progressbar = $(".storeprogressbar .progress-bar");
    if(addressPerPage==totalQuestions){
        $progressbar.css("width",'100%');
    }else{
        var totalPage = (totalQuestions-addressPerPage)+1;
        var scrollbarWidth = 100/totalPage;
        $progressbar.css("width",scrollbarWidth+'%');
    }

   function storeProgressBar(currentElement){

       if(currentElement=="owl-next"){
            if(!$(".address-content .owl-next").hasClass('disabled')){
                currentPage = currentPage+1;
                var fillScrollbarWidth =  scrollbarWidth*currentPage;
               $progressbar.css("width", fillScrollbarWidth + "%");
          }else{
              if(totalPage==currentPage){
                  return false;
              }
              currentPage = parseInt(currentPage+1);
               var fillScrollbarWidth =  scrollbarWidth*currentPage;
               $progressbar.css("width", fillScrollbarWidth + "%");
          }
       }else if(currentElement=="owl-prev"){

           if(!$(".address-content .owl-prev").hasClass('disabled')){
               currentPage = parseInt(currentPage-1);
               var fillScrollbarWidth =  scrollbarWidth*currentPage;
               $progressbar.css("width", fillScrollbarWidth + "%");
           }else{
               if(currentPage==1){
                   return false;
               }
               currentPage = parseInt(currentPage-1);
               var fillScrollbarWidth =  scrollbarWidth*currentPage;
               $progressbar.css("width", fillScrollbarWidth + "%");
          }
       }

   }

     $(".address-content .owl-next").on("click", function(){   
       storeProgressBar('owl-next');
       
     });
     $(".address-content .owl-prev").on("click", function(){
       storeProgressBar('owl-prev');
     });     
     } 
}
    var globalhight = '';
    $(".address-content.row .item.updatemapData").each(function(){
       var currentheight = $(this).height();
       if(currentheight > globalhight){
          globalhight = currentheight;
       }    
     });
   $(".address-content.row .item.updatemapData").css("height", globalhight);    
     
    
    
    });   
    $(document).ready(function(){
       cartCouponPrice();
        $('#content').each(function(){
            var new_find = $(this).find('.subscriber-container').text();
            if(new_find){  $(this).css('min-height','inherit');  }
        });
       
        $('.selectpicker').selectpicker({
            dropupAuto: false
        });
        
        
        $('#pdp_pincode_tab_1').on('click', function(){
           $('.store-list_panel').removeClass('in');
           $('.data-toggle-arrow').attr('aria-expanded', 'false');
        });
        $('#pdp_pincode_tab_2').on('click', function(){
            $('.pincode_panel').removeClass('in');
            $('.data-toggle-arrow').attr('aria-expanded', 'false');
         });
        $('.addtocartbutton-pdp').on('click', function(){
           if($(window).width() >767){        
            $('html,body').animate({
              scrollTop: $('.product-name-price').offset().top
             }, 500);
         }
//             if(isMobile()){
//              $('html,body').animate({
//              scrollTop: $('.color-swatch').offset().top
//             }, 500);
//         }
//           
//           if($('.pin-delivery span').hasClass('footer_sign_error')){
//            $('html,body').animate({
//                scrollTop: $('.description').offset().top
//             }, 500);
//             $('#pdp_pincode_tab_1 .data-toggle-arrow').attr('aria-expanded', 'true');
//             $('.pincode_panel').addClass('in');
//           }
//           else if($('div').hasClass('message1')){
//            $('html,body').animate({
//                scrollTop: $('.product-name-price').offset().top
//             }, 500);
//           }
      });
        if($('.msgBox').hasClass('s-success')){
            $('.pas').addClass('personal-success-mes');
        }
    });
    
    // Save Button code on My Account page
    $(document).ready(function() { 
        $('#CProSaveButton').show();
        $('#CProEditButton').hide();
    });
   





$(document).ready(function(){
    
    $('.single-product-thumbnails li').on('click', function(){
        var pdp_vid = $(this).hasClass('pdp-thumnail');
        //var index = $(this).index();
        if(pdp_vid){
            var pdpvideosrc = $(this).data("pdpvideosrc");
            var pdpvideoformat = $(this).data("pdpvideoformat");
            var pdpvideoposter = $(this).data("pdpvideoposter");
            var pdp_video_width = $('#detailVideo').data("pdp_video_width");
            var pdp_video_height = $('#detailVideo').data("pdp_video_height"); 
            $('.detail_video').removeClass('hidden');
            $('.detail_img').addClass('hidden');
            $('#detailVideo').html('<video muted  autoplay loop  preload width="'+pdp_video_width+'" height="'+pdp_video_height+'" poster="'+pdpvideoposter+'"><source src="'+pdpvideosrc+'" type="video/'+pdpvideoformat+'"></video><div class="pdp-video-expander"><span></span></div>');
         }
         else{
            $('#detailVideo').addClass('hidden');
            $('.detail_img').removeClass('hidden');
         }
       
    });
        $('.mob-dots-style .mbl-pdp-video').each(function(){
            var pdpvideosrc = $(this).data("pdpvideosrc");
            var pdpvideoformat = $(this).data("pdpvideoformat");
            var pdpvideoposter = $(this).data("pdpvideoposter");
            var pdp_video_width = $(this).data("pdp_video_width");
            var pdp_video_height = $(this).data("pdp_video_height"); 
            $(this).html('<video muted  autoplay loop  preload width="'+pdp_video_width+'" height="'+pdp_video_height+'" poster="'+pdpvideoposter+'"><source src="'+pdpvideosrc+'" type="video/'+pdpvideoformat+'"></video><div class="pdp-video-expander"><span></span></div>');
    
        });
       // Initialize the sliders.  
    $('#pdpzoomslider').Thumbelina({
        orientation:'vertical',
        $bwdBut:$('#pdpzoomslider .top'),    // Selector to left button.
        $fwdBut:$('#pdpzoomslider .bottom')    // Selector to right button.
    });

    $('input[name=coupon_select]').live('change', function () {
        if( $(this).is(':checked')){
            $('.s-error-new').html('');
            $('#appplied_coupon').empty();
            $('#coupan_applied').html('');
            $('.clickable-code1').text('');
            $('#couponcode').val('');
            $("#couponcode").attr('readonly', true);
            $("#couponcode").blur();
            $(".apply").attr("disabled", "disabled");
            $('#coupan_applied').html('<i class="fa fa-circle" aria-hidden="true"></i> Coupon applied');
            $('.clickable-code1').text($("input[name='coupon_select']:checked").val());
            $('.coupon-applied-container').show();
            $('input[name="selected_coupon"]').val($(this).val());
        }
        if($('input[name=coupon_select]').is(':checked')){
            $('#coupon_redemption').submit();
        }
    });
    $('.coupon-remove').live('click', function () {
        $('#appplied_coupon').empty();
        $('.coupon-applied-container').hide();
        $('#coupan_applied').html("");
        $('input[name=coupon_select]').prop("checked", false);
        $('.clickable-code1').text("");
        $('.clickable-code-remove').text("");
        $('#couponcode').val('');
        $("#couponcode").focus();
        $("#couponcode").attr('readonly', false);
        $(".apply").attr("enabled", "enabled");
        $('input[name="selected_coupon"]').val('');
    });
    
    
    $('.loadformfromfooter').append($('.formblock').detach());
});

    function removeVoucher(){
        var actionurl = '/cart/removevoucher/';
            $.ajax({
                    url: actionurl,
                    type: 'post',
                    dataType: 'json',
                    data: $("#coupon_redemption").serialize(),
                    success: function(data) {
                        $('.apply').text('Apply').prop('disabled',false);
                        $('.coupon-popup-inner .s-error-new').remove();
                        $('.coupon-popup-inner .added_coupon_area').remove();                        
                        $('input[name="couponcode"]').val('');
                        $('#appplied_coupon').empty();
                        $('.coupon-applied-container').hide();
                        $('#coupan_applied').html("");
                        $('input[name=coupon_select]').prop("checked", false);
                        $('.clickable-code1').text("");
                        $('.clickable-code-remove').text("");
                        $('.coupon-popup #couponcode').val('');
                        $("#couponcode").focus();
                        $("#couponcode").attr('readonly', false);
                        $(".apply").attr("enabled", "enabled");
                        $('input[name="selected_coupon"]').val('');
                        $('.orderdetails').html(data.html);
                        $('.cart-page-items').html(data.cartItems);
                        $('.fntsizOrderReview').html(data.finalAmount);
                        $('.cart-summary-right').html(data.html);
                        $('.mini-cart-total-wrapper .final_total .sub-toal').html(data.grandtotal);
                                           
                        //Cart page order summary script
                        cartOrderSummary(); 
                        cartCouponPrice();
                    }
            });

    }    


     
$(window).on('scroll', function () {        
        if($('.single-image').length>0){            
                    
                if($(this).scrollTop() > 300) {         
                            $('#detailVideo video, .mbl-pdp-video video').each(function(){   
                                     if(!$(this).get(0).paused){              
                               try{$(this).get(0).pause();}catch(err){}       
                                   }                  
                   });            
                 }
                else{                        
                $('#detailVideo video, .mbl-pdp-video video').each(function(){    
                    if($(this).get(0).paused){  
                        try{    
                            var video = $(this).get(0);   
                            actionVideoPlay(video);   
                        }catch(err){}                       
                     }                                                    
                });                                        }   
             
        }
    });
            function actionVideoPlay(video){
                try {
                   if(video.readyState===4 || video.currentTime>0) {
                       video.play();
                   }
                } catch (err){ }
            }


$(document).on("keyup", ".sendotptonumber", function () {
    var otpmob = $(".sendotptonumber").val();
    if (otpmob.length === 10)
    {
        globalAccount.sendResetRequest();
    }
});


     

$(document).on("keyup", "#contact_number", function (event) {
    var checkMobNumber = $("#contact_number").val();
    if (checkMobNumber.length === 10)
    {
       if($('.checkout_signup_container').is(':visible')){  
        $(this).parent().find('.error').remove();
    }
        contactUniqueValdation();
    }
    else{
        $('#contact_unique_error').hide();
    }
});
   function  contactUniqueValdation () {
        
            var contact = $("#contact_number").val();
            if ($.isNumeric(contact) && contact.length === 10)
            {
                var url = '/customer/account/ValidateMobileNumber';
                var token = $('input[name="YII_CSRF_TOKEN"]').val();
                var data = {YII_CSRF_TOKEN: token, phone: contact};
                $.ajax({
                    type: "GET",
                    url: url,
                    dataType: 'json',
                    data: data,
                    success: function (data) {
                        var msg = data.msg;
                        var flag = data.status; 
                        $("#contact_unique_error").removeClass('success-msg error-msg');
                        $("#contact_unique_error").html('').hide();
                        $('.checkout_sign_Up #contact_unique_error').html('');
                       
                        if (flag) {
                            $("#otp_generation").prop('disabled',false);
                            
                        } else {
                            $("#otp_generation").prop('disabled',true);
                            if($('.checkout_signup_container').is(':visible')){
                            if ($('.checkout_sign_Up #contact_number').siblings('#contact_unique_error').length <= 0) {
                                $('.checkout_sign_Up #contact_number').parent().append('<span id="contact_unique_error"></span>');
                            }
                            $("#contact_unique_error").addClass("error-msg");
                        }
                        }
                        $("#contact_unique_error").addClass("error-msg");
                        $("#contact_unique_error").html(msg).show();
                    },
                    error: function (data) {
                        console.log(data);
                    } 
                });
            }
        }
    
$(document).on("blur", ".shipping-emailid", function () {
        uniqueEmailValidation();
    });
    function uniqueEmailValidation () {
        
        var email = $(".shipping-emailid").val();
        var url = '/customer/account/ValidateUniqueEmail';
        var token = $('input[name="YII_CSRF_TOKEN"]').val();
        var data = {YII_CSRF_TOKEN: token, email: email};
        $.ajax({
            type: "GET",
            url: url,
            dataType: 'json',
            data: data,
            success: function (data) {
                var msg = data.msg;
                var flag = data.status;
                $("#contact_unique_error").removeClass('success-msg error-msg');
                $("#contact_unique_error").html('').hide();
                if (flag) {
                    $("#ShippingAddressForm_email_em_").removeClass("error");
                    //$("#contact_unique_error").addClass("success-msg");
                } else {
                    $("#ShippingAddressForm_email_em_").addClass("error");
                
                    if ($('.shipping-input.input-email').find('#contact_unique_error').length <= 0) {
                        $('.shipping-input.input-email').append('<span id="contact_unique_error"></span>');
                    }
                    $("#contact_unique_error").addClass("error-msg");
                }
                $("#contact_unique_error").html(msg).show();
            },
            error: function (data) {
                console.log(data);
            }
        });
    }

// Easy Responsive Tabs Plugin
// Author: Samson.Onna <Email : samson3d@gmail.com> 
(function ($) {
    $.fn.extend({
        easyResponsiveTabs: function (options) {
            //Set the default values, use comma to separate the settings, example:
            var defaults = {
                type: 'default', //default, vertical, accordion;
                width: 'auto',
                fit: true,
                closed: false,
                tabidentify: '',
                activetab_bg: 'white',
                inactive_bg: '#F5F5F5',
                active_border_color: '#c1c1c1',
                active_content_border_color: '#c1c1c1',
                activate: function () {
                }
            }
            //Variables
            var options = $.extend(defaults, options);
            var opt = options, jtype = opt.type, jfit = opt.fit, jwidth = opt.width, vtabs = 'vertical', accord = 'accordion';
            var hash = window.location.hash;
            var historyApi = !!(window.history && history.replaceState);

            //Events
            $(this).bind('tabactivate', function (e, currentTab) {
                if (typeof options.activate === 'function') {
                    options.activate.call(currentTab, e)
                }
            });

            //Main function
            this.each(function () {
                var $respTabs = $(this);
                var $respTabsList = $respTabs.find('ul.resp-tabs-list.' + options.tabidentify);
                var respTabsId = $respTabs.attr('id');
                $respTabs.find('ul.resp-tabs-list.' + options.tabidentify + ' li').addClass('resp-tab-item').addClass(options.tabidentify);
                $respTabs.css({
                    'display': 'block',
                    'width': jwidth
                });

                if (options.type == 'vertical')
                    $respTabsList.css('margin-top', '3px');

                $respTabs.find('.resp-tabs-container.' + options.tabidentify).css('border-color', options.active_content_border_color);
                $respTabs.find('.resp-tabs-container.' + options.tabidentify + ' > div').addClass('resp-tab-content').addClass(options.tabidentify);
                jtab_options();
                //Properties Function
                function jtab_options() {
                    if (jtype == vtabs) {
                        $respTabs.addClass('resp-vtabs').addClass(options.tabidentify);
                    }
                    if (jfit == true) {
                        $respTabs.css({ width: '100%', margin: '0px' });
                    }
                    if (jtype == accord) {
                        $respTabs.addClass('resp-easy-accordion').addClass(options.tabidentify);
                        $respTabs.find('.resp-tabs-list').css('display', 'none');
                    }
                }

                //Assigning the h2 markup to accordion title
                var $tabItemh2;
                $respTabs.find('.resp-tab-content.' + options.tabidentify).before("<h2 class='resp-accordion " + options.tabidentify + "' role='tab'><span class='resp-arrow'></span></h2>");

                $respTabs.find('.resp-tab-content.' + options.tabidentify).prev("h2").css({
                    'background-color': options.inactive_bg,
                    'border-color': options.active_border_color
                });

                var itemCount = 0;
                $respTabs.find('.resp-accordion').each(function () {
                    $tabItemh2 = $(this);
                    var $tabItem = $respTabs.find('.resp-tab-item:eq(' + itemCount + ')');
                    var $accItem = $respTabs.find('.resp-accordion:eq(' + itemCount + ')');
                    $accItem.append($tabItem.html());
                    $accItem.data($tabItem.data());
                    $tabItemh2.attr('aria-controls', options.tabidentify + '_tab_item-' + (itemCount));
                    itemCount++;
                });

                //Assigning the 'aria-controls' to Tab items
                var count = 0,
                    $tabContent;
                $respTabs.find('.resp-tab-item').each(function () {
                    $tabItem = $(this);
                    $tabItem.attr('aria-controls', options.tabidentify + '_tab_item-' + (count));
                    $tabItem.attr('role', 'tab');
                    $tabItem.css({
                        'background-color': options.inactive_bg,
                        'border-color': 'none'
                    });

                    //Assigning the 'aria-labelledby' attr to tab-content
                    var tabcount = 0;
                    $respTabs.find('.resp-tab-content.' + options.tabidentify).each(function () {
                        $tabContent = $(this);
                        $tabContent.attr('aria-labelledby', options.tabidentify + '_tab_item-' + (tabcount)).css({
                            'border-color': options.active_border_color
                        });
                        tabcount++;
                    });
                    count++;
                });

                // Show correct content area
                var tabNum = 0;
                if (hash != '') {
                    var matches = hash.match(new RegExp(respTabsId + "([0-9]+)"));
                    if (matches !== null && matches.length === 2) {
                        tabNum = parseInt(matches[1], 10) - 1;
                        if (tabNum > count) {
                            tabNum = 0;
                        }
                    }
                }

                //Active correct tab
                $($respTabs.find('.resp-tab-item.' + options.tabidentify)[tabNum]).addClass('resp-tab-active').css({
                    'background-color': options.activetab_bg,
                    'border-color': options.active_border_color
                });

                //keep closed if option = 'closed' or option is 'accordion' and the element is in accordion mode
                if (options.closed !== true && !(options.closed === 'accordion' && !$respTabsList.is(':visible')) && !(options.closed === 'tabs' && $respTabsList.is(':visible'))) {
                    $($respTabs.find('.resp-accordion.' + options.tabidentify)[tabNum]).addClass('resp-tab-active').css({
                        'background-color': options.activetab_bg + ' !important',
                        'border-color': options.active_border_color,
                        'background': 'none'
                    });

                    $($respTabs.find('.resp-tab-content.' + options.tabidentify)[tabNum]).addClass('resp-tab-content-active').addClass(options.tabidentify).attr('style', 'display:block');
                }
                //assign proper classes for when tabs mode is activated before making a selection in accordion mode
                else {
                   // $($respTabs.find('.resp-tab-content.' + options.tabidentify)[tabNum]).addClass('resp-accordion-closed'); //removed resp-tab-content-active
                }

                //Tab Click action function
                $respTabs.find("[role=tab]").each(function () {

                    var $currentTab = $(this);
                    $currentTab.click(function () {

                        var $currentTab = $(this);
                        var $tabAria = $currentTab.attr('aria-controls');

                        if ($currentTab.hasClass('resp-accordion') && $currentTab.hasClass('resp-tab-active')) {
                            $respTabs.find('.resp-tab-content-active.' + options.tabidentify).slideUp('', function () {
                                $(this).addClass('resp-accordion-closed');
                            });
                            $currentTab.removeClass('resp-tab-active').css({
                                'background-color': options.inactive_bg,
                                'border-color': 'none'
                            });
                            return false;
                        }
                        if (!$currentTab.hasClass('resp-tab-active') && $currentTab.hasClass('resp-accordion')) {
                            $respTabs.find('.resp-tab-active.' + options.tabidentify).removeClass('resp-tab-active').css({
                                'background-color': options.inactive_bg,
                                'border-color': 'none'
                            });
                            $respTabs.find('.resp-tab-content-active.' + options.tabidentify).slideUp().removeClass('resp-tab-content-active resp-accordion-closed');
                            $respTabs.find("[aria-controls=" + $tabAria + "]").addClass('resp-tab-active').css({
                                'background-color': options.activetab_bg,
                                'border-color': options.active_border_color
                            });

                            $respTabs.find('.resp-tab-content[aria-labelledby = ' + $tabAria + '].' + options.tabidentify).slideDown().addClass('resp-tab-content-active');
                        } else {
                            console.log('here');
                            $respTabs.find('.resp-tab-active.' + options.tabidentify).removeClass('resp-tab-active').css({
                                'background-color': options.inactive_bg,
                                'border-color': 'none'
                            });

                            $respTabs.find('.resp-tab-content-active.' + options.tabidentify).removeAttr('style').removeClass('resp-tab-content-active').removeClass('resp-accordion-closed');

                            $respTabs.find("[aria-controls=" + $tabAria + "]").addClass('resp-tab-active').css({
                                'background-color': options.activetab_bg,
                                'border-color': options.active_border_color
                            });

                            $respTabs.find('.resp-tab-content[aria-labelledby = ' + $tabAria + '].' + options.tabidentify).addClass('resp-tab-content-active').attr('style', 'display:block');
                        }
                        //Trigger tab activation event
                        $currentTab.trigger('tabactivate', $currentTab);

                        //Update Browser History
                        if (historyApi) {
                            var currentHash = window.location.hash;
                            var tabAriaParts = $tabAria.split('tab_item-');
                            if($(window).width() > 767){
                                var newHash = $(this).attr('id');
                            } else {
                                var newHash = $('li.resp-tab-item.accordion_1[aria-controls="'+$(this).attr('aria-controls')+'"]').attr('id');
                            }
                            if (currentHash != "") {
                                var re = new RegExp(respTabsId + "[0-9]+");
                                if (currentHash.match(re) != null) {
                                    newHash = currentHash.replace(re, newHash);
                                }
                                else {
                                    newHash = '#' + newHash;
                                }
                            }
                            else {
                                newHash = '#' + newHash;
                            }

                            history.replaceState(null, null, newHash);
                        }
                    });

                });

                //Window resize function                   
                $(window).resize(function () {
                    $respTabs.find('.resp-accordion-closed').removeAttr('style');
                });
            });
        }
    });
})(jQuery);


/////    /////    /////    /////
/////    /////    /////    /////
/////    /////    /////    /////
/////    /////    /////    /////
/////             /////    /////
/////             /////    /////
/////    /////    /////    /////
/////    /////    /////    /////
         /////    /////
         /////    /////
/////    /////    /////    /////
/////    /////    /////    /////
/////    /////    /////    /////
/////    /////    /////    /////



;(function () {
  'use strict'

  var sr
  var _requestAnimationFrame

  function ScrollReveal (config) {
    // Support instantiation without the `new` keyword.
    if (typeof this === 'undefined' || Object.getPrototypeOf(this) !== ScrollReveal.prototype) {
      return new ScrollReveal(config)
    }

    sr = this // Save reference to instance.
    sr.version = '3.3.6'
    sr.tools = new Tools() // *required utilities

    if (sr.isSupported()) {
      sr.tools.extend(sr.defaults, config || {})

      sr.defaults.container = _resolveContainer(sr.defaults)

      sr.store = {
        elements: {},
        containers: []
      }

      sr.sequences = {}
      sr.history = []
      sr.uid = 0
      sr.initialized = false
    } else if (typeof console !== 'undefined' && console !== null) {
      // Note: IE9 only supports console if devtools are open.
      console.log('ScrollReveal is not supported in this browser.')
    }

    return sr
  }

  

  ScrollReveal.prototype.defaults = {
    // 'bottom', 'left', 'top', 'right'
    origin: 'bottom',

    // Can be any valid CSS distance, e.g. '5rem', '10%', '20vw', etc.
    distance: '20px',

    // Time in milliseconds.
    duration: 500,
    delay: 0,

    // Starting angles in degrees, will transition from these values to 0 in all axes.
    rotate: { x: 0, y: 0, z: 0 },

    // Starting opacity value, before transitioning to the computed opacity.
    opacity: 0,

    // Starting scale value, will transition from this value to 1
    scale: 0.9,

    // Accepts any valid CSS easing, e.g. 'ease', 'ease-in-out', 'linear', etc.
    easing: 'cubic-bezier(0.6, 0.2, 0.1, 1)',

    // `<html>` is the default reveal container. You can pass either:
    // DOM Node, e.g. document.querySelector('.fooContainer')
    // Selector, e.g. '.fooContainer'
    container: window.document.documentElement,

    // true/false to control reveal animations on mobile.
    mobile: true,

    // true:  reveals occur every time elements become visible
    // false: reveals occur once as elements become visible
    reset: false,

    // 'always' — delay for all reveal animations
    // 'once'   — delay only the first time reveals occur
    // 'onload' - delay only for animations triggered by first load
    useDelay: 'always',

    // Change when an element is considered in the viewport. The default value
    // of 0.20 means 20% of an element must be visible for its reveal to occur.
    viewFactor: 0.2,

    // Pixel values that alter the container boundaries.
    // e.g. Set `{ top: 48 }`, if you have a 48px tall fixed toolbar.
    // --
    // Visual Aid: https://scrollrevealjs.org/assets/viewoffset.png
    viewOffset: { top: 0, right: 0, bottom: 0, left: 0 },

    // Callbacks that fire for each triggered element reveal, and reset.
    beforeReveal: function (domEl) {},
    beforeReset: function (domEl) {},

    // Callbacks that fire for each completed element reveal, and reset.
    afterReveal: function (domEl) {},
    afterReset: function (domEl) {}
  }

  
  ScrollReveal.prototype.isSupported = function () {
    var style = document.documentElement.style
    return 'WebkitTransition' in style && 'WebkitTransform' in style ||
      'transition' in style && 'transform' in style
  }

  
  ScrollReveal.prototype.reveal = function (target, config, interval, sync) {
    var container
    var elements
    var elem
    var elemId
    var sequence
    var sequenceId

    // No custom configuration was passed, but a sequence interval instead.
    // let’s shuffle things around to make sure everything works.
    if (config !== undefined && typeof config === 'number') {
      interval = config
      config = {}
    } else if (config === undefined || config === null) {
      config = {}
    }

    container = _resolveContainer(config)
    elements = _getRevealElements(target, container)

    if (!elements.length) {
      console.log('ScrollReveal: reveal on "' + target + '" failed, no elements found.')
      return sr
    }

    // Prepare a new sequence if an interval is passed.
    if (interval && typeof interval === 'number') {
      sequenceId = _nextUid()

      sequence = sr.sequences[sequenceId] = {
        id: sequenceId,
        interval: interval,
        elemIds: [],
        active: false
      }
    }

    // Begin main loop to configure ScrollReveal elements.
    for (var i = 0; i < elements.length; i++) {
      // Check if the element has already been configured and grab it from the store.
      elemId = elements[i].getAttribute('data-sr-id')
      if (elemId) {
        elem = sr.store.elements[elemId]
      } else {
        // Otherwise, let’s do some basic setup.
        elem = {
          id: _nextUid(),
          domEl: elements[i],
          seen: false,
          revealing: false
        }
        elem.domEl.setAttribute('data-sr-id', elem.id)
      }

      // Sequence only setup
      if (sequence) {
        elem.sequence = {
          id: sequence.id,
          index: sequence.elemIds.length
        }

        sequence.elemIds.push(elem.id)
      }

      // New or existing element, it’s time to update its configuration, styles,
      // and send the updates to our store.
      _configure(elem, config, container)
      _style(elem)
      _updateStore(elem)

      // We need to make sure elements are set to visibility: visible, even when
      // on mobile and `config.mobile === false`, or if unsupported.
      if (sr.tools.isMobile() && !elem.config.mobile || !sr.isSupported()) {
        elem.domEl.setAttribute('style', elem.styles.inline)
        elem.disabled = true
      } else if (!elem.revealing) {
        // Otherwise, proceed normally.
        elem.domEl.setAttribute('style',
          elem.styles.inline +
          elem.styles.transform.initial
        )
      }
    }

    // Each `reveal()` is recorded so that when calling `sync()` while working
    // with asynchronously loaded content, it can re-trace your steps but with
    // all your new elements now in the DOM.

    // Since `reveal()` is called internally by `sync()`, we don’t want to
    // record or intiialize each reveal during syncing.
    if (!sync && sr.isSupported()) {
      _record(target, config, interval)

      // We push initialization to the event queue using setTimeout, so that we can
      // give ScrollReveal room to process all reveal calls before putting things into motion.
      // --
      // Philip Roberts - What the heck is the event loop anyway? (JSConf EU 2014)
      // https://www.youtube.com/watch?v=8aGhZQkoFbQ
      if (sr.initTimeout) {
        window.clearTimeout(sr.initTimeout)
      }
      sr.initTimeout = window.setTimeout(_init, 0)
    }

    return sr
  }

  
  ScrollReveal.prototype.sync = function () {
    if (sr.history.length && sr.isSupported()) {
      for (var i = 0; i < sr.history.length; i++) {
        var record = sr.history[i]
        sr.reveal(record.target, record.config, record.interval, true)
      }
      _init()
    } else {
      console.log('ScrollReveal: sync failed, no reveals found.')
    }
    return sr
  }

  

  function _resolveContainer (config) {
    if (config && config.container) {
      if (typeof config.container === 'string') {
        return window.document.documentElement.querySelector(config.container)
      } else if (sr.tools.isNode(config.container)) {
        return config.container
      } else {
        console.log('ScrollReveal: invalid container "' + config.container + '" provided.')
        console.log('ScrollReveal: falling back to default container.')
      }
    }
    return sr.defaults.container
  }

  
  function _getRevealElements (target, container) {
    if (typeof target === 'string') {
      return Array.prototype.slice.call(container.querySelectorAll(target))
    } else if (sr.tools.isNode(target)) {
      return [target]
    } else if (sr.tools.isNodeList(target)) {
      return Array.prototype.slice.call(target)
    }
    return []
  }

  
  function _nextUid () {
    return ++sr.uid
  }

  function _configure (elem, config, container) {
    // If a container was passed as a part of the config object,
    // let’s overwrite it with the resolved container passed in.
    if (config.container) config.container = container
    // If the element hasn’t already been configured, let’s use a clone of the
    // defaults extended by the configuration passed as the second argument.
    if (!elem.config) {
      elem.config = sr.tools.extendClone(sr.defaults, config)
    } else {
      // Otherwise, let’s use a clone of the existing element configuration extended
      // by the configuration passed as the second argument.
      elem.config = sr.tools.extendClone(elem.config, config)
    }

    // Infer CSS Transform axis from origin string.
    if (elem.config.origin === 'top' || elem.config.origin === 'bottom') {
      elem.config.axis = 'Y'
    } else {
      elem.config.axis = 'X'
    }
  }

  function _style (elem) {
    var computed = window.getComputedStyle(elem.domEl)

    if (!elem.styles) {
      elem.styles = {
        transition: {},
        transform: {},
        computed: {}
      }

      // Capture any existing inline styles, and add our visibility override.
      // --
      // See section 4.2. in the Documentation:
      // https://github.com/jlmakes/scrollreveal.js#42-improve-user-experience
      elem.styles.inline = elem.domEl.getAttribute('style') || ''
      elem.styles.inline += '; visibility: visible; '

      // grab the elements existing opacity.
      elem.styles.computed.opacity = computed.opacity

      // grab the elements existing transitions.
      if (!computed.transition || computed.transition === 'all 0s ease 0s') {
        elem.styles.computed.transition = ''
      } else {
        elem.styles.computed.transition = computed.transition + ', '
      }
    }

    // Create transition styles
    elem.styles.transition.instant = _generateTransition(elem, 0)
    elem.styles.transition.delayed = _generateTransition(elem, elem.config.delay)

    // Generate transform styles, first with the webkit prefix.
    elem.styles.transform.initial = ' -webkit-transform:'
    elem.styles.transform.target = ' -webkit-transform:'
    _generateTransform(elem)

    // And again without any prefix.
    elem.styles.transform.initial += 'transform:'
    elem.styles.transform.target += 'transform:'
    _generateTransform(elem)
  }

  function _generateTransition (elem, delay) {
    var config = elem.config

    return '-webkit-transition: ' + elem.styles.computed.transition +
      '-webkit-transform ' + config.duration / 1000 + 's ' +
      config.easing + ' ' +
      delay / 1000 + 's, opacity ' +
      config.duration / 1000 + 's ' +
      config.easing + ' ' +
      delay / 1000 + 's; ' +

      'transition: ' + elem.styles.computed.transition +
      'transform ' + config.duration / 1000 + 's ' +
      config.easing + ' ' +
      delay / 1000 + 's, opacity ' +
      config.duration / 1000 + 's ' +
      config.easing + ' ' +
      delay / 1000 + 's; '
  }

  function _generateTransform (elem) {
    var config = elem.config
    var cssDistance
    var transform = elem.styles.transform

    // Let’s make sure our our pixel distances are negative for top and left.
    // e.g. origin = 'top' and distance = '25px' starts at `top: -25px` in CSS.
    if (config.origin === 'top' || config.origin === 'left') {
      cssDistance = /^-/.test(config.distance)
        ? config.distance.substr(1)
        : '-' + config.distance
    } else {
      cssDistance = config.distance
    }

    if (parseInt(config.distance)) {
      transform.initial += ' translate' + config.axis + '(' + cssDistance + ')'
      transform.target += ' translate' + config.axis + '(0)'
    }
    if (config.scale) {
      transform.initial += ' scale(' + config.scale + ')'
      transform.target += ' scale(1)'
    }
    if (config.rotate.x) {
      transform.initial += ' rotateX(' + config.rotate.x + 'deg)'
      transform.target += ' rotateX(0)'
    }
    if (config.rotate.y) {
      transform.initial += ' rotateY(' + config.rotate.y + 'deg)'
      transform.target += ' rotateY(0)'
    }
    if (config.rotate.z) {
      transform.initial += ' rotateZ(' + config.rotate.z + 'deg)'
      transform.target += ' rotateZ(0)'
    }
    transform.initial += '; opacity: ' + config.opacity + ';'
    transform.target += '; opacity: ' + elem.styles.computed.opacity + ';'
  }

  function _updateStore (elem) {
    var container = elem.config.container

    // If this element’s container isn’t already in the store, let’s add it.
    if (container && sr.store.containers.indexOf(container) === -1) {
      sr.store.containers.push(elem.config.container)
    }

    // Update the element stored with our new element.
    sr.store.elements[elem.id] = elem
  }

  function _record (target, config, interval) {
    // Save the `reveal()` arguments that triggered this `_record()` call, so we
    // can re-trace our steps when calling the `sync()` method.
    var record = {
      target: target,
      config: config,
      interval: interval
    }
    sr.history.push(record)
  }

  function _init () {
    if (sr.isSupported()) {
      // Initial animate call triggers valid reveal animations on first load.
      // Subsequent animate calls are made inside the event handler.
      _animate()

      // Then we loop through all container nodes in the store and bind event
      // listeners to each.
      for (var i = 0; i < sr.store.containers.length; i++) {
        sr.store.containers[i].addEventListener('scroll', _handler)
        sr.store.containers[i].addEventListener('resize', _handler)
      }

      // Let’s also do a one-time binding of window event listeners.
      if (!sr.initialized) {
        window.addEventListener('scroll', _handler)
        window.addEventListener('resize', _handler)
        sr.initialized = true
      }
    }
    return sr
  }

  function _handler () {
    _requestAnimationFrame(_animate)
  }

  function _setActiveSequences () {
    var active
    var elem
    var elemId
    var sequence

    // Loop through all sequences
    sr.tools.forOwn(sr.sequences, function (sequenceId) {
      sequence = sr.sequences[sequenceId]
      active = false

      // For each sequenced elemenet, let’s check visibility and if
      // any are visible, set it’s sequence to active.
      for (var i = 0; i < sequence.elemIds.length; i++) {
        elemId = sequence.elemIds[i]
        elem = sr.store.elements[elemId]
        if (_isElemVisible(elem) && !active) {
          active = true
        }
      }

      sequence.active = active
    })
  }

  function _animate () {
    var delayed
    var elem

    _setActiveSequences()

    // Loop through all elements in the store
    sr.tools.forOwn(sr.store.elements, function (elemId) {
      elem = sr.store.elements[elemId]
      delayed = _shouldUseDelay(elem)

      // Let’s see if we should revealand if so,
      // trigger the `beforeReveal` callback and
      // determine whether or not to use delay.
      if (_shouldReveal(elem)) {
        elem.config.beforeReveal(elem.domEl)
        if (delayed) {
          elem.domEl.setAttribute('style',
            elem.styles.inline +
            elem.styles.transform.target +
            elem.styles.transition.delayed
          )
        } else {
          elem.domEl.setAttribute('style',
            elem.styles.inline +
            elem.styles.transform.target +
            elem.styles.transition.instant
          )
        }

        // Let’s queue the `afterReveal` callback
        // and mark the element as seen and revealing.
        _queueCallback('reveal', elem, delayed)
        elem.revealing = true
        elem.seen = true

        if (elem.sequence) {
          _queueNextInSequence(elem, delayed)
        }
      } else if (_shouldReset(elem)) {
        //Otherwise reset our element and
        // trigger the `beforeReset` callback.
        elem.config.beforeReset(elem.domEl)
        elem.domEl.setAttribute('style',
          elem.styles.inline +
          elem.styles.transform.initial +
          elem.styles.transition.instant
        )
        // And queue the `afterReset` callback.
        _queueCallback('reset', elem)
        elem.revealing = false
      }
    })
  }

  function _queueNextInSequence (elem, delayed) {
    var elapsed = 0
    var delay = 0
    var sequence = sr.sequences[elem.sequence.id]

    // We’re processing a sequenced element, so let's block other elements in this sequence.
    sequence.blocked = true

    // Since we’re triggering animations a part of a sequence after animations on first load,
    // we need to check for that condition and explicitly add the delay to our timer.
    if (delayed && elem.config.useDelay === 'onload') {
      delay = elem.config.delay
    }

    // If a sequence timer is already running, capture the elapsed time and clear it.
    if (elem.sequence.timer) {
      elapsed = Math.abs(elem.sequence.timer.started - new Date())
      window.clearTimeout(elem.sequence.timer)
    }

    // Start a new timer.
    elem.sequence.timer = { started: new Date() }
    elem.sequence.timer.clock = window.setTimeout(function () {
      // Sequence interval has passed, so unblock the sequence and re-run the handler.
      sequence.blocked = false
      elem.sequence.timer = null
      _handler()
    }, Math.abs(sequence.interval) + delay - elapsed)
  }

  function _queueCallback (type, elem, delayed) {
    var elapsed = 0
    var duration = 0
    var callback = 'after'

    // Check which callback we’re working with.
    switch (type) {
      case 'reveal':
        duration = elem.config.duration
        if (delayed) {
          duration += elem.config.delay
        }
        callback += 'Reveal'
        break

      case 'reset':
        duration = elem.config.duration
        callback += 'Reset'
        break
    }

    // If a timer is already running, capture the elapsed time and clear it.
    if (elem.timer) {
      elapsed = Math.abs(elem.timer.started - new Date())
      window.clearTimeout(elem.timer.clock)
    }

    // Start a new timer.
    elem.timer = { started: new Date() }
    elem.timer.clock = window.setTimeout(function () {
      // The timer completed, so let’s fire the callback and null the timer.
      elem.config[callback](elem.domEl)
      elem.timer = null
    }, duration - elapsed)
  }

  function _shouldReveal (elem) {
    if (elem.sequence) {
      var sequence = sr.sequences[elem.sequence.id]
      return sequence.active &&
        !sequence.blocked &&
        !elem.revealing &&
        !elem.disabled
    }
    return _isElemVisible(elem) &&
      !elem.revealing &&
      !elem.disabled
  }

  function _shouldUseDelay (elem) {
    var config = elem.config.useDelay
    return config === 'always' ||
      (config === 'onload' && !sr.initialized) ||
      (config === 'once' && !elem.seen)
  }

  function _shouldReset (elem) {
    if (elem.sequence) {
      var sequence = sr.sequences[elem.sequence.id]
      return !sequence.active &&
        elem.config.reset &&
        elem.revealing &&
        !elem.disabled
    }
    return !_isElemVisible(elem) &&
      elem.config.reset &&
      elem.revealing &&
      !elem.disabled
  }

  function _getContainer (container) {
    return {
      width: container.clientWidth,
      height: container.clientHeight
    }
  }

  function _getScrolled (container) {
    // Return the container scroll values, plus the its offset.
    if (container && container !== window.document.documentElement) {
      var offset = _getOffset(container)
      return {
        x: container.scrollLeft + offset.left,
        y: container.scrollTop + offset.top
      }
    } else {
      // Otherwise, default to the window object’s scroll values.
      return {
        x: window.pageXOffset,
        y: window.pageYOffset
      }
    }
  }

  function _getOffset (domEl) {
    var offsetTop = 0
    var offsetLeft = 0

      // Grab the element’s dimensions.
    var offsetHeight = domEl.offsetHeight
    var offsetWidth = domEl.offsetWidth

    // Now calculate the distance between the element and its parent, then
    // again for the parent to its parent, and again etc... until we have the
    // total distance of the element to the document’s top and left origin.
    do {
      if (!isNaN(domEl.offsetTop)) {
        offsetTop += domEl.offsetTop
      }
      if (!isNaN(domEl.offsetLeft)) {
        offsetLeft += domEl.offsetLeft
      }
      domEl = domEl.offsetParent
    } while (domEl)

    return {
      top: offsetTop,
      left: offsetLeft,
      height: offsetHeight,
      width: offsetWidth
    }
  }

  function _isElemVisible (elem) {
    var offset = _getOffset(elem.domEl)
    var container = _getContainer(elem.config.container)
    var scrolled = _getScrolled(elem.config.container)
    var vF = elem.config.viewFactor

      // Define the element geometry.
    var elemHeight = offset.height
    var elemWidth = offset.width
    var elemTop = offset.top
    var elemLeft = offset.left
    var elemBottom = elemTop + elemHeight
    var elemRight = elemLeft + elemWidth

    return confirmBounds() || isPositionFixed()

    function confirmBounds () {
      // Define the element’s functional boundaries using its view factor.
      var top = elemTop + elemHeight * vF
      var left = elemLeft + elemWidth * vF
      var bottom = elemBottom - elemHeight * vF
      var right = elemRight - elemWidth * vF

      // Define the container functional boundaries using its view offset.
      var viewTop = scrolled.y + elem.config.viewOffset.top
      var viewLeft = scrolled.x + elem.config.viewOffset.left
      var viewBottom = scrolled.y - elem.config.viewOffset.bottom + container.height
      var viewRight = scrolled.x - elem.config.viewOffset.right + container.width

      return top < viewBottom &&
        bottom > viewTop &&
        left < viewRight &&
        right > viewLeft
    }

    function isPositionFixed () {
      return (window.getComputedStyle(elem.domEl).position === 'fixed')
    }
  }

  

  function Tools () {}

  Tools.prototype.isObject = function (object) {
    return object !== null && typeof object === 'object' && object.constructor === Object
  }

  Tools.prototype.isNode = function (object) {
    return typeof window.Node === 'object'
      ? object instanceof window.Node
      : object && typeof object === 'object' &&
        typeof object.nodeType === 'number' &&
        typeof object.nodeName === 'string'
  }

  Tools.prototype.isNodeList = function (object) {
    var prototypeToString = Object.prototype.toString.call(object)
    var regex = /^\[object (HTMLCollection|NodeList|Object)\]$/

    return typeof window.NodeList === 'object'
      ? object instanceof window.NodeList
      : object && typeof object === 'object' &&
        regex.test(prototypeToString) &&
        typeof object.length === 'number' &&
        (object.length === 0 || this.isNode(object[0]))
  }

  Tools.prototype.forOwn = function (object, callback) {
    if (!this.isObject(object)) {
      throw new TypeError('Expected "object", but received "' + typeof object + '".')
    } else {
      for (var property in object) {
        if (object.hasOwnProperty(property)) {
          callback(property)
        }
      }
    }
  }

  Tools.prototype.extend = function (target, source) {
    this.forOwn(source, function (property) {
      if (this.isObject(source[property])) {
        if (!target[property] || !this.isObject(target[property])) {
          target[property] = {}
        }
        this.extend(target[property], source[property])
      } else {
        target[property] = source[property]
      }
    }.bind(this))
    return target
  }

  Tools.prototype.extendClone = function (target, source) {
    return this.extend(this.extend({}, target), source)
  }

  Tools.prototype.isMobile = function () {
    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
  }

  

  _requestAnimationFrame = window.requestAnimationFrame ||
    window.webkitRequestAnimationFrame ||
    window.mozRequestAnimationFrame ||
    function (callback) {
      window.setTimeout(callback, 1000 / 60)
    }

  
  if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {
    define(function () {
      return ScrollReveal
    })
  } else if (typeof module !== 'undefined' && module.exports) {
    module.exports = ScrollReveal
  } else {
    window.ScrollReveal = ScrollReveal
  }
})();


;(function($) {
    $.fn.Thumbelina = function(settings) {
        var $container = this,      // Handy reference to container.
            $list = $('ul',this),   // Handy reference to the list element.
            moveDir = 0,            // Current direction of movement.
            pos = 0,                // Current actual position.
            destPos = 0,            // Current destination position.
            listDimension = 0,      // Size (width or height depending on orientation) of list element.
            idle = 0,
            outerFunc,
            orientData;              // Stores function calls and CSS attribute for horiz or vert mode.
        
        // Add thumblina CSS class, and create an inner wrapping container, within which the list will slide with overflow hidden.
        $list.addClass('thumbelina').wrap('<div style="position:absolute;overflow:hidden;width:100%;height:100%;">');
        // Create settings by merging user settings into defaults.
        settings = $.extend({}, $.fn.Thumbelina.defaults, settings);
        
        // Depending on vertical or horizontal, get functions to call and CSS attribute to change.
        if(settings.orientation === 'vertical') 
            orientData = {outerSizeFunc:  'outerHeight', cssAttr: 'top', display: 'block'};
        else
            orientData = {outerSizeFunc:  'outerWidth', cssAttr: 'left', display: 'inline-block'};
       
        // Apply display type of list items.
        $('li',$list).css({display: orientData.display});
        
        // Function to bind events to buttons.
        var bindButEvents = function($elem,dir) {
            $elem.bind('mousedown mouseup touchend touchstart',function(evt) {
                if (evt.type==='mouseup' || evt.type==='touchend') moveDir = 0;
                else moveDir = dir;
                return false;
            });
        };
        
        // Bind the events.
        bindButEvents(settings.$bwdBut,1);
        bindButEvents(settings.$fwdBut,-1);
        
        // Store ref to outerWidth() or outerHeight() function.
        outerFunc = orientData.outerSizeFunc; 
   
        // Function to animate. Moves the list element inside the container.
        // Does various bounds checks.
        var animate = function() {
            var minPos;
            
            // If no movement or resize for 100 cycles, then go into 'idle' mode to save CPU.
            if (!moveDir && pos === destPos && listDimension === $container[outerFunc]() ) {  
                idle++;
                if (idle>100) return;
            }else {
                 // Make a note of current size for idle comparison next cycle.
                listDimension = $container[outerFunc]();
                idle = 0;
            }
          
            // Update destination pos.
            destPos += settings.maxSpeed * moveDir;
     
            // Work out minimum scroll position.
            // This will also cause the thumbs to drag back out again when increasing container size.
            minPos = listDimension - $list[outerFunc]();
            
          
            // Minimum pos should always be <= 0;
            if (minPos > 0) minPos = 0;
            // Bounds check (maximum advance i.e list moving left/up)
            if (destPos < minPos) destPos = minPos;
            // Bounds check (maximum retreat i.e list moving right/down)
            if (destPos>0) destPos = 0;
            
            // Disable/enable buttons depending min/max extents.
            if (destPos === minPos) settings.$fwdBut.addClass('disabled');
            else settings.$fwdBut.removeClass('disabled');
            if (destPos === 0) settings.$bwdBut.addClass('disabled');
            else settings.$bwdBut.removeClass('disabled');
            
            // Animate towards destination with a simple easing calculation.
            pos += (destPos - pos) / settings.easing;
            
            // If within 1000th of a pixel to dest, then just 'snap' to exact value.
            // Do this so pos will end up exactly == destPos (deals with rounding errors).
            if (Math.abs(destPos-pos)<0.001) pos = destPos;
            
            $list.css(orientData.cssAttr, Math.floor(pos));
        };
        
        setInterval(function(){
            animate();
        },1000/60);
    };
    
    $.fn.Thumbelina.defaults = {
        orientation:    "horizontal",   // Orientation mode, horizontal or vertical.
        easing:         8,              // Amount of easing (min 1) larger = more drift.
        maxSpeed:       5,              // Max speed of movement (pixels per cycle).
        $bwdBut:   null,                // jQuery element used as backward button.
        $fwdBut:    null                // jQuery element used as forward button.
    };
    
})(jQuery);

// Generated by CoffeeScript 1.8.0



(function() {
  var $,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  $ = jQuery;

  $.fn.validateCreditCard = function(callback, options) {
    var bind, card, card_type, card_types, get_card_type, is_valid_length, is_valid_luhn, normalize, validate, validate_number, _i, _len, _ref;
    card_types = [
      {
        //name: 'no',
        name: 'amex',
        pattern: /^3[47]/,
        valid_length: [15]
      }, {
        //name: 'diners_club_carte_blanche',
        name: 'no',
        pattern: /^30[0-5]/,
        valid_length: [14]
      }, {
        //name: 'diners_club_international',
        name: 'no',
        pattern: /^36/,
        valid_length: [14]
      }, {
        //name: 'jcb',
        name: 'no',
        pattern: /^35(2[89]|[3-8][0-9])/,
        valid_length: [16]
      }, {
        //name: 'laser',
        name: 'no',
        pattern: /^(6304|670[69]|6771)/,
        valid_length: [16, 17, 18, 19]
      }, {
        //name: 'visa_electron',
        name: 'no',
        pattern: /^(4026|417500|4508|4844|491(3|7))/,
        valid_length: [16]
      }, {
        name: 'visa',
        pattern: /^4/,
        valid_length: [16]
      }, {
        name: 'mast',
        pattern: /^5[1-5]/,
        valid_length: [16]
      }, {
        //name: 'maestro',
        name: 'no',
        pattern: /^(5018|5020|5038|6304|6759|676[1-3])/,
        valid_length: [12, 13, 14, 15, 16, 17, 18, 19]
      }, {
        //name: 'discover',
        name: 'no',
        pattern: /^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9]))/,
        valid_length: [16]
      },{
        name: 'rupay',
        pattern: /^(508[5-9]|60698[5-9]|60699[0-9]|607[0-8]|6079[0-7]|60798[0-4]|60800[1-9]|6080[1-9]|608[1-4]|608500|6521[5-9]|652[2-9]|6530[0-9]|65310[0-9]|6531[1-4])/,
        valid_length: [16]
      }
    ];
    bind = false;
    if (callback) {
      if (typeof callback === 'object') {
        options = callback;
        bind = false;
        callback = null;
      } else if (typeof callback === 'function') {
        bind = true;
      }
    }
    if (options == null) {
      options = {};
    }
    if (options.accept == null) {
      options.accept = (function() {
        var _i, _len, _results;
        _results = [];
        for (_i = 0, _len = card_types.length; _i < _len; _i++) {
          card = card_types[_i];
          _results.push(card.name);
        }
        return _results;
      })();
    }
    _ref = options.accept;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      card_type = _ref[_i];
      if (__indexOf.call((function() {
        var _j, _len1, _results;
        _results = [];
        for (_j = 0, _len1 = card_types.length; _j < _len1; _j++) {
          card = card_types[_j];
          _results.push(card.name);
        }
        return _results;
      })(), card_type) < 0) {
        throw "Credit card type '" + card_type + "' is not supported";
      }
    }
    get_card_type = function(number) {
      var _j, _len1, _ref1;
      _ref1 = (function() {
        var _k, _len1, _ref1, _results;
        _results = [];
        for (_k = 0, _len1 = card_types.length; _k < _len1; _k++) {
          card = card_types[_k];
          if (_ref1 = card.name, __indexOf.call(options.accept, _ref1) >= 0) {
            _results.push(card);
          }
        }
        return _results;
      })();
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        card_type = _ref1[_j];
        if (number.match(card_type.pattern)) {
          return card_type;
        }
      }
      return null;
    };
    is_valid_luhn = function(number) {
      var digit, n, sum, _j, _len1, _ref1;
      sum = 0;
      _ref1 = number.split('').reverse();
      for (n = _j = 0, _len1 = _ref1.length; _j < _len1; n = ++_j) {
        digit = _ref1[n];
        digit = +digit;
        if (n % 2) {
          digit *= 2;
          if (digit < 10) {
            sum += digit;
          } else {
            sum += digit - 9;
          }
        } else {
          sum += digit;
        }
      }
      return sum % 10 === 0;
    };
    is_valid_length = function(number, card_type) {
      var _ref1;
      return _ref1 = number.length, __indexOf.call(card_type.valid_length, _ref1) >= 0;
    };
    validate_number = (function(_this) {
      return function(number) {
        var length_valid, luhn_valid;
        card_type = get_card_type(number);
        luhn_valid = false;
        length_valid = false;
        if (card_type != null) {
          luhn_valid = is_valid_luhn(number);
          length_valid = is_valid_length(number, card_type);
        }
        return {
          card_type: card_type,
          valid: luhn_valid && length_valid,
          luhn_valid: luhn_valid,
          length_valid: length_valid
        };
      };
    })(this);
    validate = (function(_this) {
      return function() {
        var number;
        number = normalize($(_this).val());
        return validate_number(number);
      };
    })(this);
    normalize = function(number) {
      return number.replace(/[ -]/g, '');
    };
    if (!bind) {
      return validate();
    }
    this.on('input.jccv', (function(_this) {
      return function() {
        $(_this).off('keyup.jccv');
        return callback.call(_this, validate());
      };
    })(this));
    this.on('keyup.jccv', (function(_this) {
      return function() {
        return callback.call(_this, validate());
      };
    })(this));
    callback.call(this, validate());
    return this;
  };

}).call(this);


var gaTracking= {
    
    init: function() {
        try {
            if(gaTracking.gaEnabled()==1 && gaTracking.gaCode()!=0) {
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
                var gaCode = gaTracking.gaCode();
                
                ga('create', gaCode, 'auto');
                ga('require', 'ec');
            }
        } catch(e) {
            console.log('Exception in GA Code :'+e);
            return 0;
        }
    },
    
    gaEnabled: function() {
        try {
            var result=0;
            if(typeof hostDetails !='undefined') {
                result=(hostDetails.gaEnable!='')?hostDetails.gaEnable:0;
            }
            
            return result;
        } catch(e) {
            console.log('Exception in GA Code :'+e);
            return 0;
        }
    },
    
    gaCode: function() {
        try {
            var result=0;
            if(typeof hostDetails !='undefined') {
                result=(hostDetails.gaCode!='')?hostDetails.gaCode:0;
            }
            
            return result;
        } catch(e) {
            console.log('Exception in GA Code :'+e);
            return 0;
        }
    },
    
    preparingData:function (gaTrackingObject,productObj,pageType) {
        try {
            gaTrackingObject.id = productObj.variantSku;
            var store = window.store || {};
            var variants = [];
            var priceStoreData = store["priceStore"][productObj.actualsku];
            var selectedPriceData = priceStoreData['prices'][productObj.variantSku];
            if (selectedPriceData === undefined){ 
                //todo: what todo?
                //console.log("no price store");
            } else {
                if(selectedPriceData.special_price){
                    priceForGa = detail.convertHtmlToText(selectedPriceData.special_price);
                } else {
                    priceForGa = detail.convertHtmlToText(selectedPriceData.price);
                }
                priceForGa = priceForGa.replace(/\,/g,'');
                gaTrackingObject.price = priceForGa.trim();
            }
            var skuDetails;
            if(pageType === 'minicart' || pageType === 'cart') {
                skuDetails = store[pageType+"SkuDetails"][productObj.variantSku];
                gaTrackingObject.quantity = gaTrackingObject.quantity || skuDetails.quantity;
            } else {
                skuDetails = store[pageType+"SkuDetails"][productObj.actualsku];
            }
            var productValue = null;
            productValue = parseInt(gaTrackingObject.price) * parseInt(gaTrackingObject.quantity);
            gaTrackingObject.brand = skuDetails.brand;
            gaTrackingObject.category = skuDetails.cat;
            gaTrackingObject.name = skuDetails.name;
            if(productObj.variantSkuValue){
                variants.push(productObj.variantSkuValue);
            }
            if(skuDetails.variant){
                variants.push(skuDetails.variant);
            }
            gaTrackingObject.variant = variants.join(' & ');
            var gaTrackingReturnData = {};
            gaTrackingReturnData.gaTrackingObject = gaTrackingObject;
            gaTrackingReturnData.productValue = productValue;
        } catch(e){
            console.log('Exception in GA Code :'+e);
            return 0;
        }
        return gaTrackingReturnData;
    },
    
    addToCart: function (gaTrackingData) {
        try {
            if(gaTracking.gaEnabled()==1) {
                var simpleSku = gaTrackingData.gaTrackingObject['id'] || {};
                var configSku = simpleSku.substr(0, simpleSku.indexOf('-'));
                var category = gaTrackingData.gaTrackingObject['category'] || {};
                listName = catalog.getCookie(configSku+'_list')||category;
                ga('ec:addProduct', gaTrackingData.gaTrackingObject);
                ga('ec:setAction', 'add', {list:listName});
                ga('send', 'event', 'Ecommerce', 'Sales', 'Add to Cart', gaTrackingData.productValue);
            }
        } catch(e){
            console.log('Exception in GA Code :'+e);
        }
    },
    
    removeFromCart: function (gaTrackingData) {
        try {
            if(gaTracking.gaEnabled()==1) {
                ga('ec:addProduct', gaTrackingData.gaTrackingObject);
                ga('ec:setAction', 'remove');
                ga('send', 'event', 'Ecommerce', 'Sales', 'Remove from Cart', gaTrackingData.productValue);
            }
        } catch(e){
            console.log('Exception in GA Code :'+e);
        }
    },
    
    viewCart: function () {
        try {
            obj = window.store["ga"]["CartData"] || {};
            if(gaTracking.gaEnabled()==1 && obj) {
                Object.keys(obj).map(function(key) {
                    ga('ec:addProduct', obj[key]);
                });
                ga('ec:setAction','checkout', {'step': 1});
                ga('send', 'event', 'Ecommerce', 'Sales', 'Click View Cart', window.store["ga"]["CartValue"] || {});
            }
        } catch(e){
            console.log('Exception in GA Code :'+e);
        }
    },
    
    viewCheckout: function () {
        try {
            obj = window.store["ga"]["CartData"] || {};
            if(gaTracking.gaEnabled()==1 && obj) {
                Object.keys(obj).map(function(key) {
                    ga('ec:addProduct', obj[key]);
                });
                ga('ec:setAction','checkout', {'step': 2});
                ga('send', 'event', 'Ecommerce', 'Sales', 'Proceed to Checkout', window.store["ga"]["CartValue"] || {});
            }
        } catch(e){
            console.log('Exception in GA Code :'+e);
        }
    },
    
    authCheckout: function (type) {
        try {
            obj = window.store["ga"]["CartData"] || {};
            if(gaTracking.gaEnabled()==1 && obj) {
                Object.keys(obj).map(function(key) {
                    ga('ec:addProduct', obj[key]);
                });
                ga('ec:setAction','checkout', {'step': 3,'option' : type});
                ga('send', 'event', 'Ecommerce', 'Sales', 'Sign In', window.store["ga"]["CartValue"] || {});
            }
        } catch(e){
            console.log('Exception in GA Code :'+e);
        }
    },
    
    viewOrderReview: function () {
        try {
            obj = window.store["ga"]["CartData"] || {};
            if(gaTracking.gaEnabled()==1 && obj) {
                Object.keys(obj).map(function(key) {
                    ga('ec:addProduct', obj[key]);
                });
                ga('ec:setAction','checkout', {'step': 4});
                ga('send', 'event', 'Ecommerce', 'Sales', 'Proceed to Review Order', window.store["ga"]["CartValue"] || {});
            }
        } catch(e){
            console.log('Exception in GA Code :'+e);
        }
    },
    
    viewOrderPayment: function () {
        try {
            obj = window.store["ga"]["CartData"] || {};
            if(gaTracking.gaEnabled()==1 && obj) {
                Object.keys(obj).map(function(key) {
                    ga('ec:addProduct', obj[key]);
                });
                ga('ec:setAction','checkout', {'step': 5});
                ga('send', 'event', 'Ecommerce', 'Sales', 'Proceed to payment', window.store["ga"]["CartValue"] || {});
            }
        } catch(e){
            console.log('Exception in GA Code :'+e);
        }
    },
    
    completePayment: function (payment) {
        try {
            obj = window.store["ga"]["OrderData"] || {};
            if(gaTracking.gaEnabled()==1 && obj) {
                Object.keys(obj).map(function(key) {
                    ga('ec:addProduct', obj[key]);
                });
                ga('ec:setAction','checkout', {'step': 6,'option':payment});
                ga('send', 'event', 'Ecommerce', 'Sales', 'Complete Payment', window.store["ga"]["OrderValue"] || {});
            }
        } catch(e){
            console.log('Exception in GA Code :'+e);
        }
    },
    
    addPromotion: function (gaTrackingData) {
        try {
            if(gaTracking.gaEnabled()==1) {
                ga('ec:addPromo', gaTrackingData.gaTrackingObject);
                ga('ec:setAction', 'promo_click');
                ga('send', 'event', 'Ecommerce', 'Sales', 'Coupon Applied',gaTrackingData.discountValue);
            }
        } catch(e){
            console.log('Exception in GA Code :'+e);
        }
    },
    
    onRevenue: function () {
        try {
            obj = window.store["ga"]["OrderData"] || {};
            if(gaTracking.gaEnabled()==1 && obj) {
                Object.keys(obj).map(function(key) {
                    ga('ec:addProduct', obj[key]);
                });
                ga('ec:setAction', 'purchase', window.store["ga"]["RevenueData"] || {});
            }
        } catch(e){
            console.log('Exception in GA Code :'+e);
        }
    },
    prepareProductData: function (gaPdpData,skuData,sku) {
        try {
            if(skuData){
                gaPdpData.id = skuData.sku;
                gaPdpData.name = skuData.name;
                gaPdpData.category = skuData.category;
                gaPdpData.brand = skuData.brand;
                gaPdpData.variant = skuData.color;
                gaPdpData.position = skuData.position;
                if(!sku){
                    listName = gaTracking.getListName(skuData);
                    gaPdpData.list = listName;
                }
            }
            return gaPdpData;
        } catch(e){
            console.log('Exception in GA Code :'+e);
            return 0;
        }
    },
    getListName: function (skuData) {
        try{
            if(skuData){
                listName = skuData.searchedTerm||skuData.category;
                if(skuData.searchedTerm){
                    listName = 'Search : '+listName;
                }
                return listName;
            }
        } catch(e){
            console.log('Exception in GA Code :'+e);
            return 0;
        }
    },
    
    clickPdp: function (obj) {
        try {
            if(gaTracking.gaEnabled()==1) {
                var gaPdpData = {id:'',name:'',category:'',brand:'',variant:'',position:''};
                var sku = obj.getAttribute('data-productsku');
                var skuData = window.store["PlpData"][sku] || {};
                productData = gaTracking.prepareProductData(gaPdpData,skuData,sku);
                productPrice = skuData.price;
                finalPrice =  parseInt(productPrice);
                listName = gaTracking.getListName(skuData);
                catalog.setCookie(sku+'_list',listName);
                ga('ec:addProduct', productData);
                ga('ec:setAction', 'click', {list: listName});
                ga('send', 'event', 'Ecommerce', 'Sales', 'Product Click', finalPrice);
            }
        } catch(e){
            console.log('Exception in GA Code :'+e);
        }
    },
    
    viewPdp: function () {
        try {
            if(gaTracking.gaEnabled()==1) {
                pdpData = window.store["PdpData"] || {};
                configSku = pdpData.id;
                var category = pdpData.category;
                listName = catalog.getCookie(configSku+'_list')||category;
                ga('ec:addProduct', pdpData);
                ga('ec:setAction', 'detail', {list:listName});
            }
        } catch(e){
            console.log('Exception in GA Code :'+e);
        }
    },
    
    viewPlp: function () {
        try {
            obj = window.store["PlpData"] || {};
            if(gaTracking.gaEnabled()==1 && obj) {
                Object.keys(obj).map(function(key) {
                    var gaPdpData = {id:'',name:'',category:'',brand:'',variant:'',position:''};
                    productData = gaTracking.prepareProductData(gaPdpData,obj[key]);
                    ga('ec:addImpression', productData);
                });
            }
        } catch(e){
            console.log('Exception in GA Code :'+e);
        }
    },
    pageLoad: function () {
        ga('send', 'pageview');
    }
};
$(document).ready(function(){
    function pageView(){
        if(gaTracking.gaEnabled()==1 && $("#pagename").length){
            var pageName = document.getElementById('pagename').value;
            if(pageName){       
                switch(pageName){
                    case detail.checkoutSuccessPage:
                        gaTracking.onRevenue();
                        break;
                    case detail.cartPage:
                        gaTracking.viewCart();
                        break;
                    case detail.plpPage:
                        gaTracking.viewPlp();
                        break;
                    case detail.pdpPage:
                        gaTracking.viewPdp();
                        break;
                    default:
                        //console.log('No Page view for this page');
                }
                gaTracking.pageLoad();
            }
        }
    }
    if (window.addEventListener) {
        window.addEventListener("load", pageView);
    }
});



var iZootoTracking = {

    
    iZootoEnabled: function() {
        try {
            var result=0;
            if(typeof hostDetails !='undefined') {
                result=(hostDetails.iZootoEnable!='')?hostDetails.iZootoEnable:0;
            }
            return result;
        } catch(e) {
            console.log('Exception in iZooto Code :'+e);
            return 0;
        }
    },

    
    viewPdp: function () {
        try {
            pdpData = window.store["PdpData"] || {};
            if(iZootoTracking.iZootoEnabled()==1 && pdpData) {
                configSku = pdpData.id;
                productName = pdpData.name;
                priceHtml = pdpData.price;
                priceText = detail.convertHtmlToText(priceHtml);
                priceToTrim = priceText.replace(/\,/g,'');
                productPrice = priceToTrim.trim();
                imageUrl = $('img.main-image').attr('src');
                productUrl = window.location.href;
                window._izq.push(["event","product_viewed",{
                    "product_id":configSku,
                    "product_title":productName,
                    "product_price":productPrice,
                    "product_link":productUrl,
                    "product_image":imageUrl,
                }]);
            }
        } catch(e){
            console.log('Exception in iZooto Code :'+e);
        }
    },

    
    viewPlp: function () {
        try {
            obj = window.store["PlpData"] || {};
            if(iZootoTracking.iZootoEnabled()==1 && obj) {
                categoryName = obj[Object.keys(obj)[0]].category;
                categoryUrl = window.location.href;
                window._izq.push(["event","collection_viewed",{
                    "collection_title":categoryName,
                    "collection_link":categoryUrl
                }]);
            }
        } catch(e){
            console.log('Exception in iZooto Code :'+e);
        }
    },

    
    addToCart: function (trackingData) {
        try {
            if(iZootoTracking.iZootoEnabled()==1 && trackingData) {
                var price = trackingData.gaTrackingObject['price'];
                var productName = trackingData.gaTrackingObject['name'];
                var productSku = trackingData.gaTrackingObject['id'];
                var productImage = trackingData.image;
                var base_url = window.location.origin;
                window._izq.push(["event","added_to_cart",{
                    "product_title":productName,
                    "product_id":productSku,
                    "product_price":price,
                    "product_image":productImage,
                    "cart_url":base_url+'/cart'
                }]);
            }
        } catch(e){
            console.log('Exception in iZooto Code :'+e);
        }
    },

    
    onRevenue: function () {
        try {
            obj = window.store["ga"]["OrderData"] || {};
            if(iZootoTracking.iZootoEnabled()==1 && obj) {
                var id = window.store["ga"]['RevenueData']['id'];
                var total = window.store["ga"]['RevenueData']['revenue'];
                var productIds = [];
                obj.forEach(function(current_value) {
                    productIds.push(current_value['id']);
                });
                ids = '['+productIds.join()+']';
                window._izq.push(["event","order_placed",{
                    "cart_token": id,
                    "cart_value":total,
                    "product_ids":ids
                }]);
              }
        } catch(e){
            console.log('Exception in iZooto Code :'+e);
        }
    },

};

$(document).ready(function() {
    function pageView(){
        if($("#pagename").length) {
            var pageName = document.getElementById('pagename').value;
            if(pageName) {
                switch(pageName){
                    case detail.plpPage:
                        iZootoTracking.viewPlp();
                    break;
                    case detail.pdpPage:
                        iZootoTracking.viewPdp();
                    break;
                    case detail.checkoutSuccessPage:
                        iZootoTracking.onRevenue();
                    break;
                }
            }
        }
    }
    if (window.addEventListener) {
        window.addEventListener("load", pageView);
    }
});

!function(a,b,c,d){"use strict";var e=a.fn.twbsPagination,f=function(b,c){if(this.$element=a(b),this.options=a.extend({},a.fn.twbsPagination.defaults,c),this.options.startPage<1||this.options.startPage>this.options.totalPages)throw new Error("Start page option is incorrect");if(this.options.totalPages=parseInt(this.options.totalPages),isNaN(this.options.totalPages))throw new Error("Total pages option is not correct!");if(this.options.visiblePages=parseInt(this.options.visiblePages),isNaN(this.options.visiblePages))throw new Error("Visible pages option is not correct!");if(this.options.onPageClick instanceof Function&&this.$element.first().on("page",this.options.onPageClick),this.options.hideOnlyOnePage&&1==this.options.totalPages)return this.$element.trigger("page",1),this;this.options.totalPages<this.options.visiblePages&&(this.options.visiblePages=this.options.totalPages),this.options.href&&(this.options.startPage=this.getPageFromQueryString(),this.options.startPage||(this.options.startPage=1));var d="function"==typeof this.$element.prop?this.$element.prop("tagName"):this.$element.attr("tagName");return"UL"===d?this.$listContainer=this.$element:this.$listContainer=a("<ul></ul>"),this.$listContainer.addClass(this.options.paginationClass),"UL"!==d&&this.$element.append(this.$listContainer),this.options.initiateStartPageClick?this.show(this.options.startPage):(this.currentPage=this.options.startPage,this.render(this.getPages(this.options.startPage)),this.setupEvents()),this};f.prototype={constructor:f,destroy:function(){return this.$element.empty(),this.$element.removeData("twbs-pagination"),this.$element.off("page"),this},show:function(a){if(a<1||a>this.options.totalPages)throw new Error("Page is incorrect.");return this.currentPage=a,this.render(this.getPages(a)),this.setupEvents(),this.$element.trigger("page",a),this},enable:function(){this.show(this.currentPage)},disable:function(){var b=this;this.$listContainer.off("click").on("click","li",function(a){a.preventDefault()}),this.$listContainer.children().each(function(){var c=a(this);c.hasClass(b.options.activeClass)||a(this).addClass(b.options.disabledClass)})},buildListItems:function(a){var b=[];if(this.options.first&&b.push(this.buildItem("first",1)),this.options.prev){var c=a.currentPage>1?a.currentPage-1:this.options.loop?this.options.totalPages:1;b.push(this.buildItem("prev",c))}for(var d=0;d<a.numeric.length;d++)b.push(this.buildItem("page",a.numeric[d]));if(this.options.next){var e=a.currentPage<this.options.totalPages?a.currentPage+1:this.options.loop?1:this.options.totalPages;b.push(this.buildItem("next",e))}return this.options.last&&b.push(this.buildItem("last",this.options.totalPages)),b},buildItem:function(b,c){var d=a("<li></li>"),e=a("<a></a>"),f=this.options[b]?this.makeText(this.options[b],c):c;return d.addClass(this.options[b+"Class"]),d.data("page",c),d.data("page-type",b),d.append(e.attr("href",this.makeHref(c)).addClass(this.options.anchorClass).html(f)),d},getPages:function(a){var b=[],c=Math.floor(this.options.visiblePages/2),d=a-c+1-this.options.visiblePages%2,e=a+c;d<=0&&(d=1,e=this.options.visiblePages),e>this.options.totalPages&&(d=this.options.totalPages-this.options.visiblePages+1,e=this.options.totalPages);for(var f=d;f<=e;)b.push(f),f++;return{currentPage:a,numeric:b}},render:function(b){var c=this;this.$listContainer.children().remove();var d=this.buildListItems(b);a.each(d,function(a,b){c.$listContainer.append(b)}),this.$listContainer.children().each(function(){var d=a(this),e=d.data("page-type");switch(e){case"page":d.data("page")===b.currentPage&&d.addClass(c.options.activeClass);break;case"first":d.toggleClass(c.options.disabledClass,1===b.currentPage);break;case"last":d.toggleClass(c.options.disabledClass,b.currentPage===c.options.totalPages);break;case"prev":d.toggleClass(c.options.disabledClass,!c.options.loop&&1===b.currentPage);break;case"next":d.toggleClass(c.options.disabledClass,!c.options.loop&&b.currentPage===c.options.totalPages)}})},setupEvents:function(){var b=this;this.$listContainer.off("click").on("click","li",function(c){var d=a(this);return!d.hasClass(b.options.disabledClass)&&!d.hasClass(b.options.activeClass)&&(!b.options.href&&c.preventDefault(),void b.show(parseInt(d.data("page"))))})},makeHref:function(a){return this.options.href?this.generateQueryString(a):"#"},makeText:function(a,b){return a.replace(this.options.pageVariable,b).replace(this.options.totalPagesVariable,this.options.totalPages)},getPageFromQueryString:function(a){var b=this.getSearchString(a),c=new RegExp(this.options.pageVariable+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d&&d[2]?(d=decodeURIComponent(d[2]),d=parseInt(d),isNaN(d)?null:d):null},generateQueryString:function(a,b){var c=this.getSearchString(b),d=new RegExp(this.options.pageVariable+"=*[^&#]*");return c?"?"+c.replace(d,this.options.pageVariable+"="+a):""},getSearchString:function(a){var c=a||b.location.search;return""===c?null:(0===c.indexOf("?")&&(c=c.substr(1)),c)},getCurrentPage:function(){return this.currentPage}},a.fn.twbsPagination=function(b){var c,e=Array.prototype.slice.call(arguments,1),g=a(this),h=g.data("twbs-pagination"),i="object"==typeof b?b:{};return h||g.data("twbs-pagination",h=new f(this,i)),"string"==typeof b&&(c=h[b].apply(h,e)),c===d?g:c},a.fn.twbsPagination.defaults={totalPages:1,startPage:1,visiblePages:5,initiateStartPageClick:!0,hideOnlyOnePage:!1,href:!1,pageVariable:"{{page}}",totalPagesVariable:"{{total_pages}}",page:null,first:"First",prev:"Previous",next:"Next",last:"Last",loop:!1,onPageClick:null,paginationClass:"pagination",nextClass:"page-item next",prevClass:"page-item prev",lastClass:"page-item last",firstClass:"page-item first",pageClass:"page-item",activeClass:"active",disabledClass:"disabled",anchorClass:"page-link"},a.fn.twbsPagination.Constructor=f,a.fn.twbsPagination.noConflict=function(){return a.fn.twbsPagination=e,this},a.fn.twbsPagination.version="1.4.1"}(window.jQuery,window,document);
var ordercancel = {
    
    cancelItemDetailsUrl: "/customer/order/GetCancelItemDetails",
    orderPageAjaxUpdateUrl: "/customer/order/index",
    orderLineAjaxUpdateUrl: "/customer/order/itemsByOrder/orderNr/",
    cancelItemUrl: "/customer/ordercancel/cancelitem",
    
    init: function(){
        ordercancel.submitCancelReason();
    },

    clearContent : function() {
        $('.modal-header, .modal-body, .modal-footer').html('');
        $(".cancelitem-details").hide();
    },

    setCancelItems: function(orderId,ordernr,itemId){
        ordercancel.clearContent();
        $("#page_preloaders_cancel").css("display","block");
        var itemID = itemId.toString();
        var processId = itemID.replace(/-/g, ",");
        if(orderId && ordernr && itemID){
            var data = {itemids: processId,orderid: orderId, ordernr:ordernr};
            ordercancel.ajaxCancelItem(data);
            return false;
        }
        $(".cancel_response p").text('Sorry, Cancel Request Failed')
        $(".cancel_response").modal('show');
        $("#order_items_loader").css("display","none");
        return false;
    },

    ajaxCancelItem: function(data) {
        //$('.multiplecancel-products').empty();
        $.ajax({
                url: ordercancel.cancelItemDetailsUrl,
                dataType: "json",
                type: "get",
                data: data,
                success: function(result) {
                    $(".cancelallitem-details").html('');
                    $(".cancelitem-details").html(result.html);
                    $(".cancelitem-details").show();
                    ordercancel.productCarousel();
                    ordercancel.validateComment();
                    ordercancel.validateSelectReason();
                    ordercancel.submitCancelReason();
                    $('.cancel_selectpicker').selectpicker({
                        });
                        $("#page_preloaders_cancel").css("display","none");
                }
            });
    },
    validateSelectReason: function() {
        $("select.order_drop").change(function()
       { 
           var orderdropselected = $(".order_drop option:selected").val();
           var commentvalue = $("#cancelitemtext_comment").val().trim().length;
            $('.order_drop').css('border', '1px solid #c2c9d0');
            if(orderdropselected == 10 && commentvalue == 0 ) {

              $(".ordercancel_confirm").prop('disabled', true);
              $("#cancelitemtext_comment").addClass('textcomment');
              $("#cancelitemtext_comment").attr("placeholder", "Please tell us reason for cancel");

            }
           else if(orderdropselected !== 10 || commentvalue == 0){
              $("#cancelitemtext_comment").removeClass('textcomment');
              $("#cancelitemtext_comment").attr("placeholder", "Additional Comments");
               $(".ordercancel_confirm").prop('disabled', false);
            }
       });
    },
    validateComment: function() {
        $('#cancelitemtext_comment').keyup(function() {
        var commentlength = $(this).val().trim().length;
        var selectedvalue = $(".order_drop option:selected").val();
        if(selectedvalue == 10){
            if(commentlength >=10 ) {
               $(".ordercancel_confirm").prop('disabled', false);
            }
            else {
               $(".ordercancel_confirm").prop('disabled', true);
            }
        }
        });        
    },
    
    submitCancelReason: function(){
        $('.ordercancel_confirm').on('click', function(e) {
        e.preventDefault();
        var orderdropselected = $(".order_drop option:selected").val();
        var ordernumber = $('#sales-order-nr').val();
        if(orderdropselected == 0) {
           $('.order_drop').css('border', '1px solid red');
           return false;
        } else {
            var formData = $('#salesordercancel-item').serializeArray();
            $("#order_items_loader").show();
            $('.order-body-div').html('');
            $.ajax({
                url: ordercancel.cancelItemUrl,
                dataType: "json",
                type: "post",
                data: formData,
                success: function(result) {
                    if(result.status) {
                        $("#cancel_confirm").modal('show');
                        ordercancel.ajaxLineContentUpdate(ordernumber);
                    } else if(result.message) {
                          $(".cancel_response p").text(result.message)
                          $(".cancel_response").modal('show');
                          $("#order_items_loader").css("display","none");
                        
                    } else {
                        $("#cancel_reject").modal('show');
                        ordercancel.ajaxLineContentUpdate(ordernumber);
                    }  
                }
            });
        }
    });
    },
    productCarousel: function() {
            $('.multiplecancel-products').owlCarousel({

            dots: false,
            nav: true,
            navText: ['<i class="fa fa-angle-left"></i>', '<i class="fa fa-angle-right"></i>'],
            responsive: {
                0: {
                    items: 1
                },
                480: {
                    items: 2
                },
                1000: {
                    items: 2
                }
            }

        });
    },
    ajaxLineContentUpdate: function(ordernumber) {
                        $.ajax({
                            url: ordercancel.orderLineAjaxUpdateUrl+ordernumber,
                            dataType: "json",
                            type: "get",
                            success: function(response) {
                                var dataObj = response;//JSON.parse(response);
                                if (dataObj.status == true) {
                                    $("#order-body-div-"+ordernumber).html(dataObj.html);
                                    $('#order_header_'+ordernumber).find('.order_date').addClass('open');
                                    $('#order_header_'+ordernumber).find('.order-body').show();
                                } else if(dataObj.status == false){
                                    location.reload();
                                }
                                $('#order_items_loader').hide();

                                ordercancel.init();
                            }
                        });
    },

}

$(document).ready(function() { 
    ordercancel.init();
});

var orderreturn = {
    returnItemDetailsUrl : "/customer/order/getreturnitemdetails",
    returnItemUrl : "/customer/orderreturn/returnitem",
    orderPageAjaxUpdateUrl: "/customer/order/index",
    orderLineItemAjaxUpdateUrl: "/customer/order/itemsByOrder/orderNr/",
    
    clearContent : function() {
        $('.modal-header, .modal-body, .modal-footer').html('');
        $(".cancelitem-details").hide();
    },
    setReturnItems: function(orderId,ordernr,itemId){
        orderreturn.clearContent();
        $("#page_preloaders_return").css("display","block");
        var itemID = itemId.toString();
        var processId = itemID.replace(/-/g, ",");
        if(orderId && ordernr && itemID){
            var data = {itemids: processId,orderid: orderId, ordernr:ordernr};
            orderreturn.ajaxGetReturnItemDetails(data);
            return false;
        }
        $(".cancel_response p").text('Sorry, Return Request Failed')
        $(".cancel_response").modal('show');
        $("#order_items_loader").css("display","none");
        return false;
        
    },
    ajaxGetReturnItemDetails: function(data) {
        $('.multiplecancel-products').html('');
        $.ajax({
                url: orderreturn.returnItemDetailsUrl,
                dataType: "json",
                type: "get",
                data: data,
                success: function(result) {
                    $("#return_item_details").html(result.html);
                    $("#return_item_details").show();
                    orderreturn.productCarousel();
                    orderreturn.validateReturnReason();
                    orderreturn.validateComment();
                    orderreturn.validateAccinfo();
                    orderreturn.validateCheckbox();
                    orderreturn.submitReturnReason();
                    orderreturn.onlyAlphabets();
                    orderreturn.onlyAlphaNumric();
                    orderreturn.onlyNumber();
                    
                    
                     $('.return_selectpicker').selectpicker({
                        });
                    $("#page_preloaders_return").css("display","none");
                }
            });
    },
    productCarousel: function() {
            $('.multiplecancel-products').owlCarousel({

            dots: false,
            nav: true,
            navText: ['<i class="fa fa-angle-left"></i>', '<i class="fa fa-angle-right"></i>'],
            responsive: {
                0: {
                    items: 1
                },
                480: {
                    items: 2
                },
                1000: {
                    items: 2
                }
            }

        });
    },
    validateReturnReason: function() {
        $("select.order_drop").change(function()
       { 
           var orderdropselected = $(".order_drop option:selected").val();
           var commentvalue = $("#returnitem_comment").val().trim().length;
            $('.order_drop').css('border', '1px solid #c2c9d0');
            if(orderdropselected == 10 && commentvalue == 0 ) {

              $(".orderreturn_confirm").prop('disabled', true);
              $("#returnitem_comment").addClass('textcomment');
              $("#returnitem_comment").attr("placeholder", "Please tell us reason for return");

            }
           else if(orderdropselected !== 10 || commentvalue == 0){
              $("#returnitem_comment").removeClass('textcomment');
              $("#returnitem_comment").attr("placeholder", "Help us understand your reasons better to improve our services");
               $(".orderreturn_confirm").prop('disabled', false);
            }
       });
    },
    validateComment: function() {
        $('#returnitem_comment').keyup(function() {
        var commentlength = $(this).val().trim().length;
        var selectedvalue = $(".order_drop option:selected").val();
        if(selectedvalue == 10){
        if(commentlength >=10 ) {
           $(".orderreturn_confirm").prop('disabled', false); 
        }
        else {
            $(".orderreturn_confirm").prop('disabled', true);
        }
    }
        });   
        
    },
    validateCheckbox: function(){
        $("input[type='checkbox'][name='return_check']").change(function() {
            if ($("input[type='checkbox'][name='return_check']:checked").length){
                $('.checkbox label').removeClass('changed');
            }
        });
    },
    validateAccinfo: function() {
        $(".account-holder-name").keypress(function (e) {
            if (e.charCode != 0) {
                var regex = new RegExp("^[a-zA-Z -]*$");
                var key = String.fromCharCode(!e.charCode ? e.which : e.charCode);
                if (!regex.test(key)) {
                    e.preventDefault();
                    return false;
                }
            }
        });
        $(".account-number").keypress(function (e) {
            if (e.charCode != 0) {
                var regex = new RegExp("^[0-9]+$");
                var key = String.fromCharCode(!e.charCode ? e.which : e.charCode);
                if (!regex.test(key)) {
                    e.preventDefault();
                    return false;
                }
            }
        });
        $(".ifsc-code").keypress(function (e) {
            if (e.charCode != 0) {
                var regex = new RegExp("^[a-zA-Z0-9\-\s]+$");
                var key = String.fromCharCode(!e.charCode ? e.which : e.charCode);
                if (!regex.test(key)) {
                    e.preventDefault();
                    return false;
                }
            }
        });
        
    },
    
    onlyAlphabets: function (e) {
        if($(window).width < 767){
            e.target.value = e.target.value.replace(/[^a-zA-Z ]/g, "");
            return false;
        }
    },

    onlyAlphaNumric: function (e) {
        if($(window).width < 767){
            e.target.value = e.target.value.replace(/[^\w\s]/gi, '');
            return false;
        }
    },
    onlyNumber: function (e) {
        if($(window).width < 767){
            e.target.value = e.target.value.replace(/[^\d]/g, '');
            return false;
        }
    },
           
    submitReturnReason: function(){
        $('.orderreturn_confirm').on('click', function(e) {
        e.preventDefault();
        var orderdropselected = $(".order_drop option:selected").val();
        var ordernumber = $('#sales-order-nr').val();
        var returncheck = $("input[type='checkbox'][name='return_check']:checked").length;
            if ($('.order-refund-bank').length > 0) {
                if ($('.ifsc-code').val().length < 11) {
                    $('#ifsc-error').css('display', 'block');
                    return false;
                } else {
                    $('#ifsc-error').css('display', 'none');
                }
                if (($('.account-number').val().length < 9)) {
                    $('#account-number-error').css('display', 'block');
                    return false;
                } else {
                    $('#account-number-error').css('display', 'none');
                }
                if ($('.account-holder-name').val().length <= 0) {
                    $('#account-holder-name-error').css('display', 'block');
                    return false;
                } else {
                    $('#account-holder-name-error').css('display', 'none');
                } 
            }
            if (orderdropselected == 0) {
                $('.order_drop').css('border', '1px solid red');
                return false;
            }
       
            else if (returncheck > 0) {
            var formData = $('#sales_order_return_item').serializeArray();
            $("#order_items_loader").css("display","block");
            $( ".order-refund-bank .error-populate").hide();
            $.ajax({
                url: orderreturn.returnItemUrl,
                dataType: "json",
                type: "post",
                data: formData,
                success: function(result) {
                    if(result.status) {
                          $("#cancel_confirm h5 b" ).text('Return Status');
                          $("#cancel_confirm p" ).text('We have received your return request.You will receive further communication of your request on your registered contact details. ');
                          $("#cancel_confirm").modal('show');
                          orderreturn.ajaxLineItemContentUpdate(ordernumber);
                    } else if(result.hasOwnProperty('ids')) {
                        var ids = result.ids;
                        var classIds = ids.split(',');
                        $.each( classIds, function( i, val ) {
                            $( "." + val+' .error-populate' ).show();
                        });
                        $("#order_items_loader").css("display","none");
                    } else if(result.message) {
                          $(".cancel_response p").text(result.message)
                          $(".cancel_response").modal('show');
                          $("#order_items_loader").css("display","none");
                    } 
                }
            });
        }
        else {
            $('.checkbox label').addClass('changed');
            return false;
        }
    });
    },
    ajaxLineItemContentUpdate: function(ordernumber) {
        $.ajax({
            url: ordercancel.orderLineAjaxUpdateUrl+ordernumber,
            dataType: "json",
            type: "get",
            success: function(response) {
                var dataObj = response;//JSON.parse(response);
                if (dataObj.status == true) {
                    $("#order-body-div-"+ordernumber).html(dataObj.html);
                    $('#order_header_'+ordernumber).find('.order-no').addClass('open');
                    $('#order_header_'+ordernumber).find('.order-body').show();
                } else if(dataObj.status == false){
                    location.reload();
                }
                $('#order_items_loader').hide();
            }
        });
     }
        
}


var trackPackage = {

    getTrackPackageOrderInfo: '/customer/order/getTrackPackageInfo/',

    getOrderStatus: function(){
        $('.trackpackage').on('click', function() {
            var trackOrderId = $(this).data("trackorderid");
            var deliveryDate = $(this).data("deliverydate");
            trackPackage.ajaxGetTrackPackageInfo(trackOrderId,deliveryDate);
        });
    },

    ajaxGetTrackPackageInfo: function(trackOrderId,deliveryDate){
        $.ajax({
            url: trackPackage.getTrackPackageOrderInfo+'trackOrderId/'+trackOrderId+'/deliveryDate/'+deliveryDate,
            dataType: "json",
            type: "get",
            beforeSend: function(){
                $("#trackPackagePopup")
                .find(".modal-content")
                .html('<div class="trackPackageLoader"><div class="preloader"></div></div>');
            },
            success: function(result) {
                try {
                    if (result.hasOwnProperty('status') && result.status == true) {
                        $('.trackPackageLoader').hide();
                        $("#trackPackagePopup")
                            .find(".modal-content")
                            .html(result.html);
                            trackPackage.enscroll();
                    }else{
                        $('.trackPackageLoader').show();
                    }
                } catch (e) {
                    $('.trackPackageLoader').show();
                    console.log(e);
                }
            }
        });
    },

    enscroll: function(){
        if($('.prevoustimeloc').length>4){
            $('.trackPackagePrevious').enscroll();
        }
    },

    init: function() {
        trackPackage.getOrderStatus();
    }
};

$(document).ready(function() {
    trackPackage.init();
});
(function(){var a,b,c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};b=function(){function a(){}return a.prototype.extend=function(a,b){var c,d;for(c in b)d=b[c],null==a[c]&&(a[c]=d);return a},a.prototype.isMobile=function(a){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a)},a.prototype.createEvent=function(a,b,c,d){var e;return null==b&&(b=!1),null==c&&(c=!1),null==d&&(d=null),null!=document.createEvent?(e=document.createEvent("CustomEvent"),e.initCustomEvent(a,b,c,d)):null!=document.createEventObject?(e=document.createEventObject(),e.eventType=a):e.eventName=a,e},a.prototype.emitEvent=function(a,b){return null!=a.dispatchEvent?a.dispatchEvent(b):b in(null!=a)?a[b]():"on"+b in(null!=a)?a["on"+b]():void 0},a.prototype.addEvent=function(a,b,c){return null!=a.addEventListener?a.addEventListener(b,c,!1):null!=a.attachEvent?a.attachEvent("on"+b,c):a[b]=c},a.prototype.removeEvent=function(a,b,c){return null!=a.removeEventListener?a.removeEventListener(b,c,!1):null!=a.detachEvent?a.detachEvent("on"+b,c):delete a[b]},a.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},a}(),c=this.WeakMap||this.MozWeakMap||(c=function(){function a(){this.keys=[],this.values=[]}return a.prototype.get=function(a){var b,c,d,e,f;for(f=this.keys,b=d=0,e=f.length;e>d;b=++d)if(c=f[b],c===a)return this.values[b]},a.prototype.set=function(a,b){var c,d,e,f,g;for(g=this.keys,c=e=0,f=g.length;f>e;c=++e)if(d=g[c],d===a)return void(this.values[c]=b);return this.keys.push(a),this.values.push(b)},a}()),a=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(a=function(){function a(){"undefined"!=typeof console&&null!==console&&console.warn("MutationObserver is not supported by your browser."),"undefined"!=typeof console&&null!==console&&console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content.")}return a.notSupported=!0,a.prototype.observe=function(){},a}()),d=this.getComputedStyle||function(a,b){return this.getPropertyValue=function(b){var c;return"float"===b&&(b="styleFloat"),e.test(b)&&b.replace(e,function(a,b){return b.toUpperCase()}),(null!=(c=a.currentStyle)?c[b]:void 0)||null},this},e=/(\-([a-z]){1})/g,this.WOW=function(){function e(a){null==a&&(a={}),this.scrollCallback=f(this.scrollCallback,this),this.scrollHandler=f(this.scrollHandler,this),this.resetAnimation=f(this.resetAnimation,this),this.start=f(this.start,this),this.scrolled=!0,this.config=this.util().extend(a,this.defaults),null!=a.scrollContainer&&(this.config.scrollContainer=document.querySelector(a.scrollContainer)),this.animationNameCache=new c,this.wowEvent=this.util().createEvent(this.config.boxClass)}return e.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null,scrollContainer:null},e.prototype.init=function(){var a;return this.element=window.document.documentElement,"interactive"===(a=document.readyState)||"complete"===a?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},e.prototype.start=function(){var b,c,d,e;if(this.stopped=!1,this.boxes=function(){var a,c,d,e;for(d=this.element.querySelectorAll("."+this.config.boxClass),e=[],a=0,c=d.length;c>a;a++)b=d[a],e.push(b);return e}.call(this),this.all=function(){var a,c,d,e;for(d=this.boxes,e=[],a=0,c=d.length;c>a;a++)b=d[a],e.push(b);return e}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(e=this.boxes,c=0,d=e.length;d>c;c++)b=e[c],this.applyStyle(b,!0);return this.disabled()||(this.util().addEvent(this.config.scrollContainer||window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live?new a(function(a){return function(b){var c,d,e,f,g;for(g=[],c=0,d=b.length;d>c;c++)f=b[c],g.push(function(){var a,b,c,d;for(c=f.addedNodes||[],d=[],a=0,b=c.length;b>a;a++)e=c[a],d.push(this.doSync(e));return d}.call(a));return g}}(this)).observe(document.body,{childList:!0,subtree:!0}):void 0},e.prototype.stop=function(){return this.stopped=!0,this.util().removeEvent(this.config.scrollContainer||window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval?clearInterval(this.interval):void 0},e.prototype.sync=function(b){return a.notSupported?this.doSync(this.element):void 0},e.prototype.doSync=function(a){var b,c,d,e,f;if(null==a&&(a=this.element),1===a.nodeType){for(a=a.parentNode||a,e=a.querySelectorAll("."+this.config.boxClass),f=[],c=0,d=e.length;d>c;c++)b=e[c],g.call(this.all,b)<0?(this.boxes.push(b),this.all.push(b),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(b,!0),f.push(this.scrolled=!0)):f.push(void 0);return f}},e.prototype.show=function(a){return this.applyStyle(a),a.className=a.className+" "+this.config.animateClass,null!=this.config.callback&&this.config.callback(a),this.util().emitEvent(a,this.wowEvent),this.util().addEvent(a,"animationend",this.resetAnimation),this.util().addEvent(a,"oanimationend",this.resetAnimation),this.util().addEvent(a,"webkitAnimationEnd",this.resetAnimation),this.util().addEvent(a,"MSAnimationEnd",this.resetAnimation),a},e.prototype.applyStyle=function(a,b){var c,d,e;return d=a.getAttribute("data-wow-duration"),c=a.getAttribute("data-wow-delay"),e=a.getAttribute("data-wow-iteration"),this.animate(function(f){return function(){return f.customStyle(a,b,d,c,e)}}(this))},e.prototype.animate=function(){return"requestAnimationFrame"in window?function(a){return window.requestAnimationFrame(a)}:function(a){return a()}}(),e.prototype.resetStyle=function(){var a,b,c,d,e;for(d=this.boxes,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.style.visibility="visible");return e},e.prototype.resetAnimation=function(a){var b;return a.type.toLowerCase().indexOf("animationend")>=0?(b=a.target||a.srcElement,b.className=b.className.replace(this.config.animateClass,"").trim()):void 0},e.prototype.customStyle=function(a,b,c,d,e){return b&&this.cacheAnimationName(a),a.style.visibility=b?"hidden":"visible",c&&this.vendorSet(a.style,{animationDuration:c}),d&&this.vendorSet(a.style,{animationDelay:d}),e&&this.vendorSet(a.style,{animationIterationCount:e}),this.vendorSet(a.style,{animationName:b?"none":this.cachedAnimationName(a)}),a},e.prototype.vendors=["moz","webkit"],e.prototype.vendorSet=function(a,b){var c,d,e,f;d=[];for(c in b)e=b[c],a[""+c]=e,d.push(function(){var b,d,g,h;for(g=this.vendors,h=[],b=0,d=g.length;d>b;b++)f=g[b],h.push(a[""+f+c.charAt(0).toUpperCase()+c.substr(1)]=e);return h}.call(this));return d},e.prototype.vendorCSS=function(a,b){var c,e,f,g,h,i;for(h=d(a),g=h.getPropertyCSSValue(b),f=this.vendors,c=0,e=f.length;e>c;c++)i=f[c],g=g||h.getPropertyCSSValue("-"+i+"-"+b);return g},e.prototype.animationName=function(a){var b;try{b=this.vendorCSS(a,"animation-name").cssText}catch(c){b=d(a).getPropertyValue("animation-name")}return"none"===b?"":b},e.prototype.cacheAnimationName=function(a){return this.animationNameCache.set(a,this.animationName(a))},e.prototype.cachedAnimationName=function(a){return this.animationNameCache.get(a)},e.prototype.scrollHandler=function(){return this.scrolled=!0},e.prototype.scrollCallback=function(){var a;return!this.scrolled||(this.scrolled=!1,this.boxes=function(){var b,c,d,e;for(d=this.boxes,e=[],b=0,c=d.length;c>b;b++)a=d[b],a&&(this.isVisible(a)?this.show(a):e.push(a));return e}.call(this),this.boxes.length||this.config.live)?void 0:this.stop()},e.prototype.offsetTop=function(a){for(var b;void 0===a.offsetTop;)a=a.parentNode;for(b=a.offsetTop;a=a.offsetParent;)b+=a.offsetTop;return b},e.prototype.isVisible=function(a){var b,c,d,e,f;return c=a.getAttribute("data-wow-offset")||this.config.offset,f=this.config.scrollContainer&&this.config.scrollContainer.scrollTop||window.pageYOffset,e=f+Math.min(this.element.clientHeight,this.util().innerHeight())-c,d=this.offsetTop(a),b=d+a.clientHeight,e>=d&&b>=f},e.prototype.util=function(){return null!=this._util?this._util:this._util=new b},e.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},e}()}).call(this);